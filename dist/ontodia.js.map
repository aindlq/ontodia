{"version":3,"sources":["webpack://Ontodia/webpack/universalModuleDefinition","webpack://Ontodia/webpack/bootstrap","webpack://Ontodia/./src/index.ts","webpack://Ontodia/./node_modules/tslib/tslib.es6.js","webpack://Ontodia/./styles/main.scss?50c8","webpack://Ontodia/./styles/main.scss","webpack://Ontodia/./node_modules/css-loader/lib/url/escape.js","webpack://Ontodia/./node_modules/css-loader/lib/css-base.js","webpack://Ontodia/./images/font-awesome/exclamation-triangle.svg","webpack://Ontodia/./images/expand-link.png","webpack://Ontodia/./images/add-to-filter.png","webpack://Ontodia/./images/direction-in.png","webpack://Ontodia/./images/direction-out.png","webpack://Ontodia/./images/font-awesome/times-circle-regular.svg","webpack://Ontodia/./images/connections.svg","webpack://Ontodia/./images/close-connections.svg","webpack://Ontodia/./images/link.svg","webpack://Ontodia/./images/delete.svg","webpack://Ontodia/./images/expand-properties.png","webpack://Ontodia/./images/collapse-properties.png","webpack://Ontodia/./images/font-awesome/undo-solid.svg","webpack://Ontodia/./images/font-awesome/plug.svg","webpack://Ontodia/./images/font-awesome/edit.svg","webpack://Ontodia/./images/font-awesome/trash-alt.svg","webpack://Ontodia/./images/font-awesome/pen-square-solid.svg","webpack://Ontodia/./images/font-awesome/minus-square-regular.svg","webpack://Ontodia/./images/font-awesome/plus-square-regular.svg","webpack://Ontodia/./images/arrow-left.png","webpack://Ontodia/./images/arrow-left1.png","webpack://Ontodia/./images/arrow-right.png","webpack://Ontodia/./images/arrow-right1.png","webpack://Ontodia/./images/resizable-column-handle.png","webpack://Ontodia/./images/arrow-top.png","webpack://Ontodia/./images/arrow-top1.png","webpack://Ontodia/./images/arrow-bottom.png","webpack://Ontodia/./images/arrow-bottom1.png","webpack://Ontodia/./images/left-panel.svg","webpack://Ontodia/./images/right-panel.svg","webpack://Ontodia/./images/left-panel-active.svg","webpack://Ontodia/./images/right-panel-active.svg","webpack://Ontodia/./node_modules/style-loader/lib/addStyles.js","webpack://Ontodia/./node_modules/style-loader/lib/urls.js","webpack://Ontodia/external \"whatwg-fetch\"","webpack://Ontodia/./src/emptyModule.ts","webpack://Ontodia/./src/ontodia/viewUtils/polyfills.ts","webpack://Ontodia/./src/ontodia/customization/templates/index.ts","webpack://Ontodia/./src/ontodia/customization/templates/default.tsx","webpack://Ontodia/external \"react\"","webpack://Ontodia/./src/ontodia/customization/templates/utils.ts","webpack://Ontodia/./src/ontodia/data/model.ts","webpack://Ontodia/./src/ontodia/data/utils.ts","webpack://Ontodia/./src/ontodia/customization/templates/group.tsx","webpack://Ontodia/./src/ontodia/diagram/embeddedLayer.tsx","webpack://Ontodia/./src/ontodia/diagram/paper.tsx","webpack://Ontodia/./src/ontodia/diagram/elements.ts","webpack://Ontodia/./src/ontodia/data/schema.ts","webpack://Ontodia/./src/ontodia/viewUtils/events.ts","webpack://Ontodia/./src/ontodia/viewUtils/collections.ts","webpack://Ontodia/./src/ontodia/diagram/geometry.ts","webpack://Ontodia/./src/ontodia/diagram/elementLayer.tsx","webpack://Ontodia/external \"react-dom\"","webpack://Ontodia/external \"d3-color\"","webpack://Ontodia/./src/ontodia/viewUtils/async.ts","webpack://Ontodia/./src/ontodia/viewUtils/react.ts","webpack://Ontodia/./src/ontodia/viewUtils/keyedObserver.ts","webpack://Ontodia/./src/ontodia/diagram/commands.ts","webpack://Ontodia/./src/ontodia/diagram/history.ts","webpack://Ontodia/./src/ontodia/diagram/view.ts","webpack://Ontodia/external \"lodash\"","webpack://Ontodia/./src/ontodia/customization/defaultTypeStyles.ts","webpack://Ontodia/./images/icons/class.svg","webpack://Ontodia/./images/icons/objectProperty.svg","webpack://Ontodia/./images/icons/datatypeProperty.svg","webpack://Ontodia/./images/icons/person.svg","webpack://Ontodia/./images/icons/country.svg","webpack://Ontodia/./images/icons/organization.svg","webpack://Ontodia/./images/icons/location.svg","webpack://Ontodia/./images/icons/event.svg","webpack://Ontodia/./images/icons/object.svg","webpack://Ontodia/./src/ontodia/customization/defaultLinkStyles.ts","webpack://Ontodia/./src/ontodia/data/sparql/blankNodes.ts","webpack://Ontodia/./src/ontodia/data/sparql/sparqlModels.ts","webpack://Ontodia/./src/ontodia/diagram/linkRouter.ts","webpack://Ontodia/./src/ontodia/diagram/linkLayer.tsx","webpack://Ontodia/./src/ontodia/diagram/paperArea.tsx","webpack://Ontodia/./src/ontodia/viewUtils/toSvg.ts","webpack://Ontodia/./src/ontodia/viewUtils/htmlToSvg.ts","webpack://Ontodia/./src/ontodia/customization/templates/standard.tsx","webpack://Ontodia/./src/ontodia/editor/authoredEntity.tsx","webpack://Ontodia/./src/ontodia/workspace/workspaceContext.ts","webpack://Ontodia/./src/ontodia/editor/authoringState.ts","webpack://Ontodia/./src/ontodia/viewUtils/spinner.tsx","webpack://Ontodia/./src/ontodia/data/demo/provider.ts","webpack://Ontodia/./src/ontodia/data/rdf/rdfDataProvider.ts","webpack://Ontodia/./src/ontodia/data/rdf/rdfCacheableStore.ts","webpack://Ontodia/external \"rdf-ext\"","webpack://Ontodia/./src/ontodia/data/rdf/rdfLoader.ts","webpack://Ontodia/./src/ontodia/data/rdf/rdfCompositeParser.ts","webpack://Ontodia/./src/ontodia/data/sparql/sparqlDataProvider.ts","webpack://Ontodia/./src/ontodia/data/sparql/responseHandler.ts","webpack://Ontodia/./src/ontodia/data/sparql/sparqlDataProviderSettings.ts","webpack://Ontodia/./src/ontodia/data/sparql/turtle.ts","webpack://Ontodia/external \"n3\"","webpack://Ontodia/./src/ontodia/data/composite/composite.ts","webpack://Ontodia/./src/ontodia/data/composite/mergeUtils.ts","webpack://Ontodia/./src/ontodia/data/sparql/graphBuilder.ts","webpack://Ontodia/./src/ontodia/editor/serializedDiagram.ts","webpack://Ontodia/./src/ontodia/viewUtils/layout.ts","webpack://Ontodia/external \"webcola\"","webpack://Ontodia/./src/ontodia/data/sparql/sparqlGraphBuilder.ts","webpack://Ontodia/./src/ontodia/diagram/model.ts","webpack://Ontodia/./src/ontodia/diagram/graph.ts","webpack://Ontodia/./src/ontodia/editor/asyncModel.ts","webpack://Ontodia/./src/ontodia/editor/dataFetcher.ts","webpack://Ontodia/./src/ontodia/editor/editorController.tsx","webpack://Ontodia/./src/ontodia/widgets/dialog.tsx","webpack://Ontodia/./src/ontodia/workspace/draggableHandle.tsx","webpack://Ontodia/./src/ontodia/widgets/connectionsMenu.tsx","webpack://Ontodia/./src/ontodia/widgets/progressBar.tsx","webpack://Ontodia/./src/ontodia/widgets/listElementView.tsx","webpack://Ontodia/./src/ontodia/widgets/searchResults.tsx","webpack://Ontodia/./src/ontodia/forms/editEntityForm.tsx","webpack://Ontodia/./src/ontodia/forms/editElementTypeForm.tsx","webpack://Ontodia/./src/ontodia/forms/elementTypeSelector.tsx","webpack://Ontodia/./src/ontodia/widgets/instancesSearch.tsx","webpack://Ontodia/./src/ontodia/forms/linkTypeSelector.tsx","webpack://Ontodia/./src/ontodia/forms/editLinkForm.tsx","webpack://Ontodia/./src/ontodia/forms/editLinkLabelForm.tsx","webpack://Ontodia/./src/ontodia/widgets/halo.tsx","webpack://Ontodia/./src/ontodia/widgets/haloLink.tsx","webpack://Ontodia/./src/ontodia/editor/linkStateWidget.tsx","webpack://Ontodia/./src/ontodia/editor/elementDecorator.tsx","webpack://Ontodia/./src/ontodia/editor/editLayer.tsx","webpack://Ontodia/./src/ontodia/editor/validation.ts","webpack://Ontodia/./src/ontodia/workspace/toolbar.tsx","webpack://Ontodia/./src/ontodia/workspace/workspace.ts","webpack://Ontodia/external \"file-saverjs\"","webpack://Ontodia/./src/ontodia/widgets/navigator.tsx","webpack://Ontodia/./src/ontodia/workspace/workspaceMarkup.tsx","webpack://Ontodia/./src/ontodia/widgets/classTree/index.ts","webpack://Ontodia/./src/ontodia/widgets/classTree/classTree.tsx","webpack://Ontodia/./src/ontodia/widgets/classTree/treeModel.ts","webpack://Ontodia/./src/ontodia/widgets/classTree/leaf.tsx","webpack://Ontodia/./images/tree/expand-toggle.svg","webpack://Ontodia/./images/tree/collapse-toggle.svg","webpack://Ontodia/./images/tree/leaf-default.svg","webpack://Ontodia/./images/tree/leaf-folder.svg","webpack://Ontodia/./src/ontodia/widgets/linksToolbox.tsx","webpack://Ontodia/./src/ontodia/workspace/layout/layout.tsx","webpack://Ontodia/./src/ontodia/workspace/accordion.tsx","webpack://Ontodia/./src/ontodia/workspace/accordionItem.tsx","webpack://Ontodia/./images/ontodia-logo.svg","webpack://Ontodia/./src/internalApi.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,mBAAO,CAAC,CAAqB;AAC7B,mBAAO,CAAC,EAAc;AACtB,mBAAO,CAAC,EAAkB;AAC1B,mBAAO,CAAC,EAA+B;AACvC,qBAAqB,mBAAO,CAAC,EAAmC;AAChE,qBAAqB,mBAAO,CAAC,EAAsB;AACnD,qBAAqB,mBAAO,CAAC,EAA8B;AAC3D,qBAAqB,mBAAO,CAAC,EAAoC;AACjE,qBAAqB,mBAAO,CAAC,EAA0C;AACvE,qBAAqB,mBAAO,CAAC,GAAoC;AACjE,qBAAqB,mBAAO,CAAC,EAAkD;AAC/E,qBAAqB,mBAAO,CAAC,GAAoC;AACjE,qBAAqB,mBAAO,CAAC,GAA0C;AACvE,eAAe,mBAAO,CAAC,EAAuB;AAC9C;AACA,iBAAiB,mBAAO,CAAC,EAA4B;AACrD;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,EAA4B;AACrD;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,EAAiC;AAC/D;AACA,qBAAqB,mBAAO,CAAC,EAA4B;AACzD,qBAAqB,mBAAO,CAAC,EAA2B;AACxD,cAAc,mBAAO,CAAC,GAAyB;AAC/C;AACA,qBAAqB,mBAAO,CAAC,EAAwB;AACrD,kBAAkB,mBAAO,CAAC,EAA6B;AACvD;AACA,qBAAqB,mBAAO,CAAC,GAA6B;AAC1D,uBAAuB,mBAAO,CAAC,EAAiC;AAChE;AACA,qBAAqB,mBAAO,CAAC,EAAiC;AAC9D,yBAAyB,mBAAO,CAAC,GAAmC;AACpE;AACA,mBAAmB,mBAAO,CAAC,GAA6B;AACxD;AACA,0BAA0B,mBAAO,CAAC,GAAoC;AACtE;AACA;AACA;AACA,eAAe,mBAAO,CAAC,GAA4B;AACnD;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,EAA2B;AACjD;AACA,qBAAqB,mBAAO,CAAC,EAA4B;AACzD,gBAAgB,mBAAO,CAAC,GAA6B;AACrD;AACA,kBAAkB,mBAAO,CAAC,GAA+B;AACzD;AACA;AACA,yBAAyB,mBAAO,CAAC,EAAsC;AACvE;AACA,wBAAwB,mBAAO,CAAC,GAAqC;AACrE;AACA,qBAAqB,mBAAO,CAAC,GAAmC;AAChE,kBAAkB,mBAAO,CAAC,GAAe;AACzC;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;;AAEO;AACP;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEO;AACP;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;;AAEO;AACP,mCAAmC,oCAAoC;AACvE;;AAEO;AACP;AACA;;AAEO;AACP;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;;AAEO;AACP,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEO;AACP,4BAA4B,sBAAsB;AAClD;AACA;AACA;;AAEO;AACP,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA,iBAAiB,sFAAsF,aAAa,EAAE;AACtH,sBAAsB,gCAAgC,qCAAqC,0CAA0C,EAAE,EAAE,GAAG;AAC5I,2BAA2B,MAAM,eAAe,EAAE,YAAY,oBAAoB,EAAE;AACpF,sBAAsB,oGAAoG;AAC1H,6BAA6B,uBAAuB;AACpD,4BAA4B,wBAAwB;AACpD,2BAA2B,yDAAyD;AACpF;;AAEO;AACP;AACA,iBAAiB,4CAA4C,SAAS,EAAE,qDAAqD,aAAa,EAAE;AAC5I,yBAAyB,6BAA6B,oBAAoB,gDAAgD,gBAAgB,EAAE,KAAK;AACjJ;;AAEO;AACP;AACA;AACA,2GAA2G,sFAAsF,aAAa,EAAE;AAChN,sBAAsB,8BAA8B,gDAAgD,uDAAuD,EAAE,EAAE,GAAG;AAClK,4CAA4C,sCAAsC,UAAU,oBAAoB,EAAE,EAAE,UAAU;AAC9H;;AAEO;AACP,gCAAgC,uCAAuC,aAAa,EAAE,EAAE,OAAO,kBAAkB;AACjH;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,4CAA4C;AAC5C;;;;;;;;AClMA,cAAc,mBAAO,CAAC,CAA6F;;AAEnH,4CAA4C,QAAS;;AAErD;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,EAAgD;;AAErE;;AAEA,GAAG,KAAU,EAAE,E;;;;;;ACnBf,aAAa,mBAAO,CAAC,CAA8C;AACnE,2BAA2B,mBAAO,CAAC,CAA4C;AAC/E;;;AAGA;AACA,cAAc,QAAS,4BAA4B,6CAA6C,6BAA6B,oEAAoE,wCAAwC,EAAE,iEAAiE,iCAAiC,EAAE,yCAAyC,QAAQ,8BAA8B,EAAE,UAAU,gCAAgC,EAAE,EAAE,uCAAuC,mBAAmB,kBAAkB,EAAE,qBAAqB,gBAAgB,EAAE,oBAAoB,0BAA0B,oBAAoB,uBAAuB,qBAAqB,EAAE,kBAAkB,0BAA0B,sBAAsB,qBAAqB,oBAAoB,qBAAqB,4BAA4B,uBAAuB,wBAAwB,2BAA2B,+BAA+B,oBAAoB,sBAAsB,2BAA2B,kCAAkC,yBAAyB,sCAAsC,EAAE,4BAA4B,0BAA0B,mBAAmB,EAAE,0BAA0B,2BAA2B,uBAAuB,gBAAgB,EAAE,gCAAgC,gCAAgC,EAAE,iCAAiC,gCAAgC,4BAA4B,EAAE,uCAAuC,gCAAgC,4BAA4B,EAAE,8JAA8J,gCAAgC,EAAE,0BAA0B,iBAAiB,8BAA8B,0BAA0B,EAAE,yFAAyF,gCAAgC,EAAE,4DAA4D,4BAA4B,EAAE,iCAAiC,4BAA4B,EAAE,8LAA8L,gCAAgC,EAAE,0BAA0B,8BAA8B,0BAA0B,gBAAgB,qBAAqB,EAAE,gCAAgC,0BAA0B,EAAE,yBAAyB,8BAA8B,0BAA0B,gBAAgB,qBAAqB,EAAE,+BAA+B,0BAA0B,EAAE,wBAAwB,uBAAuB,0BAA0B,2BAA2B,EAAE,gFAAgF,yBAAyB,kBAAkB,EAAE,yLAAyL,iBAAiB,EAAE,qOAAqO,wBAAwB,EAAE,mDAAmD,qBAAqB,EAAE,0CAA0C,sBAAsB,uBAAuB,wBAAwB,EAAE,0CAA0C,sBAAsB,uBAAuB,uBAAuB,EAAE,2BAA2B,mBAAmB,gBAAgB,iBAAiB,cAAc,sBAAsB,oBAAoB,4BAA4B,gBAAgB,qBAAqB,2BAA2B,8CAA8C,EAAE,iCAAiC,4BAA4B,iBAAiB,EAAE,oCAAoC,6BAA6B,0BAA0B,mBAAmB,EAAE,0BAA0B,uBAAuB,mBAAmB,8BAA8B,EAAE,gDAAgD,0BAA0B,yBAAyB,iBAAiB,kBAAkB,kBAAkB,uBAAuB,EAAE,4DAA4D,iCAAiC,oCAAoC,EAAE,8BAA8B,wBAAwB,cAAc,2BAA2B,uBAAuB,iBAAiB,wBAAwB,EAAE,wDAAwD,gCAAgC,mCAAmC,iBAAiB,wBAAwB,EAAE,yBAAyB,cAAc,eAAe,EAAE,yCAAyC,qBAAqB,EAAE,8BAA8B,uBAAuB,mBAAmB,uBAAuB,wBAAwB,2BAA2B,2BAA2B,EAAE,oBAAoB,0BAA0B,oBAAoB,oBAAoB,qBAAqB,mBAAmB,iBAAiB,uBAAuB,wBAAwB,2BAA2B,8BAA8B,qBAAqB,wBAAwB,EAAE,gCAAgC,iBAAiB,kBAAkB,EAAE,4DAA4D,2BAA2B,iBAAiB,+DAA+D,oBAAoB,4BAA4B,EAAE,sEAAsE,6BAA6B,EAAE,wGAAwG,wBAAwB,EAAE,yCAAyC,4BAA4B,iBAAiB,EAAE,yBAAyB,uBAAuB,2BAA2B,0BAA0B,wBAAwB,eAAe,EAAE,6CAA6C,sCAAsC,EAAE,2BAA2B,uBAAuB,EAAE,qDAAqD,sBAAsB,EAAE,iCAAiC,eAAe,oBAAoB,EAAE,0CAA0C,iBAAiB,EAAE,wCAAwC,oBAAoB,EAAE,gDAAgD,kBAAkB,EAAE,qDAAqD,iBAAiB,EAAE,4BAA4B,iBAAiB,EAAE,yBAAyB,eAAe,aAAa,kBAAkB,uBAAuB,oBAAoB,qBAAqB,EAAE,+BAA+B,iBAAiB,uBAAuB,EAAE,kCAAkC,yBAAyB,cAAc,aAAa,EAAE,oCAAoC,6BAA6B,gBAAgB,uBAAuB,sBAAsB,yBAAyB,gBAAgB,kBAAkB,sBAAsB,mBAAmB,+BAA+B,EAAE,4CAA4C,qBAAqB,EAAE,0CAA0C,uBAAuB,EAAE,oBAAoB,uBAAuB,EAAE,iCAAiC,iBAAiB,6BAA6B,EAAE,8DAA8D,2CAA2C,EAAE,mHAAmH,qBAAqB,eAAe,EAAE,uDAAuD,yCAAyC,EAAE,6BAA6B,YAAY,aAAa,WAAW,cAAc,iBAAiB,uBAAuB,kBAAkB,wBAAwB,4BAA4B,yCAAyC,gBAAgB,EAAE,0CAA0C,yBAAyB,oBAAoB,kBAAkB,wBAAwB,iBAAiB,EAAE,+CAA+C,+BAA+B,mBAAO,CAAC,CAAiD,QAAQ,iBAAiB,gBAAgB,EAAE,2CAA2C,sBAAsB,sBAAsB,EAAE,4CAA4C,mBAAmB,oBAAoB,EAAE,kDAAkD,iCAAiC,EAAE,+CAA+C,uBAAuB,EAAE,yDAAyD,uBAAuB,EAAE,oDAAoD,uBAAuB,wBAAwB,kBAAkB,wBAAwB,cAAc,yCAAyC,uBAAuB,EAAE,8BAA8B,iBAAiB,EAAE,6CAA6C,oBAAoB,sBAAsB,0BAA0B,8BAA8B,kBAAkB,0BAA0B,EAAE,0CAA0C,mBAAmB,+BAA+B,0BAA0B,6BAA6B,4BAA4B,EAAE,yBAAyB,eAAe,kBAAkB,2BAA2B,EAAE,iCAAiC,qBAAqB,4BAA4B,EAAE,uCAAuC,wBAAwB,yBAAyB,EAAE,yCAAyC,qBAAqB,sBAAsB,EAAE,+BAA+B,oCAAoC,EAAE,kCAAkC,yBAAyB,2DAA2D,EAAE,yBAAyB,kBAAkB,EAAE,8BAA8B,oBAAoB,0BAA0B,0BAA0B,wBAAwB,EAAE,oCAAoC,uBAAuB,EAAE,+BAA+B,oBAAoB,0BAA0B,4BAA4B,sBAAsB,mBAAmB,wBAAwB,gCAAgC,EAAE,uCAAuC,8BAA8B,8BAA8B,wBAAwB,EAAE,2CAA2C,kCAAkC,8BAA8B,EAAE,yCAAyC,mBAAmB,EAAE,+BAA+B,qBAAqB,mBAAmB,EAAE,gCAAgC,uBAAuB,mBAAmB,EAAE,2CAA2C,wBAAwB,EAAE,gCAAgC,uBAAuB,EAAE,mCAAmC,wBAAwB,EAAE,oCAAoC,4BAA4B,kBAAkB,mBAAmB,EAAE,iCAAiC,4BAA4B,kBAAkB,mBAAmB,kBAAkB,EAAE,qDAAqD,8BAA8B,wBAAwB,EAAE,sCAAsC,qBAAqB,mBAAmB,EAAE,iCAAiC,uBAAuB,EAAE,4CAA4C,qBAAqB,EAAE,+BAA+B,iBAAiB,kBAAkB,2BAA2B,EAAE,4CAA4C,oBAAoB,EAAE,mGAAmG,qBAAqB,iBAAiB,EAAE,kDAAkD,sBAAsB,qBAAqB,gBAAgB,mBAAmB,yBAAyB,EAAE,0DAA0D,mBAAmB,EAAE,kDAAkD,qBAAqB,EAAE,4CAA4C,kBAAkB,wBAAwB,qBAAqB,4BAA4B,iBAAiB,qBAAqB,iBAAiB,EAAE,4CAA4C,uBAAuB,eAAe,eAAe,sBAAsB,sBAAsB,uBAAuB,uBAAuB,EAAE,2CAA2C,kBAAkB,kBAAkB,wBAAwB,mBAAmB,EAAE,yDAAyD,mBAAmB,sBAAsB,EAAE,0CAA0C,iBAAiB,uBAAuB,qBAAqB,kCAAkC,iBAAiB,cAAc,EAAE,2BAA2B,kBAAkB,wBAAwB,EAAE,iDAAiD,gBAAgB,uBAAuB,uBAAuB,mBAAmB,uBAAuB,EAAE,2EAA2E,gBAAgB,iBAAiB,uBAAuB,uBAAuB,kBAAkB,mBAAmB,wBAAwB,4BAA4B,EAAE,gDAAgD,2BAA2B,iBAAiB,6CAA6C,iCAAiC,uBAAuB,uBAAuB,kBAAkB,mBAAmB,wBAAwB,4BAA4B,uBAAuB,EAAE,+CAA+C,kBAAkB,sBAAsB,sBAAsB,oBAAoB,EAAE,qDAAqD,gCAAgC,EAAE,yBAAyB,kBAAkB,qBAAqB,uBAAuB,wBAAwB,uBAAuB,wBAAwB,EAAE,qCAAqC,mBAAmB,uBAAuB,8BAA8B,0BAA0B,8BAA8B,EAAE,gCAAgC,qBAAqB,wBAAwB,EAAE,0CAA0C,mBAAmB,uCAAuC,mBAAO,CAAC,CAA2B,QAAQ,kBAAkB,mBAAmB,mBAAmB,wBAAwB,sBAAsB,6BAA6B,EAAE,kDAAkD,mBAAmB,EAAE,wCAAwC,uCAAuC,mBAAO,CAAC,CAA6B,QAAQ,iCAAiC,kBAAkB,mBAAmB,mBAAmB,wBAAwB,EAAE,gDAAgD,mBAAmB,EAAE,+BAA+B,gCAAgC,EAAE,mCAAmC,0CAA0C,qBAAqB,8BAA8B,kBAAkB,wBAAwB,EAAE,iDAAiD,+BAA+B,mBAAO,CAAC,CAA4B,sBAAsB,mBAAmB,gBAAgB,iBAAiB,uBAAuB,6BAA6B,iBAAiB,EAAE,kDAAkD,+BAA+B,mBAAO,CAAC,EAA6B,sBAAsB,mBAAmB,gBAAgB,iBAAiB,wBAAwB,6BAA6B,iBAAiB,EAAE,mDAAmD,uBAAuB,gBAAgB,uBAAuB,uBAAuB,mBAAmB,EAAE,8CAA8C,qBAAqB,wBAAwB,EAAE,6CAA6C,iBAAiB,kBAAkB,uBAAuB,kBAAkB,2BAA2B,qBAAqB,EAAE,yDAAyD,wBAAwB,uBAAuB,kBAAkB,EAAE,+DAA+D,wBAAwB,EAAE,0EAA0E,qBAAqB,EAAE,0DAA0D,iBAAiB,wBAAwB,kBAAkB,mCAAmC,EAAE,uEAAuE,iBAAiB,gBAAgB,qBAAqB,sBAAsB,kBAAkB,wBAAwB,mBAAmB,EAAE,0EAA0E,gBAAgB,iBAAiB,EAAE,kFAAkF,iBAAiB,qBAAqB,wBAAwB,EAAE,0DAA0D,2BAA2B,cAAc,iBAAiB,uBAAuB,uBAAuB,iBAAiB,uBAAuB,EAAE,qCAAqC,mBAAmB,oBAAoB,0BAA0B,EAAE,2CAA2C,iCAAiC,EAAE,qBAAqB,qBAAqB,2BAA2B,sDAAsD,uBAAuB,EAAE,8BAA8B,wBAAwB,yBAAyB,iBAAiB,iBAAiB,wBAAwB,wBAAwB,yBAAyB,yBAAyB,EAAE,mCAAmC,6CAA6C,mBAAO,CAAC,EAAiD,QAAQ,+BAA+B,qBAAqB,sBAAsB,qBAAqB,oBAAoB,iBAAiB,yBAAyB,iBAAiB,mBAAmB,mBAAmB,kBAAkB,mBAAmB,uBAAuB,EAAE,2CAA2C,mBAAmB,EAAE,0CAA0C,uBAAuB,cAAc,aAAa,aAAa,cAAc,wBAAwB,gCAAgC,0EAA0E,wBAAwB,EAAE,kDAAkD,oBAAoB,yBAAyB,oBAAoB,eAAe,eAAe,gBAAgB,0BAA0B,gCAAgC,4EAA4E,EAAE,gDAAgD,2EAA2E,EAAE,mEAAmE,uBAAuB,eAAe,4BAA4B,EAAE,+EAA+E,mBAAmB,EAAE,oCAAoC,cAAc,gBAAgB,gBAAgB,sBAAsB,EAAE,mCAAmC,WAAW,aAAa,eAAe,iBAAiB,sBAAsB,EAAE,wBAAwB,iBAAiB,kBAAkB,2BAA2B,EAAE,8BAA8B,qBAAqB,oBAAoB,qBAAqB,oBAAoB,6BAA6B,yBAAyB,EAAE,kCAAkC,iCAAiC,oBAAoB,wBAAwB,qBAAqB,EAAE,sCAAsC,wBAAwB,EAAE,kCAAkC,qBAAqB,0BAA0B,EAAE,0CAA0C,mBAAmB,oBAAoB,6BAA6B,EAAE,gCAAgC,qBAAqB,yBAAyB,EAAE,qCAAqC,mBAAmB,yBAAyB,eAAe,iBAAiB,uBAAuB,EAAE,sCAAsC,yBAAyB,EAAE,gDAAgD,mBAAmB,sBAAsB,0BAA0B,yBAAyB,EAAE,mCAAmC,oBAAoB,uBAAuB,yBAAyB,EAAE,wCAAwC,kBAAkB,4BAA4B,sBAAsB,yBAAyB,EAAE,2FAA2F,sBAAsB,8BAA8B,2BAA2B,iBAAiB,uBAAuB,qBAAqB,EAAE,iDAAiD,mBAAmB,EAAE,gDAAgD,oBAAoB,EAAE,kCAAkC,yBAAyB,gBAAgB,cAAc,eAAe,EAAE,qCAAqC,yBAAyB,2BAA2B,EAAE,uCAAuC,iBAAiB,yBAAyB,gBAAgB,cAAc,EAAE,mBAAmB,uBAAuB,yBAAyB,iCAAiC,uBAAuB,wCAAwC,EAAE,6BAA6B,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,eAAe,wBAAwB,mBAAmB,EAAE,qCAAqC,mBAAmB,EAAE,yCAAyC,4BAA4B,qBAAqB,EAAE,qCAAqC,yCAAyC,mBAAO,CAAC,EAA2B,QAAQ,EAAE,uCAAuC,yCAAyC,mBAAO,CAAC,EAAiC,QAAQ,EAAE,0BAA0B,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,eAAe,wBAAwB,kBAAkB,uCAAuC,mBAAO,CAAC,EAAoB,QAAQ,EAAE,kCAAkC,mBAAmB,EAAE,sCAAsC,4BAA4B,qBAAqB,EAAE,2BAA2B,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,iBAAiB,mBAAmB,uCAAuC,mBAAO,CAAC,EAAsB,QAAQ,EAAE,mCAAmC,mBAAmB,EAAE,uCAAuC,4BAA4B,qBAAqB,EAAE,2BAA2B,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,oBAAoB,gBAAgB,yBAAyB,EAAE,mCAAmC,mBAAmB,EAAE,uCAAuC,4BAA4B,qBAAqB,EAAE,mCAAmC,yCAAyC,mBAAO,CAAC,EAAiC,QAAQ,EAAE,qCAAqC,yCAAyC,mBAAO,CAAC,EAAmC,QAAQ,EAAE,kCAAkC,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,oBAAoB,mBAAmB,uCAAuC,mBAAO,CAAC,CAA6B,QAAQ,EAAE,0CAA0C,mBAAmB,EAAE,8CAA8C,4BAA4B,qBAAqB,EAAE,2BAA2B,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,iBAAiB,gBAAgB,yBAAyB,uCAAuC,mBAAO,CAAC,EAAuC,QAAQ,EAAE,mCAAmC,mBAAmB,EAAE,uCAAuC,4BAA4B,qBAAqB,EAAE,yCAAyC,yBAAyB,oCAAoC,+BAA+B,mCAAmC,kCAAkC,qBAAqB,sBAAsB,oBAAoB,iBAAiB,2BAA2B,kBAAkB,mBAAmB,mBAAmB,+BAA+B,oBAAoB,kBAAkB,uCAAuC,mBAAO,CAAC,EAAiC,QAAQ,EAAE,iDAAiD,mBAAmB,EAAE,qDAAqD,4BAA4B,qBAAqB,EAAE,iDAAiD,yBAAyB,kBAAkB,mBAAmB,oBAAoB,kBAAkB,EAAE,gCAAgC,4BAA4B,mBAAmB,oBAAoB,eAAe,uBAAuB,iBAAiB,kBAAkB,6BAA6B,EAAE,sCAAsC,iBAAiB,EAAE,0CAA0C,0BAA0B,mBAAmB,EAAE,8BAA8B,2BAA2B,6BAA6B,iCAAiC,yBAAyB,wBAAwB,iBAAiB,gBAAgB,qCAAqC,mBAAO,CAAC,EAAiC,QAAQ,EAAE,gCAAgC,2BAA2B,6BAA6B,iCAAiC,yBAAyB,wBAAwB,iBAAiB,gBAAgB,qCAAqC,mBAAO,CAAC,EAAsC,QAAQ,EAAE,iCAAiC,uBAAuB,EAAE,2CAA2C,2CAA2C,mBAAO,CAAC,EAA6C,kBAAkB,2BAA2B,mBAAmB,oBAAoB,eAAe,uBAAuB,qBAAqB,kBAAkB,iBAAiB,6BAA6B,EAAE,iDAAiD,iBAAiB,EAAE,+BAA+B,eAAe,kBAAkB,2BAA2B,EAAE,yCAAyC,qBAAqB,4BAA4B,EAAE,2CAA2C,yBAAyB,0BAA0B,EAAE,mDAAmD,yBAAyB,EAAE,0CAA0C,qBAAqB,yBAAyB,kBAAkB,EAAE,gDAAgD,+BAA+B,0BAA0B,6BAA6B,4BAA4B,EAAE,kDAAkD,+BAA+B,0BAA0B,6BAA6B,4BAA4B,EAAE,oDAAoD,+BAA+B,0BAA0B,6BAA6B,4BAA4B,EAAE,+CAA+C,kBAAkB,mBAAmB,EAAE,iDAAiD,mBAAmB,6BAA6B,EAAE,8CAA8C,qBAAqB,EAAE,qCAAqC,gCAAgC,oCAAoC,EAAE,wCAAwC,sBAAsB,wBAAwB,4BAA4B,oBAAoB,EAAE,sGAAsG,gEAAgE,yBAAyB,EAAE,yCAAyC,2BAA2B,EAAE,0CAA0C,kBAAkB,EAAE,yBAAyB,eAAe,kBAAkB,2BAA2B,qBAAqB,EAAE,kCAAkC,oBAAoB,EAAE,wCAAwC,oBAAoB,0BAA0B,EAAE,sCAAsC,yBAAyB,+BAA+B,iBAAiB,sBAAsB,sBAAsB,gBAAgB,EAAE,qCAAqC,sBAAsB,EAAE,+BAA+B,oCAAoC,iBAAiB,oBAAoB,6BAA6B,EAAE,wCAAwC,mBAAmB,2BAA2B,oBAAoB,4BAA4B,qBAAqB,EAAE,wCAAwC,sBAAsB,EAAE,6CAA6C,6BAA6B,wBAAwB,2BAA2B,0BAA0B,qBAAqB,EAAE,+DAA+D,sBAAsB,oBAAoB,uBAAuB,EAAE,sEAAsE,uBAAuB,EAAE,wCAAwC,uBAAuB,2BAA2B,EAAE,0BAA0B,oBAAoB,EAAE,6BAA6B,sBAAsB,wBAAwB,sBAAsB,uBAAuB,mBAAmB,uBAAuB,EAAE,mCAAmC,kBAAkB,sBAAsB,wBAAwB,sBAAsB,EAAE,gCAAgC,oBAAoB,iBAAiB,oBAAoB,EAAE,uCAAuC,gBAAgB,oBAAoB,sBAAsB,uBAAuB,EAAE,qDAAqD,0BAA0B,EAAE,mCAAmC,kBAAkB,iBAAiB,qCAAqC,mBAAO,CAAC,CAA6B,QAAQ,+BAA+B,gBAAgB,iBAAiB,gBAAgB,oBAAoB,iBAAiB,kCAAkC,EAAE,wDAAwD,iBAAiB,kCAAkC,EAAE,oDAAoD,+FAA+F,EAAE,oDAAoD,sFAAsF,EAAE,gCAAgC,uBAAuB,mBAAmB,wBAAwB,8BAA8B,uBAAuB,sBAAsB,iBAAiB,iBAAiB,sBAAsB,EAAE,0CAA0C,mBAAmB,sBAAsB,EAAE,uCAAuC,wBAAwB,iCAAiC,+CAA+C,sBAAsB,wBAAwB,wBAAwB,yBAAyB,gCAAgC,EAAE,6BAA6B,sBAAsB,EAAE,wBAAwB,mBAAmB,uBAAuB,iBAAiB,gBAAgB,qBAAqB,qBAAqB,2BAA2B,sDAAsD,wCAAwC,EAAE,iCAAiC,8BAA8B,EAAE,mCAAmC,kBAAkB,mBAAmB,EAAE,iCAAiC,+BAA+B,EAAE,2CAA2C,iBAAiB,EAAE,4CAA4C,iBAAiB,EAAE,gCAAgC,yBAAyB,8BAA8B,mBAAmB,oBAAoB,mBAAmB,mBAAmB,+BAA+B,EAAE,wCAAwC,mBAAmB,EAAE,6DAA6D,eAAe,gBAAgB,EAAE,8DAA8D,eAAe,gBAAgB,EAAE,qCAAqC,kBAAkB,mBAAmB,iCAAiC,mCAAmC,EAAE,kEAAkE,uCAAuC,mBAAO,CAAC,EAAiD,QAAQ,EAAE,mEAAmE,uCAAuC,mBAAO,CAAC,EAAgD,QAAQ,EAAE,6CAA6C,UAAU,kCAAkC,EAAE,QAAQ,+BAA+B,EAAE,EAAE,2BAA2B,mBAAmB,2BAA2B,kCAAkC,8BAA8B,2EAA2E,gCAAgC,qBAAqB,mDAAmD,EAAE,gCAAgC,kBAAkB,mBAAmB,sBAAsB,wBAAwB,kBAAkB,yBAAyB,iCAAiC,gCAAgC,4MAA4M,kCAAkC,iCAAiC,iEAAiE,EAAE,kEAAkE,iFAAiF,EAAE,kCAAkC,gCAAgC,EAAE,sCAAsC,+EAA+E,EAAE,6BAA6B,cAAc,eAAe,kBAAkB,EAAE,wBAAwB,eAAe,kBAAkB,iBAAiB,gBAAgB,EAAE,oCAAoC,qBAAqB,EAAE,kCAAkC,6BAA6B,EAAE,8FAA8F,0CAA0C,EAAE,6BAA6B,kBAAkB,uBAAuB,eAAe,EAAE,gHAAgH,qCAAqC,EAAE,uCAAuC,sCAAsC,EAAE,qDAAqD,4BAA4B,EAAE,yCAAyC,wCAAwC,EAAE,sDAAsD,8BAA8B,EAAE,qCAAqC,yBAAyB,iBAAiB,EAAE,8CAA8C,kBAAkB,qBAAqB,cAAc,kBAAkB,wBAAwB,EAAE,gDAAgD,mBAAmB,aAAa,oBAAoB,iBAAiB,wBAAwB,EAAE,yCAAyC,uBAAuB,6BAA6B,uFAAuF,0BAA0B,sBAAsB,mBAAmB,yBAAyB,eAAe,wBAAwB,kBAAkB,kBAAkB,uBAAuB,EAAE,mDAAmD,iCAAiC,qCAAqC,+BAA+B,sBAAsB,oBAAoB,2BAA2B,iBAAiB,kBAAkB,yBAAyB,0BAA0B,mBAAmB,oCAAoC,EAAE,iDAAiD,yBAAyB,EAAE,8CAA8C,iBAAiB,yBAAyB,EAAE,uDAAuD,yCAAyC,mBAAO,CAAC,EAA0B,QAAQ,EAAE,6DAA6D,yCAAyC,mBAAO,CAAC,EAA2B,QAAQ,EAAE,+CAA+C,kBAAkB,0BAA0B,EAAE,wDAAwD,yCAAyC,mBAAO,CAAC,EAA2B,QAAQ,EAAE,8DAA8D,yCAAyC,mBAAO,CAAC,EAA4B,QAAQ,EAAE,mFAAmF,gCAAgC,EAAE,oCAAoC,iBAAiB,oBAAoB,6BAA6B,uBAAuB,EAAE,mCAAmC,oBAAoB,oBAAoB,6BAA6B,EAAE,qCAAqC,yBAAyB,yBAAyB,qBAAqB,sBAAsB,0BAA0B,sBAAsB,0DAA0D,gCAAgC,6BAA6B,4BAA4B,wBAAwB,EAAE,8CAA8C,sCAAsC,6CAA6C,8CAA8C,sBAAsB,2BAA2B,iBAAiB,kBAAkB,yBAAyB,iCAAiC,8BAA8B,yBAAyB,EAAE,+EAA+E,wCAAwC,qCAAqC,oCAAoC,gCAAgC,EAAE,sEAAsE,oBAAoB,EAAE,0OAA0O,gBAAgB,gBAAgB,iBAAiB,YAAY,sBAAsB,EAAE,kPAAkP,iBAAiB,gBAAgB,WAAW,cAAc,uBAAuB,oBAAoB,EAAE,oCAAoC,kBAAkB,2BAA2B,uBAAuB,EAAE,4CAA4C,sCAAsC,mBAAO,CAAC,EAAuC,eAAe,iBAAiB,mBAAmB,yBAAyB,aAAa,oBAAoB,iBAAiB,+BAA+B,4BAA4B,uBAAuB,wBAAwB,EAAE,gDAAgD,uBAAuB,sBAAsB,mBAAmB,yBAAyB,eAAe,cAAc,wBAAwB,kBAAkB,iBAAiB,+BAA+B,4BAA4B,uBAAuB,EAAE,0DAA0D,iCAAiC,qCAAqC,+BAA+B,sBAAsB,oBAAoB,2BAA2B,iBAAiB,kBAAkB,yBAAyB,0BAA0B,mBAAmB,iCAAiC,8BAA8B,yBAAyB,EAAE,wDAAwD,4BAA4B,8BAA8B,EAAE,+FAA+F,gCAAgC,EAAE,iDAAiD,wBAAwB,EAAE,wFAAwF,kBAAkB,EAAE,oGAAoG,uCAAuC,mBAAO,CAAC,EAA0B,QAAQ,EAAE,0GAA0G,uCAAuC,mBAAO,CAAC,EAA2B,QAAQ,EAAE,kDAAkD,uBAAuB,EAAE,yFAAyF,iBAAiB,EAAE,qGAAqG,uCAAuC,mBAAO,CAAC,EAA2B,QAAQ,EAAE,2GAA2G,uCAAuC,mBAAO,CAAC,EAA4B,QAAQ,EAAE,gDAAgD,yBAAyB,EAAE,uFAAuF,mBAAmB,EAAE,mGAAmG,uCAAuC,mBAAO,CAAC,EAAyB,QAAQ,EAAE,yGAAyG,uCAAuC,mBAAO,CAAC,EAA0B,QAAQ,EAAE,mDAAmD,sBAAsB,EAAE,0FAA0F,gBAAgB,EAAE,sGAAsG,uCAAuC,mBAAO,CAAC,EAA4B,QAAQ,EAAE,4GAA4G,uCAAuC,mBAAO,CAAC,EAA6B,QAAQ,EAAE,0BAA0B,gBAAgB,oEAAoE,oBAAoB,yBAAyB,EAAE,yCAAyC,iBAAiB,oBAAoB,EAAE,iDAAiD,wBAAwB,EAAE,0DAA0D,+BAA+B,EAAE,8BAA8B,mBAAmB,EAAE,oCAAoC,6BAA6B,iCAAiC,gBAAgB,mBAAmB,iBAAiB,kBAAkB,gBAAgB,EAAE,yCAAyC,qCAAqC,mBAAO,CAAC,EAA0B,QAAQ,EAAE,0CAA0C,qCAAqC,mBAAO,CAAC,EAA2B,QAAQ,EAAE,qCAAqC,0BAA0B,EAAE,gDAAgD,qCAAqC,mBAAO,CAAC,EAAiC,QAAQ,EAAE,iDAAiD,qCAAqC,mBAAO,CAAC,EAAkC,QAAQ,EAAE,oCAAoC,gBAAgB,iBAAiB,gBAAgB,EAAE,4CAA4C,wBAAwB,EAAE,sFAAsF,mBAAmB,EAAE,sBAAsB,oCAAoC,EAAE,2CAA2C,sBAAsB,EAAE,oDAAoD,oBAAoB,uBAAuB,EAAE,uFAAuF,kBAAkB,EAAE,cAAc,kBAAkB,2BAA2B,iBAAiB,2BAA2B,yBAAyB,gBAAgB,oEAAoE,oBAAoB,yBAAyB,EAAE,qDAAqD,0BAA0B,EAAE,sBAAsB,oBAAoB,6BAA6B,qBAAqB,EAAE,yBAAyB,oBAAoB,iBAAiB,uBAAuB,6BAA6B,EAAE,0BAA0B,oBAAoB,iBAAiB,uBAAuB,eAAe,EAAE,4BAA4B,kCAAkC,gCAAgC,6BAA6B,4BAA4B,wBAAwB,EAAE,qCAAqC,mCAAmC,EAAE,mCAAmC,mCAAmC,EAAE,iBAAiB,sBAAsB,uBAAuB,uBAAuB,uBAAuB,0BAA0B,EAAE,qBAAqB,qBAAqB,gBAAgB,oBAAoB,2BAA2B,2BAA2B,EAAE,iBAAiB,gBAAgB,iCAAiC,gBAAgB,EAAE,yBAAyB,kBAAkB,uBAAuB,EAAE,6BAA6B,uBAAuB,EAAE,2DAA2D,wCAAwC,EAAE,8DAA8D,qBAAqB,gBAAgB,wBAAwB,wBAAwB,sBAAsB,EAAE,0CAA0C,yBAAyB,EAAE,kDAAkD,yBAAyB,EAAE,gMAAgM,uBAAuB,EAAE,6EAA6E,qBAAqB,iBAAiB,iBAAiB,uBAAuB,qBAAqB,kBAAkB,0BAA0B,qBAAqB,EAAE,8FAA8F,iCAAiC,sBAAsB,EAAE,2GAA2G,iBAAiB,qBAAqB,4BAA4B,aAAa,EAAE,uGAAuG,oBAAoB,wBAAwB,oBAAoB,EAAE,mEAAmE,oCAAoC,qCAAqC,4BAA4B,0BAA0B,sBAAsB,+BAA+B,qBAAqB,kBAAkB,2BAA2B,EAAE,2EAA2E,oBAAoB,qBAAqB,qBAAqB,4BAA4B,qBAAqB,wBAAwB,0BAA0B,EAAE,6CAA6C,gBAAgB,qBAAqB,kBAAkB,EAAE,wDAAwD,oBAAoB,qBAAqB,uBAAuB,mBAAmB,EAAE,iDAAiD,oBAAoB,gBAAgB,qBAAqB,wBAAwB,4BAA4B,EAAE,uDAAuD,mBAAmB,EAAE,iDAAiD,4BAA4B,EAAE,4DAA4D,oBAAoB,qBAAqB,uBAAuB,sBAAsB,uBAAuB,uBAAuB,EAAE,gEAAgE,wBAAwB,EAAE,qEAAqE,0BAA0B,eAAe,4BAA4B,qBAAqB,wBAAwB,EAAE,oEAAoE,0BAA0B,eAAe,4BAA4B,qBAAqB,wBAAwB,EAAE,2EAA2E,0BAA0B,eAAe,4BAA4B,qBAAqB,EAAE,kFAAkF,gBAAgB,qBAAqB,4BAA4B,yBAAyB,wBAAwB,EAAE,6BAA6B,qBAAqB,EAAE,mCAAmC,sBAAsB,EAAE,mCAAmC,wBAAwB,EAAE,6CAA6C,sBAAsB,EAAE,oDAAoD,yBAAyB,EAAE,gCAAgC,qBAAqB,qBAAqB,gBAAgB,EAAE,sCAAsC,yBAAyB,wBAAwB,EAAE,sCAAsC,uBAAuB,iCAAiC,6BAA6B,qBAAqB,0BAA0B,EAAE,iDAAiD,oBAAoB,0BAA0B,qCAAqC,uBAAuB,EAAE,8CAA8C,mBAAmB,mBAAmB,yBAAyB,EAAE,uCAAuC,sBAAsB,0BAA0B,uBAAuB,8BAA8B,EAAE,2CAA2C,sBAAsB,uBAAuB,qBAAqB,kBAAkB,mBAAmB,oBAAoB,8BAA8B,0BAA0B,EAAE,iDAAiD,uBAAuB,sBAAsB,EAAE,gDAAgD,uBAAuB,sBAAsB,EAAE,uCAAuC,+BAA+B,EAAE,6CAA6C,kBAAkB,iCAAiC,EAAE,sCAAsC,0BAA0B,uBAAuB,8BAA8B,sBAAsB,yBAAyB,kBAAkB,oBAAoB,EAAE,4CAA4C,eAAe,mBAAmB,uBAAuB,8BAA8B,EAAE,qCAAqC,kBAAkB,uBAAuB,oBAAoB,EAAE,yCAAyC,sBAAsB,wBAAwB,qBAAqB,EAAE,2CAA2C,sBAAsB,kBAAkB,uBAAuB,0BAA0B,8BAA8B,EAAE,6CAA6C,qBAAqB,EAAE,oCAAoC,oBAAoB,EAAE,4CAA4C,sBAAsB,wBAAwB,yBAAyB,yBAAyB,EAAE,iDAAiD,0BAA0B,EAAE,gDAAgD,4BAA4B,iBAAiB,8BAA8B,uBAAuB,0BAA0B,EAAE,mDAAmD,4BAA4B,iBAAiB,8BAA8B,uBAAuB,EAAE,kDAAkD,kBAAkB,uBAAuB,8BAA8B,2BAA2B,0BAA0B,EAAE,8CAA8C,4BAA4B,oBAAoB,EAAE,0CAA0C,yBAAyB,8BAA8B,sBAAsB,wBAAwB,EAAE,kDAAkD,kBAAkB,mBAAmB,EAAE,yCAAyC,oBAAoB,qCAAqC,EAAE,kDAAkD,qBAAqB,wBAAwB,EAAE;;AAE73sD;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA,qCAAqC,w7B;;;;;;ACArC,iCAAiC,gvB;;;;;;ACAjC,iCAAiC,grC;;;;;;ACAjC,iCAAiC,gwB;;;;;;ACAjC,iCAAiC,4rB;;;;;;ACAjC,qCAAqC,g8B;;;;;;ACArC,qCAAqC,omC;;;;;;ACArC,qCAAqC,goC;;;;;;ACArC,qCAAqC,gpD;;;;;;ACArC,qCAAqC,gjC;;;;;;ACArC,iCAAiC,4jB;;;;;;ACAjC,iCAAiC,wiB;;;;;;ACAjC,qCAAqC,g/B;;;;;;ACArC,qCAAqC,gjB;;;;;;ACArC,qCAAqC,wxB;;;;;;ACArC,qCAAqC,wyB;;;;;;ACArC,qCAAqC,wzB;;;;;;ACArC,qCAAqC,wtB;;;;;;ACArC,qCAAqC,g2B;;;;;;ACArC,iCAAiC,oW;;;;;;ACAjC,iCAAiC,oW;;;;;;ACAjC,iCAAiC,4W;;;;;;ACAjC,iCAAiC,gX;;;;;;ACAjC,iCAAiC,4H;;;;;;ACAjC,iCAAiC,gY;;;;;;ACAjC,iCAAiC,gX;;;;;;ACAjC,iCAAiC,gZ;;;;;;ACAjC,iCAAiC,wY;;;;;;ACAjC,qCAAqC,wgB;;;;;;ACArC,qCAAqC,4f;;;;;;ACArC,qCAAqC,wsB;;;;;;ACArC,qCAAqC,gsB;;;;;;ACArC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,EAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC5YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;ACxFA,iD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;;;;;;;;ACJa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,CAAC;;;;;;;;ACjIY;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,qBAAqB,mBAAO,CAAC,EAAW;AACxC,qBAAqB,mBAAO,CAAC,EAAS;AACtC,qBAAqB,mBAAO,CAAC,EAAY;AACzC,yDAAyD,kBAAkB;;;;;;;;ACN9D;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,wCAAwC;AACxG,wCAAwC,oBAAoB;AAC5D;AACA,wCAAwC,sDAAsD;AAC9F,4CAA4C,iEAAiE;AAC7G,4CAA4C,0DAA0D;AACtG,8CAA8C,mGAAmG;AACjJ,uCAAuC,0DAA0D;AACjG;AACA,4CAA4C;AAC5C;AACA;AACA,aAAa,0CAA0C;AACvD,wCAAwC,sEAAsE;AAC9G,4CAA4C,+EAA+E;AAC3H,gDAAgD,qBAAqB;AACrE,4CAA4C,qFAAqF;AACjI,gDAAgD,uEAAuE;AACvH;AACA,wCAAwC,qDAAqD,2BAA2B,EAAE;AAC1H,6CAA6C,wEAAwE;AACrH;AACA;AACA;AACA;AACA;AACA,+CAA+C,qEAAqE;AACpH;AACA,wEAAwE,qCAAqC,oHAAoH,SAAS,EAAE;AAC5O,oDAAoD,uFAAuF;AAC3I,gDAAgD,uHAAuH;AACvK,gDAAgD,oFAAoF;AACpI,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;ACrDA,iD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,EAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;;;;;;AC3Ba;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,EAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnGa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjDa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,sBAAsB,mBAAO,CAAC,EAA6B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mBAAmB;AAC/D,wCAAwC;AACxC;AACA;AACA,iBAAiB,EAAE;AACnB,4CAA4C,iDAAiD;AAC7F,gDAAgD,wCAAwC;AACxF,oDAAoD,eAAe;AACnE,gDAAgD,gEAAgE;AAChH,oDAAoD,wCAAwC;AAC5F,4CAA4C,sCAAsC,qBAAqB,EAAE;AACzG,iDAAiD,6CAA6C;AAC9F,8DAA8D,wCAAwC;AACtG;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC9Ba;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAS;AAC/B,kBAAkB,mBAAO,CAAC,EAAa;AACvC,iBAAiB,mBAAO,CAAC,EAAY;AACrC,qBAAqB,mBAAO,CAAC,EAAgB;AAC7C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,kBAAkB,mBAAO,CAAC,EAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gBAAgB;AAChF;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uFAAuF,eAAe,yBAAyB,EAAE;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qCAAqC;AACjE,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2BAA2B,uFAAuF,eAAe,yBAAyB,EAAE;AAC5J;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wDAAwD;AAC/E;AACA;AACA;AACA;AACA,yDAAyD,gCAAgC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6DAA6D;AACzG,gDAAgD,wGAAwG;AACxJ;AACA,qEAAqE;AACrE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC3La;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAO;AAC7B,iBAAiB,mBAAO,CAAC,EAAY;AACrC,qBAAqB,mBAAO,CAAC,EAAgB;AAC7C,kBAAkB,mBAAO,CAAC,EAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,qEAAqE;AACjH,uDAAuD,6CAA6C,sBAAsB,kCAAkC;AAC5J,8DAA8D,aAAa;AAC3E,4DAA4D,oDAAoD;AAChH;AACA,8DAA8D,sDAAsD;AACpH;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,6DAA6D,4DAA4D;AACzH,sCAAsC,4FAA4F;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpIa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,eAAe,mBAAO,CAAC,EAAgB;AACvC,eAAe,mBAAO,CAAC,EAAqB;AAC5C,iBAAiB,mBAAO,CAAC,EAAY;AACrC;AACA;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,aAAa,gDAAgD,sBAAsB;AAClL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB,EAAE;AAClD;AACA;AACA,KAAK;AACL;AACA,0BAA0B,mBAAmB,EAAE;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mCAAmC;AAC9E;AACA;AACA;AACA,0BAA0B,uBAAuB,EAAE;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mCAAmC;AAClF;AACA;AACA,0BAA0B,mBAAmB,EAAE;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mCAAmC;AAC9E;AACA;AACA,0BAA0B,uBAAuB,EAAE;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mCAAmC;AAClF;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA,0BAA0B,2BAA2B,EAAE;AACvD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,mCAAmC;AACtF;AACA;AACA,0BAA0B,wBAAwB,EAAE;AACpD;AACA;AACA,KAAK;AACL;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,sDAAsD,eAAe;AACrE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gDAAgD,eAAe;AAC/D;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,wCAAwC,gBAAgB;AACxD;AACA;AACA;AACA,uDAAuD,UAAU,mBAAmB;AACpF;AACA;AACA,uDAAuD,UAAU,mBAAmB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAqB,EAAE;AACjD;AACA;AACA,KAAK;AACL;AACA,0BAA0B,uBAAuB,EAAE;AACnD;AACA;AACA,KAAK;AACL;AACA,0BAA0B,uBAAuB,EAAE;AACnD;AACA;AACA,KAAK;AACL;AACA,0BAA0B,mBAAmB,EAAE;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mCAAmC;AAC9E;AACA;AACA,0BAA0B,0BAA0B,EAAE;AACtD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mCAAmC;AACrF;AACA;AACA,0BAA0B,yBAAyB,EAAE;AACrD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,mCAAmC;AACpF;AACA;AACA,0BAA0B,uBAAuB,EAAE;AACnD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mCAAmC;AAClF;AACA;AACA,0BAA0B,wBAAwB,EAAE;AACpD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC;AACnF;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA,0BAA0B,sBAAsB,EAAE;AAClD;AACA;AACA,KAAK;AACL;AACA,0BAA0B,wBAAwB,EAAE;AACpD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,+CAA+C;AAChG;AACA;AACA,0BAA0B,oBAAoB,EAAE;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AClaa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,EAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kEAAkE;AAC7F;AACA,wBAAwB,kEAAkE;AAC1F;AACA,CAAC,6DAA6D;AAC9D;AACA;AACA;AACA;AACA,CAAC,qFAAqF;;;;;;;;ACpBzE;AACb,8CAA8C,cAAc;AAC5D,oBAAoB,mBAAO,CAAC,EAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,yBAAyB;AAC9E;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,uCAAuC,EAAE;AAClF;AACA;AACA;AACA,yCAAyC,gCAAgC,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,6BAA6B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC9Ga;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8BAA8B,EAAE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wBAAwB,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iCAAiC,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,iCAAiC,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iCAAiC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA,sBAAsB,yBAAyB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iCAAiC,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,qBAAqB;AAClE;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gDAAgD,0DAA0D,EAAE;AAC5G;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtOa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iDAAiD;AAClD;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,CAAC,2CAA2C;AAC5C;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,0BAA0B;AAC1B,uCAAuC,+BAA+B;AACtE,wBAAwB,8BAA8B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,mDAAmD;AACzG;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA,sBAAsB;AACtB,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvLa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,kBAAkB,mBAAO,CAAC,EAAW;AACrC,iBAAiB,mBAAO,CAAC,EAAU;AACnC,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,sBAAsB,mBAAO,CAAC,EAA4B;AAC1D,iBAAiB,mBAAO,CAAC,EAAY;AACrC,aAAa,mBAAO,CAAC,EAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,aAAa,EAAE,EAAE;AACjB;AACA;AACA,gDAAgD,+BAA+B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2CAA2C;AAC5E,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sEAAsE;AACjH,yEAAyE,wHAAwH;AACjM;AACA;AACA,oDAAoD,wBAAwB;AAC5E;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,aAAa,EAAE,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA8C,gBAAgB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB,MAAM,MAAM;AAC3D;AACA,2CAA2C,8DAA8D,6CAA6C;AACtJ;AACA,yIAAyI;AACzI,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjWA,iD;;;;;;ACAA,iD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,eAAe,mBAAO,CAAC,EAAU;AACjC;AACA;AACA,qCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,qCAAqC,mBAAmB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,4BAA4B,EAAE;AAChE;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,EAAE;AACzC,0CAA0C,EAAE;AAC5C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,2CAA2C,gCAAgC,kBAAkB,EAAE,WAAW,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9La;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA,sCAAsC,aAAa;AACnD,CAAC,0DAA0D;;;;;;;;ACL9C;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC;AACzE;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,6CAA6C;AAC7E;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC;AACzE;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACpEa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,cAAc,mBAAO,CAAC,EAAe;AACrC,iBAAiB,mBAAO,CAAC,EAAY;AACrC,gBAAgB,mBAAO,CAAC,EAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,UAAU,+CAA+C,EAAE,EAAE,8BAA8B,UAAU,sCAAsC,EAAE,EAAE;AACnN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,uGAAuG,sBAAsB,EAAE,wCAAwC,mBAAmB,EAAE;AAC5L;AACA;AACA;AACA,kFAAkF,gBAAgB;AAClG;AACA;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yEAAyE;AACzG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,wDAAwD,0BAA0B,EAAE;AACpF;AACA;AACA,mEAAmE,0BAA0B,EAAE,EAAE,gBAAgB;AACjH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;AC1Ga;AACb,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,EAAqB;AAC5C;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB,EAAE;AACnD;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,yCAAyC;AACzC;AACA;AACA,+CAA+C,oBAAoB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mBAAmB;AAClE;AACA;AACA,+CAA+C,mBAAmB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3Da;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,EAAU;AACnC,eAAe,mBAAO,CAAC,EAAQ;AAC/B,0BAA0B,mBAAO,CAAC,EAAoC;AACtE,0BAA0B,mBAAO,CAAC,EAAoC;AACtE,kBAAkB,mBAAO,CAAC,EAA4B;AACtD,mBAAmB,mBAAO,CAAC,EAA2B;AACtD,cAAc,mBAAO,CAAC,EAAe;AACrC,eAAe,mBAAO,CAAC,EAAqB;AAC5C,iBAAiB,mBAAO,CAAC,EAAY;AACrC,mBAAmB,mBAAO,CAAC,EAAc;AACzC;AACA;AACA;AACA;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA,CAAC,+EAA+E;AAChF;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,+BAA+B,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+CAA+C,yCAAyC;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,uBAAuB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mCAAmC;AAClF;AACA;AACA;AACA;AACA;AACA,sDAAsD,sCAAsC;AAC5F,+CAA+C,eAAe;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6EAA6E;AACrG;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB,2CAA2C;AAChG,8CAA8C,mBAAmB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,0BAA0B,0BAA0B,EAAE;AACtD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4DAA4D;AACnF;AACA;AACA;AACA,2CAA2C,WAAW,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9QA,iD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,EAAiC;AACzD,yBAAyB,mBAAO,CAAC,EAA0C;AAC3E,2BAA2B,mBAAO,CAAC,EAA4C;AAC/E,iBAAiB,mBAAO,CAAC,EAAkC;AAC3D,kBAAkB,mBAAO,CAAC,EAAmC;AAC7D,uBAAuB,mBAAO,CAAC,EAAwC;AACvE,mBAAmB,mBAAO,CAAC,EAAoC;AAC/D,gBAAgB,mBAAO,CAAC,EAAiC;AACzD,iBAAiB,mBAAO,CAAC,EAAkC;AAC3D;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;;;;;;AC/CA,qCAAqC,4Y;;;;;;ACArC,qCAAqC,4Y;;;;;;ACArC,qCAAqC,4Y;;;;;;ACArC,qCAAqC,4tC;;;;;;ACArC,qCAAqC,4xB;;;;;;ACArC,qCAAqC,w/B;;;;;;ACArC,qCAAqC,gvC;;;;;;ACArC,qCAAqC,4yD;;;;;;ACArC,qCAAqC,giC;;;;;;;ACAxB;AACb,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,EAAgB;AACvC;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,KAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,6BAA6B;AAC7B;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,6BAA6B;AAC7B;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,6BAA6B;AAC7B;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,6BAA6B;AAC7B;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB,eAAe;AAC/C;AACA;AACA;AACA;AACA;;;;;;;;ACxFa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,cAAc,mBAAO,CAAC,EAAU;AAChC,qBAAqB,mBAAO,CAAC,EAAgB;AAC7C;AACA;AACA;AACA,4CAA4C,6CAA6C,yHAAyH,0BAA0B,2DAA2D,QAAQ,yQAAyQ,yBAAyB,YAAY,QAAQ,yEAAyE,6BAA6B,8PAA8P,OAAO;AACh9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,+BAA+B,EAAE;AACzG,2CAA2C,sBAAsB;AACjE;AACA,6CAA6C,qBAAqB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,wBAAwB,EAAE;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,uDAAuD;AACvD;AACA;AACA,KAAK,EAAE,EAAE;AACT,mDAAmD,yEAAyE;AAC5H;AACA;AACA,KAAK,EAAE,EAAE,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA,6CAA6C,uBAAuB;AACpE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sUAAsU,qNAAqN,0DAA0D,gBAAgB,QAAQ,ucAAuc,yDAAyD,gBAAgB,wBAAwB,6FAA6F;AAClvC;AACA,oDAAoD,wDAAwD,EAAE;AAC9G,gJAAgJ,oCAAoC;AACpL;AACA;AACA;AACA,+CAA+C,2BAA2B,EAAE;AAC5E;AACA;AACA,kBAAkB,oCAAoC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uCAAuC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAkD;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gEAAgE,EAAE;AACpI;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B;AACzE;AACA;AACA;AACA,6DAA6D,6BAA6B;AAC1F;AACA;AACA,mCAAmC,iCAAiC;AACpE;AACA;AACA;AACA;AACA,YAAY,4BAA4B,qBAAqB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,6BAA6B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,oFAAoF,oBAAoB;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,oFAAoF,oBAAoB;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,6BAA6B;AACtF;AACA;AACA;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;AACA,gFAAgF,oBAAoB;AACpG;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;AACA,gFAAgF,oBAAoB;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,sBAAsB,EAAE;AAC7E;;;;;;;;AC7da;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrBa;AACb,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,EAAY;AACrC;AACA;AACA,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,mCAAmC;AACxD,qBAAqB,+BAA+B;AACpD,qBAAqB,kCAAkC;AACvD;AACA,0CAA0C,yCAAyC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kCAAkC;AACrD,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;;;;;;;ACtIa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAO;AAC7B,cAAc,mBAAO,CAAC,EAAoB;AAC1C,oBAAoB,mBAAO,CAAC,EAA0B;AACtD,eAAe,mBAAO,CAAC,EAAqB;AAC5C,iBAAiB,mBAAO,CAAC,EAAY;AACrC,iBAAiB,mBAAO,CAAC,EAAY;AACrC,iBAAiB,mBAAO,CAAC,EAAY;AACrC,aAAa,mBAAO,CAAC,EAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,gBAAgB;AACrF;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,aAAa;AACxC,+BAA+B,4CAA4C;AAC3E;AACA;AACA;AACA;AACA,yCAAyC,wBAAwB,wCAAwC,wCAAwC,+GAA+G,GAAG,EAAE;AACrQ;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,0CAA0C,2GAA2G;AACrJ,0DAA0D,kDAAkD,mBAAmB,gJAAgJ;AAC/Q,yCAAyC,4CAA4C;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA,yDAAyD,0GAA0G;AACnK,4DAA4D,uLAAuL;AACnP;AACA;AACA,yCAAyC,uCAAuC;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qCAAqC;AAC/E;AACA;AACA;AACA;AACA,oDAAoD,2IAA2I;AAC/L,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,+CAA+C,gBAAgB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB,uBAAuB,cAAc;AACpG;AACA,yCAAyC,iFAAiF;AAC1H,yCAAyC,kGAAkG;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,+EAA+E;AACzH;AACA,2CAA2C,OAAO;AAClD,yCAAyC,8EAA8E;AACvH;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kGAAkG;AAChK;AACA;AACA,8DAA8D,uGAAuG;AACrK;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,kDAAkD,4BAA4B,EAAE;AAChF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,0BAA0B;AACxE;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AC7fY;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,kBAAkB,mBAAO,CAAC,EAAwB;AAClD,cAAc,mBAAO,CAAC,EAAoB;AAC1C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,iBAAiB,mBAAO,CAAC,EAAY;AACrC,iBAAiB,mBAAO,CAAC,EAAY;AACrC,iBAAiB,mBAAO,CAAC,EAAY;AACrC,aAAa,mBAAO,CAAC,EAAQ;AAC7B,cAAc,mBAAO,CAAC,EAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,+CAA+C,qBAAqB;AACpE,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,gCAAgC,sEAAsE;AACrK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kEAAkE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,qDAAqD,kEAAkE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kEAAkE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,eAAe;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,oBAAoB;AACpB,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,gCAAgC;AAChC,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oDAAoD;AAChG,wCAAwC,mFAAmF;AAC3H,oDAAoD,mIAAmI,4EAA4E,uCAAuC,2DAA2D,EAAE,yBAAyB,wDAAwD,EAAE,qDAAqD,4EAA4E,uCAAuC,8DAA8D,EAAE,yBAAyB,wDAAwD,EAAE,IAAI;AACzvB,0DAA0D,wDAAwD;AAClH,gDAAgD,6EAA6E;AAC7H,iDAAiD,0DAA0D,EAAE;AAC7G;AACA,aAAa;AACb;AACA;AACA;AACA,sCAAsC,yBAAyB,EAAE;AACjE;AACA,yCAAyC,yDAAyD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,0FAA0F,iBAAiB;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,oCAAoC,2BAA2B,EAAE;AACjE;AACA;AACA,8DAA8D,WAAW;AACzE,uDAAuD,YAAY,mBAAmB;AACtF,SAAS;AACT,uBAAuB,mCAAmC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,qCAAqC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mEAAmE,EAAE;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,oCAAoC,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,mCAAmC;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzqBa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,eAAe,mBAAO,CAAC,EAAQ;AAC/B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,kBAAkB,mBAAO,CAAC,EAAa;AACvC,kBAAkB,mBAAO,CAAC,EAAa;AACvC,YAAY,mBAAO,CAAC,EAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,mDAAmD,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,0BAA0B,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,sBAAsB,EAAE;AAC9H;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iCAAiC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,4CAA4C,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yCAAyC,gBAAgB;AACzD;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB,EAAE;AACrE,sCAAsC,gFAAgF,EAAE;AACxH;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,oCAAoC,uBAAuB;AAC3D,uCAAuC,mBAAmB;AAC1D,KAAK;AACL;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,aAAa,4FAA4F;AAC9K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,KAAK;AACjB;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;;;;;;;;AC1Za;AACb,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,EAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,6DAA6D,2BAA2B;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,EAAE,IAAI,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,EAAE;AAC3C,yCAAyC,4BAA4B;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA,yEAAyE,kCAAkC,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,+CAA+C,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjUa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAO;AAC7B,mBAAmB,mBAAO,CAAC,EAA8B;AACzD,cAAc,mBAAO,CAAC,EAAS;AAC/B,eAAe,mBAAO,CAAC,EAAmB;AAC1C,uBAAuB,mBAAO,CAAC,EAA6B;AAC5D,uBAAuB,mBAAO,CAAC,EAA6B;AAC5D,gBAAgB,mBAAO,CAAC,EAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,4BAA4B,sBAAsB,sCAAsC,EAAE;AAChK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,2CAA2C,uDAAuD,EAAE;AAC5I,4CAA4C,2CAA2C,yBAAyB,EAAE;AAClH,gDAAgD,8CAA8C;AAC9F;AACA,oDAAoD,2CAA2C;AAC/F,wDAAwD,iDAAiD;AACzG,4DAA4D,yCAAyC;AACrG,wDAAwD,kDAAkD;AAC1G,oEAAoE,mDAAmD,qBAAqB,EAAE;AAC9I,sDAAsD,+CAA+C,qBAAqB,EAAE;AAC5H;AACA,4CAA4C,+CAA+C;AAC3F;AACA;AACA,wEAAwE,iCAAiC;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,iCAAiC,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,yCAAyC;AACrF;AACA;AACA,+CAA+C,sDAAsD;AACrG,4CAA4C,4EAA4E;AACxH,4CAA4C,gDAAgD,6CAA6C,qCAAqC,wEAAwE,SAAS,EAAE;AACjQ,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,4CAA4C,qBAAqB,EAAE;AAC/G,wCAAwC,uDAAuD;AAC/F;AACA;AACA;AACA;AACA;AACA,wCAAwC,kCAAkC;AAC1E,4CAA4C,sCAAsC;AAClF;AACA;AACA;AACA,4CAA4C,wCAAwC;AACpF;AACA,gDAAgD,4EAA4E;AAC5H,uCAAuC,iCAAiC;AACxE;AACA;AACA;AACA;AACA,gDAAgD,+DAA+D;AAC/G,4CAA4C,2DAA2D;AACvG;AACA;AACA,gDAAgD,+DAA+D;AAC/G,4CAA4C,2DAA2D;AACvG;AACA;AACA,4CAA4C,uEAAuE,eAAe,EAAE;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sCAAsC;AAClF,2CAA2C,iMAAiM;AAC5O,6CAA6C,2BAA2B;AACxE;AACA;AACA,kEAAkE,+CAA+C;AACjH;AACA,2CAA2C,wLAAwL;AACnO,6CAA6C,0BAA0B;AACvE;AACA;AACA,kEAAkE,+CAA+C;AACjH;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzIa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,kBAAkB,mBAAO,CAAC,EAAsB;AAChD,cAAc,mBAAO,CAAC,EAAoB;AAC1C,yBAAyB,mBAAO,CAAC,EAA+B;AAChE,uBAAuB,mBAAO,CAAC,EAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mCAAmC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA,4BAA4B,mBAAmB;AAC/C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,sEAAsE;AACtE;AACA,CAAC;AACD;;;;;;;;AC9Ga;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,EAAoB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;;;;;;;;AChBa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,cAAc,mBAAO,CAAC,EAAe;AACrC,oBAAoB,mBAAO,CAAC,EAA0B;AACtD;AACA;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,WAAW,gBAAgB;AACnG;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW,qBAAqB;AACnF;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW,qBAAqB;AACnF;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW,eAAe;AAC7E;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW,eAAe;AAC7E;AACA;AACA,CAAC,yEAAyE;AAC1E;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU,2HAA2H;AACpL;;;;;;;;AClPa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,aAAa;AACxF;AACA;AACA;AACA,yCAAyC,mHAAmH;AAC5J,sCAAsC,oCAAoC;AAC1E,6CAA6C,+JAA+J;AAC5M,yCAAyC,SAAS,6BAA6B,gCAAgC;AAC/G;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,+BAA+B;AAC3E,0CAA0C,wBAAwB,8BAA8B,EAAE;AAClG;AACA;AACA,CAAC;AACD;;;;;;;;ACpCa;AACb,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,EAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,wBAAwB,EAAE;AAC9D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,gCAAgC,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uBAAuB,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA,uCAAuC,qCAAqC,EAAE;AAC9E,wCAAwC,8BAA8B,EAAE;AACxE,iFAAiF,mBAAmB,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,wDAAwD,oDAAoD,EAAE;AAC9G;AACA;AACA,6DAA6D,6BAA6B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,uDAAuD,EAAE;AACjI;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AClJa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,0BAA0B,mBAAO,CAAC,EAAqB;AACvD,kBAAkB,mBAAO,CAAC,EAAa;AACvC,2BAA2B,mBAAO,CAAC,EAAsB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,mBAAmB,EAAE;AACvG,kFAAkF,mBAAmB,EAAE;AACvG,8EAA8E,kBAAkB,EAAE;AAClG;AACA;AACA;AACA,sDAAsD,4CAA4C,EAAE;AACpG,mDAAmD,2BAA2B,EAAE;AAChF;AACA,+DAA+D,0BAA0B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,gBAAgB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,sBAAsB,EAAE;AACnG;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iBAAiB;AACzE,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE,EAAE;AAC7B;AACA;AACA;AACA,qEAAqE,6BAA6B;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iBAAiB;AACzE;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE,EAAE;AAC7B;AACA;AACA;AACA,kFAAkF,WAAW,EAAE;AAC/F;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iBAAiB;AACzE;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE,EAAE;AAC7B;AACA;AACA;AACA,kFAAkF,WAAW,EAAE;AAC/F;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,iBAAiB;AACrE;AACA,yCAAyC;AACzC;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE;AAC3B;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE,EAAE;AAC7B;AACA;AACA;AACA,qEAAqE,6BAA6B;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,+CAA+C,EAAE;AAClH;AACA,iEAAiE,+CAA+C,EAAE;AAClH,qDAAqD,UAAU,kCAAkC,EAAE,EAAE;AACrG;AACA;AACA;AACA,iCAAiC;AACjC;AACA,oEAAoE,gBAAgB;AACpF;AACA;AACA;AACA;AACA;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G,kBAAkB,EAAE;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,kEAAkE;AAClE;AACA;AACA;AACA,yBAAyB,EAAE,EAAE;AAC7B;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mDAAmD,EAAE;AACvG,oDAAoD,yBAAyB,EAAE;AAC/E,2EAA2E,gCAAgC;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,kDAAkD,EAAE;AACtG,oDAAoD,yBAAyB,EAAE;AAC/E,iEAAiE,2BAA2B;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,iCAAiC,EAAE;AAChG,oDAAoD,4DAA4D,EAAE;AAClH;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,iCAAiC,EAAE;AAClJ,oDAAoD,4DAA4D,EAAE;AAClH;AACA;AACA;AACA,+GAA+G,gCAAgC,EAAE;AACjJ,oDAAoD,2DAA2D,EAAE;AACjH;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,iCAAiC,EAAE;AAClJ,oDAAoD,4DAA4D,EAAE;AAClH;AACA;AACA;AACA;AACA;AACA,+GAA+G,gCAAgC,EAAE;AACjJ,oDAAoD,2DAA2D,EAAE;AACjH;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E;AACA;AACA,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA,aAAa,EAAE,EAAE;AACjB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yDAAyD,2BAA2B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B,EAAE;AAC3F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtwBa;AACb,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,EAAS;AACjC,eAAe,mBAAO,CAAC,EAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,6BAA6B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,sDAAsD,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sBAAsB;AACjE;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,oCAAoC,EAAE;AAClH,2CAA2C,sBAAsB;AACjE;AACA,+CAA+C,gBAAgB;AAC/D;AACA,2DAA2D,0BAA0B;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;ACpNA,iD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;AC1Ea;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,wBAAwB,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qCAAqC;AAC1E;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,sEAAsE,IAAI,EAAE;AACzH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7Ea;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,oBAAoB,mBAAO,CAAC,EAA6B;AACzD,wBAAwB,mBAAO,CAAC,EAAmB;AACnD,mCAAmC,mBAAO,CAAC,EAA8B;AACzE,iBAAiB,mBAAO,CAAC,EAAc;AACvC,eAAe,mBAAO,CAAC,EAAU;AACjC;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA,kCAAkC,0DAA0D;AAC5F;AACA;AACA;AACA;AACA,2DAA2D,aAAa,+BAA+B;AACvG;AACA,0DAA0D,gBAAgB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,gBAAgB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,0BAA0B,EAAE;AAC/G;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA,8CAA8C,iBAAiB,aAAa;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,0BAA0B,EAAE;AAC5G;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,UAAU,iBAAiB,aAAa,gBAAgB,EAAE,EAAE;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,0BAA0B,EAAE;AAC/G;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,UAAU,iBAAiB,aAAa,EAAE,EAAE,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,uCAAuC,EAAE;AAC7H;AACA;AACA;AACA,kFAAkF,wBAAwB,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,uCAAuC,EAAE;AACvH,+DAA+D,0BAA0B,EAAE;AAC3F,8EAA8E,0BAA0B,EAAE;AAC1G,iIAAiI,kCAAkC,YAAY,sCAAsC,oBAAoB,yEAAyE;AAClT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,uCAAuC,EAAE;AAC7H;AACA;AACA;AACA;AACA,sFAAsF,0BAA0B,EAAE;AAClH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD,0CAA0C,eAAe;AACzD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,sCAAsC;AAC3F,qDAAqD,qCAAqC;AAC1F;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,2EAA2E;AACtJ,0EAA0E,0EAA0E;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B,EAAE,EAAE;AACjC;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6GAA6G,6CAA6C,EAAE;AAC5J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,0DAA0D;AACrI;AACA;AACA;AACA;AACA;AACA,sIAAsI,eAAe,iEAAiE,6NAA6N,iKAAiK,8GAA8G,uCAAuC,qFAAqF;AAC9zB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,mHAAmH;AACrJ;AACA;AACA,kCAAkC,kHAAkH;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,kCAAkC;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,uEAAuE;AAC7G;AACA;AACA;AACA;AACA,sCAAsC,uEAAuE;AAC7G;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,+DAA+D,gBAAgB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+FAA+F;AACjI;AACA;AACA;AACA;AACA,8BAA8B,wBAAwB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,wDAAwD;AAC1F;AACA;AACA;AACA;AACA,8BAA8B,6BAA6B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wCAAwC,EAAE;AAC9F,iDAAiD,mCAAmC,EAAE;AACtF,8DAA8D,gBAAgB,GAAG,IAAI,EAAE,GAAG,kBAAkB,EAAE;AAC9G,gEAAgE,iDAAiD;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qBAAqB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qBAAqB;AACtE;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,eAAe;AAC7D;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,eAAe;AAC7D;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC,kBAAkB;AACnD;AACA;AACA,6BAA6B,yDAAyD,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjyBa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,qBAAqB,mBAAO,CAAC,EAAgB;AAC7C,cAAc,mBAAO,CAAC,EAAU;AAChC,oBAAoB,mBAAO,CAAC,EAA6B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,qDAAqD,6BAA6B;AAClF;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA,qDAAqD,4BAA4B,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,yCAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACA;AACA,iGAAiG;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0GAA0G;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C,yCAAyC,iCAAiC;AAC1E,yCAAyC,4BAA4B;AACrE;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,4BAA4B;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C,yCAAyC,iCAAiC;AAC1E,oCAAoC,uBAAuB;AAC3D;AACA;AACA,iDAAiD,2BAA2B;AAC5E;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,2BAA2B;AACxF;AACA;AACA;AACA,kEAAkE,WAAW,4BAA4B;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,8BAA8B,EAAE;AACpE;AACA;AACA;AACA;AACA,yEAAyE,2CAA2C,EAAE;AACtH,iDAAiD,4BAA4B,EAAE;AAC/E;AACA;AACA;AACA,yCAAyC,iCAAiC;AAC1E,oCAAoC,uBAAuB;AAC3D;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,2BAA2B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iCAAiC;AAC1E,oCAAoC,uBAAuB;AAC3D;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,uBAAuB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,2FAA2F,kDAAkD,EAAE;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,0CAA0C,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,wBAAwB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;AC1nBa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA,sEAAsE,oBAAoB,mBAAmB,oCAAoC,EAAE,KAAK,oCAAoC,EAAE,KAAK,eAAe;AAClN;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,4DAA4D,sBAAsB,EAAE,KAAK,gBAAgB,UAAU,oBAAoB,SAAS,iCAAiC;AACjL,oEAAoE,QAAQ,iBAAiB,gBAAgB,SAAS,oBAAoB,SAAS,GAAG;AACtJ;AACA,oDAAoD,qBAAqB,EAAE,KAAK,gBAAgB,SAAS,oBAAoB,SAAS,GAAG;AACzI,uDAAuD,yBAAyB,EAAE,KAAK,gBAAgB,aAAa,oBAAoB,SAAS,GAAG;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,mDAAmD,KAAK,KAAK,4DAA4D,+EAA+E;AACjT,KAAK;AACL,gFAAgF,0DAA0D,6BAA6B,wCAAwC,wEAAwE,wCAAwC,iFAAiF,eAAe;AAC/Z;AACA;AACA,4CAA4C,gIAAgI,QAAQ,8BAA8B,EAAE,KAAK,wBAAwB,qDAAqD,wBAAwB,wBAAwB,wBAAwB,oBAAoB,uBAAuB,+DAA+D,WAAW;AACne,0BAA0B,6BAA6B,QAAQ,oCAAoC;AACnG,uEAAuE,gBAAgB,mBAAmB,+EAA+E;AACzL,mDAAmD,OAAO,2FAA2F,eAAe,mBAAmB,wDAAwD,4BAA4B,qBAAqB,kIAAkI,kDAAkD,eAAe,QAAQ,mBAAmB,uDAAuD,4BAA4B,oBAAoB,gIAAgI,kDAAkD,eAAe,WAAW;AACjzB;AACA;AACA,oJAAoJ,yBAAyB;AAC7K,yCAAyC,0BAA0B,+FAA+F,wBAAwB;AAC1L;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ,kBAAkB,UAAU,0EAA0E,KAAK;AACrJ;AACA,KAAK;AACL,oFAAoF,mBAAmB,4DAA4D,QAAQ,2DAA2D,kEAAkE,yBAAyB,4BAA4B,sDAAsD,eAAe;AACla;AACA,wBAAwB,6CAA6C,QAAQ,mEAAmE;AAChJ,4CAA4C,gIAAgI,QAAQ,8BAA8B,EAAE,KAAK,wBAAwB,iBAAiB,wBAAwB,QAAQ,kBAAkB,QAAQ,wBAAwB,oBAAoB,uBAAuB,+DAA+D,WAAW;AACzc,yBAAyB,yBAAyB,QAAQ,4CAA4C;AACtG,uEAAuE,gBAAgB,mBAAmB,WAAW;AACrH,yFAAyF,eAAe,4BAA4B,OAAO,mDAAmD,wBAAwB,qBAAqB,wBAAwB,yBAAyB,mBAAmB,yBAAyB,EAAE,4BAA4B,OAAO,iDAAiD,wBAAwB,oBAAoB,wBAAwB,wBAAwB,mBAAmB,yBAAyB,WAAW;AACjjB;AACA;AACA,yCAAyC,2BAA2B,+FAA+F,QAAQ,kBAAkB,QAAQ;AACrM;AACA;AACA,8DAA8D;AAC9D;AACA,uFAAuF,eAAe,mEAAmE,yGAAyG,kBAAkB,qBAAqB,2DAA2D,QAAQ,0DAA0D,wBAAwB,yBAAyB,wBAAwB,sDAAsD,WAAW;AAChkB;AACA,+DAA+D;AAC/D;AACA;AACA;AACA,mHAAmH,KAAK;AACxH,KAAK;AACL,4EAA4E,+DAA+D,+BAA+B,sIAAsI;AAChT,4CAA4C,gIAAgI,QAAQ,8BAA8B,EAAE,KAAK,2KAA2K,oBAAoB,uBAAuB,+DAA+D,WAAW;AACzf;AACA,mDAAmD,kGAAkG,+EAA+E,QAAQ,kBAAkB,QAAQ;AACtQ,0BAA0B,6BAA6B,QAAQ,gDAAgD;AAC/G;AACA,8DAA8D;;;;;;;;ACzFjD;AACb,8CAA8C,cAAc;AAC5D,SAAS,mBAAO,CAAC,GAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;;;;;;ACrCA,kD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,GAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,+CAA+C,EAAE;AACrH,gFAAgF,6BAA6B;AAC7G,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,6DAA6D,cAAc,EAAE,qBAAqB,EAAE;AAClK,0EAA0E,uBAAuB;AACjG,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,cAAc,EAAE;AAChG,iBAAiB;AACjB,iFAAiF,6BAA6B;AAC9G,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,+CAA+C,EAAE;AACnH,8EAA8E,2BAA2B;AACzG,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,8BAA8B;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,+CAA+C,4DAA4D;AAC3G,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,uCAAuC,UAAU,6EAA6E,EAAE,EAAE;AAClI;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtMa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA,+CAA+C,mBAAmB,EAAE;AACpE;AACA,iBAAiB,8DAA8D;AAC/E,KAAK;AACL;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA,8CAA8C,cAAc,EAAE;AAC9D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB;AACpE;AACA;AACA;AACA;AACA,6DAA6D,wBAAwB,EAAE;AACvF,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,2DAA2D,4BAA4B,EAAE;AACzF;AACA;AACA;AACA;AACA,8CAA8C,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE;AAC5G,qCAAqC,qBAAqB;AAC1D;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE;AACnH;AACA,mDAAmD,4BAA4B;AAC/E;AACA,2CAA2C,sBAAsB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB,EAAE;AACjF;AACA;AACA;AACA,8CAA8C,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA,iDAAiD,yBAAyB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB,EAAE;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,gBAAgB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gBAAgB;AACxD;AACA;AACA;AACA;AACA;AACA,wCAAwC,gBAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA,gEAAgE,yBAAyB,EAAE;AAC3F,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA,0BAA0B,2CAA2C;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA,+CAA+C,uCAAuC,EAAE;AACxF;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,mBAAmB,EAAE,oBAAoB,mBAAmB,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA,iDAAiD,yBAAyB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB,EAAE;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,2BAA2B;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,iCAAiC,EAAE;AACpF;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,gCAAgC,EAAE;AACxG;AACA;AACA;;;;;;;;ACvUa;AACb,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,EAAQ;AAC/B,eAAe,mBAAO,CAAC,EAAmB;AAC1C,0BAA0B,mBAAO,CAAC,GAAgC;AAClE,eAAe,mBAAO,CAAC,GAAwB;AAC/C,eAAe,mBAAO,CAAC,EAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,+BAA+B,gCAAgC;AAC7G;AACA;AACA,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA,iCAAiC,uCAAuC;AACxE;AACA;AACA;AACA,wEAAwE,4CAA4C,EAAE;AACtH;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,qCAAqC,wBAAwB,+BAA+B,EAAE;AAC9F;AACA;AACA,gBAAgB,kFAAkF,aAAa;AAC/G,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C,qBAAqB,uBAAuB;AAC5C,SAAS;AACT,KAAK;AACL,sDAAsD,cAAc,sDAAsD,uBAAuB;AACjJ;AACA;;;;;;;;AC5Ea;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,eAAe,mBAAO,CAAC,EAAQ;AAC/B,eAAe,mBAAO,CAAC,EAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,oBAAoB,cAAc,sDAAsD,2CAA2C;AAClL;AACA;AACA;AACA,sDAAsD,oBAAoB,0CAA0C;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,EAAE,EAAE;AACT,gDAAgD;AAChD;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC,iBAAiB,uBAAuB;AACxC;AACA;AACA,KAAK,EAAE,EAAE;AACT,YAAY;AACZ;AACA;;;;;;;;ACrGa;AACb,8CAA8C,cAAc;AAC5D,WAAW,mBAAO,CAAC,GAAS;AAC5B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,eAAe,mBAAO,CAAC,EAAU;AACjC,kBAAkB,mBAAO,CAAC,EAAsB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,qCAAqC,qBAAqB;AAC1D;AACA,kCAAkC,yCAAyC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,oBAAoB,EAAE;AAC9D;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,+BAA+B,EAAE;AACpF;AACA,sDAAsD,iCAAiC,EAAE;AACzF;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,yCAAyC;AACrE;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA,oCAAoC,uBAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,qDAAqD,6BAA6B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,kCAAkC,0BAA0B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,0BAA0B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,eAAe;AACzC,aAAa;AACb;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC,EAAE;AACrF,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,eAAe,eAAe;AACrE;AACA;AACA,iBAAiB,EAAE,EAAE;AACrB;AACA;AACA,kCAAkC,uDAAuD;AACzF,uCAAuC,eAAe,eAAe,mCAAmC,EAAE;AAC1G;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/UA,kD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D,qBAAqB,mBAAO,CAAC,GAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uDAAuD,EAAE;AAC7F;AACA;AACA,CAAC;AACD;;;;;;;;ACjBa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,eAAe,mBAAO,CAAC,EAAgB;AACvC,eAAe,mBAAO,CAAC,EAAqB;AAC5C,iBAAiB,mBAAO,CAAC,EAAY;AACrC,cAAc,mBAAO,CAAC,GAAS;AAC/B,gBAAgB,mBAAO,CAAC,EAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iCAAiC,EAAE;AAC7D;AACA;AACA,KAAK;AACL;AACA,0BAA0B,8BAA8B,EAAE;AAC1D;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,mCAAmC,EAAE;AAClG;AACA;AACA;AACA;AACA,uDAAuD,uCAAuC;AAC9F,uDAAuD,uCAAuC;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,4CAA4C,eAAe;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,oDAAoD,EAAE;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,UAAU,cAAc;AAC3E,8CAA8C,iEAAiE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iEAAiE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,eAAe;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,kBAAkB;AACtE;AACA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;AChNa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,oBAAoB,mBAAO,CAAC,EAA0B;AACtD,eAAe,mBAAO,CAAC,EAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB;AACzE;AACA;AACA,+CAA+C,uBAAuB;AACtE;AACA;AACA,mDAAmD,uBAAuB;AAC1E;AACA;AACA,gDAAgD,uBAAuB;AACvE;AACA;AACA,+CAA+C,4BAA4B;AAC3E,4CAA4C,yBAAyB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,wEAAwE,gBAAgB;AACxF;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0BAA0B,EAAE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gCAAgC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtLa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,eAAe,mBAAO,CAAC,EAAgB;AACvC,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,gBAAgB,mBAAO,CAAC,EAAoB;AAC5C,cAAc,mBAAO,CAAC,GAAkB;AACxC,oBAAoB,mBAAO,CAAC,GAAe;AAC3C,0BAA0B,mBAAO,CAAC,GAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,gBAAgB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,0BAA0B,2BAA2B,EAAE;AACvD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,eAAe;AACjE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,uDAAuD,8BAA8B;AACrF;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kDAAkD,eAAe;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT,yDAAyD,gBAAgB;AACzE,SAAS;AACT;AACA;AACA,uDAAuD,8BAA8B;AACrF;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yCAAyC,qGAAqG,EAAE;AAChJ;AACA;AACA,qBAAqB,mFAAmF;AACxG,SAAS;AACT,0DAA0D,2DAA2D;AACrH;AACA;AACA;AACA,iDAAiD,yBAAyB;AAC1E;AACA,uDAAuD,8BAA8B;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA,wCAAwC,yCAAyC;AACjF;AACA;AACA;AACA;AACA,kLAAkL;AAClL;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA,kDAAkD,qHAAqH;AACvK;AACA;AACA;AACA;AACA;AACA,+CAA+C,gBAAgB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB,EAAE;AAC5D,kCAAkC,gBAAgB,EAAE;AACpD;AACA,yEAAyE,oBAAoB,EAAE;AAC/F;AACA,SAAS,yBAAyB,sCAAsC,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,+DAA+D;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,yCAAyC,qBAAqB;AAC9D;AACA;AACA;AACA,0DAA0D,iDAAiD;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,iCAAiC,EAAE;AACxG,qEAAqE,iCAAiC,EAAE;AACxG;AACA,6CAA6C,uBAAuB;AACpE;AACA,iDAAiD,uBAAuB;AACxE;AACA,kDAAkD,uEAAuE;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,wDAAwD,qCAAqC,EAAE,IAAI;AACnG,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;AC1Ra;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,cAAc,mBAAO,CAAC,EAAoB;AAC1C,oBAAoB,mBAAO,CAAC,EAA0B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D,SAAS;AACT;AACA,8CAA8C,2BAA2B;AACzE,SAAS;AACT;AACA,6CAA6C,2BAA2B;AACxE,SAAS;AACT;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,0BAA0B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,6BAA6B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,kDAAkD;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACrFa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAe;AACrC,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,gBAAgB,mBAAO,CAAC,EAAoB;AAC5C,aAAa,mBAAO,CAAC,EAAiB;AACtC,eAAe,mBAAO,CAAC,EAAqB;AAC5C,eAAe,mBAAO,CAAC,GAAmB;AAC1C,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D,uBAAuB,mBAAO,CAAC,GAAyB;AACxD,4BAA4B,mBAAO,CAAC,GAA8B;AAClE,qBAAqB,mBAAO,CAAC,GAAuB;AACpD,0BAA0B,mBAAO,CAAC,GAA4B;AAC9D,aAAa,mBAAO,CAAC,GAAiB;AACtC,iBAAiB,mBAAO,CAAC,GAAqB;AAC9C,wBAAwB,mBAAO,CAAC,GAAmB;AACnD,yBAAyB,mBAAO,CAAC,GAAoB;AACrD,eAAe,mBAAO,CAAC,GAAqB;AAC5C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C,mBAAmB,mBAAO,CAAC,GAAc;AACzC,uBAAuB,mBAAO,CAAC,EAAkB;AACjD,kBAAkB,mBAAO,CAAC,GAAa;AACvC,mBAAmB,mBAAO,CAAC,GAAc;AACzC,cAAc,mBAAO,CAAC,EAAoB;AAC1C,oBAAoB,mBAAO,CAAC,EAA0B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gEAAgE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,6EAA6E,8EAA8E;AAC3J,SAAS;AACT;AACA;AACA;AACA,0EAA0E,kCAAkC,EAAE;AAC9G,4EAA4E,+BAA+B,EAAE;AAC7G;AACA;AACA;AACA;AACA,SAAS;AACT,6EAA6E,2BAA2B,EAAE,EAAE;AAC5G;AACA;AACA,iFAAiF,kCAAkC;AACnH,uCAAuC,+EAA+E;AACtH,SAAS;AACT;AACA;AACA;AACA,8BAA8B,6CAA6C;AAC3E,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,0BAA0B,0BAA0B,EAAE;AACtD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA;AACA,0BAA0B,6BAA6B,EAAE;AACzD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,oCAAoC;AAC9F;AACA,SAAS;AACT;AACA;AACA,0BAA0B,8BAA8B,EAAE;AAC1D;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,mCAAmC;AACzF;AACA;AACA,0BAA0B,6BAA6B,EAAE;AACzD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mCAAmC;AACxF;AACA;AACA,0BAA0B,wBAAwB,EAAE;AACpD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,sCAAsC,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA,iEAAiE,sBAAsB;AACvF,kCAAkC,uFAAuF;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gIAAgI,2CAA2C,EAAE;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,uFAAuF,uCAAuC,EAAE;AACtL;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,8BAA8B,+BAA+B,EAAE;AAChF,+CAA+C,gFAAgF;AAC/H,iBAAiB;AACjB;AACA,iBAAiB,EAAE;AACnB;AACA;AACA,8DAA8D,sGAAsG,yCAAyC,EAAE,yBAAyB,wCAAwC,EAAE;AAClR,+CAA+C,iFAAiF;AAChI,iBAAiB;AACjB,+CAA+C,iFAAiF;AAChI,iBAAiB,4BAA4B,8CAA8C,EAAE,EAAE;AAC/F;AACA,kCAAkC,8EAA8E;AAChH;AACA;AACA;AACA;AACA,mCAAmC,2BAA2B;AAC9D,+EAA+E;AAC/E;AACA,aAAa,uEAAuE;AACpF,yBAAyB,6EAA6E;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,iBAAiB,0BAA0B;AACzG;AACA;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D,uDAAuD,mEAAmE,2DAA2D,8EAA8E;AACnQ,yBAAyB,8EAA8E;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,4CAA4C,iCAAiC;AAC7E,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,qCAAqC,gBAAgB;AACrD;AACA;AACA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC,yBAAyB,mHAAmH;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,gEAAgE,iCAAiC;AACjG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,yCAAyC,gBAAgB;AACzD;AACA;AACA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oCAAoC,2BAA2B;AAC/D;AACA;AACA;AACA,kFAAkF;AAClF;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA,wBAAwB;AACxB,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4DAA4D,wIAAwI;AACpM,kCAAkC,kFAAkF;AACpH,6CAA6C,kBAAkB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qFAAqF;AAC3H,iDAAiD,kBAAkB;AACnE;AACA;AACA;AACA;AACA;AACA,6DAA6D,iBAAiB,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,2BAA2B;AACvE;AACA;AACA;AACA;AACA,uDAAuD,uCAAuC,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iDAAiD,qBAAqB;AACtE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,2DAA2D,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,6BAA6B,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,8BAA8B,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,uCAAuC,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,+CAA+C,EAAE;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,6CAA6C,EAAE;AAC5F,8CAA8C,wCAAwC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,eAAe,0BAA0B;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,eAAe,0BAA0B;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,0CAA0C,wCAAwC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,yGAAyG;AAC9K,kCAAkC,wFAAwF;AAC1H;AACA;AACA,kCAAkC,wFAAwF;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,kCAAkC,EAAE;AAC/E,4CAA4C,yCAAyC,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,8CAA8C,wCAAwC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,4CAA4C,sCAAsC;AAClF,wCAAwC,uCAAuC;AAC/E,yEAAyE,qBAAqB;AAC9F;AACA;AACA;AACA,CAAC;AACD;AACA,gDAAgD,uCAAuC,EAAE;AACzF;AACA;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,8EAA8E;AAC9G;AACA;;;;;;;;ACn0Ba;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,wBAAwB,mBAAO,CAAC,GAA8B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,4BAA4B,iBAAiB;AAC7C;AACA;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA;AACA;AACA,4BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,+BAA+B;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qHAAqH,aAAa;AAClI;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sCAAsC;AAClF,2CAA2C,iEAAiE,8BAA8B,EAAE,EAAE;AAC9I,kDAAkD,uCAAuC;AACzF;AACA,oEAAoE,4HAA4H;AAChM,oEAAoE,0HAA0H;AAC9L,oEAAoE,uIAAuI;AAC3M;AACA;AACA,eAAe,+CAA+C;AAC9D;AACA;AACA,CAAC;AACD;;;;;;;;AChOa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,UAAU,sCAAsC;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC5Da;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,oBAAoB,mBAAO,CAAC,GAAwB;AACpD,wBAAwB,mBAAO,CAAC,GAAmB;AACnD,sBAAsB,mBAAO,CAAC,GAAiB;AAC/C,yBAAyB,mBAAO,CAAC,EAA+B;AAChE;AACA;AACA;AACA,aAAa,6BAA6B;AAC1C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA,yEAAyE,sBAAsB,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,kCAAkC;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA,qDAAqD,yBAAyB;AAC9E;AACA,wCAAwC;AACxC;AACA;AACA;AACA,qCAAqC,sBAAsB,EAAE;AAC7D;AACA,wBAAwB;AACxB,aAAa,GAAG,0BAA0B;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,sEAAsE;AACtE;AACA,oFAAoF,2DAA2D,EAAE;AACjJ,aAAa,EAAE,EAAE;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,kRAAkR;AAC9U;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D;AACA;AACA;AACA,4BAA4B,sCAAsC;AAClE;AACA;AACA;AACA;AACA;AACA,oDAAoD,qDAAqD;AACzG,8CAA8C,6EAA6E;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6DAA6D;AAClH;AACA;AACA,0DAA0D,8PAA8P;AACxT;AACA;AACA;AACA,yDAAyD,+DAA+D;AACxH;AACA,6DAA6D,mSAAmS;AAChW;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA,8CAA8C,yKAAyK;AACvN,8CAA8C,sFAAsF;AACpI,8CAA8C,0BAA0B;AACxE;AACA;AACA;AACA;AACA;AACA,gDAAgD,kEAAkE;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wCAAwC;AACpF,0CAA0C,mEAAmE;AAC7G;AACA,wCAAwC,oDAAoD;AAC5F,8CAA8C,qMAAqM;AACnP;AACA,4DAA4D,sCAAsC;AAClG;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,aAAa,EAAE;AAC7E,8CAA8C,kEAAkE;AAChH,2CAA2C,iBAAiB;AAC5D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,iVAAiV;AAClZ;AACA,6CAA6C,qBAAqB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,mCAAmC,EAAE;AACjH;AACA;AACA;AACA;AACA,qDAAqD,wEAAwE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,oOAAoO;AAC9R,+CAA+C,+EAA+E;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,wBAAwB;AACzF,iDAAiD,6BAA6B;AAC9E;AACA;AACA;AACA,0CAA0C;AAC1C,oGAAoG;AACpG;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,6KAA6K,qEAAqE,EAAE,EAAE;AACjS;AACA,4CAA4C,4CAA4C;AACxF,iFAAiF,0DAA0D;AAC3I,kFAAkF,2DAA2D;AAC7I;AACA,wCAAwC,8CAA8C;AACtF,yCAAyC,uDAAuD;AAChG,wCAAwC,8HAA8H;AACtK,wCAAwC,6HAA6H;AACrK;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,8FAA8F;AAC7I;AACA,6CAA6C,2GAA2G;AACxJ;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,6BAA6B,EAAE;AACxF,wDAAwD,mCAAmC,EAAE;AAC7F,2CAA2C,sDAAsD;AACjG,wCAAwC,kEAAkE;AAC1G;AACA,kDAAkD,uIAAuI;AACzL;AACA;AACA,8CAA8C,uEAAuE;AACrH;AACA,kDAAkD,uEAAuE;AACzH,gDAAgD,mEAAmE;AACnH,4EAA4E,4JAA4J;AACxO,oHAAoH,8EAA8E,mEAAmE,EAAE,EAAE;AACzQ,wCAAwC,mEAAmE;AAC3G;AACA,+CAA+C;AAC/C,4KAA4K,sEAAsE,EAAE,EAAE;AACtP;AACA;AACA,CAAC;AACD;AACA;AACA,yCAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACngBa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,+BAA+B,+BAA+B,EAAE;AAC5G,wCAAwC,+DAA+D,uBAAuB,sEAAsE;AACpM;AACA;AACA,CAAC;AACD;;;;;;;;AC1Ba;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qJAAqJ,sCAAsC,mDAAmD;AACxR,wCAAwC,4CAA4C,yBAAyB,EAAE;AAC/G;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,0CAA0C;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;;;;;;;;ACjEa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,oBAAoB,mBAAO,CAAC,EAA0B;AACtD,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,wBAAwB,mBAAO,CAAC,GAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA,sDAAsD,uBAAuB,EAAE;AAC/E;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,gBAAgB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,0CAA0C,2HAA2H;AACrK;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,iCAAiC,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAqB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,gEAAgE,EAAE;AAC9J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC/Ma;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD,iDAAiD;AACjG;AACA;AACA,wDAAwD,uCAAuC,qEAAqE,GAAG,EAAE;AACzK;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,4BAA4B,UAAU;AAC5G;AACA,aAAa;AACb;AACA;AACA;AACA,qDAAqD,oCAAoC;AACzF,4BAA4B,mDAAmD,8BAA8B,SAAS,iBAAiB,EAAE,GAAG;AAC5I;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,2BAA2B,iCAAiC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,kEAAkE;AAC5G;AACA;AACA;AACA;AACA;AACA,0CAA0C,+FAA+F;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,+EAA+E;AACzH;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,mCAAmC;AAC3E,4CAA4C,uCAAuC;AACnF,4CAA4C,uCAAuC;AACnF,4CAA4C,uCAAuC;AACnF;AACA,wCAAwC,uCAAuC;AAC/E,+CAA+C,sGAAsG,sDAAsD,EAAE,EAAE;AAC/M,+CAA+C,4EAA4E;AAC3H;AACA;AACA,CAAC;AACD;;;;;;;;AClGa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAe;AACrC,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,oBAAoB,mBAAO,CAAC,GAAwB;AACpD,4BAA4B,mBAAO,CAAC,GAAuB;AAC3D,yBAAyB,mBAAO,CAAC,GAAoB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uCAAuC;AAClE,wBAAwB,SAAS,4DAA4D,mBAAmB;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,kBAAkB,uBAAuB;AACpG,oBAAoB,aAAa,SAAS,sDAAsD,sCAAsC;AACtI,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,kBAAkB,uCAAuC;AAC/H,mEAAmE,eAAe,oCAAoC;AACtH;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,mCAAmC;AAC3E,gFAAgF;AAChF,+CAA+C,gBAAgB,mDAAmD,EAAE;AACpH,qBAAqB,EAAE;AACvB,0EAA0E,qJAAqJ,wBAAwB,aAAa,mDAAmD,EAAE,EAAE,EAAE,8CAA8C;AAC3W,4DAA4D,uCAAuC;AACnG,oEAAoE,yDAAyD;AAC7H,wCAAwC,uCAAuC;AAC/E,+CAA+C,sGAAsG,sEAAsE,EAAE,sCAAsC;AACnQ,+CAA+C,4EAA4E;AAC3H;AACA;AACA,CAAC;AACD;;;;;;;;AClGa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,eAAe,mBAAO,CAAC,EAAgB;AACvC,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D,cAAc,mBAAO,CAAC,EAAoB;AAC1C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mBAAmB;AAC1D,qEAAqE,wBAAwB,kCAAkC,WAAW,yCAAyC,GAAG,EAAE;AACxL;AACA;AACA,aAAa;AACb,SAAS,EAAE;AACX;AACA;AACA;AACA;AACA,kDAAkD,uCAAuC;AACzF;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,6BAA6B;AACzD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA,2DAA2D,qBAAqB;AAChF;AACA;AACA;AACA;AACA,iFAAiF,sBAAsB,EAAE;AACzG,gCAAgC,uDAAuD;AACvF,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,wBAAwB;AACvF;AACA,4CAA4C,0CAA0C;AACtF;AACA,2DAA2D,sFAAsF;AACjJ,+CAA+C,2DAA2D;AAC1G;AACA,4DAA4D,wBAAwB;AACpF,8DAA8D,4CAA4C;AAC1G;AACA;AACA;AACA;AACA;AACA,+DAA+D,wBAAwB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,oFAAoF,yCAAyC,EAAE;AAC/H,gFAAgF,iLAAiL,wBAAwB,EAAE,EAAE;AAC7R,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,4EAA4E;AACxH,wCAAwC,qCAAqC;AAC7E,0CAA0C,4DAA4D;AACtG,8CAA8C,8CAA8C,wBAAwB,+BAA+B,EAAE,EAAE,qHAAqH;AAC5Q,mEAAmE,qDAAqD;AACxH,4CAA4C,wCAAwC;AACpF,8CAA8C,6CAA6C;AAC3F;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClKa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,eAAe,mBAAO,CAAC,EAAqB;AAC5C,oBAAoB,mBAAO,CAAC,GAAwB;AACpD,sBAAsB,mBAAO,CAAC,GAAiB;AAC/C,yBAAyB,mBAAO,CAAC,EAA+B;AAChE,uBAAuB,mBAAO,CAAC,CAAkC;AACjE,wBAAwB,mBAAO,CAAC,EAAmC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,uBAAuB;AAClE,4DAA4D,uBAAuB;AACnF,wCAAwC,uCAAuC;AAC/E;AACA,4CAA4C,gEAAgE;AAC5G,kDAAkD,iIAAiI,wBAAwB,mCAAmC,EAAE,EAAE;AAClP;AACA;AACA;AACA,yBAAyB,EAAE;AAC3B,iDAAiD,uCAAuC;AACxF,uDAAuD,sGAAsG,qCAAqC,EAAE,EAAE;AACtM,yDAAyD,mDAAmD;AAC5G,wCAAwC,gFAAgF;AACxH,oEAAoE,wKAAwK;AAC5O,4CAA4C,uCAAuC;AACnF,mDAAmD,8HAA8H,8DAA8D,wBAAwB,+BAA+B,EAAE,EAAE;AAC1S,qDAAqD,yDAAyD;AAC9G;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA,wDAAwD,wDAAwD;AAChH,+DAA+D,0EAA0E,0BAA0B,yBAAyB,GAAG,EAAE;AACjM;AACA,6CAA6C,mEAAmE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iEAAiE;AACzH,+DAA+D,0EAA0E,0BAA0B,mDAAmD,GAAG,EAAE;AAC3N;AACA,6CAA6C,0FAA0F;AACvI;AACA;AACA,iDAAiD,6FAA6F;AAC9I;AACA;AACA,oDAAoD,oEAAoE;AACxH;AACA;AACA;AACA,oDAAoD,qEAAqE;AACzH;AACA;AACA,2CAA2C,yCAAyC;AACpF;AACA;AACA,2CAA2C,uFAAuF;AAClI,2CAA2C,2GAA2G;AACtJ,6CAA6C,kDAAkD;AAC/F;AACA;AACA;AACA;AACA,yEAAyE,yBAAyB,aAAa;AAC/G;AACA;AACA;AACA,oFAAoF,4BAA4B,EAAE;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB,eAAe,gCAAgC,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yBAAyB,yBAAyB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4BAA4B,+BAA+B;AAC3D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sDAAsD,qCAAqC,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yFAAyF;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjNa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAe;AACrC,eAAe,mBAAO,CAAC,EAAgB;AACvC,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA,2DAA2D,kBAAkB,6BAA6B;AAC1G;AACA;AACA;AACA;AACA;AACA,kCAAkC,mCAAmC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kDAAkD,2BAA2B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iDAAiD;AACpF,aAAa;AACb;AACA,4BAA4B,6BAA6B;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4CAA4C,0CAA0C;AACtF;AACA,2DAA2D,mGAAmG;AAC9J,+CAA+C,4BAA4B;AAC3E;AACA,4DAA4D,wBAAwB;AACpF,2DAA2D,4CAA4C;AACvG;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,wDAAwD,4CAA4C,EAAE;AACtG;AACA,KAAK;AACL;AACA;;;;;;;;AC5Ja;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAe;AACrC,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,oBAAoB,mBAAO,CAAC,GAAwB;AACpD,yBAAyB,mBAAO,CAAC,GAAoB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,4DAA4D;AACpF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,eAAe,gCAAgC;AAClH;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,mCAAmC;AAC3E,0EAA0E,yIAAyI,wBAAwB,aAAa,mDAAmD,EAAE,EAAE,EAAE,EAAE;AACnT,4DAA4D,uCAAuC;AACnG,oEAAoE,yDAAyD;AAC7H,wCAAwC,uCAAuC;AAC/E,+CAA+C,sGAAsG,kDAAkD,EAAE,sCAAsC;AAC/O,+CAA+C,4EAA4E;AAC3H;AACA;AACA,CAAC;AACD;;;;;;;;AC5Ea;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,mCAAmC;AAC3E,4CAA4C,uCAAuC;AACnF;AACA,kDAAkD,0EAA0E,wBAAwB,wBAAwB,EAAE,EAAE,EAAE;AAClL,wCAAwC,uCAAuC;AAC/E,+CAA+C,sGAAsG,uBAAuB,EAAE,EAAE;AAChL,+CAA+C,oEAAoE,mBAAmB,EAAE,EAAE;AAC1I;AACA;AACA,CAAC;AACD;;;;;;;;AC5Ca;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,uBAAuB,mBAAO,CAAC,EAA0B;AACzD,eAAe,mBAAO,CAAC,EAAqB;AAC5C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,mBAAmB;AACvD;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,+CAA+C,gCAAgC,kBAAkB,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,4CAA4C,sCAAsC;AAClF;AACA,kEAAkE;AAClE,2MAA2M;AAC3M,sDAAsD,wHAAwH,gCAAgC,EAAE,EAAE;AAClN,yDAAyD,4HAA4H;AACrL,oDAAoD;AACpD,0LAA0L;AAC1L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oMAAoM;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,2DAA2D;AAC3G,4DAA4D,wBAAwB;AACpF;AACA;AACA;AACA;AACA,+CAA+C,2HAA2H;AAC1K;AACA;AACA,CAAC;AACD;;;;;;;;AC1Ia;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uBAAuB;AAC3D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,mBAAmB;AACvD;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,+CAA+C,2IAA2I;AAC1L,wCAAwC,0CAA0C;AAClF,0CAA0C,0CAA0C;AACpF,mDAAmD,4CAA4C;AAC/F;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,2IAA2I;AAC1L,wCAAwC,kDAAkD,yCAAyC,EAAE;AACrI,0CAA0C,0CAA0C;AACpF,oDAAoD,2CAA2C;AAC/F;AACA;AACA;AACA;AACA;AACA,gDAAgD,oDAAoD;AACpG,4DAA4D,wBAAwB;AACpF;AACA;AACA,+CAA+C,0IAA0I;AACzL;AACA;AACA;AACA;AACA;AACA,gDAAgD,oDAAoD;AACpG,4DAA4D,wBAAwB;AACpF;AACA;AACA,+CAA+C,gJAAgJ;AAC/L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,qBAAqB;AACrB,8CAA8C,oFAAoF,sBAAsB,EAAE,4BAA4B;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6BAA6B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClPa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,cAAc,mBAAO,CAAC,EAAkB;AACxC,aAAa,mBAAO,CAAC,EAAiB;AACtC,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C,uBAAuB,mBAAO,CAAC,EAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oCAAoC;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0CAA0C;AAC/F;AACA,qDAAqD,4EAA4E;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,mDAAmD,0EAA0E;AAC7H,gDAAgD,wDAAwD;AACxG,oDAAoD,mDAAmD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kHAAkH;AACvK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,yFAAyF;AAC9I;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,sBAAsB,EAAE;AACpF;AACA;AACA;AACA,2CAA2C,uDAAuD;AAClG;AACA,8DAA8D,wBAAwB;AACtF,8CAA8C,8CAA8C;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,6BAA6B;AACxE,+DAA+D,yCAAyC,6CAA6C,EAAE;AACvJ,wCAAwC,0EAA0E;AAClH;AACA;AACA,CAAC;AACD;;;;;;;;AC3Ma;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mCAAmC,uDAAuD;AAC1F,SAAS;AACT;AACA,mCAAmC,6DAA6D;AAChG,SAAS;AACT;AACA,mCAAmC,6DAA6D;AAChG,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,yGAAyG;AACtJ,6CAA6C,qGAAqG;AAClJ;AACA;AACA;AACA;AACA;AACA,8CAA8C,gBAAgB;AAC9D,6CAA6C,4EAA4E;AACzH,6CAA6C,qDAAqD;AAClG,6CAA6C,qDAAqD;AAClG;AACA;AACA;AACA;AACA,2CAA2C,uDAAuD;AAClG;AACA,8DAA8D,wBAAwB;AACtF,8CAA8C,8CAA8C;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,oCAAoC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,0CAA0C;AAC3F;AACA,iDAAiD,4EAA4E;AAC7H;AACA;AACA;AACA;AACA,oDAAoD,qEAAqE,kBAAkB,EAAE;AAC7I,gDAAgD,wDAAwD;AACxG,oDAAoD,mDAAmD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,SAAS,6CAA6C,EAAE;AACpG,oDAAoD,iDAAiD,mEAAmE,EAAE;AAC1K;AACA,oDAAoD,8GAA8G;AAClK,qDAAqD,kFAAkF;AACvI;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC/Ja;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,eAAe,mBAAO,CAAC,EAAgB;AACvC,kBAAkB,mBAAO,CAAC,EAAsB;AAChD,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,cAAc,mBAAO,CAAC,EAAkB;AACxC,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,gBAAgB,mBAAO,CAAC,EAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,uCAAuC,kCAAkC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qFAAqF;AAC5H;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,wDAAwD,+CAA+C;AACvG,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,WAAW,iCAAiC,GAAG;AACnF,0CAA0C;AAC1C;AACA,sEAAsE,8CAA8C;AACpH;AACA,aAAa;AACb,SAAS,EAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oCAAoC;AACxE;AACA;AACA,kCAAkC,6BAA6B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA,uBAAuB,8BAA8B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qCAAqC;AACrE;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,uCAAuC;AACrG;AACA;AACA;AACA;AACA,8DAA8D,uCAAuC;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,qEAAqE;AACjH;AACA,yDAAyD,8BAA8B;AACvF,SAAS;AACT;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,8CAA8C;AAC5F,6CAA6C,gEAAgE;AAC7G,wDAAwD,sBAAsB,8BAA8B,EAAE;AAC9G;AACA;AACA,6CAA6C,gGAAgG;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,uBAAuB,kBAAkB,EAAE;AAC3G;AACA;AACA,qDAAqD,2EAA2E;AAChI;AACA;AACA;AACA,+CAA+C,qFAAqF;AACpI,6CAA6C,8FAA8F;AAC3I;AACA,0CAA0C,uDAAuD;AACjG,yCAAyC,wFAAwF;AACjI,sCAAsC,uEAAuE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,yCAAyC,sBAAsB,EAAE;AACpI,0DAA0D,aAAa;AACvE;AACA;AACA,wDAAwD,0CAA0C;AAClG;AACA;AACA,CAAC;AACD;;;;;;;;AChUa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,cAAc,mBAAO,CAAC,EAAe;AACrC,oBAAoB,mBAAO,CAAC,EAA0B;AACtD;AACA;AACA;AACA,oCAAoC;AACpC,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iCAAiC;AACnE;AACA;AACA;AACA;AACA,mDAAmD,WAAW,qBAAqB;AACnF;AACA;AACA;AACA;AACA;AACA,+BAA+B,iCAAiC;AAChE;AACA;AACA;AACA;AACA,mDAAmD,WAAW,eAAe;AAC7E;AACA;AACA,CAAC,4EAA4E;AAC7E;AACA;AACA;AACA,yDAAyD,+BAA+B,EAAE;AAC1F,wDAAwD,+BAA+B,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,iCAAiC;AACjC;AACA,mDAAmD,gDAAgD,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA,6DAA6D,6BAA6B;AAC1F;AACA;AACA;AACA;AACA;AACA,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8EAA8E;AAChH;AACA;AACA;AACA;AACA,6DAA6D,iCAAiC,EAAE;AAChG,yDAAyD,yBAAyB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;;;;;;;ACjKa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mKAAmK;AAClN,yCAAyC,qDAAqD;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,yKAAyK;AACxN,yCAAyC,qDAAqD;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uEAAuE;AACpH,0CAA0C,6BAA6B;AACvE;AACA,2CAA2C,2DAA2D;AACtG;AACA,sDAAsD,yBAAyB;AAC/E,aAAa;AACb;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,sDAAsD;AAC9F;AACA;AACA,wEAAwE,mHAAmH;AAC3L,iDAAiD,kDAAkD;AACnG;AACA,+CAA+C,yHAAyH;AACxK,iDAAiD,oDAAoD;AACrG;AACA,+CAA+C,+GAA+G;AAC9J,iDAAiD,wDAAwD;AACzG,+CAA+C,iHAAiH;AAChK,iDAAiD,yDAAyD;AAC1G,+CAA+C,wHAAwH;AACvK,iDAAiD,uDAAuD;AACxG,+CAA+C,0HAA0H;AACzK,iDAAiD,sDAAsD;AACvG;AACA,+CAA+C,0HAA0H;AACzK,iDAAiD,sDAAsD;AACvG;AACA,+CAA+C,oHAAoH;AACnK,iDAAiD,kDAAkD;AACnG;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC/Ea;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,cAAc,mBAAO,CAAC,EAAO;AAC7B,eAAe,mBAAO,CAAC,EAAW;AAClC,aAAa,mBAAO,CAAC,GAAc;AACnC,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,gBAAgB,mBAAO,CAAC,EAAoB;AAC5C,aAAa,mBAAO,CAAC,EAAiB;AACtC,mBAAmB,mBAAO,CAAC,GAAsB;AACjD,uBAAuB,mBAAO,CAAC,EAA0B;AACzD,yBAAyB,mBAAO,CAAC,GAA4B;AAC7D,eAAe,mBAAO,CAAC,EAAqB;AAC5C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,kBAAkB,mBAAO,CAAC,GAAsB;AAChD,gBAAgB,mBAAO,CAAC,GAAW;AACnC,wBAAwB,mBAAO,CAAC,GAAmB;AACnD,yBAAyB,mBAAO,CAAC,EAAoB;AACrD,eAAe,mBAAO,CAAC,GAAqB;AAC5C;AACA,uBAAuB,mBAAO,CAAC,GAAkC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,qBAAqB;AACzF,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,wBAAwB;AACxF;AACA,aAAa;AACb;AACA;AACA;AACA,8CAA8C,2BAA2B;AACzE;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iIAAiI;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uBAAuB,EAAE;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,wBAAwB,qBAAqB,EAAE,EAAE;AAC3G;AACA;AACA;AACA;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,2DAA2D;AAClI,sCAAsC,iFAAiF;AACvH;AACA;AACA,sCAAsC,oFAAoF;AAC1H;AACA;AACA,gDAAgD,mBAAmB;AACnE,kDAAkD,kBAAkB;AACpE,iDAAiD,oBAAoB;AACrE,wEAAwE,oCAAoC;AAC5G;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yCAAyC,0DAA0D;AACnG,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C,aAAa,+BAA+B;AAC5C;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iCAAiC,EAAE;AAC3F;AACA,8DAA8D,oCAAoC,EAAE;AACpG;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;;;;;ACzUA,kD;;;;;;;ACAa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAU;AACnC,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,cAAc,mBAAO,CAAC,EAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU,4BAA4B,EAAE,EAAE;AACvF;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6GAA6G,+BAA+B,cAAc;AACtM,2CAA2C,yBAAyB,8BAA8B,EAAE;AACpG;AACA;AACA,iBAAiB,yBAAyB;AAC1C,2CAA2C,+HAA+H;AAC1K,4CAA4C,0CAA0C;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9Na;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,kBAAkB,mBAAO,CAAC,EAAsB;AAChD,kBAAkB,mBAAO,CAAC,GAAsB;AAChD,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D,qBAAqB,mBAAO,CAAC,GAAyB;AACtD,yBAAyB,mBAAO,CAAC,EAAoB;AACrD,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,GAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,+BAA+B;AAC9E;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,WAAW,yCAAyC,GAAG;AAC3F,0CAA0C;AAC1C;AACA,0DAA0D,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS,EAAE;AACX;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,gBAAgB;AAChB;AACA;AACA;AACA,qEAAqE;AACrE;AACA,yCAAyC,2BAA2B;AACpE,aAAa,2CAA2C;AACxD,uFAAuF,yDAAyD,8CAA8C;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,6BAA6B;AAChH;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,6BAA6B;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,2CAA2C,iCAAiC,EAAE;AAChI,4DAA4D,qBAAqB,6BAA6B,EAAE,kPAAkP;AAClW;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,oBAAoB,0BAA0B,EAAE,wBAAwB;AACpH;AACA,wCAAwC,kCAAkC;AAC1E,+DAA+D;AAC/D;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB,EAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9Oa;AACb,8CAA8C,cAAc;AAC5D,kBAAkB,mBAAO,CAAC,GAAa;AACvC;;;;;;;;ACHa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAwB;AACjD,cAAc,mBAAO,CAAC,EAAuB;AAC7C,oBAAoB,mBAAO,CAAC,EAA6B;AACzD,eAAe,mBAAO,CAAC,EAAwB;AAC/C,gBAAgB,mBAAO,CAAC,EAAyB;AACjD,oBAAoB,mBAAO,CAAC,GAA2B;AACvD,kBAAkB,mBAAO,CAAC,GAAa;AACvC,aAAa,mBAAO,CAAC,GAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,2CAA2C;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,yDAAyD,WAAW,uCAAuC,GAAG,EAAE;AAC7J;AACA;AACA,6CAA6C,yDAAyD,WAAW,sDAAsD,GAAG,EAAE;AAC5K;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,WAAW,2DAA2D;AAC9I,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB;AACpE,wCAAwC,qCAAqC;AAC7E,4CAA4C,2CAA2C;AACvF,kDAAkD,uKAAuK;AACzN,4EAA4E,6CAA6C;AACzH,sDAAsD,6FAA6F;AACnJ;AACA,4DAA4D,yBAAyB;AACrF,kEAAkE,wRAAwR,kCAAkC,sCAAsC;AACla,4DAA4D,wBAAwB;AACpF;AACA;AACA;AACA;AACA,yEAAyE,iCAAiC,EAAE;AAC5G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,WAAW,qBAAqB;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4CAA4C;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,oFAAoF,WAAW,qGAAqG;AACpM,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,yDAAyD,WAAW,qDAAqD,GAAG,EAAE;AACtL;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,WAAW,+BAA+B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrSa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B;AACA,0CAA0C,6CAA6C,UAAU,mBAAmB,GAAG,EAAE;AACzH;;;;;;;;ACLa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,wBAAwB,mBAAO,CAAC,GAAoB;AACpD,kBAAkB,mBAAO,CAAC,GAA2C;AACrE,oBAAoB,mBAAO,CAAC,GAA6C;AACzE,wBAAwB,mBAAO,CAAC,GAA0C;AAC1E,0BAA0B,mBAAO,CAAC,GAAyC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,UAAU,4BAA4B,EAAE,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,+CAA+C;AACjI,4CAA4C,2CAA2C;AACvF,wCAAwC,kCAAkC;AAC1E,4CAA4C,2EAA2E,2CAA2C,2DAA2D;AAC7N,0CAA0C,mEAAmE;AAC7G,gDAAgD,6CAA6C;AAC7F,oDAAoD,8CAA8C;AAClG,iDAAiD,oCAAoC;AACrF,qEAAqE,kDAAkD;AACvH,mFAAmF,4EAA4E;AAC/J,mDAAmD,uLAAuL;AAC1O,iGAAiG,4DAA4D;AAC7J;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,qCAAqC,6BAA6B,qDAAqD,2CAA2C,gBAAgB,EAAE;AAChO;AACA;AACA,CAAC;AACD;;;;;;;ACvFA,qCAAqC,4gB;;;;;;ACArC,qCAAqC,oY;;;;;;ACArC,qCAAqC,41D;;;;;;ACArC,qCAAqC,4/E;;;;;;;ACAxB;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,iBAAiB,mBAAO,CAAC,EAAqB;AAC9C,cAAc,mBAAO,CAAC,EAAoB;AAC1C,eAAe,mBAAO,CAAC,EAAqB;AAC5C,wBAAwB,mBAAO,CAAC,GAA4B;AAC5D,oBAAoB,mBAAO,CAAC,GAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,sCAAsC;AAClH,6EAA6E,6BAA6B;AAC1G;AACA;AACA;AACA,2CAA2C,qGAAqG;AAChJ,yCAAyC,gFAAgF;AACzH,8CAA8C,uKAAuK,uCAAuC,EAAE,EAAE;AAChQ,iDAAiD,kDAAkD;AACnG,8CAA8C,mLAAmL,2CAA2C,EAAE,EAAE;AAChR,iDAAiD,qDAAqD;AACtG,8CAA8C,0KAA0K,wCAAwC,EAAE,EAAE;AACpQ,iDAAiD,uDAAuD;AACxG,wCAAwC,0BAA0B;AAClE;AACA,wCAAwC,yEAAyE;AACjH;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6CAA6C,qBAAqB;AAClE;AACA,+DAA+D,+JAA+J;AAC9N;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,qCAAqC,mBAAmB,EAAE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,qFAAqF;AAC7I,6CAA6C,kDAAkD;AAC/F;AACA,4CAA4C,uBAAuB;AACnE,wCAAwC,qCAAqC;AAC7E,4CAA4C,2CAA2C;AACvF,kDAAkD,wJAAwJ;AAC1M;AACA,4CAA4C,wCAAwC;AACpF,gDAAgD,sDAAsD;AACtG,sDAAsD,qGAAqG,yDAAyD,EAAE,EAAE;AACxN,yDAAyD,kDAAkD;AAC3G,sDAAsD,yGAAyG,6DAA6D,EAAE,EAAE;AAChO,yDAAyD,qDAAqD;AAC9G,sDAAsD,sGAAsG,0DAA0D,EAAE,EAAE;AAC1N,yDAAyD,uDAAuD;AAChH;AACA,4DAA4D,mBAAmB;AAC/E,wCAAwC,kCAAkC;AAC1E;AACA,4CAA4C,kCAAkC;AAC9E,+CAA+C,kDAAkD;AACjG;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,yCAAyC,EAAE;AACrH,kFAAkF,yCAAyC,EAAE;AAC7H;AACA;AACA,SAAS;AACT,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,2BAA2B,mFAAmF;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uGAAuG;AACvI,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gCAAgC,sFAAsF,EAAE;AACxH,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,yBAAyB;AAC1E;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,2DAA2D,8BAA8B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,oJAAoJ;AAC9M;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,uCAAuC,mCAAmC;AAC1E,qCAAqC,kCAAkC;AACvE,sCAAsC,iCAAiC;AACvE;AACA,qCAAqC,qBAAqB;AAC1D;AACA,6DAA6D,6DAA6D;AAC1H;AACA;AACA;;;;;;;;AC3Pa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,kBAAkB,mBAAO,CAAC,GAAc;AACxC,sBAAsB,mBAAO,CAAC,GAAkB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wFAAwF;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,8SAA8S;AACtX,SAAS;AACT,4DAA4D,iHAAiH;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AClEa;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,+GAA+G;AACxJ,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,WAAW,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,4BAA4B,iBAAiB;AAC7C;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iDAAiD,EAAE;AACzG,4BAA4B,yDAAyD;AACrF;AACA;AACA;AACA;AACA;AACA,4EAA4E,+BAA+B,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,4BAA4B,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6IAA6I,gCAAgC,EAAE,EAAE;AAC7N;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qCAAqC,EAAE;AAChF;AACA;AACA;AACA,6DAA6D,qCAAqC,iDAAiD,EAAE,EAAE;AACvJ,wEAAwE,uCAAuC,EAAE;AACjH,yEAAyE,0CAA0C,EAAE;AACrH;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mDAAmD;AAC3G;AACA;AACA,wDAAwD,sDAAsD;AAC9G;AACA;AACA;AACA,yDAAyD,kDAAkD;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,qCAAqC,EAAE;AACzF,uBAAuB,yDAAyD;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,6DAA6D;AAC9G;AACA;AACA;AACA;AACA,kDAAkD,8CAA8C;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,mBAAmB,EAAE;AACnF;AACA;AACA;AACA,CAAC;;;;;;;;AC/TY;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,YAAY,mBAAO,CAAC,EAAO;AAC3B,wBAAwB,mBAAO,CAAC,GAAmB;AACnD;AACA;AACA;AACA;AACA,CAAC,uDAAuD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB,EAAE;AAClD;AACA;AACA,KAAK;AACL;AACA,0BAA0B,qBAAqB,EAAE;AACjD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sGAAsG,sCAAsC,EAAE,EAAE;AAC3L;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,eAAe,IAAI;AAC1D;AACA;AACA,2CAA2C,+NAA+N,iCAAiC,EAAE,gBAAgB;AAC7T,wCAAwC,oCAAoC;AAC5E,sDAAsD,6DAA6D,+BAA+B,EAAE,wBAAwB,kDAAkD,EAAE,EAAE;AAClO,4CAA4C,mCAAmC;AAC/E,gDAAgD,sDAAsD;AACtG,0FAA0F;AAC1F,oCAAoC,iBAAiB;AACrD;AACA,iBAAiB,oCAAoC,2BAA2B,EAAE;AAClF,oCAAoC,kBAAkB;AACtD;AACA,iBAAiB,EAAE;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;ACxEA,qCAAqC,gqb;;;;;;;ACAxB;AACb,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,CAAO;AAC7B,0BAA0B,mBAAO,CAAC,EAA2C;AAC7E;AACA,eAAe,mBAAO,CAAC,EAAuB;AAC9C;AACA,qBAAqB,mBAAO,CAAC,EAAyB;AACtD,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,qBAAqB,mBAAO,CAAC,EAA2B;AACxD,qBAAqB,mBAAO,CAAC,EAAiC;AAC9D,qBAAqB,mBAAO,CAAC,EAAmC;AAChE,qBAAqB,mBAAO,CAAC,EAA6B;AAC1D,qBAAqB,mBAAO,CAAC,GAAmC;AAChE,qBAAqB,mBAAO,CAAC,GAAiC;AAC9D,yBAAyB,mBAAO,CAAC,EAAsC;AACvE;AACA,eAAe,mBAAO,CAAC,GAA4B;AACnD;AACA;AACA;AACA;AACA","file":"ontodia.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"whatwg-fetch\"), require(\"react\"), require(\"react-dom\"), require(\"d3-color\"), require(\"lodash\"), require(\"rdf-ext\"), require(\"n3\"), require(\"webcola\"), require(\"file-saverjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"whatwg-fetch\", \"react\", \"react-dom\", \"d3-color\", \"lodash\", \"rdf-ext\", \"n3\", \"webcola\", \"file-saverjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Ontodia\"] = factory(require(\"whatwg-fetch\"), require(\"react\"), require(\"react-dom\"), require(\"d3-color\"), require(\"lodash\"), require(\"rdf-ext\"), require(\"n3\"), require(\"webcola\"), require(\"file-saverjs\"));\n\telse\n\t\troot[\"Ontodia\"] = factory(root[\"whatwg-fetch\"], root[\"react\"], root[\"react-dom\"], root[\"d3-color\"], root[\"lodash\"], root[\"rdf-ext\"], root[\"n3\"], root[\"webcola\"], root[\"file-saverjs\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__40__, __WEBPACK_EXTERNAL_MODULE__45__, __WEBPACK_EXTERNAL_MODULE__58__, __WEBPACK_EXTERNAL_MODULE__59__, __WEBPACK_EXTERNAL_MODULE__66__, __WEBPACK_EXTERNAL_MODULE__93__, __WEBPACK_EXTERNAL_MODULE__100__, __WEBPACK_EXTERNAL_MODULE__106__, __WEBPACK_EXTERNAL_MODULE__134__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nrequire('../styles/main.scss');\nrequire('whatwg-fetch');\nrequire('es6-promise/auto');\nrequire('./ontodia/viewUtils/polyfills');\ntslib_1.__exportStar(require(\"./ontodia/customization/templates\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/model\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/demo/provider\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/rdf/rdfDataProvider\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/sparql/sparqlDataProvider\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/composite/composite\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/sparql/sparqlDataProviderSettings\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/sparql/graphBuilder\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/data/sparql/sparqlGraphBuilder\"), exports);\nvar schema_1 = require(\"./ontodia/data/schema\");\nexports.DIAGRAM_CONTEXT_URL_V1 = schema_1.DIAGRAM_CONTEXT_URL_V1;\nvar commands_1 = require(\"./ontodia/diagram/commands\");\nexports.RestoreGeometry = commands_1.RestoreGeometry;\nexports.setElementExpanded = commands_1.setElementExpanded;\nexports.setElementData = commands_1.setElementData;\nexports.setLinkData = commands_1.setLinkData;\nvar elements_1 = require(\"./ontodia/diagram/elements\");\nexports.Element = elements_1.Element;\nexports.Link = elements_1.Link;\nexports.LinkVertex = elements_1.LinkVertex;\nexports.LinkDirection = elements_1.LinkDirection;\nvar embeddedLayer_1 = require(\"./ontodia/diagram/embeddedLayer\");\nexports.EmbeddedLayer = embeddedLayer_1.EmbeddedLayer;\ntslib_1.__exportStar(require(\"./ontodia/diagram/geometry\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/diagram/history\"), exports);\nvar model_1 = require(\"./ontodia/diagram/model\");\nexports.DiagramModel = model_1.DiagramModel;\ntslib_1.__exportStar(require(\"./ontodia/diagram/view\"), exports);\nvar paperArea_1 = require(\"./ontodia/diagram/paperArea\");\nexports.getContentFittingBox = paperArea_1.getContentFittingBox;\ntslib_1.__exportStar(require(\"./ontodia/editor/asyncModel\"), exports);\nvar authoredEntity_1 = require(\"./ontodia/editor/authoredEntity\");\nexports.AuthoredEntity = authoredEntity_1.AuthoredEntity;\ntslib_1.__exportStar(require(\"./ontodia/editor/authoringState\"), exports);\nvar editorController_1 = require(\"./ontodia/editor/editorController\");\nexports.EditorController = editorController_1.EditorController;\nvar validation_1 = require(\"./ontodia/editor/validation\");\nexports.ValidationState = validation_1.ValidationState;\nvar serializedDiagram_1 = require(\"./ontodia/editor/serializedDiagram\");\nexports.convertToSerializedDiagram = serializedDiagram_1.convertToSerializedDiagram;\nexports.makeSerializedDiagram = serializedDiagram_1.makeSerializedDiagram;\nexports.makeLayoutData = serializedDiagram_1.makeLayoutData;\nvar layout_1 = require(\"./ontodia/viewUtils/layout\");\nexports.calculateLayout = layout_1.calculateLayout;\nexports.removeOverlaps = layout_1.removeOverlaps;\nexports.applyLayout = layout_1.applyLayout;\nexports.forceLayout = layout_1.forceLayout;\nvar async_1 = require(\"./ontodia/viewUtils/async\");\nexports.Cancellation = async_1.Cancellation;\ntslib_1.__exportStar(require(\"./ontodia/viewUtils/events\"), exports);\nvar toolbar_1 = require(\"./ontodia/workspace/toolbar\");\nexports.DefaultToolbar = toolbar_1.DefaultToolbar;\nvar workspace_1 = require(\"./ontodia/workspace/workspace\");\nexports.Workspace = workspace_1.Workspace;\nexports.renderTo = workspace_1.renderTo;\nvar workspaceContext_1 = require(\"./ontodia/workspace/workspaceContext\");\nexports.WorkspaceEventKey = workspaceContext_1.WorkspaceEventKey;\nvar draggableHandle_1 = require(\"./ontodia/workspace/draggableHandle\");\nexports.DraggableHandle = draggableHandle_1.DraggableHandle;\ntslib_1.__exportStar(require(\"./ontodia/workspace/layout/layout\"), exports);\nvar InternalApi = require(\"./internalApi\");\nexports.InternalApi = InternalApi;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./main.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./main.scss\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./main.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var escape = require(\"../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ontodia-spinner__arrow {\\n  animation-name: ontodia-spinner-rotation;\\n  animation-duration: 1.5s;\\n  animation-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1);\\n  animation-iteration-count: infinite; }\\n\\n.ontodia-spinner[data-error='true'] .ontodia-spinner__arrow {\\n  animation-iteration-count: 1; }\\n\\n@keyframes ontodia-spinner-rotation {\\n  0% {\\n    transform: rotate(0deg); }\\n  100% {\\n    transform: rotate(360deg); } }\\n\\n.clearfix:before, .clearfix:after {\\n  display: table;\\n  content: \\\"\\\"; }\\n\\n.clearfix:after {\\n  clear: both; }\\n\\n.ontodia-label {\\n  display: inline-block;\\n  max-width: 100%;\\n  margin-bottom: 5px;\\n  font-weight: 700; }\\n\\n.ontodia-btn {\\n  display: inline-block;\\n  padding: 6px 12px;\\n  margin-bottom: 0;\\n  font-size: 14px;\\n  font-weight: 400;\\n  line-height: 1.42857143;\\n  text-align: center;\\n  white-space: nowrap;\\n  vertical-align: middle;\\n  touch-action: manipulation;\\n  cursor: pointer;\\n  user-select: none;\\n  background-image: none;\\n  border: 1px solid transparent;\\n  text-transform: none;\\n  transition: background-color 0.3s; }\\n  .ontodia-btn[disabled] {\\n    cursor: not-allowed;\\n    opacity: .65; }\\n\\n.ontodia-btn-default {\\n  background-color: #fff;\\n  border-color: #ccc;\\n  color: #333; }\\n  .ontodia-btn-default:hover {\\n    background-color: #e0e0e0; }\\n  .ontodia-btn-default.active {\\n    background-color: #e0e0e0;\\n    border-color: #dbdbdb; }\\n  .ontodia-btn-default.active:hover {\\n    background-color: #d4d4d4;\\n    border-color: #8c8c8c; }\\n  .ontodia-btn-default[disabled], .ontodia-btn-default[disabled]:hover, .ontodia-btn-default[disabled].active, .ontodia-btn-default[disabled].active:hover {\\n    background-color: #e0e0e0; }\\n\\n.ontodia-btn-primary {\\n  color: white;\\n  background-color: #337ab7;\\n  border-color: #245580; }\\n  .ontodia-btn-primary:hover, .ontodia-btn-primary:focus, .ontodia-btn-primary:active {\\n    background-color: #265a88; }\\n  .ontodia-btn-primary:hover, .ontodia-btn-primary:focus {\\n    border-color: #204d74; }\\n  .ontodia-btn-primary.active {\\n    border-color: #245580; }\\n  .ontodia-btn-primary[disabled], .ontodia-btn-primary[disabled]:hover, .ontodia-btn-primary[disabled]:focus, .ontodia-btn-primary[disabled]:active, .ontodia-btn-primary[disabled].active {\\n    background-color: #265a88; }\\n\\n.ontodia-btn-success {\\n  background-color: #5cb85c;\\n  border-color: #5cb85c;\\n  color: #fff;\\n  transition: 0.3s; }\\n  .ontodia-btn-success:hover {\\n    background: #47a447; }\\n\\n.ontodia-btn-danger {\\n  background-color: #c9302c;\\n  border-color: #c9302c;\\n  color: #fff;\\n  transition: 0.3s; }\\n  .ontodia-btn-danger:hover {\\n    background: #a82825; }\\n\\n.ontodia-btn-group {\\n  position: relative;\\n  display: inline-block;\\n  vertical-align: middle; }\\n  .ontodia-btn-group > .ontodia-btn, .ontodia-btn-group > .ontodia-btn-group {\\n    position: relative;\\n    float: left; }\\n  .ontodia-btn-group > .ontodia-btn:hover,\\n  .ontodia-btn-group > .ontodia-btn:focus,\\n  .ontodia-btn-group > .ontodia-btn.active,\\n  .ontodia-btn-group > .ontodia-btn.active:hover {\\n    z-index: 2; }\\n  .ontodia-btn-group .ontodia-btn + .ontodia-btn,\\n  .ontodia-btn-group .ontodia-btn + .ontodia-btn-group,\\n  .ontodia-btn-group .ontodia-btn-group + .ontodia-btn,\\n  .ontodia-btn-group .ontodia-btn-group + .ontodia-btn-group {\\n    margin-left: -1px; }\\n  .ontodia-btn-group > .ontodia-btn:first-child {\\n    margin-left: 0; }\\n  .ontodia-btn-group-sm > .ontodia-btn {\\n    font-size: 12px;\\n    line-height: 1.5;\\n    padding: 5px 10px; }\\n  .ontodia-btn-group-xs > .ontodia-btn {\\n    font-size: 12px;\\n    line-height: 1.5;\\n    padding: 1px 5px; }\\n\\n.ontodia-form-control {\\n  display: block;\\n  width: 100%;\\n  height: 34px;\\n  margin: 0;\\n  padding: 6px 12px;\\n  font-size: 14px;\\n  line-height: 1.42857143;\\n  color: #555;\\n  background: #fff;\\n  border: 1px solid #ccc;\\n  transition: border-color ease-in-out .15s; }\\n  .ontodia-form-control:focus {\\n    border-color: #66afe9;\\n    outline: 0; }\\n  .ontodia-form-control:disabled {\\n    background-color: #eee;\\n    cursor: not-allowed;\\n    opacity: 0.6; }\\n\\n.ontodia-input-group {\\n  position: relative;\\n  display: table;\\n  border-collapse: separate; }\\n  .ontodia-input-group .ontodia-form-control {\\n    display: table-cell;\\n    position: relative;\\n    z-index: 2;\\n    float: left;\\n    width: 100%;\\n    margin-bottom: 0; }\\n  .ontodia-input-group .ontodia-form-control:first-child {\\n    border-top-right-radius: 0;\\n    border-bottom-right-radius: 0; }\\n\\n.ontodia-input-group-btn {\\n  display: table-cell;\\n  width: 1%;\\n  vertical-align: middle;\\n  position: relative;\\n  font-size: 0;\\n  white-space: nowrap; }\\n  .ontodia-input-group-btn:last-child > .ontodia-btn {\\n    border-top-left-radius: 0;\\n    border-bottom-left-radius: 0;\\n    z-index: 2;\\n    margin-left: -1px; }\\n\\n.ontodia-list-group {\\n  margin: 0;\\n  padding: 0; }\\n\\n.ontodia-list-group-item:last-child {\\n  margin-bottom: 0; }\\n\\n.ontodia-list-group-item {\\n  position: relative;\\n  display: block;\\n  padding: 10px 15px;\\n  margin-bottom: -1px;\\n  background-color: #fff;\\n  border: 1px solid #ddd; }\\n\\n.ontodia-badge {\\n  display: inline-block;\\n  min-width: 10px;\\n  font-size: 12px;\\n  font-weight: 700;\\n  line-height: 1;\\n  color: white;\\n  text-align: center;\\n  white-space: nowrap;\\n  vertical-align: middle;\\n  background-color: #777777;\\n  padding: 3px 7px;\\n  border-radius: 10px; }\\n\\n.ontodia-overlayed-element {\\n  cursor: move;\\n  outline: none; }\\n\\n.ontodia-overlayed-element,\\n.ontodia-exported-element {\\n  box-sizing: border-box;\\n  color: black;\\n  font-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif;\\n  font-size: 14px;\\n  line-height: 1.42857143; }\\n  .ontodia-overlayed-element img,\\n  .ontodia-exported-element img {\\n    vertical-align: middle; }\\n\\n.ontodia-exported-element *, .ontodia-exported-element *:before, .ontodia-exported-element *:after {\\n  box-sizing: inherit; }\\n\\n.ontodia-overlayed-element--blurred {\\n  filter: grayscale(100%);\\n  opacity: 0.5; }\\n\\n.ontodia-link__wrap {\\n  stroke-width: 12px;\\n  stroke-linejoin: round;\\n  stroke-linecap: round;\\n  stroke: transparent;\\n  fill: none; }\\n\\n.ontodia-link:hover .ontodia-link__wrap {\\n  stroke: rgba(140, 140, 140, 0.44); }\\n\\n.ontodia-link__vertex {\\n  cursor: all-scroll; }\\n\\n.ontodia-link:not(:hover) .ontodia-link__vertex {\\n  fill: transparent; }\\n\\n.ontodia-link__vertex-tools {\\n  opacity: 0;\\n  cursor: pointer; }\\n  .ontodia-link__vertex-tools > circle {\\n    fill: gray; }\\n  .ontodia-link__vertex-tools > path {\\n    stroke: white; }\\n  .ontodia-link__vertex-tools:hover > circle {\\n    fill: black; }\\n\\n.ontodia-link:hover .ontodia-link__vertex-tools {\\n  opacity: 0.8; }\\n\\n.ontodia-link--blurred {\\n  opacity: 0.5; }\\n\\n.ontodia-paper-area {\\n  flex: auto;\\n  width: 0;\\n  display: flex;\\n  position: relative;\\n  cursor: default;\\n  background: #fff; }\\n  .ontodia-paper-area__area {\\n    flex: auto;\\n    overflow: hidden; }\\n  .ontodia-paper-area__widgets {\\n    position: absolute;\\n    left: 0;\\n    top: 0; }\\n  .ontodia-paper-area__watermark {\\n    background-size: cover;\\n    width: 8%;\\n    max-width: 130px;\\n    min-width: 50px;\\n    position: absolute;\\n    top: 15px;\\n    right: 25px;\\n    cursor: pointer;\\n    opacity: 0.3;\\n    transition: opacity 0.3s; }\\n    .ontodia-paper-area__watermark:hover {\\n      opacity: 0.5; }\\n  .ontodia-paper-area--hide-scrollbars {\\n    overflow: hidden; }\\n\\n.ontodia-paper {\\n  position: relative; }\\n\\n.ontodia-exported-watermark {\\n  opacity: 0.3;\\n  transition: opacity 0.3s; }\\n\\n.ontodia-paper-area--animated .ontodia-overlayed-element {\\n  transition: transform 0.5s ease-in-out; }\\n\\n.ontodia-paper-area--animated .ontodia-link-layer, .ontodia-paper-area--animated .ontodia-paper-area__widgets {\\n  transition: none;\\n  opacity: 0; }\\n\\n.ontodia-link-layer, .ontodia-paper-area__widgets {\\n  transition: opacity 0.5s ease-in-out; }\\n\\n.ontodia-loading-widget {\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  margin: auto;\\n  position: absolute;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(255, 255, 255, 0.9);\\n  z-index: 10; }\\n\\n.ontodia-authoring-state__item-error {\\n  align-self: flex-end;\\n  margin: 0px 5px;\\n  display: flex;\\n  align-items: center;\\n  cursor: help; }\\n\\n.ontodia-authoring-state__item-error-icon {\\n  background: url(\" + escape(require(\"../images/font-awesome/exclamation-triangle.svg\")) + \");\\n  height: 15px;\\n  width: 17px; }\\n\\n.ontodia-authoring-state__state-label {\\n  font-weight: bold;\\n  margin-right: 5px; }\\n\\n.ontodia-authoring-state__state-cancel {\\n  color: #3f87a6;\\n  cursor: pointer; }\\n  .ontodia-authoring-state__state-cancel:hover {\\n    text-decoration: underline; }\\n\\n.ontodia-authoring-state__state-indicator {\\n  position: absolute; }\\n\\n.ontodia-authoring-state__state-indicator-container {\\n  position: relative; }\\n\\n.ontodia-authoring-state__state-indicator-body {\\n  position: absolute;\\n  white-space: nowrap;\\n  display: flex;\\n  align-items: center;\\n  bottom: 0;\\n  background: rgba(255, 255, 255, 0.7);\\n  border-radius: 5px; }\\n\\n.ontodia-authoring-tools {\\n  margin: 10px; }\\n  .ontodia-authoring-tools__create-entity {\\n    display: flex;\\n    flex-wrap: wrap;\\n    align-items: center;\\n    justify-content: center;\\n    width: 100%;\\n    white-space: normal; }\\n  .ontodia-authoring-tools__type-label {\\n    color: black;\\n    border: black 1px dashed;\\n    background: #ffd221;\\n    padding: 0 .5em 0 .5em;\\n    word-wrap: break-word; }\\n\\n.ontodia-class-tree {\\n  flex: auto;\\n  display: flex;\\n  flex-direction: column; }\\n  .ontodia-class-tree__filter {\\n    flex-shrink: 0;\\n    margin: 10px 0 10px 0; }\\n  .ontodia-class-tree__filter-group {\\n    margin-left: 10px;\\n    margin-right: 10px; }\\n  .ontodia-class-tree__only-creatable {\\n    display: block;\\n    margin-top: 5px; }\\n  .ontodia-class-tree__tree {\\n    border-top: 1px solid #dddddd; }\\n  .ontodia-class-tree__spinner {\\n    align-self: center;\\n    /* center vertically in flexbox */\\n    margin: auto; }\\n\\n.ontodia-class-leaf {\\n  margin: 1px 0; }\\n  .ontodia-class-leaf__row {\\n    display: flex;\\n    align-items: center;\\n    white-space: nowrap;\\n    user-select: none; }\\n    .ontodia-class-leaf__row > * {\\n      flex-shrink: 0; }\\n  .ontodia-class-leaf__body {\\n    display: flex;\\n    align-items: center;\\n    text-decoration: none;\\n    font-size: 15px;\\n    padding: 1px;\\n    border: 1px solid;\\n    border-color: transparent; }\\n    .ontodia-class-leaf__body:hover {\\n      background: #dcebff91;\\n      border-color: #ccefff;\\n      cursor: pointer; }\\n    .ontodia-class-leaf__body--selected {\\n      background-color: #beebff;\\n      border-color: #8edcff; }\\n  .ontodia-class-leaf__icon-container {\\n    height: 20px; }\\n  .ontodia-class-leaf__icon {\\n    display: block;\\n    height: 100%; }\\n  .ontodia-class-leaf__label {\\n    margin-left: 5px;\\n    color: black; }\\n  .ontodia-class-leaf__highlighted-term {\\n    font-weight: bold; }\\n  .ontodia-class-leaf__count {\\n    margin-left: 5px; }\\n  .ontodia-class-leaf__children {\\n    margin-left: 20px; }\\n  .ontodia-class-leaf__no-toggle {\\n    display: inline-block;\\n    width: 22px;\\n    height: 22px; }\\n  .ontodia-class-leaf__toggle {\\n    display: inline-block;\\n    width: 12px;\\n    height: 12px;\\n    margin: 5px; }\\n    .ontodia-class-leaf__toggle:hover:not(:empty) {\\n      background: #dcebff91;\\n      cursor: pointer; }\\n  .ontodia-class-leaf__toggle-icon {\\n    display: block;\\n    height: 100%; }\\n  .ontodia-class-leaf__create {\\n    margin-left: 5px; }\\n    .ontodia-class-leaf__create > button {\\n      cursor: move; }\\n\\n.ontodia-connections-menu {\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column; }\\n  .ontodia-connections-menu__sort-switch {\\n    display: none; }\\n  .ontodia-connections-menu__sort-switch:checked + .ontodia-connections-menu__sort-switch-label {\\n    color: #337ab7;\\n    opacity: 1; }\\n  .ontodia-connections-menu__sort-switch-label {\\n    cursor: pointer;\\n    display: block;\\n    margin: 0;\\n    opacity: 0.4;\\n    text-align: center; }\\n    .ontodia-connections-menu__sort-switch-label:hover {\\n      opacity: 1; }\\n  .ontodia-connections-menu__search-line-input {\\n    flex: 1 1 100%; }\\n\\n.ontodia-connections-menu_bread-crumbs {\\n  padding: 10px;\\n  padding-bottom: 0px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  height: 27px;\\n  min-height: 27px;\\n  flex-grow: 0; }\\n\\n.ontodia-connections-menu__title-label {\\n  position: absolute;\\n  top: -11px;\\n  left: 10px;\\n  background: white;\\n  padding-left: 3px;\\n  padding-right: 3px;\\n  border-radius: 6px; }\\n\\n.ontodia-connections-menu_search-line {\\n  padding: 10px;\\n  display: flex;\\n  align-items: center;\\n  flex: 0 0 auto; }\\n\\n.ontodia-connections-menu_search-line-sort-switches {\\n  flex: 0 0 20px;\\n  margin-left: 10px; }\\n\\n.ontodia-connections-menu_links-list {\\n  padding: 5px;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n  border-top: 1px solid #dbdbdb;\\n  flex-grow: 1;\\n  margin: 0; }\\n\\n.ocm_links-list-empty {\\n  display: flex;\\n  align-items: center; }\\n\\n.ontodia-connections-menu_links-list__empty {\\n  width: 100%;\\n  position: relative;\\n  font-size: x-large;\\n  color: #cbcbcb;\\n  text-align: center; }\\n\\n.ontodia-connections-menu__loading,\\n.ontodia-connections-menu__error {\\n  width: 100%;\\n  height: 100%;\\n  position: relative;\\n  font-size: x-large;\\n  display: flex;\\n  color: #cbcbcb;\\n  align-items: center;\\n  justify-content: center; }\\n\\n.ontodia-connections-menu__loading-objects {\\n  border: 1px solid gray;\\n  flex-grow: 1;\\n  box-shadow: inset 0px 0px 23px -8px gray;\\n  background-color: whitesmoke;\\n  position: relative;\\n  font-size: x-large;\\n  display: flex;\\n  color: #cbcbcb;\\n  align-items: center;\\n  justify-content: center;\\n  margin-bottom: 5px; }\\n\\n.ontodia-connections-menu__move-to-filter {\\n  display: flex;\\n  padding: 5px 10px;\\n  user-select: none;\\n  cursor: pointer; }\\n  .ontodia-connections-menu__move-to-filter:hover {\\n    background-color: #e6e6e6; }\\n\\n.link-in-popup-menu {\\n  display: flex;\\n  overflow: hidden;\\n  padding: 0 5px 0 0;\\n  align-items: center;\\n  margin-bottom: 4px;\\n  background: #f7f7f7; }\\n  .link-in-popup-menu__link-title {\\n    flex-grow: 1;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    margin: 5px 0px 5px 5px; }\\n  .link-in-popup-menu__count {\\n    flex-shrink: 0;\\n    margin-left: 10px; }\\n  .link-in-popup-menu__navigate-button {\\n    float: right;\\n    background-image: url(\" + escape(require(\"../images/expand-link.png\")) + \");\\n    width: 16px;\\n    height: 16px;\\n    opacity: 0.5;\\n    margin-left: 10px;\\n    min-width: 16px;\\n    background-size: cover; }\\n    .link-in-popup-menu__navigate-button:hover {\\n      opacity: 1; }\\n  .link-in-popup-menu__filter-button {\\n    background-image: url(\" + escape(require(\"../images/add-to-filter.png\")) + \");\\n    background-size: 20px 20px;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.4;\\n    margin-left: 10px; }\\n    .link-in-popup-menu__filter-button:hover {\\n      opacity: 1; }\\n  .link-in-popup-menu:hover {\\n    background-color: #e2e2e2; }\\n\\n.link-in-popup-menu_direction {\\n  background: rgba(219, 219, 219, 0.35);\\n  min-height: 30px;\\n  padding: 5px 0px 5px 10px;\\n  display: flex;\\n  align-items: center; }\\n\\n.link-in-popup-menu_direction__in-direction {\\n  background: url(\" + escape(require(\"../images/direction-in.png\")) + \") 0 0 no-repeat;\\n  flex-shrink: 0;\\n  width: 22px;\\n  height: 15px;\\n  margin: 0 14px 0 0;\\n  background-size: contain;\\n  opacity: 0.5; }\\n\\n.link-in-popup-menu_direction__out-direction {\\n  background: url(\" + escape(require(\"../images/direction-out.png\")) + \") 0 0 no-repeat;\\n  flex-shrink: 0;\\n  width: 22px;\\n  height: 15px;\\n  margin: 0 8px 0 6px;\\n  background-size: contain;\\n  opacity: 0.5; }\\n\\n.ontodia-connections-menu_links-list__loading {\\n  text-align: center;\\n  width: 100%;\\n  position: relative;\\n  font-size: x-large;\\n  color: #cbcbcb; }\\n\\n.ontodia-connections-menu_links-list__hr {\\n  margin-top: 10px;\\n  margin-bottom: 10px; }\\n\\n.ontodia-connections-menu_objects-panel {\\n  flex-grow: 1;\\n  padding: 10px;\\n  position: relative;\\n  display: flex;\\n  flex-direction: column;\\n  padding-top: 0px; }\\n\\n.ontodia-connections-menu_objects-panel__select-all {\\n  white-space: nowrap;\\n  margin-bottom: 5px;\\n  display: flex; }\\n  .ontodia-connections-menu_objects-panel__select-all input {\\n    margin-right: 5px; }\\n    .ontodia-connections-menu_objects-panel__select-all input:disabled {\\n      opacity: 0.3; }\\n\\n.ontodia-connections-menu_objects-panel_bottom-panel {\\n  height: 25px;\\n  white-space: nowrap;\\n  display: flex;\\n  justify-content: space-between; }\\n\\n.ontodia-connections-menu_objects-panel_bottom-panel__count-label {\\n  height: 25px;\\n  float: left;\\n  padding: 0px 5px;\\n  font-size: larger;\\n  display: flex;\\n  align-items: center;\\n  max-width: 60%; }\\n\\n.ontodia-connections-menu_objects-panel_bottom-panel__extra-elements {\\n  color: gray;\\n  cursor: help; }\\n\\n.ontodia-btn.ontodia-connections-menu_objects-panel_bottom-panel__add-button {\\n  height: 25px;\\n  padding-top: 1px;\\n  padding-bottom: 2px; }\\n\\n.ontodia-connections-menu_objects-panel_objects-list {\\n  border: 1px solid gray;\\n  height: 0;\\n  flex-grow: 1;\\n  overflow-x: hidden;\\n  overflow-y: scroll;\\n  padding: 5px;\\n  margin-bottom: 5px; }\\n\\n.ontodia-connections-menu__link {\\n  color: #337ab7;\\n  cursor: pointer;\\n  text-decoration: none; }\\n  .ontodia-connections-menu__link:hover {\\n    text-decoration: underline; }\\n\\n.ontodia-dialog {\\n  background: #fff;\\n  border: 1px solid #333;\\n  box-shadow: 0 4px 15px 7px rgba(51, 51, 51, 0.05);\\n  position: absolute; }\\n  .ontodia-dialog__caption {\\n    font-weight: bold;\\n    position: absolute;\\n    top: -11px;\\n    left: 10px;\\n    background: white;\\n    padding-left: 3px;\\n    padding-right: 3px;\\n    border-radius: 6px; }\\n  .ontodia-dialog__close-button {\\n    background: transparent url(\" + escape(require(\"../images/font-awesome/times-circle-regular.svg\")) + \");\\n    background-size: contain;\\n    border: 0 none;\\n    cursor: pointer;\\n    display: block;\\n    outline: none;\\n    padding: 0;\\n    position: absolute;\\n    top: -22px;\\n    right: -22px;\\n    height: 20px;\\n    width: 20px;\\n    opacity: 0.5;\\n    transition: 0.3s; }\\n    .ontodia-dialog__close-button:hover {\\n      opacity: 1; }\\n\\n.ontodia-dialog__bottom-right-handle {\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  width: 0;\\n  height: 0;\\n  border-style: solid;\\n  border-width: 0 0 10px 10px;\\n  border-color: transparent transparent rgba(0, 0, 0, 0.38) transparent;\\n  cursor: nwse-resize; }\\n  .ontodia-dialog__bottom-right-handle::before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    bottom: -10px;\\n    right: 0;\\n    width: 0;\\n    height: 0;\\n    border-style: solid;\\n    border-width: 0 0 5px 5px;\\n    border-color: transparent transparent rgba(0, 0, 0, 0.38) transparent; }\\n  .ontodia-dialog__bottom-right-handle:hover {\\n    border-color: transparent transparent rgba(0, 0, 0, 0.5) transparent; }\\n\\n.ontodia-dialog__bottom-handle, .ontodia-dialog__right-handle {\\n  position: absolute;\\n  opacity: 0;\\n  background-color: black; }\\n  .ontodia-dialog__bottom-handle:hover, .ontodia-dialog__right-handle:hover {\\n    opacity: 0.1; }\\n\\n.ontodia-dialog__bottom-handle {\\n  bottom: 0;\\n  width: 100%;\\n  height: 5px;\\n  cursor: ns-resize; }\\n\\n.ontodia-dialog__right-handle {\\n  top: 0;\\n  right: 0;\\n  width: 5px;\\n  height: 100%;\\n  cursor: ew-resize; }\\n\\n.ontodia-edit-form {\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column; }\\n  .ontodia-edit-form__body {\\n    overflow: auto;\\n    padding: 10px;\\n    flex: 1 1 100%;\\n    display: flex;\\n    flex-direction: column;\\n    position: relative; }\\n  .ontodia-edit-form__controls {\\n    border-top: 1px solid #ccc;\\n    padding: 10px;\\n    text-align: right;\\n    flex: 0 0 auto; }\\n  .ontodia-edit-form__apply-button {\\n    margin-right: 5px; }\\n  .ontodia-edit-form__form-row {\\n    display: block;\\n    margin-bottom: 10px; }\\n  .ontodia-edit-form__element-selector {\\n    flex-grow: 1;\\n    display: flex;\\n    flex-direction: column; }\\n  .ontodia-edit-form__search {\\n    flex-shrink: 0;\\n    position: relative; }\\n  .ontodia-edit-form__search-icon {\\n    opacity: 0.6;\\n    position: absolute;\\n    top: 50%;\\n    left: 10px;\\n    margin-top: -7px; }\\n  .ontodia-edit-form__search-input {\\n    padding-left: 33px; }\\n  .ontodia-edit-form__existing-elements-list {\\n    flex-grow: 1;\\n    margin-top: 7px;\\n    padding-right: 10px;\\n    overflow-y: scroll; }\\n  .ontodia-edit-form__separator {\\n    margin: 7px 0;\\n    overflow: hidden;\\n    text-align: center; }\\n  .ontodia-edit-form__separator-text {\\n    color: #555;\\n    display: inline-block;\\n    font-size: 13px;\\n    position: relative; }\\n    .ontodia-edit-form__separator-text:before, .ontodia-edit-form__separator-text:after {\\n      content: \\\"\\\";\\n      border-top: 1px solid;\\n      position: absolute;\\n      top: 50%;\\n      margin: 0 10px;\\n      width: 500px; }\\n    .ontodia-edit-form__separator-text:before {\\n      left: 100%; }\\n    .ontodia-edit-form__separator-text:after {\\n      right: 100%; }\\n  .ontodia-edit-form__progress {\\n    position: absolute;\\n    bottom: 0;\\n    left: 0;\\n    right: 0; }\\n  .ontodia-edit-form__control-row {\\n    position: relative;\\n    padding-bottom: 18px; }\\n  .ontodia-edit-form__control-error {\\n    color: red;\\n    position: absolute;\\n    bottom: 0;\\n    left: 0; }\\n\\n.ontodia-halo {\\n  position: absolute;\\n  pointer-events: none;\\n  border: 1.5px dashed #d8956d;\\n  border-radius: 2px;\\n  box-shadow: 0 0 5px 0 #d8956d inset; }\\n  .ontodia-halo__navigate {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    top: 50%;\\n    margin-top: -10px;\\n    right: -22px; }\\n    .ontodia-halo__navigate:hover {\\n      opacity: 1; }\\n    .ontodia-halo__navigate[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n    .ontodia-halo__navigate--open {\\n      background-image: url(\" + escape(require(\"../images/connections.svg\")) + \"); }\\n    .ontodia-halo__navigate--closed {\\n      background-image: url(\" + escape(require(\"../images/close-connections.svg\")) + \"); }\\n  .ontodia-halo__folow {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    top: 50%;\\n    margin-top: -10px;\\n    left: -22px;\\n    background-image: url(\" + escape(require(\"../images/link.svg\")) + \"); }\\n    .ontodia-halo__folow:hover {\\n      opacity: 1; }\\n    .ontodia-halo__folow[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n  .ontodia-halo__remove {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    top: -22px;\\n    right: -22px;\\n    background-image: url(\" + escape(require(\"../images/delete.svg\")) + \"); }\\n    .ontodia-halo__remove:hover {\\n      opacity: 1; }\\n    .ontodia-halo__remove[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n  .ontodia-halo__expand {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    bottom: -22px;\\n    left: 50%;\\n    margin-left: -10px; }\\n    .ontodia-halo__expand:hover {\\n      opacity: 1; }\\n    .ontodia-halo__expand[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n    .ontodia-halo__expand--open {\\n      background-image: url(\" + escape(require(\"../images/expand-properties.png\")) + \"); }\\n    .ontodia-halo__expand--closed {\\n      background-image: url(\" + escape(require(\"../images/collapse-properties.png\")) + \"); }\\n  .ontodia-halo__add-to-filter {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    bottom: -22px;\\n    right: -22px;\\n    background-image: url(\" + escape(require(\"../images/add-to-filter.png\")) + \"); }\\n    .ontodia-halo__add-to-filter:hover {\\n      opacity: 1; }\\n    .ontodia-halo__add-to-filter[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n  .ontodia-halo__revert {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    top: -22px;\\n    left: 50%;\\n    margin-left: -10px;\\n    background-image: url(\" + escape(require(\"../images/font-awesome/undo-solid.svg\")) + \"); }\\n    .ontodia-halo__revert:hover {\\n      opacity: 1; }\\n    .ontodia-halo__revert[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n  .ontodia-halo__establish-connection {\\n    position: absolute;\\n    background-color: transparent;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    border: 0 none;\\n    cursor: pointer;\\n    outline: none;\\n    padding: 0;\\n    pointer-events: auto;\\n    width: 20px;\\n    height: 20px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s;\\n    bottom: -22px;\\n    left: -22px;\\n    background-image: url(\" + escape(require(\"../images/font-awesome/plug.svg\")) + \"); }\\n    .ontodia-halo__establish-connection:hover {\\n      opacity: 1; }\\n    .ontodia-halo__establish-connection[disabled] {\\n      cursor: not-allowed;\\n      opacity: 0.2; }\\n  .ontodia-halo__establish-connection-spinner {\\n    position: absolute;\\n    width: 20px;\\n    height: 20px;\\n    bottom: -22px;\\n    left: -22px; }\\n\\n.ontodia-halo-link__button {\\n  background: transparent;\\n  border: 0 none;\\n  cursor: pointer;\\n  padding: 0;\\n  position: absolute;\\n  opacity: 0.8;\\n  outline: none;\\n  transition: opacity 0.3s; }\\n  .ontodia-halo-link__button:hover {\\n    opacity: 1; }\\n  .ontodia-halo-link__button[disabled] {\\n    cursor: not-allowed;\\n    opacity: 0.5; }\\n\\n.ontodia-halo-link__edit {\\n  background-color: #ccc;\\n  background-position: 50%;\\n  background-repeat: no-repeat;\\n  background-size: 60%;\\n  border-radius: 10px;\\n  height: 20px;\\n  width: 20px;\\n  background-image: url(\" + escape(require(\"../images/font-awesome/edit.svg\")) + \"); }\\n\\n.ontodia-halo-link__delete {\\n  background-color: #ccc;\\n  background-position: 50%;\\n  background-repeat: no-repeat;\\n  background-size: 60%;\\n  border-radius: 10px;\\n  height: 20px;\\n  width: 20px;\\n  background-image: url(\" + escape(require(\"../images/font-awesome/trash-alt.svg\")) + \"); }\\n\\n.ontodia-halo-link__spinner {\\n  position: absolute; }\\n\\n.ontodia-halo-link__edit-label-button {\\n  background: transparent url(\" + escape(require(\"../images/font-awesome/pen-square-solid.svg\")) + \") no-repeat;\\n  background-size: cover;\\n  border: 0 none;\\n  cursor: pointer;\\n  padding: 0;\\n  position: absolute;\\n  margin-left: 5px;\\n  outline: none;\\n  opacity: 0.5;\\n  transition: opacity 0.3s; }\\n  .ontodia-halo-link__edit-label-button:hover {\\n    opacity: 1; }\\n\\n.ontodia-instances-search {\\n  flex: auto;\\n  display: flex;\\n  flex-direction: column; }\\n  .ontodia-instances-search__criteria {\\n    flex-shrink: 0;\\n    margin: 10px 0 10px 0; }\\n  .ontodia-instances-search__criterions {\\n    padding-left: 15px;\\n    margin-bottom: 10px; }\\n    .ontodia-instances-search__criterions:empty {\\n      margin-bottom: 0; }\\n  .ontodia-instances-search__criterion {\\n    display: block;\\n    position: relative;\\n    width: 100%; }\\n  .ontodia-instances-search__criterion-class {\\n    border: black 1px dashed;\\n    background: #ffd221;\\n    padding: 0 .5em 0 .5em;\\n    word-wrap: break-word; }\\n  .ontodia-instances-search__criterion-element {\\n    border: black 1px dashed;\\n    background: #ff835c;\\n    padding: 0 .5em 0 .5em;\\n    word-wrap: break-word; }\\n  .ontodia-instances-search__criterion-link-type {\\n    border: black 1px dashed;\\n    background: #caffce;\\n    padding: 0 .5em 0 .5em;\\n    word-wrap: break-word; }\\n  .ontodia-instances-search__link-direction {\\n    height: 1em;\\n    opacity: 0.5; }\\n  .ontodia-instances-search__criterion-remove {\\n    float: right;\\n    margin: 0 10px 4px 4px; }\\n  .ontodia-instances-search__text-criteria {\\n    margin: 0 10px; }\\n  .ontodia-instances-search__rest {\\n    padding: 10px 10px 0 10px;\\n    border-top: 1px solid #dddddd; }\\n  .ontodia-instances-search__results {\\n    padding-left: 0;\\n    padding-top: 10px;\\n    margin: 0 10px 0 10px;\\n    outline: none; }\\n  .ontodia-instances-search[data-state='finished'] .ontodia-instances-search__results:empty:before {\\n    content: 'No items correspond to the specified criteria.';\\n    font-style: italic; }\\n  .ontodia-instances-search__rest-end {\\n    margin: 5px 0 10px 0; }\\n  .ontodia-instances-search__load-more {\\n    width: 100%; }\\n\\n.link-types-toolbox {\\n  flex: auto;\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 0; }\\n  .link-types-toolbox__heading {\\n    padding: 10px; }\\n  .link-types-toolbox__searching-box {\\n    display: flex;\\n    align-items: center; }\\n  .link-types-toolbox__clearSearch {\\n    margin-left: -25px;\\n    -webkit-appearance: none;\\n    padding: 0;\\n    cursor: pointer;\\n    background: 0 0;\\n    border: 0; }\\n  .link-types-toolbox__switch-all {\\n    margin-top: 5px; }\\n  .link-types-toolbox__rest {\\n    border-top: 1px solid #dddddd;\\n    flex: auto;\\n    display: flex;\\n    flex-direction: column; }\\n\\n.link-types-toolbox .panel-heading {\\n  flex-shrink: 0;\\n  -webkit-flex-shrink: 0;\\n  /* safari 8 */ }\\n\\n.link-types-toolbox ul {\\n  margin-bottom: 0; }\\n\\n.link-types-toolbox .links-heading {\\n  margin-left: .4em; }\\n\\n.link-types-toolbox .links-heading span {\\n  border: black 1px dashed;\\n  background: #ff835c;\\n  padding: 0 .5em 0 .5em;\\n  word-wrap: break-word;\\n  line-height: 1.3; }\\n\\n.link-types-toolbox__heading .link-types-toolbox-controls {\\n  padding: 5px 15px;\\n  font-size: 14px;\\n  font-style: italic; }\\n\\n.link-types-toolbox__heading .link-types-toolbox-controls > span {\\n  padding-left: .3em; }\\n\\n.ontodia-list-group .linkInToolBox {\\n  padding: 0 0 0 5px;\\n  word-break: break-word; }\\n\\n.linkInToolBox > div {\\n  display: inline; }\\n\\n.linkInToolBox__new-tag {\\n  margin-left: .5em;\\n  white-space: normal;\\n  word-wrap: normal;\\n  border-radius: 2px;\\n  padding: 0 5px;\\n  background: orange; }\\n\\n.linkInToolBox .ontodia-badge {\\n  display: none;\\n  margin-left: .5em;\\n  white-space: normal;\\n  word-wrap: normal; }\\n\\n.linkInToolBox .link-title {\\n  font-size: 16px;\\n  color: black;\\n  display: inline; }\\n\\n.linkInToolBox .ontodia-btn-group {\\n  float: left;\\n  margin-top: 2px;\\n  margin-right: 6px;\\n  margin-bottom: 2px; }\\n\\n.linkInToolBox .ontodia-btn.ontodia-btn-default {\\n  border-color: #c3c3c3; }\\n\\n.linkInToolBox__filter-button {\\n  display: none;\\n  float: right;\\n  background-image: url(\" + escape(require(\"../images/add-to-filter.png\")) + \");\\n  background-size: 20px 20px;\\n  width: 20px;\\n  height: 20px;\\n  margin: 3px;\\n  cursor: pointer;\\n  opacity: 0.4;\\n  transition: opacity 200ms 0ms; }\\n\\n.linkInToolBox:hover .linkInToolBox__filter-button {\\n  opacity: 1.0;\\n  transition: opacity 200ms 0ms; }\\n\\n.connected-links .linkInToolBox .ontodia-badge {\\n  /* show connection count badge only in \\\"Connected to Element\\\" list */\\n  display: inline; }\\n\\n.connected-links .linkInToolBox__filter-button {\\n  /* show filter button only in \\\"Connected to Element\\\" list */\\n  display: inline; }\\n\\n.ontodia-list-element-view {\\n  position: relative;\\n  display: block;\\n  background: #808080;\\n  padding: 1px 1px 1px 10px;\\n  border-radius: 2px;\\n  margin: 0 0 2px 0;\\n  opacity: 1.0;\\n  cursor: move;\\n  user-select: none; }\\n  .ontodia-list-element-view--disabled {\\n    opacity: 0.4;\\n    cursor: default; }\\n  .ontodia-list-element-view__label {\\n    background: white;\\n    border-radius: 0 2px 2px 0;\\n    font-family: \\\"Andale Mono\\\", sans-serif;\\n    font-size: 15px;\\n    min-height: 1.3em;\\n    padding-left: 7px;\\n    padding-right: 5px;\\n    overflow-wrap: break-word; }\\n\\n.ontodia-text-highlight {\\n  font-weight: bold; }\\n\\n.ontodia-navigator {\\n  display: block;\\n  position: absolute;\\n  bottom: 25px;\\n  right: 25px;\\n  overflow: hidden;\\n  background: #fff;\\n  border: 1px solid #ddd;\\n  box-shadow: 0 4px 15px 7px rgba(51, 51, 51, 0.05);\\n  transition: width 0.3s, height 0.3s; }\\n  .ontodia .ontodia-navigator {\\n    box-sizing: content-box; }\\n  .ontodia-navigator--collapsed {\\n    width: 26px;\\n    height: 26px; }\\n  .ontodia-navigator > canvas {\\n    transition: opacity 0.3s; }\\n  .ontodia-navigator--expanded > canvas {\\n    opacity: 1; }\\n  .ontodia-navigator--collapsed > canvas {\\n    opacity: 0; }\\n  .ontodia-navigator__toggle {\\n    position: absolute;\\n    background: transparent;\\n    border: none;\\n    outline: none;\\n    padding: 4px;\\n    opacity: 0.5;\\n    transition: opacity 0.3s; }\\n    .ontodia-navigator__toggle:hover {\\n      opacity: 1; }\\n  .ontodia-navigator--expanded .ontodia-navigator__toggle {\\n    top: 5px;\\n    left: 5px; }\\n  .ontodia-navigator--collapsed .ontodia-navigator__toggle {\\n    top: 0px;\\n    left: 0px; }\\n  .ontodia-navigator__toggle-icon {\\n    width: 18px;\\n    height: 18px;\\n    background-size: 18px 18px;\\n    background-repeat: no-repeat; }\\n  .ontodia-navigator--expanded .ontodia-navigator__toggle-icon {\\n    background-image: url(\" + escape(require(\"../images/font-awesome/minus-square-regular.svg\")) + \"); }\\n  .ontodia-navigator--collapsed .ontodia-navigator__toggle-icon {\\n    background-image: url(\" + escape(require(\"../images/font-awesome/plus-square-regular.svg\")) + \"); }\\n\\n@keyframes ontodia-progress-bar-stripes {\\n  from {\\n    background-position: 40px 0; }\\n  to {\\n    background-position: 0 0; } }\\n\\n.ontodia-progress-bar {\\n  flex-shrink: 0;\\n  -webkit-flex-shrink: 0;\\n  /* safari 8 */\\n  width: 100%;\\n  background-color: #f5f5f5;\\n  background-image: linear-gradient(to bottom, #ebebeb 0%, #f5f5f5 100%);\\n  background-repeat: repeat-x;\\n  overflow: hidden;\\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1); }\\n  .ontodia-progress-bar__bar {\\n    float: left;\\n    height: 100%;\\n    font-size: 12px;\\n    line-height: 20px;\\n    color: #fff;\\n    text-align: center;\\n    transition: width .6s ease;\\n    background-color: #337ab7;\\n    background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);\\n    background-repeat: repeat-x;\\n    background-size: 40px 40px;\\n    animation: ontodia-progress-bar-stripes 2s linear infinite; }\\n  .ontodia-progress-bar--loading, .ontodia-progress-bar--error {\\n    /* property name | duration | delay */\\n    transition: height 300ms 300ms; }\\n  .ontodia-progress-bar--error {\\n    background-color: #E72F2F; }\\n  .ontodia-progress-bar--completed {\\n    /* property name | duration | delay */\\n    transition: height 200ms 0ms; }\\n\\n.ontodia-search-results {\\n  margin: 0;\\n  padding: 0;\\n  outline: none; }\\n\\n.ontodia-accordion {\\n  flex: auto;\\n  display: flex;\\n  height: 100%;\\n  width: 100%; }\\n  .ontodia-accordion--scrollable {\\n    overflow: auto; }\\n  .ontodia-accordion--vertical {\\n    flex-direction: column; }\\n  .ontodia-accordion--vertical:not(.ontodia-accordion--resizing) > .ontodia-accordion-item {\\n    transition: height 0.3s ease-in-out; }\\n\\n.ontodia-accordion-item {\\n  display: flex;\\n  position: relative;\\n  flex: auto; }\\n  .ontodia-accordion-item--resizing > .ontodia-accordion-item__handle, .ontodia-accordion-item__handle:hover {\\n    background: rgba(0, 0, 0, 0.1); }\\n  .ontodia-accordion-item--vertical {\\n    border-top: 1px solid lightgray; }\\n    .ontodia-accordion-item--vertical:first-child {\\n      border-top-width: 0; }\\n  .ontodia-accordion-item--horizontal {\\n    border-right: 1px solid lightgray; }\\n    .ontodia-accordion-item--horizontal:last-child {\\n      border-right-width: 0; }\\n  .ontodia-accordion-item__handle {\\n    position: absolute;\\n    z-index: 2; }\\n  .ontodia-accordion-item__handle-vertical {\\n    height: 5px;\\n    bottom: -2.5px;\\n    left: 0;\\n    width: 100%;\\n    cursor: ns-resize; }\\n  .ontodia-accordion-item__handle-horizontal {\\n    height: 100%;\\n    top: 0;\\n    right: -2.5px;\\n    width: 5px;\\n    cursor: ew-resize; }\\n  .ontodia-accordion-item__handle-btn {\\n    background: #fff;\\n    border: 2px solid #17b;\\n    box-shadow: 0 0 0 1px rgba(9, 30, 66, 0.08), 0 2px 4px 1px rgba(9, 30, 66, 0.08);\\n    border-radius: 10px;\\n    cursor: pointer;\\n    height: 20px;\\n    position: absolute;\\n    top: 50%;\\n    margin-top: -10px;\\n    width: 20px;\\n    z-index: 20;\\n    transition: 0.3s; }\\n    .ontodia-accordion-item__handle-btn::before {\\n      background-position: 0 0;\\n      background-repeat: no-repeat;\\n      background-size: cover;\\n      content: \\\"\\\";\\n      height: 8px;\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      margin-top: -4px;\\n      margin-left: -4px;\\n      width: 8px;\\n      transition: background 0.3s; }\\n    .ontodia-accordion-item__handle-btn:hover {\\n      background: #17b; }\\n  .ontodia-accordion-item__handle-btn-left {\\n    left: 100%;\\n    margin-left: -10px; }\\n    .ontodia-accordion-item__handle-btn-left:before {\\n      background-image: url(\" + escape(require(\"../images/arrow-left.png\")) + \"); }\\n    .ontodia-accordion-item__handle-btn-left:hover:before {\\n      background-image: url(\" + escape(require(\"../images/arrow-left1.png\")) + \"); }\\n  .ontodia-accordion-item__handle-btn-right {\\n    right: 100%;\\n    margin-right: -10px; }\\n    .ontodia-accordion-item__handle-btn-right:before {\\n      background-image: url(\" + escape(require(\"../images/arrow-right.png\")) + \"); }\\n    .ontodia-accordion-item__handle-btn-right:hover:before {\\n      background-image: url(\" + escape(require(\"../images/arrow-right1.png\")) + \"); }\\n  .ontodia-accordion-item--collapsed .ontodia-accordion-item__handle-btn:before {\\n    transform: rotate(180deg); }\\n  .ontodia-accordion-item__inner {\\n    flex: auto;\\n    display: flex;\\n    flex-direction: column;\\n    overflow: hidden; }\\n  .ontodia-accordion-item__body {\\n    flex: 1 1 0px;\\n    display: flex;\\n    flex-direction: column; }\\n  .ontodia-accordion-item__header {\\n    padding-left: 20px;\\n    position: relative;\\n    flex-shrink: 0;\\n    font-size: 16px;\\n    background: #E4E4E4;\\n    cursor: default;\\n    /* unselectable */\\n    -webkit-touch-callout: none;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none; }\\n    .ontodia-accordion-item__header:before {\\n      border-top: 6px solid #555555;\\n      border-left: 3.5px solid transparent;\\n      border-right: 3.5px solid transparent;\\n      content: \\\"\\\";\\n      position: absolute;\\n      top: 50%;\\n      left: 7px;\\n      margin-top: -3px;\\n      -webkit-transition: 0.1s;\\n      -moz-transition: 0.1s;\\n      transition: 0.1s; }\\n  .ontodia-accordion-item--collapsed .ontodia-accordion-item__header:before {\\n    -webkit-transform: rotate(-90deg);\\n    -moz-transform: rotate(-90deg);\\n    -ms-transform: rotate(-90deg);\\n    transform: rotate(-90deg); }\\n  .ontodia-accordion-item--collapsed .ontodia-accordion-item__body {\\n    display: none; }\\n\\n.ontodia-drag-resizable-column.ontodia-drag-resizable-column--docked-bottom .ontodia-drag-resizable-column__handle,\\n.ontodia-drag-resizable-column.ontodia-drag-resizable-column--docked-top .ontodia-drag-resizable-column__handle {\\n  height: 8px;\\n  width: 100%;\\n  top: initial;\\n  left: 0;\\n  cursor: ns-resize; }\\n\\n.ontodia-drag-resizable-column.ontodia-drag-resizable-column--docked-bottom .ontodia-drag-resizable-column__handle-btn,\\n.ontodia-drag-resizable-column.ontodia-drag-resizable-column--docked-top .ontodia-drag-resizable-column__handle-btn {\\n  height: 100%;\\n  width: 40px;\\n  top: 0;\\n  left: 50%;\\n  margin-left: -20px;\\n  margin-top: 0px; }\\n\\n.ontodia-drag-resizable-column {\\n  display: flex;\\n  flex-direction: column;\\n  position: relative; }\\n  .ontodia-drag-resizable-column__handle {\\n    background: #fff url(\" + escape(require(\"../images/resizable-column-handle.png\")) + \") repeat;\\n    width: 8px;\\n    height: 100%;\\n    position: absolute;\\n    top: 0;\\n    left: initial;\\n    z-index: 2;\\n    -webkit-transition: 0.3s;\\n    -moz-transition: 0.3s;\\n    transition: 0.3s;\\n    cursor: ew-resize; }\\n  .ontodia-drag-resizable-column__handle-btn {\\n    background: #eee;\\n    cursor: pointer;\\n    height: 40px;\\n    position: absolute;\\n    top: 50%;\\n    left: 0;\\n    margin-top: -20px;\\n    width: 100%;\\n    z-index: 1;\\n    -webkit-transition: 0.3s;\\n    -moz-transition: 0.3s;\\n    transition: 0.3s; }\\n    .ontodia-drag-resizable-column__handle-btn::before {\\n      background-position: 0 0;\\n      background-repeat: no-repeat;\\n      background-size: cover;\\n      content: \\\"\\\";\\n      height: 6px;\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      margin-top: -3px;\\n      margin-left: -3px;\\n      width: 6px;\\n      -webkit-transition: 0.3s;\\n      -moz-transition: 0.3s;\\n      transition: 0.3s; }\\n    .ontodia-drag-resizable-column__handle-btn:hover {\\n      background: #b3b3b3;\\n      transform: scale(1.2); }\\n  .ontodia-drag-resizable-column--closed .ontodia-drag-resizable-column__handle-btn::before {\\n    transform: rotate(180deg); }\\n  .ontodia-drag-resizable-column--docked-left {\\n    margin-right: 8px; }\\n  .ontodia-drag-resizable-column--docked-left .ontodia-drag-resizable-column__handle {\\n    right: -8px; }\\n  .ontodia-drag-resizable-column--docked-left .ontodia-drag-resizable-column__handle-btn::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-left.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-left .ontodia-drag-resizable-column__handle-btn:hover::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-left1.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-right {\\n    margin-left: 8px; }\\n  .ontodia-drag-resizable-column--docked-right .ontodia-drag-resizable-column__handle {\\n    left: -8px; }\\n  .ontodia-drag-resizable-column--docked-right .ontodia-drag-resizable-column__handle-btn::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-right.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-right .ontodia-drag-resizable-column__handle-btn:hover::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-right1.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-top {\\n    margin-bottom: 8px; }\\n  .ontodia-drag-resizable-column--docked-top .ontodia-drag-resizable-column__handle {\\n    bottom: -8px; }\\n  .ontodia-drag-resizable-column--docked-top .ontodia-drag-resizable-column__handle-btn::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-top.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-top .ontodia-drag-resizable-column__handle-btn:hover::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-top1.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-bottom {\\n    margin-top: 8px; }\\n  .ontodia-drag-resizable-column--docked-bottom .ontodia-drag-resizable-column__handle {\\n    top: -8px; }\\n  .ontodia-drag-resizable-column--docked-bottom .ontodia-drag-resizable-column__handle-btn::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-bottom.png\")) + \"); }\\n  .ontodia-drag-resizable-column--docked-bottom .ontodia-drag-resizable-column__handle-btn:hover::before {\\n    background-image: url(\" + escape(require(\"../images/arrow-bottom1.png\")) + \"); }\\n\\n.introjs-tooltiptext {\\n  color: #333;\\n  font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\\n  font-size: 14px;\\n  line-height: 1.42857; }\\n\\n.ontodia-toolbar__language-selector {\\n  padding: 5px;\\n  margin-top: 4px; }\\n  .ontodia-toolbar__language-selector > label {\\n    margin-right: 5px; }\\n    .ontodia-toolbar__language-selector > label > span {\\n      vertical-align: middle; }\\n\\n.ontodia-toolbar__toggle {\\n  line-height: 1; }\\n\\n.ontodia-toolbar__toggle:after {\\n  background-position: 0 0;\\n  background-repeat: no-repeat;\\n  content: '';\\n  display: block;\\n  height: 12px;\\n  margin: 3px 0;\\n  width: 12px; }\\n\\n.ontodia-toolbar__toggle-left:after {\\n  background-image: url(\" + escape(require(\"../images/left-panel.svg\")) + \"); }\\n\\n.ontodia-toolbar__toggle-right:after {\\n  background-image: url(\" + escape(require(\"../images/right-panel.svg\")) + \"); }\\n\\n.ontodia-toolbar__toggle.active {\\n  border-color: #c3c3c3; }\\n\\n.ontodia-toolbar__toggle-left.active:after {\\n  background-image: url(\" + escape(require(\"../images/left-panel-active.svg\")) + \"); }\\n\\n.ontodia-toolbar__toggle-right.active:after {\\n  background-image: url(\" + escape(require(\"../images/right-panel-active.svg\")) + \"); }\\n\\n.ontodia-toolbar__layout-group {\\n  margin: 5px;\\n  height: 30px;\\n  float: left; }\\n  .ontodia-toolbar__layout-group > label {\\n    margin-right: 5px; }\\n  .ontodia-toolbar__layout-group .btn-group, .ontodia-toolbar__layout-group button {\\n    height: 100%; }\\n\\n.ontodia-toolbar {\\n  background: rgba(0, 0, 0, 0.15); }\\n\\n.ontodia-toolbar > .ontodia-btn-group {\\n  margin-left: 10px; }\\n\\n.ontodia-toolbar > .ontodia-btn-group > button {\\n  margin-top: 5px;\\n  margin-bottom: 5px; }\\n\\n.ontodia-toolbar .ontodia-toolbar__undo,\\n.ontodia-toolbar .ontodia-toolbar__redo {\\n  display: none; }\\n\\n.ontodia {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  box-sizing: border-box;\\n  white-space: initial;\\n  color: #333;\\n  font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\\n  font-size: 14px;\\n  line-height: 1.42857; }\\n  .ontodia *, .ontodia *:before, .ontodia *:after {\\n    box-sizing: inherit; }\\n  .ontodia__header {\\n    display: flex;\\n    flex-direction: column;\\n    flex: 0 0 auto; }\\n  .ontodia__workspace {\\n    display: flex;\\n    flex: auto;\\n    overflow: hidden;\\n    flex-direction: column; }\\n  .ontodia__main-panel {\\n    display: flex;\\n    flex: auto;\\n    overflow: hidden;\\n    width: 0; }\\n  .ontodia--unselectable {\\n    -webkit-touch-callout: none;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    -ms-user-select: none;\\n    user-select: none; }\\n  .ontodia--horizontal-resizing * {\\n    cursor: ew-resize !important; }\\n  .ontodia--vertical-resizing * {\\n    cursor: ns-resize !important; }\\n  .ontodia h4 {\\n    font-size: 18px;\\n    font-weight: 500;\\n    line-height: 1.1;\\n    margin-top: 10px;\\n    margin-bottom: 10px; }\\n  .ontodia select {\\n    color: inherit;\\n    margin: 0;\\n    font: inherit;\\n    line-height: inherit;\\n    text-transform: none; }\\n  .ontodia hr {\\n    border: 0;\\n    border-top: 1px solid #eee;\\n    height: 0; }\\n\\n.ontodia-scrollable {\\n  flex: 1 1 0px;\\n  overflow-y: scroll; }\\n\\n.ontodia-scrollable > * {\\n  position: relative; }\\n\\n.jstree-icon.jstree-themeicon.jstree-themeicon-custom {\\n  background-size: contain !important; }\\n\\n.ontodia-default-template, .ontodia-group-template__wrap {\\n  max-width: 450px;\\n  float: left;\\n  border-radius: 12px;\\n  border-style: solid;\\n  border-width: 1px; }\\n  .ontodia-default-template__thumbnail {\\n    text-align: center; }\\n    .ontodia-default-template__thumbnail > img {\\n      max-width: 200px; }\\n  .ontodia-default-template[data-expanded='true'] .ontodia-default-template__thumbnail > img, .ontodia-group-template__wrap[data-expanded='true'] .ontodia-default-template__thumbnail > img {\\n    max-width: 350px; }\\n\\n.ontodia-default-template_type-line, .ontodia-group-template__type-line {\\n  padding: 0px 7px;\\n  color: white;\\n  height: 18px;\\n  margin-bottom: 2px;\\n  overflow: hidden;\\n  display: flex;\\n  align-items: baseline;\\n  margin-top: -3px; }\\n\\ndiv.ontodia-default-template_type-line__icon, div.ontodia-group-template__type-line-icon {\\n  position: inherit !important;\\n  margin-right: 4px; }\\n\\n.ontodia-default-template_type-line_text-container, .ontodia-group-template__type-line-text-container {\\n  flex-grow: 1;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  width: 0; }\\n\\n.ontodia-default-template_type-line_text-container__text, .ontodia-group-template__type-line-text {\\n  display: inline;\\n  white-space: nowrap;\\n  font-size: 12px; }\\n\\n.ontodia-default-template_body, .ontodia-group-template__body {\\n  border-bottom-left-radius: 12px;\\n  border-bottom-right-radius: 12px;\\n  border-top-style: solid;\\n  border-top-width: 1px;\\n  background: white;\\n  padding: 7px 10px 8px 10px;\\n  overflow: hidden;\\n  display: flex;\\n  flex-direction: column; }\\n\\n.ontodia-default-template_body__label, .ontodia-group-template__label {\\n  font-size: 19px;\\n  font-weight: 100;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  margin-bottom: 0;\\n  white-space: nowrap;\\n  word-wrap: break-word; }\\n\\n.ontodia-default-template_body_expander {\\n  width: 100%;\\n  overflow: hidden;\\n  display: flex; }\\n\\n.ontodia-default-template_body_expander__iri_label {\\n  font-size: 12px;\\n  font-weight: 100;\\n  margin-right: 15px;\\n  color: #b6b6b6; }\\n\\n.ontodia-default-template_body_expander_iri {\\n  font-size: 12px;\\n  width: 100%;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis; }\\n\\n.ontodia-default-template_body_expander_iri__link {\\n  color: #b6b6b6; }\\n\\n.ontodia-default-template_body_expander__hr {\\n  margin: 5px 0px 5px 0px; }\\n\\n.ontodia-default-template_body_expander_property-table {\\n  font-size: 15px;\\n  font-weight: 100;\\n  margin-bottom: 5px;\\n  max-height: 200px;\\n  overflow-y: scroll;\\n  overflow-x: hidden; }\\n\\n.ontodia-default-template_body_expander_property-table_row {\\n  white-space: nowrap; }\\n\\n.ontodia-default-template_body_expander_property-table_row__key {\\n  display: inline-block;\\n  width: 50%;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  vertical-align: top; }\\n\\n.ontodia-default-template_body_expander_property-table_row_key {\\n  display: inline-block;\\n  width: 50%;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  vertical-align: top; }\\n\\n.ontodia-default-template_body_expander_property-table_row_key_values {\\n  display: inline-block;\\n  width: 50%;\\n  text-overflow: ellipsis;\\n  overflow: hidden; }\\n\\n.ontodia-default-template_body_expander_property-table_row_key_values__value {\\n  width: 100%;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: initial;\\n  padding-right: 10px; }\\n\\n.ontodia-group-template {\\n  overflow: hidden; }\\n  .ontodia-group-template__wrap {\\n    max-width: none; }\\n  .ontodia-group-template__body {\\n    overflow: visible; }\\n  .ontodia-group-template__embedded-layer {\\n    margin-top: 7px; }\\n  .ontodia-group-template .ontodia-paper__canvas {\\n    border-color: #fff; }\\n\\n.ontodia-standard-template {\\n  min-width: 180px;\\n  max-width: 400px;\\n  float: left; }\\n  .ontodia-standard-template__main {\\n    border-radius: 2px;\\n    border: 1px solid; }\\n  .ontodia-standard-template__body {\\n    margin-left: 8px;\\n    border-radius: 0 2px 2px 0;\\n    border-left: 1px solid;\\n    padding: 3px 0;\\n    background: #fafaf9; }\\n  .ontodia-standard-template__body-horizontal {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    overflow: hidden; }\\n  .ontodia-standard-template__body-content {\\n    flex-grow: 1;\\n    min-width: 0;\\n    margin-right: 12px; }\\n  .ontodia-standard-template__label {\\n    font-size: 19px;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis; }\\n  .ontodia-standard-template__thumbnail {\\n    font-size: 26px;\\n    margin: 5px 10px;\\n    flex-shrink: 0;\\n    width: 50px;\\n    height: 50px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center; }\\n  .ontodia-standard-template__thumbnail-image {\\n    max-height: 100%;\\n    max-width: 100%; }\\n  .ontodia-standard-template__thumbnail-icon {\\n    max-height: 26px;\\n    max-width: 26px; }\\n  .ontodia-standard-template__photo {\\n    border-bottom: 1px solid; }\\n  .ontodia-standard-template__photo-image {\\n    width: 100%;\\n    border-radius: 2px 2px 0 0; }\\n  .ontodia-standard-template__type {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    font-size: 11px;\\n    font-style: italic;\\n    color: #999;\\n    display: flex; }\\n  .ontodia-standard-template__type-value {\\n    width: 0;\\n    flex-grow: 1;\\n    overflow: hidden;\\n    text-overflow: ellipsis; }\\n  .ontodia-standard-template__iri {\\n    width: 100%;\\n    overflow: hidden;\\n    display: flex; }\\n  .ontodia-standard-template__iri-key {\\n    font-size: 12px;\\n    margin-right: 4px;\\n    color: #b6b6b6; }\\n  .ontodia-standard-template__iri-value {\\n    font-size: 12px;\\n    width: 100%;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis; }\\n  .ontodia-standard-template__iri-value a {\\n    color: #b6b6b6; }\\n  .ontodia-standard-template__hr {\\n    margin: 5px 0; }\\n  .ontodia-standard-template__properties {\\n    font-size: 15px;\\n    max-height: 200px;\\n    overflow-y: scroll;\\n    overflow-x: hidden; }\\n  .ontodia-standard-template__propertites-row {\\n    white-space: nowrap; }\\n  .ontodia-standard-template__properties-key {\\n    display: inline-block;\\n    width: 50%;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    vertical-align: top; }\\n  .ontodia-standard-template__properties-values {\\n    display: inline-block;\\n    width: 50%;\\n    text-overflow: ellipsis;\\n    overflow: hidden; }\\n  .ontodia-standard-template__properties-value {\\n    width: 100%;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: initial;\\n    padding-right: 10px; }\\n  .ontodia-standard-template__pinned-props {\\n    border-top: 1px solid;\\n    margin: 0 5px; }\\n  .ontodia-standard-template__dropdown {\\n    border-radius: 2px;\\n    background-color: white;\\n    margin-top: 5px;\\n    border: 1px solid; }\\n  .ontodia-standard-template__dropdown-content {\\n    width: 100%;\\n    padding: 9px; }\\n  .ontodia-standard-template__actions {\\n    display: flex;\\n    justify-content: space-between; }\\n    .ontodia-standard-template__actions button {\\n      padding: 5px;\\n      min-width: 60px; }\\n\", \"\"]);\n\n// exports\n","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJmaWxsOiB3aGl0ZSIgdmlld0JveD0iMCAwIDU3NiA1MTIiPgogICAgPHJlY3QKICAgICAgICBzdHlsZT0iZmlsbDogd2hpdGUiCiAgICAgICAgd2lkdGg9IjE2MCIKICAgICAgICBoZWlnaHQ9IjM0MCIKICAgICAgICB4PSIyMDcuOTk5OCIKICAgICAgICB5PSIxMzYiCiAgICAgICAgcnk9IjAiIC8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDogcmVkIiBkPSJNNTY5LjUxNyA0NDAuMDEzQzU4Ny45NzUgNDcyLjAwNyA1NjQuODA2IDUxMiA1MjcuOTQgNTEySDQ4LjA1NGMtMzYuOTM3IDAtNTkuOTk5LTQwLjA1NS00MS41NzctNzEuOTg3TDI0Ni40MjMgMjMuOTg1YzE4LjQ2Ny0zMi4wMDkgNjQuNzItMzEuOTUxIDgzLjE1NCAwbDIzOS45NCA0MTYuMDI4ek0yODggMzU0Yy0yNS40MDUgMC00NiAyMC41OTUtNDYgNDZzMjAuNTk1IDQ2IDQ2IDQ2IDQ2LTIwLjU5NSA0Ni00Ni0yMC41OTUtNDYtNDYtNDZ6bS00My42NzMtMTY1LjM0Nmw3LjQxOCAxMzZjLjM0NyA2LjM2NCA1LjYwOSAxMS4zNDYgMTEuOTgyIDExLjM0Nmg0OC41NDZjNi4zNzMgMCAxMS42MzUtNC45ODIgMTEuOTgyLTExLjM0Nmw3LjQxOC0xMzZjLjM3NS02Ljg3NC01LjA5OC0xMi42NTQtMTEuOTgyLTEyLjY1NGgtNjMuMzgzYy02Ljg4NCAwLTEyLjM1NiA1Ljc4LTExLjk4MSAxMi42NTR6Ii8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGrSURBVHic7dYxSgNRGEXhGwOuRQyCi1AR3IHoUiwFW21cj5sRC3tFgrExzUBIMmPmP76cD145MxcODyYRyrTgm+dJDpO8F3xbHRdJPpK8JZkVb9l7yxiL32OUQt0YRim0KoZRCqyLYZQRbRrDKCOYZbsYy/Oa5Khgb/MmSZ6yfRBvyg4ZBcgoQEYBMgqQUYCMAmQUIKMAGQXIKEBGATIKkFGAjAJkFKChUY7Hn9w+owAZBcgoQEYBMgqQUYCMAjRJ8hijoBgFyChARgEyCpBRgIwCZBQgowANjXI6/uT2DYkyT3I5/uT2GQXIKEBGATIKkFGAsFEOdvViuEWSlyTfPZ6dJjn72zm6SvKZfjfkuWBv04wBYgwQY4AYA8QYIH1jzJPcFext2pAYtwV7m2YMEGOAGAPEGCDGADEGiDFAjAFiDBBjgBgDxBggxgAxBogxQIwBMiTGTcHephkDxBggxgAxBogxQIwBYgwQY4AYA8QYIMYAMQaIMUCMAWIMkJMkX+kX47pg7164jzcDZ9MoxhjRuijGKLAqijEKdaMYA2AZxRggD/HXVv/FDxh8HInEGLhOAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAuxJREFUeF7t3V1u4jAYhWFu+FkDIHHBGlgZILbBjtN8M/labEywYzs+js8rHYFUqGo/6twNXTHGWIVdLpduv993x+ORm3Fy53L3A8Nf8sX+gSuw4e7NCFJuBAEbQcBGELARBGxOkNPp9PZCbp4Nd2/2eDy67Xb79mIu7+TO5e775+/d7/dut9u9vYnLM7lrufP++eeIMs+8MDSi5F0QhkaUPJuEoREl7aIwNKKkWRIMjShxS4qhEWXasmBoRAlbVgyNKH6bBUMjyvhmxdCI4l4RDI0o5opiaET5PwgMrXUUKAytVRRIDK01FGgMrRWUKjC0paNUhaEtFaVKDG1pKFVjaEtBWQSGVjvKojC0WlEWiaHVhrJoDK0WlCYwNHSUpjA0VJQmMTQ0lKYxNBQUSIyu697mkXEwa16VRoHCcCHoPDMOZ827UihwvxkuCFlAxgGtBTU3ChyGFIkhGYe0FtxcKJAYUiSGZBzU2qRyo8BiSIggUi4UaAwJFURKjQKPISGDSKlQqsCQEEHsn+N2u3Xr9dr+3t6T98r36J/jVwOIJJ8r1T9M2vDeOqoFJOajP5wfXYGaHp4gIDlAfg9SYP8iyPBIEIAIAhZBwCIIWAQBiyBgKcQLSGjG4a1NiiAEwYkgYCGCuCKIf8bhrSWLIP4Zh7eWLIL4ZxzeWrKaBZmAYhzeWrKaBpEFZBzeWrKaB5F5ZhzeWrIIMswj4/DWkkWQl33JOLy1ZBHEsZIRZGQlIkjCpYgggfvU2NdCIojnvuXzGp8I8mW+hbx2LIIkXIqaAaklgoDVDIjrn5gciy0GxPl3AlFzXV6OxTYVZPTvBCLmurwci20KSDX/je011+XlWGyhIFViSK7Ly7HYQkCqxZBcl5djsfmCVI0huS4vx2LzAakeQ3JdXo7F9g1kERiS6/JyLLYxkMVg1NQnEGIUygVCjILZIMQo3CsIMQBSEGKAdDgcus1mQwyUzudzd71eiYHS8/kkBpu71eoHWjSksuGbaS0AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAYAAAAOEM1uAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAZEQAAGREBkIelaAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG2SURBVFiFzde9axRRFMbhJ3Hjx0YRgkWElGIRGyVgaaG9XQpBrNIETJHKjxBSJCA2NiIWdhYKgoqCIELq/AU2tiJpAiliDMHEWEyKZfdO5szHrr4wzcx77vnNnXPnnktcK9jBwYCuLcwNBeHGsIGovyltDweNbYOHg9Eo4D9Tq0bsGj40BXKoO5isEjiht4ifHuE/qVpJvO/O049PvIxN/MBMH8ZP6pzeGVxK+C4kfAsl8vTMYBnI1x1Bv3E54bmWSHCAx2KfvBbgKGbxJAfOIcS7HMjnKCqpWoBRtfE5B/IVRsoAtnAGd3GlQchd/NE7Y7dwCtPYiw72xuD216KFk/zN3Ii+SYOajhqHZUU9aK1GjS3M4xumFK+yMuPexLHEsy9YbChPJR3HW+na+yjbBvNU+zdzHbcxfoTnUw7cS8XNSS3AFx1B6zif8FzKgXsmVj6VAduyFrwzcCUHcL/L9yiaJAUYXRRjON1172zC9xX3ZS+ziTk8KAFYWWX7wRGcqJAnudVV1RTu1YhP6WL3jWjXO4HvzbLE9N8fmqKAv/SpNyvQdmorSmlHVvhX1TsJltFPPPwL/+nTC6wUIf8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAbCAYAAAAOEM1uAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAZEQAAGREBkIelaAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGCSURBVFiFzdi9ShxRFAfwn+uiaAoRVBQbbfMEFqIoFja+QCoLLQQr8R0sbdIJgTQiSgT1AcTKzkdIQhpTaOlX0GyK2WJ2c8d1Pt0/XBjOnTnnP+eerxnYxj0aJa9nfEOvlLirgFx8zaQhV8Ng2jfKiVT2amWxKAr1gOwElwXpH8NWXiXtMbKZV2EMHwP6F2P7dR1O8T2PeBW/8EMHp5TpwWGtJewF06JEuWmzu4ueqgnC55juw6ZsHE8B218F8qJsgkS1b0Grh74EbDdwioGqCYbQj6MEkhcYIlxm3opZrGEyh47eJqH22JvDOZbJ5sEJ4Rgqeh1nLTMr6Mv4bBpMZSV4hj9FMknA96wxeC3qCOvyxWAd88L17wobdHkWV0VwxP+e3ksgd6LiOrgtyvhn7DRlo3gM2K68kwziNqb7QTSC9eN3m9136cWvjVuf8FOHaSZPJ8mLfRw0r/8m3RQiuIQPBZEY67CfSCyOsttV0hG/CV3/0VQTTbxVIrW9rv6z8A+8NRQ5z9bcwQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhciIgZGF0YS1pY29uPSJ0aW1lcy1jaXJjbGUiIGNsYXNzPSJzdmctaW5saW5lLS1mYSBmYS10aW1lcy1jaXJjbGUgZmEtdy0xNiIgcm9sZT0iaW1nIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0yNTYgOEMxMTkgOCA4IDExOSA4IDI1NnMxMTEgMjQ4IDI0OCAyNDggMjQ4LTExMSAyNDgtMjQ4UzM5MyA4IDI1NiA4em0wIDQ0OGMtMTEwLjUgMC0yMDAtODkuNS0yMDAtMjAwUzE0NS41IDU2IDI1NiA1NnMyMDAgODkuNSAyMDAgMjAwLTg5LjUgMjAwLTIwMCAyMDB6bTEwMS44LTI2Mi4yTDI5NS42IDI1Nmw2Mi4yIDYyLjJjNC43IDQuNyA0LjcgMTIuMyAwIDE3bC0yMi42IDIyLjZjLTQuNyA0LjctMTIuMyA0LjctMTcgMEwyNTYgMjk1LjZsLTYyLjIgNjIuMmMtNC43IDQuNy0xMi4zIDQuNy0xNyAwbC0yMi42LTIyLjZjLTQuNy00LjctNC43LTEyLjMgMC0xN2w2Mi4yLTYyLjItNjIuMi02Mi4yYy00LjctNC43LTQuNy0xMi4zIDAtMTdsMjIuNi0yMi42YzQuNy00LjcgMTIuMy00LjcgMTcgMGw2Mi4yIDYyLjIgNjIuMi02Mi4yYzQuNy00LjcgMTIuMy00LjcgMTcgMGwyMi42IDIyLjZjNC43IDQuNyA0LjcgMTIuMyAwIDE3eiI+PC9wYXRoPjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB2aWV3Qm94PSIwIDAgMTEwIDExMCIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iNTAwIgogICBoZWlnaHQ9IjUwMCI+CiAgPHBhdGgKICAgICBkPSJNIDU1LjEwNTk2NSw1NC42NDg4MjUgTSA4Mi4xODI0MjIsOC4wNTIxMTA3IEEgNTMuODkyMzc3LDUzLjg5MjM3NyAwIDEgMCAyOC4wMjk1MDgsMTAxLjI0NTU0IDUzLjg5MjM3Nyw1My44OTIzNzcgMCAxIDAgODIuMTgyNDIyLDguMDUyMTEwNyBaIE0gNTUuMTA1OTY1LDU0LjY0ODgyNSBNIDc2LjY5MjUzNiwxNy40OTk4MjQgQSA0Mi45NjU0MzIsNDIuOTY1NDMyIDAgMCAxIDMzLjUxOTM5Myw5MS43OTc4MjcgNDIuOTY1NDMyLDQyLjk2NTQzMiAwIDAgMSA3Ni42OTI1MzYsMTcuNDk5ODI0IFoiCiAgICAgc3R5bGU9InN0cm9rZS13aWR0aDoxLjA2ODEyNzYzO2ZpbGw6IzAwMDAwMCIgLz4KICA8cGF0aAogICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjAuMjU4OTMyNTlweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgIGQ9Ik0gMjUuMjk0ODEsNTYuNTUyNTk3IEMgNzguODgyODYzLDI5LjgzNDkwNSA3OS4wMzU1MzYsMjkuODM0OTA1IDc5LjAzNTUzNiwyOS44MzQ5MDUgTCA1Mi4xNjUxNzQsODQuMTg2MzIgNDkuNTY5NzQsNTkuMzAwNyBaIiAvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB2aWV3Qm94PSIwIDAgMTEwIDExMCIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iNTAwIgogICBoZWlnaHQ9IjUwMCI+CiAgPHBhdGgKICAgICBkPSJNIDU1LjEwNTk2NSw1NC42NDg4MjUgTSA4Mi4xODI0MjIsOC4wNTIxMTA3IEEgNTMuODkyMzc3LDUzLjg5MjM3NyAwIDEgMCAyOC4wMjk1MDgsMTAxLjI0NTU0IDUzLjg5MjM3Nyw1My44OTIzNzcgMCAxIDAgODIuMTgyNDIyLDguMDUyMTEwNyBaIE0gNTUuMTA1OTY1LDU0LjY0ODgyNSBNIDc2LjY5MjUzNiwxNy40OTk4MjQgQSA0Mi45NjU0MzIsNDIuOTY1NDMyIDAgMCAxIDMzLjUxOTM5Myw5MS43OTc4MjcgNDIuOTY1NDMyLDQyLjk2NTQzMiAwIDAgMSA3Ni42OTI1MzYsMTcuNDk5ODI0IFoiCiAgICAgc3R5bGU9InN0cm9rZS13aWR0aDoxLjA2ODEyNzYzIiAvPgogIDxwYXRoCiAgICAgZD0iTSA3MC43NDkzNjQsMzEuMjI0NjM1IDc4LjQyNjkzMywzOC45MTAxNDYgNjMuMDU0MjY1LDU0LjI2Njk3MyA3OC40MTEwNyw2OS42Mzk2NjIgNzAuNzI1NTcxLDc3LjMxNzI0MiA1NS4zNjg3NjYsNjEuOTQ0NTUzIDM5Ljk5NjA5OCw3Ny4zMDEzNzkgMzIuMzE4NTI5LDY5LjYxNTg2OSA0Ny42OTExOTcsNTQuMjU5MDQyIDMyLjMzNDM5MiwzOC44ODYzNTMgbCA3LjY4NTQ5OSwtNy42Nzc1OCAxNS4zNTY4MDUsMTUuMzcyNjg5IHoiCiAgICAgc3R5bGU9InN0cm9rZS13aWR0aDoxLjE3OTEzMTg3IiAvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHBhdGggZmlsbD0iIzAxMDEwMSIgZD0iTTQ1OS42NTQsMjMzLjM3M2wtOTAuNTMxLDkwLjVjLTQ5Ljk2OSw1MC0xMzEuMDMxLDUwLTE4MSwwYy03Ljg3NS03Ljg0NC0xNC4wMzEtMTYuNjg4LTE5LjQzOC0yNS44MTMKCWw0Mi4wNjMtNDIuMDYzYzItMi4wMTYsNC40NjktMy4xNzIsNi44MjgtNC41MzFjMi45MDYsOS45MzgsNy45ODQsMTkuMzQ0LDE1Ljc5NywyNy4xNTZjMjQuOTUzLDI0Ljk2OSw2NS41NjMsMjQuOTM4LDkwLjUsMAoJbDkwLjUtOTAuNWMyNC45NjktMjQuOTY5LDI0Ljk2OS02NS41NjMsMC05MC41MTZjLTI0LjkzOC0yNC45NTMtNjUuNTMxLTI0Ljk1My05MC41LDBsLTMyLjE4OCwzMi4yMTkKCWMtMjYuMTA5LTEwLjE3Mi01NC4yNS0xMi45MDYtODEuNjQxLTguODkxbDY4LjU3OC02OC41NzhjNTAtNDkuOTg0LDEzMS4wMzEtNDkuOTg0LDE4MS4wMzEsMAoJQzUwOS42MjMsMTAyLjM0Miw1MDkuNjIzLDE4My4zODksNDU5LjY1NCwyMzMuMzczeiBNMjIwLjMyNiwzODIuMTg2bC0zMi4yMDMsMzIuMjE5Yy0yNC45NTMsMjQuOTM4LTY1LjU2MywyNC45MzgtOTAuNTE2LDAKCWMtMjQuOTUzLTI0Ljk2OS0yNC45NTMtNjUuNTYzLDAtOTAuNTMxbDkwLjUxNi05MC41YzI0Ljk2OS0yNC45NjksNjUuNTQ3LTI0Ljk2OSw5MC41LDBjNy43OTcsNy43OTcsMTIuODc1LDE3LjIwMywxNS44MTMsMjcuMTI1CgljMi4zNzUtMS4zNzUsNC44MTMtMi41LDYuODEzLTQuNWw0Mi4wNjMtNDIuMDQ3Yy01LjM3NS05LjE1Ni0xMS41NjMtMTcuOTY5LTE5LjQzOC0yNS44MjhjLTQ5Ljk2OS00OS45ODQtMTMxLjAzMS00OS45ODQtMTgxLjAxNiwwCglsLTkwLjUsOTAuNWMtNDkuOTg0LDUwLTQ5Ljk4NCwxMzEuMDMxLDAsMTgxLjAzMWM0OS45ODQsNDkuOTY5LDEzMS4wMzEsNDkuOTY5LDE4MS4wMTYsMGw2OC41OTQtNjguNTk0CglDMjc0LjU2MSwzOTUuMDkyLDI0Ni40MiwzOTIuMzQyLDIyMC4zMjYsMzgyLjE4NnoiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB2aWV3Qm94PSIwIDAgMTEwIDExMCIKICAgdmVyc2lvbj0iMS4xIgogICB3aWR0aD0iNTAwIgogICBoZWlnaHQ9IjUwMCI+CiAgPHBhdGgKICAgICBkPSJNIDgyLjE4MjQyMiw4LjA1MjExMDcgQyA1Ni40NDc3NSwtNi45MDE4MTM3IDIzLjQ2MzE4NSwxLjgzNzcyNTggOC41MDkyNzA2LDI3LjU3MjM4IC02LjQ0NDY0MzQsNTMuMzA3MDM0IDIuMjk0ODM1Nyw4Ni4yOTE2MTYgMjguMDI5NTA4LDEwMS4yNDU1NCA1My43NjQxOCwxMTYuMTk5NDYgODYuNzQ4NzQ2LDEwNy40NTk5MyAxMDEuNzAyNjYsODEuNzI1MjcxIDExNi42NTY1Nyw1NS45OTA2MTYgMTA3LjkxNzA5LDIzLjAwNjAzNSA4Mi4xODI0MjIsOC4wNTIxMTA3IFogTSA3MS43NTYwMiwyOC41Nzg1NTMgODIuMjg2ODUsMzguODQ2OTg0IDY1LjQ1MzQ3OSw1Ni4zNzMyOTYgODMuMDY0NzM4LDczLjMxNDMwMSA3Mi43OTY5MzcsODMuODQ0NDg1IDU1LjE2OTczNiw2Ni42NTcwMzkgMzkuMDEwOTk4LDgzLjIyODcxMSAyOC40ODAxNjcsNzIuOTYwMjggNDQuNjM5Mzc4LDU2LjM4OTA2OSAyOC40MTUyMTEsNDAuNTY4NjMxIDM4LjY4MzAxMywzMC4wMzg0NDYgNTQuOTM4ODkzLDQ1Ljg1ODcxIFoiCiAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS4wNjgxMjc2MyIgLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIMDxQ3d8lonQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAEOSURBVEjH7dXNK0RhFAbwXxRyZyIlKwtlMbvZkUIW9rOThezEniIf/4E/UYgkGwskaTI2V51uF/NxZ6LuU+/ivec5z/Pe9+McSpQoUeK/YTgz38AEbgv2WcUkHvKCS2ilY7tA0/VU8w2NPMICHoP5TgGmy0HvBfXviNN4D+TdHkzn8BG05n9LmMJdSNjvwrSOZtjiWruJFdwE86MOTGshr4m1TlddxWsQOW5zwTFnsdtzquAyCJ39wJ3Fc+Cu9HozR3ERBE9zODOZF7FV1FtM8BSET0JsKC0MX7FG0VVuHFeZbR/Bffi22a8SO5Y58/inh/2u70lahVph7A2quVRxnZoeDLqzJTgvG3yJP4dPo59Rw97b1k8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIMDx0nu7zDsAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAD+SURBVEjH7ZQxa8JQFIU/HFSqXQri1KHQwc2txaLi4N5NHMRNdFeoqPkH/YlFRRBxcVAREakuEQ7RiDWJWHgHAuHl3Pu9e/PuAyOjO1QM+L419BEYAjugdctKlzb08DSChkaBvgCn8v4VFPQBGAjIAsLARNbKQbR3LoCufAs5Kv/0CxoBfiRx74QnCczEU/EKjTv+qXXG+wwsxJvzMjIrSdS5cKMa835NpSNJ0P5DbEritkDh0sAnYCzBzSu6lbahO2Btb+asEsBGoHUP5+MF+JVcr27GN8fJrPkwEVnJt7Q7caSMmKo+3gFFabnrjJeAjwBuvbxbtUZGRkb/R3tcflA+OTpkkAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJ1bmRvIiBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtdW5kbyBmYS13LTE2IiByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUxMiA1MTIiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTIxMi4zMzMgMjI0LjMzM0gxMmMtNi42MjcgMC0xMi01LjM3My0xMi0xMlYxMkMwIDUuMzczIDUuMzczIDAgMTIgMGg0OGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjc4LjExMkMxMTcuNzczIDM5LjI3OSAxODQuMjYgNy40NyAyNTguMTc1IDguMDA3YzEzNi45MDYuOTk0IDI0Ni40NDggMTExLjYyMyAyNDYuMTU3IDI0OC41MzJDNTA0LjA0MSAzOTMuMjU4IDM5My4xMiA1MDQgMjU2LjMzMyA1MDRjLTY0LjA4OSAwLTEyMi40OTYtMjQuMzEzLTE2Ni41MS02NC4yMTUtNS4wOTktNC42MjItNS4zMzQtMTIuNTU0LS40NjctMTcuNDJsMzMuOTY3LTMzLjk2N2M0LjQ3NC00LjQ3NCAxMS42NjItNC43MTcgMTYuNDAxLS41MjVDMTcwLjc2IDQxNS4zMzYgMjExLjU4IDQzMiAyNTYuMzMzIDQzMmM5Ny4yNjggMCAxNzYtNzguNzE2IDE3Ni0xNzYgMC05Ny4yNjctNzguNzE2LTE3Ni0xNzYtMTc2LTU4LjQ5NiAwLTExMC4yOCAyOC40NzYtMTQyLjI3NCA3Mi4zMzNoOTguMjc0YzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2NDhjMCA2LjYyNy01LjM3MyAxMi0xMiAxMnoiPjwvcGF0aD48L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzODQgNTEyIj48cGF0aCBkPSJNMjU2IDE0NFYzMmMwLTE3LjY3MyAxNC4zMjctMzIgMzItMzJzMzIgMTQuMzI3IDMyIDMydjExMmgtNjR6bTExMiAxNkgxNmMtOC44MzcgMC0xNiA3LjE2My0xNiAxNnYzMmMwIDguODM3IDcuMTYzIDE2IDE2IDE2aDE2djMyYzAgNzcuNDA2IDU0Ljk2OSAxNDEuOTcxIDEyOCAxNTYuNzk2VjUxMmg2NHYtOTkuMjA0YzczLjAzMS0xNC44MjUgMTI4LTc5LjM5IDEyOC0xNTYuNzk2di0zMmgxNmM4LjgzNyAwIDE2LTcuMTYzIDE2LTE2di0zMmMwLTguODM3LTcuMTYzLTE2LTE2LTE2em0tMjQwLTE2VjMyYzAtMTcuNjczLTE0LjMyNy0zMi0zMi0zMlM2NCAxNC4zMjcgNjQgMzJ2MTEyaDY0eiIvPjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48cGF0aCBkPSJNNDAyLjYgODMuMmw5MC4yIDkwLjJjMy44IDMuOCAzLjggMTAgMCAxMy44TDI3NC40IDQwNS42bC05Mi44IDEwLjNjLTEyLjQgMS40LTIyLjktOS4xLTIxLjUtMjEuNWwxMC4zLTkyLjhMMzg4LjggODMuMmMzLjgtMy44IDEwLTMuOCAxMy44IDB6bTE2Mi0yMi45bC00OC44LTQ4LjhjLTE1LjItMTUuMi0zOS45LTE1LjItNTUuMiAwbC0zNS40IDM1LjRjLTMuOCAzLjgtMy44IDEwIDAgMTMuOGw5MC4yIDkwLjJjMy44IDMuOCAxMCAzLjggMTMuOCAwbDM1LjQtMzUuNGMxNS4yLTE1LjMgMTUuMi00MCAwLTU1LjJ6TTM4NCAzNDYuMlY0NDhINjRWMTI4aDIyOS44YzMuMiAwIDYuMi0xLjMgOC41LTMuNWw0MC00MGM3LjYtNy42IDIuMi0yMC41LTguNS0yMC41SDQ4QzIxLjUgNjQgMCA4NS41IDAgMTEydjM1MmMwIDI2LjUgMjEuNSA0OCA0OCA0OGgzNTJjMjYuNSAwIDQ4LTIxLjUgNDgtNDhWMzA2LjJjMC0xMC43LTEyLjktMTYtMjAuNS04LjVsLTQwIDQwYy0yLjIgMi4zLTMuNSA1LjMtMy41IDguNXoiLz48L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBkPSJNMCA4NFY1NmMwLTEzLjMgMTAuNy0yNCAyNC0yNGgxMTJsOS40LTE4LjdjNC04LjIgMTIuMy0xMy4zIDIxLjQtMTMuM2gxMTQuM2M5LjEgMCAxNy40IDUuMSAyMS41IDEzLjNMMzEyIDMyaDExMmMxMy4zIDAgMjQgMTAuNyAyNCAyNHYyOGMwIDYuNi01LjQgMTItMTIgMTJIMTJDNS40IDk2IDAgOTAuNiAwIDg0em00MTYgNTZ2MzI0YzAgMjYuNS0yMS41IDQ4LTQ4IDQ4SDgwYy0yNi41IDAtNDgtMjEuNS00OC00OFYxNDBjMC02LjYgNS40LTEyIDEyLTEyaDM2MGM2LjYgMCAxMiA1LjQgMTIgMTJ6bS0yNzIgNjhjMC04LjgtNy4yLTE2LTE2LTE2cy0xNiA3LjItMTYgMTZ2MjI0YzAgOC44IDcuMiAxNiAxNiAxNnMxNi03LjIgMTYtMTZWMjA4em05NiAwYzAtOC44LTcuMi0xNi0xNi0xNnMtMTYgNy4yLTE2IDE2djIyNGMwIDguOCA3LjIgMTYgMTYgMTZzMTYtNy4yIDE2LTE2VjIwOHptOTYgMGMwLTguOC03LjItMTYtMTYtMTZzLTE2IDcuMi0xNiAxNnYyMjRjMCA4LjggNy4yIDE2IDE2IDE2czE2LTcuMiAxNi0xNlYyMDh6Ii8+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJwZW4tc3F1YXJlIiBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtcGVuLXNxdWFyZSBmYS13LTE0IiByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDQ0OCA1MTIiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTQwMCA0ODBINDhjLTI2LjUgMC00OC0yMS41LTQ4LTQ4VjgwYzAtMjYuNSAyMS41LTQ4IDQ4LTQ4aDM1MmMyNi41IDAgNDggMjEuNSA0OCA0OHYzNTJjMCAyNi41LTIxLjUgNDgtNDggNDh6TTIzOC4xIDE3Ny45TDEwMi40IDMxMy42bC02LjMgNTcuMWMtLjggNy42IDUuNiAxNC4xIDEzLjMgMTMuM2w1Ny4xLTYuM0wzMDIuMiAyNDJjMi4zLTIuMyAyLjMtNi4xIDAtOC41TDI0Ni43IDE3OGMtMi41LTIuNC02LjMtMi40LTguNi0uMXpNMzQ1IDE2NS4xTDMxNC45IDEzNWMtOS40LTkuNC0yNC42LTkuNC0zMy45IDBsLTIzLjEgMjMuMWMtMi4zIDIuMy0yLjMgNi4xIDAgOC41bDU1LjUgNTUuNWMyLjMgMi4zIDYuMSAyLjMgOC41IDBMMzQ1IDE5OWM5LjMtOS4zIDkuMy0yNC41IDAtMzMuOXoiPjwvcGF0aD48L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhciIgZGF0YS1pY29uPSJtaW51cy1zcXVhcmUiIGNsYXNzPSJzdmctaW5saW5lLS1mYSBmYS1taW51cy1zcXVhcmUgZmEtdy0xNCIgcm9sZT0iaW1nIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMDggMjg0Yy02LjYgMC0xMi01LjQtMTItMTJ2LTMyYzAtNi42IDUuNC0xMiAxMi0xMmgyMzJjNi42IDAgMTIgNS40IDEyIDEydjMyYzAgNi42LTUuNCAxMi0xMiAxMkgxMDh6TTQ0OCA4MHYzNTJjMCAyNi41LTIxLjUgNDgtNDggNDhINDhjLTI2LjUgMC00OC0yMS41LTQ4LTQ4VjgwYzAtMjYuNSAyMS41LTQ4IDQ4LTQ4aDM1MmMyNi41IDAgNDggMjEuNSA0OCA0OHptLTQ4IDM0NlY4NmMwLTMuMy0yLjctNi02LTZINTRjLTMuMyAwLTYgMi43LTYgNnYzNDBjMCAzLjMgMi43IDYgNiA2aDM0MGMzLjMgMCA2LTIuNyA2LTZ6Ij48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhciIgZGF0YS1pY29uPSJwbHVzLXNxdWFyZSIgY2xhc3M9InN2Zy1pbmxpbmUtLWZhIGZhLXBsdXMtc3F1YXJlIGZhLXctMTQiIHJvbGU9ImltZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNDQ4IDUxMiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMzUyIDI0MHYzMmMwIDYuNi01LjQgMTItMTIgMTJoLTg4djg4YzAgNi42LTUuNCAxMi0xMiAxMmgtMzJjLTYuNiAwLTEyLTUuNC0xMi0xMnYtODhoLTg4Yy02LjYgMC0xMi01LjQtMTItMTJ2LTMyYzAtNi42IDUuNC0xMiAxMi0xMmg4OHYtODhjMC02LjYgNS40LTEyIDEyLTEyaDMyYzYuNiAwIDEyIDUuNCAxMiAxMnY4OGg4OGM2LjYgMCAxMiA1LjQgMTIgMTJ6bTk2LTE2MHYzNTJjMCAyNi41LTIxLjUgNDgtNDggNDhINDhjLTI2LjUgMC00OC0yMS41LTQ4LTQ4VjgwYzAtMjYuNSAyMS41LTQ4IDQ4LTQ4aDM1MmMyNi41IDAgNDggMjEuNSA0OCA0OHptLTQ4IDM0NlY4NmMwLTMuMy0yLjctNi02LTZINTRjLTMuMyAwLTYgMi43LTYgNnYzNDBjMCAzLjMgMi43IDYgNiA2aDM0MGMzLjMgMCA2LTIuNyA2LTZ6Ij48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACXSURBVHjaYvz//z8DIbBlyxYmIDUTiI/6+PgsQJZjJGQAVPMcIE4E4n9AnAA0ZDFRBqBphoELQGwKNOQPiMNEoubLQOwG04zTADyanYGaXyOrZaJEM4YBpGpGMYAczXgDkVgANwBoCyiOU4B4PpK8LhDvBbpOlCgXkGMIhhdINQRrGJBiCO2SMg6XgPh9yEmZkdLsDBBgAMUxZ3KEE1BeAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACXSURBVHjaYvz//z8DIfD+/XsmIDUTiI8KCgouQJZjJGQAVPMcIE4E4n9AnAA0ZDFRBqBphoELQGwKNOQPiMNEoubLQOwG04zTADyanYGaXyOrZaJEM4YBpGpGMYAczXgDkVgANwBoCyiOU4B4PpK8LhDvBbpOlCgXkGMIhhdINQRrGJBiCO2SMg6XgPh9yEmZkdLsDBBgAKQBZhCkUF/8AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACdSURBVHjaYvz//z8DMtiyZUsCkLIG4nQfH59/DAQAI7IBQM2xQGoBEDMB8XwgTiFkCNwAoGYWIHUaiA2Q5AkawgRjABX9AVJuQHwZST4RiOcADWciaADUkNdAypkUQzAESTUEq6mkGILTb8QawsRAIcBpANAWUSC1F4h18UUrEyWasRpAimYMA0jVTJOk3AfE/4jVjJEbycnOAAEGABIyZ3LVo9KqAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACeSURBVHjaYvz//z8DMnj//n0CkLIG4nRBQcF/DAQAC5rmWCA1F4iZgJgZyE8hZAgjzAVAxSDDTgOxAZL8fCDGawgTjAFU9AdIuQHxZST5RCCeAzSciaABUENeAylnUgzBECTVEKymkmIITr8RawgTA4UApwFAW0SB1F4g1sUXrUyUaMZqACmaMQwgVTNNknIfEP8jVjOKC8jNzgABBgBosmVE6sxD1QAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAHElEQVQIW2PcvHnzf19fX0YGKIAzMARgKjFUAABdvQgFy9518AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA30lEQVQ4T7WTzw2CMBSH37Ou4BiemICYeODABiYSmcAJOoELiPHgBiXhYGKYgBNjuIJQ80ghBfsaEmKPbb/v90v/ICwcuJAHr0BKuaIAKWXLBbECgoMgyAisqirlJE6BBScm+c5JfgQOuG/vlIwEHpiVDAIGrg25tQ5x1KQTcLAQYkfrTdO8AMApQR8cRdGbBEVRbDgJ5nl+BYDUqlhTcg/384wkQ6XUERFvAECPxgkzklZrferOQCl1QMSzEGI/TZ6+QNPkqbW+xHH8GG6hLMt1GIafOX/D3vvfzzSnzRcwRIO9lTALYQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA1ElEQVQ4T7WTQQrCMBBF88Usu2jBY3gKwVsIij2BB/ECVlx4C8FT9BhCZ9FlpV9SmlJrphSKWSZ57w+ZCczMhZm8GRWQXLgAALUWpAocXBRF5sAkSVJNEhR4GMDBCUjeNMmPYAj70jXJl0CDxySdQIHzFl5rkkagwdbajTuvquppjAlKMAZHUfRygrIsV6pERC4k016fc5fsYb8fkgDIICJ7kldjjBuaIKxIagDH5g1EZEfyZK3dDpOHE9hW8gBwjuP43u/CEsB7yt8g2d3972eaUs0Hvw2bpYUKd8YAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA60lEQVQ4T62TzQ2CQBBGv3FtwTI8UQEx8cCBDkw0UoEVbAU2IMaDHSwJBxNDBZwswxZc1ixhCbI/IUGOy7w3s7MzhJkfzeTRC6qqWsZx/JkiHMa2AiHEjohOjLFtkiTvkKQsy5WU8qGUOqdpeichxJ6IrgAWAF6MsY1P0sFPAGsAjVLqSEVRXABkg6xOyQg24TlxzhdRFOUADj6JB77VdZ21PQhJ9H8ppSnb5GhhznnTv4JP0hH6zhasD37mwCMZPkqf2RxagxSQWLBVgbE6JE7YKxg1FqZhrgEL7oKupJM1vun83zJNWSJXzBeWo4O9On9s3QAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA5klEQVQ4T62TQQrCMBBF5xez7KIFj+EpBG8hKPYEHsQLWHHhLQRP4TGEZtFlpF8S2hJtUgo1q5DMf/NnJoHMXJiplx5AcgHgPQXoxzqA1npL8qiU2qRp+hqD1HW9NMbcAZyyLLtBa70jeRGRRESeSql1DNKKHyKyEpEGwMECziQLL2sQ8iN24QBKkEyqqioB7GOQkJjkNc/zwvVgDGLvjTGdbZejFwONP4Wgk9aVrXkgdmX4HY846UP8zN3h4CHFICHxwIFn86ucmDgK8Btr967bQBN6YKN/wZbTzjsoHnUw5U/8BfABHFmbpQyQ0q0AAAAASUVORK5CYII=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyB2aWV3Qm94PScwIDAgNDY5LjMzMyA0NjkuMzMzJz4KICAgIDxwYXRoIGZpbGw9JyMzMzMnIGQ9J000NDgsMEgyMS4zMzNDOS41NTIsMCwwLDkuNTUyLDAsMjEuMzMzVjQ0OGMwLDExLjc4MSw5LjU1MiwyMS4zMzMsMjEuMzMzLDIxLjMzM0g0NDhjMTEuNzgxLDAsMjEuMzMzLTkuNTUyLDIxLjMzMy0yMS4zMzNWMjEuMzMzQzQ2OS4zMzMsOS41NTIsNDU5Ljc4MSwwLDQ0OCwweiBNMTM4LjY2Nyw0MjYuNjY3aC05NnYtMzg0aDk2VjQyNi42Njd6TTQyNi42NjcsNDI2LjY2N0gxODEuMzMzdi0zODRoMjQ1LjMzM1Y0MjYuNjY3eicvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyB2aWV3Qm94PScwIDAgNDY5LjMzMyA0NjkuMzMzJz4KICAgIDxwYXRoIGZpbGw9JyMzMzMnIGQ9J000NDgsMEgyMS4zMzNDOS41NTIsMCwwLDkuNTUyLDAsMjEuMzMzVjQ0OGMwLDExLjc4MSw5LjU1MiwyMS4zMzMsMjEuMzMzLDIxLjMzM0g0NDhjMTEuNzgxLDAsMjEuMzMzLTkuNTUyLDIxLjMzMy0yMS4zMzNWMjEuMzMzQzQ2OS4zMzMsOS41NTIsNDU5Ljc4MSwwLDQ0OCwweiBNMjg4LDQyNi42NjdINDIuNjY3di0zODRIMjg4VjQyNi42Njd6TTQyNi42NjcsNDI2LjY2N2gtOTZ2LTM4NGg5NlY0MjYuNjY3eicvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyB2aWV3Qm94PScwIDAgNDY5LjMzMyA0NjkuMzMzJz4KICAgIDxwYXRoIGZpbGw9JyMzMzMnIGQ9J20gMzAuNSwyMzUuNjYwODQgMCwtMjA1LjIwODI1OSA1OS42ODM1LDAgNTkuNjgzNTIsMCAwLDIwNS4yMDgyNTkgMCwyMDUuMjA4MjggLTU5LjY4MzUyLDAgLTU5LjY4MzUsMCAwLC0yMDUuMjA4MjggeicvPgogICAgPHBhdGggZmlsbD0nIzMzMycgZD0nTTQ0OCwwSDIxLjMzM0M5LjU1MiwwLDAsOS41NTIsMCwyMS4zMzNWNDQ4YzAsMTEuNzgxLDkuNTUyLDIxLjMzMywyMS4zMzMsMjEuMzMzSDQ0OGMxMS43ODEsMCwyMS4zMzMtOS41NTIsMjEuMzMzLTIxLjMzM1YyMS4zMzNDNDY5LjMzMyw5LjU1Miw0NTkuNzgxLDAsNDQ4LDB6IE0xMzguNjY3LDQyNi42NjdoLTk2di0zODRoOTZWNDI2LjY2N3pNNDI2LjY2Nyw0MjYuNjY3SDE4MS4zMzN2LTM4NGgyNDUuMzMzVjQyNi42Njd6Jy8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyB2aWV3Qm94PScwIDAgNDY5LjMzMyA0NjkuMzMzJz4KICAgIDxwYXRoIGZpbGw9JyMzMzMnIGQ9J20gMzE4LjkxNDksMjMzLjUwODE2IDAsLTIwNS4yMDgyNjIgNTkuNjgzNSwwIDU5LjY4MzUxLDAgMCwyMDUuMjA4MjYyIDAsMjA1LjIwODI4IC01OS42ODM1MSwwIC01OS42ODM1LDAgMCwtMjA1LjIwODI4IHonLz4KICAgIDxwYXRoIGZpbGw9JyMzMzMnIGQ9J000NDgsMEgyMS4zMzNDOS41NTIsMCwwLDkuNTUyLDAsMjEuMzMzVjQ0OGMwLDExLjc4MSw5LjU1MiwyMS4zMzMsMjEuMzMzLDIxLjMzM0g0NDhjMTEuNzgxLDAsMjEuMzMzLTkuNTUyLDIxLjMzMy0yMS4zMzNWMjEuMzMzQzQ2OS4zMzMsOS41NTIsNDU5Ljc4MSwwLDQ0OCwweiBNMjg4LDQyNi42NjdINDIuNjY3di0zODRIMjg4VjQyNi42Njd6TTQyNi42NjcsNDI2LjY2N2gtOTZ2LTM4NGg5NlY0MjYuNjY3eicvPgo8L3N2Zz4K\"","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__40__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Empty module for conditional compilation. */\n// tslint:disable-next-line:no-default-export\nexports.default = undefined;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isIE11() {\n    return !(window.ActiveXObject) && 'ActiveXObject' in window;\n}\nexports.isIE11 = isIE11;\nif (typeof Math.sign === 'undefined') {\n    Math.sign = function (n) {\n        if (n > 0) {\n            return 1;\n        }\n        else if (n < 0) {\n            return -1;\n        }\n        else {\n            return 0;\n        }\n    };\n}\nif (typeof Number.isNaN === 'undefined') {\n    Number.isNaN = function (value) {\n        return typeof value === 'number' && isNaN(value);\n    };\n}\nif (typeof Number.isFinite === 'undefined') {\n    Number.isFinite = function (n) {\n        return n !== Infinity && n !== -Infinity && !Number.isNaN(n);\n    };\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nif (!String.prototype.startsWith) {\n    String.prototype.startsWith = function (search, pos) {\n        return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n    };\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n// tslint:disable\nif (!Array.prototype.find) {\n    var arrayFind = function (predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n            throw new TypeError('\"this\" is null or not defined');\n        }\n        var o = Object(this);\n        // 2. Let len be ? ToLength(? Get(O, \"length\")).\n        var len = o.length >>> 0;\n        // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n        if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function');\n        }\n        // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        var thisArg = arguments[1];\n        // 5. Let k be 0.\n        var k = 0;\n        // 6. Repeat, while k < len\n        while (k < len) {\n            // a. Let Pk be ! ToString(k).\n            // b. Let kValue be ? Get(O, Pk).\n            // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).\n            // d. If testResult is true, return kValue.\n            var kValue = o[k];\n            if (predicate.call(thisArg, kValue, k, o)) {\n                return kValue;\n            }\n            // e. Increase k by 1.\n            k++;\n        }\n        // 7. Return undefined.\n        return undefined;\n    };\n    Object.defineProperty(Array.prototype, 'find', { value: arrayFind });\n}\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\nif (!Array.prototype.findIndex) {\n    Object.defineProperty(Array.prototype, 'findIndex', {\n        value: function (predicate) {\n            // 1. Let O be ? ToObject(this value).\n            if (this == null) {\n                throw new TypeError('\"this\" is null or not defined');\n            }\n            var o = Object(this);\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\n            var len = o.length >>> 0;\n            // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n            var thisArg = arguments[1];\n            // 5. Let k be 0.\n            var k = 0;\n            // 6. Repeat, while k < len\n            while (k < len) {\n                // a. Let Pk be ! ToString(k).\n                // b. Let kValue be ? Get(O, Pk).\n                // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).\n                // d. If testResult is true, return k.\n                var kValue = o[k];\n                if (predicate.call(thisArg, kValue, k, o)) {\n                    return k;\n                }\n                // e. Increase k by 1.\n                k++;\n            }\n            // 7. Return -1.\n            return -1;\n        },\n        configurable: true,\n        writable: true\n    });\n}\n// tslint:enable\n// from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\n(function (arr) {\n    arr.forEach(function (item) {\n        if (item.hasOwnProperty('remove')) {\n            return;\n        }\n        Object.defineProperty(item, 'remove', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function remove() {\n                if (this.parentNode !== null) {\n                    this.parentNode.removeChild(this);\n                }\n            }\n        });\n    });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./default\"), exports);\ntslib_1.__exportStar(require(\"./group\"), exports);\ntslib_1.__exportStar(require(\"./standard\"), exports);\nexports.DefaultElementTemplateBundle = function (types) { return undefined; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar utils_1 = require(\"./utils\");\nvar CLASS_NAME = 'ontodia-default-template';\nvar DefaultElementTemplate = /** @class */ (function (_super) {\n    tslib_1.__extends(DefaultElementTemplate, _super);\n    function DefaultElementTemplate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefaultElementTemplate.prototype.render = function () {\n        var props = this.props;\n        var image = props.imgUrl ? (React.createElement(\"div\", { className: CLASS_NAME + \"__thumbnail\" },\n            React.createElement(\"img\", { src: props.imgUrl }))) : undefined;\n        var expander = props.isExpanded ? (React.createElement(\"div\", null,\n            React.createElement(\"div\", { className: 'ontodia-default-template_body_expander' },\n                React.createElement(\"div\", { className: 'ontodia-default-template_body_expander__iri_label' }, \"IRI:\"),\n                React.createElement(\"div\", { className: 'ontodia-default-template_body_expander_iri' },\n                    React.createElement(\"a\", { className: 'ontodia-default-template_body_expander_iri__link', href: props.iri, title: props.iri }, props.iri))),\n            React.createElement(\"hr\", { className: 'ontodia-default-template_body_expander__hr' }),\n            this.renderPropertyTable())) : null;\n        return (React.createElement(\"div\", { className: 'ontodia-default-template', style: {\n                backgroundColor: props.color,\n                borderColor: props.color,\n            }, \"data-expanded\": this.props.isExpanded },\n            React.createElement(\"div\", { className: 'ontodia-default-template_type-line', title: props.label },\n                React.createElement(\"div\", { className: 'ontodia-default-template_type-line__icon', \"aria-hidden\": 'true' },\n                    React.createElement(\"img\", { src: props.iconUrl })),\n                React.createElement(\"div\", { title: props.types, className: 'ontodia-default-template_type-line_text-container' },\n                    React.createElement(\"div\", { className: 'ontodia-default-template_type-line_text-container__text' }, props.types))),\n            image,\n            React.createElement(\"div\", { className: 'ontodia-default-template_body', style: { borderColor: props.color } },\n                React.createElement(\"span\", { className: 'ontodia-default-template_body__label', title: props.label }, props.label),\n                expander)));\n    };\n    DefaultElementTemplate.prototype.renderPropertyTable = function () {\n        var propsAsList = this.props.propsAsList;\n        if (propsAsList && propsAsList.length > 0) {\n            return React.createElement(\"div\", { className: 'ontodia-default-template_body_expander_property-table' }, propsAsList.map(function (prop) {\n                var propertyValues = utils_1.getPropertyValues(prop.property);\n                var values = propertyValues.map(function (text, index) { return (React.createElement(\"div\", { className: 'ontodia-default-template_body_expander_property-table_row_key_values__value', key: index, title: text }, text)); });\n                return (React.createElement(\"div\", { key: prop.id, className: 'ontodia-default-template_body_expander_property-table_row' },\n                    React.createElement(\"div\", { title: prop.name + ' (' + prop.id + ')', className: 'ontodia-default-template_body_expander_property-table_row__key' }, prop.name),\n                    React.createElement(\"div\", { className: 'ontodia-default-template_body_expander_property-table_row_key_values' }, values)));\n            }));\n        }\n        else {\n            return React.createElement(\"div\", null, \"no properties\");\n        }\n    };\n    return DefaultElementTemplate;\n}(React.Component));\nexports.DefaultElementTemplate = DefaultElementTemplate;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__45__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../../data/model\");\nfunction getProperty(props, id) {\n    if (props && props[id]) {\n        return getPropertyValues(props[id]).join(', ');\n    }\n    else {\n        return undefined;\n    }\n}\nexports.getProperty = getProperty;\nfunction getPropertyValues(property) {\n    if (model_1.isIriProperty(property)) {\n        return property.values.map(function (_a) {\n            var value = _a.value;\n            return value;\n        });\n    }\n    else if (model_1.isLiteralProperty(property)) {\n        return property.values.map(function (_a) {\n            var value = _a.value;\n            return value;\n        });\n    }\n    return [];\n}\nexports.getPropertyValues = getPropertyValues;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../data/utils\");\nfunction isIriProperty(e) {\n    return e && e.type === 'uri';\n}\nexports.isIriProperty = isIriProperty;\nfunction isLiteralProperty(e) {\n    return e && e.type === 'string';\n}\nexports.isLiteralProperty = isLiteralProperty;\nfunction sameLink(left, right) {\n    return (left.linkTypeId === right.linkTypeId &&\n        left.sourceId === right.sourceId &&\n        left.targetId === right.targetId);\n}\nexports.sameLink = sameLink;\nfunction hashLink(link) {\n    var linkTypeId = link.linkTypeId, sourceId = link.sourceId, targetId = link.targetId;\n    var hash = utils_1.hashFnv32a(linkTypeId);\n    hash = hash * 31 + utils_1.hashFnv32a(sourceId);\n    hash = hash * 31 + utils_1.hashFnv32a(targetId);\n    return hash;\n}\nexports.hashLink = hashLink;\nfunction sameElement(left, right) {\n    return (left.id === right.id &&\n        isArraysEqual(left.types, right.types) &&\n        isLiteralsEqual(left.label.values, right.label.values) &&\n        left.image === right.image &&\n        isPropertiesEqual(left.properties, right.properties) &&\n        ((!left.sources && !right.sources) ||\n            (left.sources && right.sources && isArraysEqual(left.sources, right.sources))));\n}\nexports.sameElement = sameElement;\nfunction isArraysEqual(left, right) {\n    if (left.length !== right.length) {\n        return false;\n    }\n    for (var i = 0; i < left.length; i++) {\n        if (left[i] !== right[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isLiteralsEqual(left, right) {\n    if (left.length !== right.length) {\n        return false;\n    }\n    for (var i = 0; i < left.length; i++) {\n        var leftValue = left[i];\n        var rightValue = right[i];\n        if (leftValue.value !== rightValue.value || leftValue.language !== rightValue.language) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isIriPropertiesEqual(left, right) {\n    if (!isIriProperty(left) || !isIriProperty(right)) {\n        return false;\n    }\n    if (left.values.length !== right.values.length) {\n        return false;\n    }\n    for (var i = 0; i < left.values.length; i++) {\n        var leftValue = left.values[i];\n        var rightValue = right.values[i];\n        if (leftValue.value !== rightValue.value) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isLiteralPropertiesEqual(left, right) {\n    if (!isLiteralProperty(left) || !isLiteralProperty(right)) {\n        return false;\n    }\n    return isLiteralsEqual(left.values, right.values);\n}\nfunction isPropertiesEqual(left, right) {\n    if (Object.keys(left).length !== Object.keys(right).length) {\n        return false;\n    }\n    for (var key in left.properties) {\n        if (left.properties.hasOwnProperty(key)) {\n            var leftProperty = left[key];\n            var rightProperty = right[key];\n            if (!rightProperty) {\n                return false;\n            }\n            if (!isIriPropertiesEqual(leftProperty, rightProperty) &&\n                !isLiteralPropertiesEqual(leftProperty, rightProperty)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Generates random 32-digit hexadecimal string. */\nfunction generate128BitID() {\n    function random32BitDigits() {\n        return Math.floor((1 + Math.random()) * 0x100000000)\n            .toString(16).substring(1);\n    }\n    // generate by half because of restricted numerical precision\n    return random32BitDigits() + random32BitDigits() + random32BitDigits() + random32BitDigits();\n}\nexports.generate128BitID = generate128BitID;\n/**\n * Calculate a 32 bit FNV-1a hash\n * Found here: https://gist.github.com/vaiorabbit/5657561\n * Ref.: http://isthe.com/chongo/tech/comp/fnv/\n *\n * @param {string} str the input value\n * @param {integer} [seed] optionally pass the hash of the previous chunk\n * @returns {integer}\n */\nfunction hashFnv32a(str, seed) {\n    if (seed === void 0) { seed = 0x811c9dc5; }\n    /* tslint:disable:no-bitwise */\n    var i, l, hval = seed & 0x7fffffff;\n    for (i = 0, l = str.length; i < l; i++) {\n        hval ^= str.charCodeAt(i);\n        hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n    }\n    return hval >>> 0;\n    /* tslint:enable:no-bitwise */\n}\nexports.hashFnv32a = hashFnv32a;\n/**\n * Extracts local name for URI the same way as it's done in RDF4J.\n */\nfunction getUriLocalName(uri) {\n    var index = uri.indexOf('#');\n    if (index < 0) {\n        index = uri.lastIndexOf('/');\n    }\n    if (index < 0) {\n        index = uri.lastIndexOf(':');\n    }\n    if (index < 0) {\n        return undefined;\n    }\n    return uri.substring(index + 1);\n}\nexports.getUriLocalName = getUriLocalName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar embeddedLayer_1 = require(\"../../diagram/embeddedLayer\");\nvar CLASS = 'ontodia-group-template';\nvar GroupTemplate = /** @class */ (function (_super) {\n    tslib_1.__extends(GroupTemplate, _super);\n    function GroupTemplate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupTemplate.prototype.render = function () {\n        var _a = this.props, label = _a.label, iconUrl = _a.iconUrl, types = _a.types, color = _a.color, isExpanded = _a.isExpanded;\n        return (React.createElement(\"div\", { className: CLASS },\n            React.createElement(\"div\", { className: CLASS + \"__wrap\", style: {\n                    backgroundColor: color,\n                    borderColor: color,\n                } },\n                React.createElement(\"div\", { className: CLASS + \"__type-line\", title: label },\n                    React.createElement(\"div\", { className: CLASS + \"__type-line-icon\" },\n                        React.createElement(\"img\", { src: iconUrl })),\n                    React.createElement(\"div\", { title: types, className: CLASS + \"__type-line-text-container\" },\n                        React.createElement(\"div\", { className: CLASS + \"__type-line-text\" }, types))),\n                React.createElement(\"div\", { className: CLASS + \"__body\", style: { borderColor: color } },\n                    React.createElement(\"span\", { className: CLASS + \"__label\", title: label }, label),\n                    isExpanded ? (React.createElement(\"div\", { className: CLASS + \"__embedded-layer\" },\n                        React.createElement(embeddedLayer_1.EmbeddedLayer, null))) : null))));\n    };\n    return GroupTemplate;\n}(React.Component));\nexports.GroupTemplate = GroupTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar paper_1 = require(\"./paper\");\nvar paperArea_1 = require(\"./paperArea\");\nvar elements_1 = require(\"./elements\");\nvar elementLayer_1 = require(\"./elementLayer\");\nvar events_1 = require(\"../viewUtils/events\");\nvar paperArea_2 = require(\"./paperArea\");\nvar EmbeddedLayer = /** @class */ (function (_super) {\n    tslib_1.__extends(EmbeddedLayer, _super);\n    function EmbeddedLayer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.nestedElementListener = new events_1.EventObserver();\n        _this.layerOffsetLeft = 0;\n        _this.layerOffsetTop = 0;\n        _this.isApplyingParentMove = false;\n        _this.isNestedElementMoving = false;\n        _this.previousPositions = [];\n        _this.moveNestedElements = function (offsetX, offsetY) {\n            _this.isApplyingParentMove = true;\n            try {\n                for (var _i = 0, _a = _this.getNestedElements(); _i < _a.length; _i++) {\n                    var element = _a[_i];\n                    var _b = element.position, x = _b.x, y = _b.y;\n                    var newPosition = { x: x + offsetX, y: y + offsetY };\n                    element.setPosition(newPosition);\n                }\n            }\n            finally {\n                _this.isApplyingParentMove = false;\n                _this.recomputeSelfBounds();\n            }\n        };\n        _this.recomputeSelfBounds = function () {\n            if (_this.isApplyingParentMove) {\n                return;\n            }\n            var element = _this.context.ontodiaElement.element;\n            var _a = _this.getContentFittingBox(), offsetX = _a.x, offsetY = _a.y, paperWidth = _a.width, paperHeight = _a.height;\n            if (_this.isNestedElementMoving) {\n                var position = {\n                    x: offsetX - _this.layerOffsetLeft,\n                    y: offsetY - _this.layerOffsetTop,\n                };\n                element.setPosition(position);\n            }\n            _this.setState({ offsetX: offsetX, offsetY: offsetY, paperWidth: paperWidth, paperHeight: paperHeight }, function () { return element.redraw(); });\n        };\n        _this.onPaperPointerDown = function (e, cell) {\n            if (e.button !== 0 /* left mouse button */) {\n                return;\n            }\n            if (cell && cell instanceof elements_1.Element) {\n                e.preventDefault();\n                _this.isNestedElementMoving = true;\n            }\n        };\n        _this.onLayerInit = function (layer) {\n            if (!layer) {\n                return;\n            }\n            var _a = _this.calculateOffset(layer), left = _a.left, top = _a.top;\n            _this.layerOffsetLeft = left;\n            _this.layerOffsetTop = top;\n        };\n        _this.state = { paperWidth: 0, paperHeight: 0, offsetX: 0, offsetY: 0 };\n        return _this;\n    }\n    EmbeddedLayer.prototype.componentDidMount = function () {\n        var _this = this;\n        var element = this.context.ontodiaElement.element;\n        var _a = this.context.ontodiaPaperArea, paperArea = _a.paperArea, view = _a.view;\n        this.listener.listen(view.model.events, 'changeGroupContent', function (_a) {\n            var group = _a.group;\n            if (group === element.id) {\n                _this.listenNestedElements(_this.getNestedElements());\n                var _b = _this.getOffset(), offsetX = _b.offsetX, offsetY = _b.offsetY;\n                _this.moveNestedElements(offsetX, offsetY);\n            }\n        });\n        this.listener.listen(element.events, 'changePosition', function () {\n            if (_this.isNestedElementMoving) {\n                return;\n            }\n            var _a = _this.getOffset(), offsetX = _a.offsetX, offsetY = _a.offsetY;\n            var _b = _this.getContentFittingBox(), x = _b.x, y = _b.y;\n            var diffX = offsetX - x;\n            var diffY = offsetY - y;\n            _this.moveNestedElements(diffX, diffY);\n            _this.setState({ offsetX: offsetX, offsetY: offsetY });\n        });\n        this.listener.listen(paperArea.events, 'pointerUp', function (e) {\n            _this.isNestedElementMoving = false;\n        });\n        var nestedElements = this.getNestedElements();\n        this.listenNestedElements(nestedElements);\n        if (nestedElements.length > 0) {\n            var _b = this.getContentFittingBox(), offsetX = _b.x, offsetY = _b.y, paperWidth = _b.width, paperHeight = _b.height;\n            this.setState({ offsetX: offsetX, offsetY: offsetY, paperWidth: paperWidth, paperHeight: paperHeight }, function () { return element.redraw(); });\n        }\n        else {\n            element.requestGroupContent();\n        }\n    };\n    EmbeddedLayer.prototype.listenNestedElements = function (nestedElements) {\n        var listener = new events_1.EventObserver();\n        for (var _i = 0, nestedElements_1 = nestedElements; _i < nestedElements_1.length; _i++) {\n            var nestedElement = nestedElements_1[_i];\n            listener.listen(nestedElement.events, 'changePosition', this.recomputeSelfBounds);\n            listener.listen(nestedElement.events, 'changeSize', this.recomputeSelfBounds);\n        }\n        this.nestedElementListener.stopListening();\n        this.nestedElementListener = listener;\n    };\n    EmbeddedLayer.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.nestedElementListener.stopListening();\n        this.removeElements();\n        this.setState({ paperWidth: 0, paperHeight: 0, offsetX: 0, offsetY: 0 });\n    };\n    EmbeddedLayer.prototype.getNestedElements = function () {\n        var element = this.context.ontodiaElement.element;\n        var view = this.context.ontodiaPaperArea.view;\n        return view.model.elements.filter(function (el) { return el.group === element.id; });\n    };\n    EmbeddedLayer.prototype.getContentFittingBox = function () {\n        var nestedElements = this.getNestedElements();\n        return paperArea_2.getContentFittingBox(nestedElements, []);\n    };\n    EmbeddedLayer.prototype.removeElements = function () {\n        var view = this.context.ontodiaPaperArea.view;\n        var batch = view.model.history.startBatch();\n        for (var _i = 0, _a = this.getNestedElements(); _i < _a.length; _i++) {\n            var element = _a[_i];\n            view.model.removeElement(element.id);\n        }\n        batch.discard();\n    };\n    EmbeddedLayer.prototype.getOffset = function () {\n        var element = this.context.ontodiaElement.element;\n        var _a = element.position, elementX = _a.x, elementY = _a.y;\n        var offsetX = elementX + this.layerOffsetLeft;\n        var offsetY = elementY + this.layerOffsetTop;\n        return { offsetX: offsetX, offsetY: offsetY };\n    };\n    EmbeddedLayer.prototype.calculateOffset = function (layer) {\n        var paperArea = this.context.ontodiaPaperArea.paperArea;\n        var scale = paperArea.getScale();\n        var parent = findParentElement(layer);\n        var _a = layer.getBoundingClientRect(), left = _a.left, top = _a.top;\n        var _b = parent.getBoundingClientRect(), parentLeft = _b.left, parentTop = _b.top;\n        return { left: (left - parentLeft) / scale, top: (top - parentTop) / scale };\n    };\n    EmbeddedLayer.prototype.render = function () {\n        var element = this.context.ontodiaElement.element;\n        var view = this.context.ontodiaPaperArea.view;\n        var _a = this.state, paperWidth = _a.paperWidth, paperHeight = _a.paperHeight, offsetX = _a.offsetX, offsetY = _a.offsetY;\n        var paperTransform = {\n            width: paperWidth,\n            height: paperHeight,\n            originX: -offsetX,\n            originY: -offsetY,\n            scale: 1,\n            paddingX: 0,\n            paddingY: 0,\n        };\n        return (React.createElement(\"div\", { className: 'ontodia-embedded-layer', ref: this.onLayerInit },\n            React.createElement(paper_1.Paper, { view: view, paperTransform: paperTransform, onPointerDown: this.onPaperPointerDown, group: element.id })));\n    };\n    EmbeddedLayer.contextTypes = tslib_1.__assign(tslib_1.__assign({}, elementLayer_1.ElementContextTypes), paperArea_1.PaperAreaContextTypes);\n    return EmbeddedLayer;\n}(React.Component));\nexports.EmbeddedLayer = EmbeddedLayer;\nfunction findParentElement(layer) {\n    var parent = layer.parentElement;\n    if (!parent) {\n        throw new Error('Cannot find parent diagram element for EmbeddedLayer');\n    }\n    else if (parent.hasAttribute('data-element-id')) {\n        return parent;\n    }\n    else {\n        return findParentElement(parent);\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar elements_1 = require(\"./elements\");\nvar elementLayer_1 = require(\"./elementLayer\");\nvar linkLayer_1 = require(\"./linkLayer\");\nvar CLASS_NAME = 'ontodia-paper';\nvar Paper = /** @class */ (function (_super) {\n    tslib_1.__extends(Paper, _super);\n    function Paper() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onMouseDown = function (e) {\n            var _a = _this.props, view = _a.view, onPointerDown = _a.onPointerDown;\n            var cell = e.target instanceof Element\n                ? findCell(e.target, e.currentTarget, view.model) : undefined;\n            if (onPointerDown) {\n                onPointerDown(e, cell);\n            }\n        };\n        return _this;\n    }\n    Paper.prototype.render = function () {\n        var _a = this.props, view = _a.view, group = _a.group, paperTransform = _a.paperTransform, linkLayerWidgets = _a.linkLayerWidgets, elementLayerWidgets = _a.elementLayerWidgets;\n        var width = paperTransform.width, height = paperTransform.height, originX = paperTransform.originX, originY = paperTransform.originY, scale = paperTransform.scale, paddingX = paperTransform.paddingX, paddingY = paperTransform.paddingY;\n        var scaledWidth = width * scale;\n        var scaledHeight = height * scale;\n        // using padding instead of margin in combination with setting width and height\n        // on .paper element to avoid \"over-constrained\" margins, see an explanation here:\n        // https://stackoverflow.com/questions/11695354\n        var style = {\n            width: scaledWidth + paddingX,\n            height: scaledHeight + paddingY,\n            marginLeft: paddingX,\n            marginTop: paddingY,\n            paddingRight: paddingX,\n            paddingBottom: paddingY,\n        };\n        var htmlTransformStyle = {\n            position: 'absolute', left: 0, top: 0,\n            transform: \"scale(\" + scale + \",\" + scale + \")translate(\" + originX + \"px,\" + originY + \"px)\",\n        };\n        return (React.createElement(\"div\", { className: CLASS_NAME, style: style, onMouseDown: this.onMouseDown },\n            React.createElement(TransformedSvgCanvas, { className: CLASS_NAME + \"__canvas\", style: { overflow: 'visible' }, paperTransform: paperTransform },\n                React.createElement(linkLayer_1.LinkMarkers, { view: view }),\n                React.createElement(linkLayer_1.LinkLayer, { view: view, links: view.model.links, group: group })),\n            linkLayerWidgets,\n            React.createElement(elementLayer_1.ElementLayer, { view: view, group: group, style: htmlTransformStyle }),\n            elementLayerWidgets));\n    };\n    return Paper;\n}(react_1.Component));\nexports.Paper = Paper;\nfunction findCell(bottom, top, model) {\n    var target = bottom;\n    var vertexIndex;\n    while (true) {\n        if (target instanceof Element) {\n            if (target.hasAttribute('data-element-id')) {\n                return model.getElement(target.getAttribute('data-element-id'));\n            }\n            else if (target.hasAttribute('data-link-id')) {\n                var link = model.getLinkById(target.getAttribute('data-link-id'));\n                return typeof vertexIndex === 'number' ? new elements_1.LinkVertex(link, vertexIndex) : link;\n            }\n            else if (target.hasAttribute('data-vertex')) {\n                vertexIndex = Number(target.getAttribute('data-vertex'));\n            }\n        }\n        if (!target || target === top) {\n            break;\n        }\n        target = target.parentNode;\n    }\n    return undefined;\n}\nvar TransformedSvgCanvas = /** @class */ (function (_super) {\n    tslib_1.__extends(TransformedSvgCanvas, _super);\n    function TransformedSvgCanvas() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TransformedSvgCanvas.prototype.render = function () {\n        var _a = this.props, paperTransform = _a.paperTransform, style = _a.style, children = _a.children, otherProps = tslib_1.__rest(_a, [\"paperTransform\", \"style\", \"children\"]);\n        var width = paperTransform.width, height = paperTransform.height, originX = paperTransform.originX, originY = paperTransform.originY, scale = paperTransform.scale, paddingX = paperTransform.paddingX, paddingY = paperTransform.paddingY;\n        var scaledWidth = width * scale;\n        var scaledHeight = height * scale;\n        var svgStyle = TransformedSvgCanvas.SVG_STYLE;\n        if (style) {\n            svgStyle = tslib_1.__assign(tslib_1.__assign({}, svgStyle), style);\n        }\n        return (React.createElement(\"svg\", tslib_1.__assign({ width: scaledWidth, height: scaledHeight, style: svgStyle }, otherProps),\n            React.createElement(\"g\", { transform: \"scale(\" + scale + \",\" + scale + \")translate(\" + originX + \",\" + originY + \")\" }, children)));\n    };\n    TransformedSvgCanvas.SVG_STYLE = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    };\n    return TransformedSvgCanvas;\n}(react_1.Component));\nexports.TransformedSvgCanvas = TransformedSvgCanvas;\n/**\n * @returns scrollable pane size in non-scaled pane coords.\n */\nfunction totalPaneSize(pt) {\n    return {\n        x: pt.width * pt.scale + pt.paddingX * 2,\n        y: pt.height * pt.scale + pt.paddingY * 2,\n    };\n}\nexports.totalPaneSize = totalPaneSize;\n/**\n * @returns scrollable pane top-left corner position in non-scaled pane coords.\n */\nfunction paneTopLeft(pt) {\n    return { x: -pt.paddingX, y: -pt.paddingY };\n}\nexports.paneTopLeft = paneTopLeft;\nfunction paneFromPaperCoords(paper, pt) {\n    return {\n        x: (paper.x + pt.originX) * pt.scale,\n        y: (paper.y + pt.originY) * pt.scale,\n    };\n}\nexports.paneFromPaperCoords = paneFromPaperCoords;\nfunction paperFromPaneCoords(pane, pt) {\n    return {\n        x: pane.x / pt.scale - pt.originX,\n        y: pane.y / pt.scale - pt.originY,\n    };\n}\nexports.paperFromPaneCoords = paperFromPaneCoords;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar schema_1 = require(\"../data/schema\");\nvar events_1 = require(\"../viewUtils/events\");\nvar geometry_1 = require(\"./geometry\");\nvar LinkDirection;\n(function (LinkDirection) {\n    LinkDirection[\"in\"] = \"in\";\n    LinkDirection[\"out\"] = \"out\";\n})(LinkDirection = exports.LinkDirection || (exports.LinkDirection = {}));\nvar Element = /** @class */ (function () {\n    function Element(props) {\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        /** All in and out links of the element */\n        this.links = [];\n        var id = props.id, data = props.data, _a = props.position, position = _a === void 0 ? { x: 0, y: 0 } : _a, _b = props.size, size = _b === void 0 ? { width: 0, height: 0 } : _b, _c = props.expanded, expanded = _c === void 0 ? false : _c, group = props.group, elementState = props.elementState, _d = props.temporary, temporary = _d === void 0 ? false : _d;\n        this.id = id;\n        this._data = data;\n        this._position = position;\n        this._size = size;\n        this._expanded = expanded;\n        this._group = group;\n        this._elementState = elementState;\n        this._temporary = temporary;\n    }\n    Object.defineProperty(Element.prototype, \"iri\", {\n        get: function () { return this._data.id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Element.prototype, \"data\", {\n        get: function () { return this._data; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.setData = function (value) {\n        var previous = this._data;\n        if (previous === value) {\n            return;\n        }\n        this._data = value;\n        this.source.trigger('changeData', { source: this, previous: previous });\n        updateLinksToReferByNewIri(this, previous.id, value.id);\n    };\n    Object.defineProperty(Element.prototype, \"position\", {\n        get: function () { return this._position; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.setPosition = function (value) {\n        var previous = this._position;\n        var same = (previous.x === value.x &&\n            previous.y === value.y);\n        if (same) {\n            return;\n        }\n        this._position = value;\n        this.source.trigger('changePosition', { source: this, previous: previous });\n    };\n    Object.defineProperty(Element.prototype, \"size\", {\n        get: function () { return this._size; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.setSize = function (value) {\n        var previous = this._size;\n        var same = (previous.width === value.width &&\n            previous.height === value.height);\n        if (same) {\n            return;\n        }\n        this._size = value;\n        this.source.trigger('changeSize', { source: this, previous: previous });\n    };\n    Object.defineProperty(Element.prototype, \"isExpanded\", {\n        get: function () { return this._expanded; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.setExpanded = function (value) {\n        var previous = this._expanded;\n        if (previous === value) {\n            return;\n        }\n        this._expanded = value;\n        this.source.trigger('changeExpanded', { source: this, previous: previous });\n    };\n    Object.defineProperty(Element.prototype, \"group\", {\n        get: function () { return this._group; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.setGroup = function (value) {\n        var previous = this._group;\n        if (previous === value) {\n            return;\n        }\n        this._group = value;\n        this.source.trigger('changeGroup', { source: this, previous: previous });\n    };\n    Object.defineProperty(Element.prototype, \"elementState\", {\n        get: function () { return this._elementState; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.setElementState = function (value) {\n        var previous = this._elementState;\n        if (previous === value) {\n            return;\n        }\n        this._elementState = value;\n        this.source.trigger('changeElementState', { source: this, previous: previous });\n    };\n    Object.defineProperty(Element.prototype, \"temporary\", {\n        get: function () { return this._temporary; },\n        enumerable: true,\n        configurable: true\n    });\n    Element.prototype.focus = function () {\n        this.source.trigger('requestedFocus', { source: this });\n    };\n    Element.prototype.requestGroupContent = function () {\n        this.source.trigger('requestedGroupContent', { source: this });\n    };\n    Element.prototype.addToFilter = function (linkType, direction) {\n        this.source.trigger('requestedAddToFilter', {\n            source: this, linkType: linkType, direction: direction,\n        });\n    };\n    Element.prototype.redraw = function () {\n        this.source.trigger('requestedRedraw', { source: this });\n    };\n    return Element;\n}());\nexports.Element = Element;\nfunction updateLinksToReferByNewIri(element, oldIri, newIri) {\n    if (oldIri === newIri) {\n        return;\n    }\n    for (var _i = 0, _a = element.links; _i < _a.length; _i++) {\n        var link = _a[_i];\n        var data = link.data;\n        if (data.sourceId === oldIri) {\n            data = tslib_1.__assign(tslib_1.__assign({}, data), { sourceId: newIri });\n        }\n        if (data.targetId === oldIri) {\n            data = tslib_1.__assign(tslib_1.__assign({}, data), { targetId: newIri });\n        }\n        link.setData(data);\n    }\n}\nvar FatClassModel = /** @class */ (function () {\n    function FatClassModel(props) {\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        var id = props.id, _a = props.label, label = _a === void 0 ? [] : _a, count = props.count;\n        this.id = id;\n        this._label = label;\n        this._count = count;\n    }\n    Object.defineProperty(FatClassModel.prototype, \"label\", {\n        get: function () { return this._label; },\n        enumerable: true,\n        configurable: true\n    });\n    FatClassModel.prototype.setLabel = function (value) {\n        var previous = this._label;\n        if (previous === value) {\n            return;\n        }\n        this._label = value;\n        this.source.trigger('changeLabel', { source: this, previous: previous });\n    };\n    Object.defineProperty(FatClassModel.prototype, \"count\", {\n        get: function () { return this._count; },\n        enumerable: true,\n        configurable: true\n    });\n    FatClassModel.prototype.setCount = function (value) {\n        var previous = this._count;\n        if (previous === value) {\n            return;\n        }\n        this._count = value;\n        this.source.trigger('changeCount', { source: this, previous: previous });\n    };\n    return FatClassModel;\n}());\nexports.FatClassModel = FatClassModel;\nvar RichProperty = /** @class */ (function () {\n    function RichProperty(props) {\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        var id = props.id, _a = props.label, label = _a === void 0 ? [] : _a;\n        this.id = id;\n        this._label = label;\n    }\n    Object.defineProperty(RichProperty.prototype, \"label\", {\n        get: function () { return this._label; },\n        enumerable: true,\n        configurable: true\n    });\n    RichProperty.prototype.setLabel = function (value) {\n        var previous = this._label;\n        if (previous === value) {\n            return;\n        }\n        this._label = value;\n        this.source.trigger('changeLabel', { source: this, previous: previous });\n    };\n    return RichProperty;\n}());\nexports.RichProperty = RichProperty;\nvar Link = /** @class */ (function () {\n    function Link(props) {\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        var _a = props.id, id = _a === void 0 ? schema_1.GenerateID.forLink() : _a, typeId = props.typeId, sourceId = props.sourceId, targetId = props.targetId, data = props.data, _b = props.vertices, vertices = _b === void 0 ? [] : _b, linkState = props.linkState;\n        this.id = id;\n        this._typeId = typeId;\n        this._sourceId = sourceId;\n        this._targetId = targetId;\n        this._data = data;\n        this._vertices = vertices;\n        this._linkState = linkState;\n    }\n    Object.defineProperty(Link.prototype, \"typeId\", {\n        get: function () { return this._typeId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Link.prototype, \"sourceId\", {\n        get: function () { return this._sourceId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Link.prototype, \"targetId\", {\n        get: function () { return this._targetId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Link.prototype, \"data\", {\n        get: function () { return this._data; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.setData = function (value) {\n        var previous = this._data;\n        if (previous === value) {\n            return;\n        }\n        this._data = value;\n        this._typeId = value.linkTypeId;\n        this.source.trigger('changeData', { source: this, previous: previous });\n    };\n    Object.defineProperty(Link.prototype, \"labelBounds\", {\n        get: function () { return this._labelBounds; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.setLabelBounds = function (value) {\n        var previous = this._labelBounds;\n        if (previous === value) {\n            return;\n        }\n        this._labelBounds = value;\n        this.source.trigger('changeLabelBounds', { source: this, previous: previous });\n    };\n    Object.defineProperty(Link.prototype, \"layoutOnly\", {\n        get: function () { return this._layoutOnly; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.setLayoutOnly = function (value) {\n        var previous = this._layoutOnly;\n        if (previous === value) {\n            return;\n        }\n        this._layoutOnly = value;\n        this.source.trigger('changeLayoutOnly', { source: this, previous: previous });\n    };\n    Object.defineProperty(Link.prototype, \"vertices\", {\n        get: function () { return this._vertices; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.setVertices = function (value) {\n        var previous = this._vertices;\n        if (geometry_1.isPolylineEqual(this._vertices, value)) {\n            return;\n        }\n        this._vertices = value;\n        this.source.trigger('changeVertices', { source: this, previous: previous });\n    };\n    Object.defineProperty(Link.prototype, \"linkState\", {\n        get: function () { return this._linkState; },\n        enumerable: true,\n        configurable: true\n    });\n    Link.prototype.setLinkState = function (value) {\n        var previous = this._linkState;\n        if (previous === value) {\n            return;\n        }\n        this._linkState = value;\n        this.source.trigger('changeLinkState', { source: this, previous: previous });\n    };\n    return Link;\n}());\nexports.Link = Link;\nfunction linkMarkerKey(linkTypeIndex, startMarker) {\n    return \"ontodia-\" + (startMarker ? 'mstart' : 'mend') + \"-\" + linkTypeIndex;\n}\nexports.linkMarkerKey = linkMarkerKey;\n/**\n * Properties:\n *     visible: boolean\n *     showLabel: boolean\n *     isNew?: boolean\n *     label?: { values: LocalizedString[] }\n */\nvar FatLinkType = /** @class */ (function () {\n    function FatLinkType(props) {\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        this._isNew = false;\n        this._visible = true;\n        this._showLabel = true;\n        var id = props.id, index = props.index, _a = props.label, label = _a === void 0 ? [] : _a;\n        this.id = id;\n        this._index = index;\n        this._label = label;\n    }\n    Object.defineProperty(FatLinkType.prototype, \"index\", {\n        get: function () { return this._index; },\n        enumerable: true,\n        configurable: true\n    });\n    FatLinkType.prototype.setIndex = function (value) {\n        if (typeof this._index === 'number') {\n            throw new Error('Cannot set index for link type more than once.');\n        }\n        this._index = value;\n    };\n    Object.defineProperty(FatLinkType.prototype, \"label\", {\n        get: function () { return this._label; },\n        enumerable: true,\n        configurable: true\n    });\n    FatLinkType.prototype.setLabel = function (value) {\n        var previous = this._label;\n        if (previous === value) {\n            return;\n        }\n        this._label = value;\n        this.source.trigger('changeLabel', { source: this, previous: previous });\n    };\n    Object.defineProperty(FatLinkType.prototype, \"visible\", {\n        get: function () { return this._visible; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FatLinkType.prototype, \"showLabel\", {\n        get: function () { return this._showLabel; },\n        enumerable: true,\n        configurable: true\n    });\n    FatLinkType.prototype.setVisibility = function (params) {\n        var same = (this._visible === params.visible &&\n            this._showLabel === params.showLabel);\n        if (same) {\n            return;\n        }\n        var preventLoading = Boolean(params.preventLoading) || this._visible === params.visible;\n        this._visible = params.visible;\n        this._showLabel = params.showLabel;\n        this.source.trigger('changeVisibility', { source: this, preventLoading: preventLoading });\n    };\n    Object.defineProperty(FatLinkType.prototype, \"isNew\", {\n        get: function () { return this._isNew; },\n        enumerable: true,\n        configurable: true\n    });\n    FatLinkType.prototype.setIsNew = function (value) {\n        var previous = this._isNew;\n        if (previous === value) {\n            return;\n        }\n        this._isNew = value;\n        this.source.trigger('changeIsNew', { source: this, previous: previous });\n    };\n    return FatLinkType;\n}());\nexports.FatLinkType = FatLinkType;\nvar LinkVertex = /** @class */ (function () {\n    function LinkVertex(link, vertexIndex) {\n        this.link = link;\n        this.vertexIndex = vertexIndex;\n    }\n    LinkVertex.prototype.createAt = function (location) {\n        var vertices = tslib_1.__spreadArrays(this.link.vertices);\n        vertices.splice(this.vertexIndex, 0, location);\n        this.link.setVertices(vertices);\n    };\n    LinkVertex.prototype.moveTo = function (location) {\n        var vertices = tslib_1.__spreadArrays(this.link.vertices);\n        vertices.splice(this.vertexIndex, 1, location);\n        this.link.setVertices(vertices);\n    };\n    LinkVertex.prototype.remove = function () {\n        var vertices = tslib_1.__spreadArrays(this.link.vertices);\n        var location = vertices.splice(this.vertexIndex, 1)[0];\n        this.link.setVertices(vertices);\n    };\n    return LinkVertex;\n}());\nexports.LinkVertex = LinkVertex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\n// context could be imported directly from NPM package, e.g.\n//   import OntodiaContextV1 from 'ontodia/schema/context-v1.json';\nexports.DIAGRAM_CONTEXT_URL_V1 = 'https://ontodia.org/context/v1.json';\nexports.PLACEHOLDER_ELEMENT_TYPE = 'http://ontodia.org/NewEntity';\nexports.PLACEHOLDER_LINK_TYPE = 'http://ontodia.org/NewLink';\nvar ONTODIA_ID_URL_PREFIX = 'http://ontodia.org/data/';\nvar GenerateID;\n(function (GenerateID) {\n    function forElement() { return ONTODIA_ID_URL_PREFIX + \"e_\" + utils_1.generate128BitID(); }\n    GenerateID.forElement = forElement;\n    function forLink() { return ONTODIA_ID_URL_PREFIX + \"l_\" + utils_1.generate128BitID(); }\n    GenerateID.forLink = forLink;\n})(GenerateID = exports.GenerateID || (exports.GenerateID = {}));\nvar TemplateProperties;\n(function (TemplateProperties) {\n    TemplateProperties.PinnedProperties = 'ontodia:pinnedProperties';\n    TemplateProperties.CustomLabel = 'ontodia:customLabel';\n})(TemplateProperties = exports.TemplateProperties || (exports.TemplateProperties = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar collections_1 = require(\"./collections\");\nvar EventSource = /** @class */ (function () {\n    function EventSource() {\n        this.listeners = collections_1.createStringMap();\n    }\n    EventSource.prototype.on = function (eventKey, listener) {\n        var listeners = this.listeners[eventKey];\n        if (!listeners) {\n            listeners = [];\n            this.listeners[eventKey] = listeners;\n        }\n        listeners.push(listener);\n    };\n    EventSource.prototype.onAny = function (listener) {\n        var listeners = this.anyListeners;\n        if (!listeners) {\n            listeners = [];\n            this.anyListeners = listeners;\n        }\n        listeners.push(listener);\n    };\n    EventSource.prototype.off = function (eventKey, listener) {\n        var listeners = this.listeners[eventKey];\n        if (!listeners) {\n            return;\n        }\n        var index = listeners.indexOf(listener);\n        if (index >= 0) {\n            listeners.splice(index, 1);\n        }\n    };\n    EventSource.prototype.offAny = function (listener) {\n        var listeners = this.anyListeners;\n        if (!listeners) {\n            return;\n        }\n        var index = listeners.indexOf(listener);\n        if (index >= 0) {\n            listeners.splice(index, 1);\n        }\n    };\n    EventSource.prototype.trigger = function (eventKey, data) {\n        var _a;\n        var listeners = this.listeners[eventKey];\n        if (listeners) {\n            for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n                var listener = listeners_1[_i];\n                listener(data, eventKey);\n            }\n        }\n        if (this.anyListeners) {\n            for (var _b = 0, _c = this.anyListeners; _b < _c.length; _b++) {\n                var anyListener = _c[_b];\n                anyListener((_a = {}, _a[eventKey] = data, _a), eventKey);\n            }\n        }\n    };\n    return EventSource;\n}());\nexports.EventSource = EventSource;\nvar EventObserver = /** @class */ (function () {\n    function EventObserver() {\n        this.unsubscribeByKey = collections_1.createStringMap();\n        this.onDispose = [];\n    }\n    EventObserver.prototype.listen = function (events, eventKey, listener) {\n        events.on(eventKey, listener);\n        this.onDispose.push(function () { return events.off(eventKey, listener); });\n    };\n    EventObserver.prototype.listenAny = function (events, listener) {\n        events.onAny(listener);\n        this.onDispose.push(function () { return events.offAny(listener); });\n    };\n    EventObserver.prototype.listenOnce = function (events, eventKey, listener) {\n        var handled = false;\n        var onceListener = function (data, key) {\n            handled = true;\n            events.off(eventKey, onceListener);\n            listener(data, key);\n        };\n        events.on(eventKey, onceListener);\n        this.onDispose.push(function () {\n            if (handled) {\n                return;\n            }\n            events.off(eventKey, onceListener);\n        });\n    };\n    EventObserver.prototype.stopListening = function () {\n        for (var _i = 0, _a = this.onDispose; _i < _a.length; _i++) {\n            var unsubscribe = _a[_i];\n            unsubscribe();\n        }\n        this.onDispose.length = 0;\n        for (var key in this.unsubscribeByKey) {\n            if (!collections_1.hasOwnProperty(this.unsubscribeByKey, key)) {\n                continue;\n            }\n            var unsubscribers = this.unsubscribeByKey[key];\n            for (var _b = 0, unsubscribers_1 = unsubscribers; _b < unsubscribers_1.length; _b++) {\n                var unsubscribe = unsubscribers_1[_b];\n                unsubscribe();\n            }\n        }\n        this.unsubscribeByKey = {};\n    };\n    return EventObserver;\n}());\nexports.EventObserver = EventObserver;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nfunction createStringMap() {\n    var map = Object.create(null);\n    // tslint:disable-next-line:no-string-literal\n    delete map['hint'];\n    return map;\n}\nexports.createStringMap = createStringMap;\nfunction createNumberMap() {\n    return createStringMap();\n}\nexports.createNumberMap = createNumberMap;\nfunction hasOwnProperty(collection, key) {\n    return Object.prototype.hasOwnProperty.call(collection, key);\n}\nexports.hasOwnProperty = hasOwnProperty;\nfunction objectValues(obj) {\n    var items = [];\n    for (var key in obj) {\n        if (!Object.hasOwnProperty.call(obj, key)) {\n            continue;\n        }\n        items.push(obj[key]);\n    }\n    return items;\n}\nexports.objectValues = objectValues;\nfunction isEmptyMap(map) {\n    for (var key in map) {\n        if (hasOwnProperty(map, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.isEmptyMap = isEmptyMap;\n/**\n * Clones Map collection. Required due to IE11 not supporing `new Map(map)`.\n */\nfunction cloneMap(map) {\n    var clone = new Map();\n    map.forEach(function (value, key) { return clone.set(key, value); });\n    return clone;\n}\nexports.cloneMap = cloneMap;\n/**\n * Clones Set collection. Required due to IE11 not supporing `new Set(set)`.\n */\nfunction cloneSet(set) {\n    var clone = new Set();\n    set.forEach(function (item) { return clone.add(item); });\n    return clone;\n}\nexports.cloneSet = cloneSet;\nfunction getOrCreateArrayInMap(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = [];\n        map.set(key, values);\n    }\n    return values;\n}\nexports.getOrCreateArrayInMap = getOrCreateArrayInMap;\nfunction getOrCreateSetInMap(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nexports.getOrCreateSetInMap = getOrCreateSetInMap;\nvar OrderedMap = /** @class */ (function () {\n    function OrderedMap() {\n        this.mapping = createStringMap();\n        this.ordered = [];\n    }\n    OrderedMap.prototype.reorder = function (compare) {\n        this.ordered.sort(compare);\n    };\n    Object.defineProperty(OrderedMap.prototype, \"items\", {\n        get: function () {\n            return this.ordered;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    OrderedMap.prototype.get = function (key) {\n        return this.mapping[key];\n    };\n    OrderedMap.prototype.push = function (key, value) {\n        if (key in this.mapping) {\n            var previous = this.mapping[key];\n            if (previous === value) {\n                return;\n            }\n            var index = this.ordered.indexOf(previous);\n            this.ordered.splice(index, 1);\n        }\n        this.mapping[key] = value;\n        this.ordered.push(value);\n    };\n    OrderedMap.prototype.delete = function (key) {\n        if (!(key in this.mapping)) {\n            return undefined;\n        }\n        var previous = this.mapping[key];\n        var index = this.ordered.indexOf(previous);\n        this.ordered.splice(index, 1);\n        delete this.mapping[key];\n        return previous;\n    };\n    return OrderedMap;\n}());\nexports.OrderedMap = OrderedMap;\nvar HashMap = /** @class */ (function () {\n    function HashMap(hashCode, equals) {\n        this.hashCode = hashCode;\n        this.equals = equals;\n        this.map = new Map();\n        this._size = 0;\n    }\n    Object.defineProperty(HashMap.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HashMap.prototype.has = function (key) {\n        var _this = this;\n        var items = this.map.get(this.hashCode(key));\n        if (!items) {\n            return false;\n        }\n        return Boolean(items.find(function (p) { return _this.equals(p.key, key); }));\n    };\n    HashMap.prototype.get = function (key) {\n        var _this = this;\n        var items = this.map.get(this.hashCode(key));\n        if (!items) {\n            return undefined;\n        }\n        var pair = items.find(function (p) { return _this.equals(p.key, key); });\n        return pair ? pair.value : undefined;\n    };\n    HashMap.prototype.set = function (key, value) {\n        var _this = this;\n        var hash = this.hashCode(key);\n        var items = this.map.get(hash);\n        if (items) {\n            var index = items.findIndex(function (p) { return _this.equals(p.key, key); });\n            if (index >= 0) {\n                items.splice(index, 1);\n            }\n            else {\n                this._size++;\n            }\n            items.push({ key: key, value: value });\n        }\n        else {\n            items = [{ key: key, value: value }];\n            this.map.set(hash, items);\n            this._size++;\n        }\n        return this;\n    };\n    HashMap.prototype.delete = function (key) {\n        var _this = this;\n        var items = this.map.get(this.hashCode(key));\n        if (!items) {\n            return false;\n        }\n        var index = items.findIndex(function (p) { return _this.equals(p.key, key); });\n        if (index >= 0) {\n            items.splice(index, 1);\n            this._size--;\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    HashMap.prototype.clear = function () {\n        this.map.clear();\n        this._size = 0;\n    };\n    HashMap.prototype.forEach = function (callback) {\n        var _this = this;\n        this.map.forEach(function (items) {\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                var _a = items_1[_i], key = _a.key, value = _a.value;\n                callback(value, key, _this);\n            }\n        });\n    };\n    HashMap.prototype.clone = function () {\n        var clone = new HashMap(this.hashCode, this.equals);\n        clone._size = this.size;\n        this.map.forEach(function (value, key) { return clone.map.set(key, tslib_1.__spreadArrays(value)); });\n        return clone;\n    };\n    return HashMap;\n}());\nexports.HashMap = HashMap;\nvar MoveDirection;\n(function (MoveDirection) {\n    MoveDirection[MoveDirection[\"ToStart\"] = -1] = \"ToStart\";\n    MoveDirection[MoveDirection[\"ToEnd\"] = 1] = \"ToEnd\";\n})(MoveDirection = exports.MoveDirection || (exports.MoveDirection = {}));\nfunction makeMoveComparator(items, selected, moveDirection) {\n    var orderMap = new Map();\n    var selectionIndexOffset = moveDirection * items.length;\n    items.forEach(function (item, index) {\n        orderMap.set(item, index);\n    });\n    for (var _i = 0, selected_1 = selected; _i < selected_1.length; _i++) {\n        var selectedItem = selected_1[_i];\n        orderMap.set(selectedItem, selectionIndexOffset + orderMap.get(selectedItem));\n    }\n    return function (a, b) {\n        var orderA = orderMap.get(a);\n        var orderB = orderMap.get(b);\n        return (orderA > orderB ? 1 :\n            orderA < orderB ? -1 :\n                0);\n    };\n}\nexports.makeMoveComparator = makeMoveComparator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar Vector;\n(function (Vector) {\n    function equals(a, b) {\n        return a.x === b.x && a.y === b.y;\n    }\n    Vector.equals = equals;\n    function length(_a) {\n        var x = _a.x, y = _a.y;\n        return Math.sqrt(x * x + y * y);\n    }\n    Vector.length = length;\n    function normalize(_a) {\n        var x = _a.x, y = _a.y;\n        if (x === 0 && y === 0) {\n            return { x: x, y: y };\n        }\n        var inverseLength = 1 / Math.sqrt(x * x + y * y);\n        return { x: x * inverseLength, y: y * inverseLength };\n    }\n    Vector.normalize = normalize;\n    function dot(_a, _b) {\n        var x1 = _a.x, y1 = _a.y;\n        var x2 = _b.x, y2 = _b.y;\n        return x1 * x2 + y1 * y2;\n    }\n    Vector.dot = dot;\n    function cross2D(_a, _b) {\n        var x1 = _a.x, y1 = _a.y;\n        var x2 = _b.x, y2 = _b.y;\n        return x1 * y2 - y1 * x2;\n    }\n    Vector.cross2D = cross2D;\n})(Vector = exports.Vector || (exports.Vector = {}));\nvar Rect;\n(function (Rect) {\n    function center(_a) {\n        var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    Rect.center = center;\n})(Rect = exports.Rect || (exports.Rect = {}));\nfunction boundsOf(element) {\n    var _a = element.position, x = _a.x, y = _a.y;\n    var _b = element.size, width = _b.width, height = _b.height;\n    return { x: x, y: y, width: width, height: height };\n}\nexports.boundsOf = boundsOf;\nfunction intersectRayFromRectangleCenter(sourceRect, rayTarget) {\n    var isTargetInsideRect = sourceRect.width === 0 || sourceRect.height === 0 ||\n        rayTarget.x > sourceRect.x && rayTarget.x < (sourceRect.x + sourceRect.width) &&\n            rayTarget.y > sourceRect.y && rayTarget.y < (sourceRect.y + sourceRect.height);\n    var halfWidth = sourceRect.width / 2;\n    var halfHeight = sourceRect.height / 2;\n    var center = {\n        x: sourceRect.x + halfWidth,\n        y: sourceRect.y + halfHeight,\n    };\n    if (isTargetInsideRect) {\n        return center;\n    }\n    var direction = Vector.normalize({\n        x: rayTarget.x - center.x,\n        y: rayTarget.y - center.y,\n    });\n    var rightDirection = { x: Math.abs(direction.x), y: direction.y };\n    var isHorizontal = Vector.cross2D({ x: halfWidth, y: -halfHeight }, rightDirection) > 0 &&\n        Vector.cross2D({ x: halfWidth, y: halfHeight }, rightDirection) < 0;\n    if (isHorizontal) {\n        return {\n            x: center.x + halfWidth * Math.sign(direction.x),\n            y: center.y + halfWidth * direction.y / Math.abs(direction.x),\n        };\n    }\n    else {\n        return {\n            x: center.x + halfHeight * direction.x / Math.abs(direction.y),\n            y: center.y + halfHeight * Math.sign(direction.y),\n        };\n    }\n}\nfunction isPolylineEqual(left, right) {\n    if (left === right) {\n        return true;\n    }\n    if (left.length !== right.length) {\n        return false;\n    }\n    for (var i = 0; i < left.length; i++) {\n        var a = left[i];\n        var b = right[i];\n        if (!(a.x === b.x && a.y === b.y)) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.isPolylineEqual = isPolylineEqual;\nfunction computePolyline(source, target, vertices) {\n    var sourceRect = boundsOf(source);\n    var targetRect = boundsOf(target);\n    var startPoint = intersectRayFromRectangleCenter(sourceRect, vertices.length > 0 ? vertices[0] : Rect.center(targetRect));\n    var endPoint = intersectRayFromRectangleCenter(targetRect, vertices.length > 0 ? vertices[vertices.length - 1] : Rect.center(sourceRect));\n    return tslib_1.__spreadArrays([startPoint], vertices, [endPoint]);\n}\nexports.computePolyline = computePolyline;\nfunction computePolylineLength(polyline) {\n    var previous;\n    return polyline.reduce(function (acc, point) {\n        var segmentLength = previous ? Vector.length({ x: point.x - previous.x, y: point.y - previous.y }) : 0;\n        previous = point;\n        return acc + segmentLength;\n    }, 0);\n}\nexports.computePolylineLength = computePolylineLength;\nfunction getPointAlongPolyline(polyline, offset) {\n    if (polyline.length === 0) {\n        throw new Error('Cannot compute a point for empty polyline');\n    }\n    if (offset < 0) {\n        return polyline[0];\n    }\n    var currentOffset = 0;\n    for (var i = 1; i < polyline.length; i++) {\n        var previous = polyline[i - 1];\n        var point = polyline[i];\n        var segment = { x: point.x - previous.x, y: point.y - previous.y };\n        var segmentLength = Vector.length(segment);\n        var newOffset = currentOffset + segmentLength;\n        if (offset < newOffset) {\n            var leftover = (offset - currentOffset) / segmentLength;\n            return {\n                x: previous.x + leftover * segment.x,\n                y: previous.y + leftover * segment.y,\n            };\n        }\n        else {\n            currentOffset = newOffset;\n        }\n    }\n    return polyline[polyline.length - 1];\n}\nexports.getPointAlongPolyline = getPointAlongPolyline;\nfunction findNearestSegmentIndex(polyline, location) {\n    var minDistance = Infinity;\n    var foundIndex = 0;\n    for (var i = 0; i < polyline.length - 1; i++) {\n        var pivot = polyline[i];\n        var next = polyline[i + 1];\n        var target = { x: location.x - pivot.x, y: location.y - pivot.y };\n        var segment = { x: next.x - pivot.x, y: next.y - pivot.y };\n        var segmentLength = Vector.length(segment);\n        var projectionToSegment = Vector.dot(target, segment) / segmentLength;\n        if (projectionToSegment < 0 || projectionToSegment > segmentLength) {\n            continue;\n        }\n        var distanceToSegment = Math.abs(Vector.cross2D(target, segment)) / segmentLength;\n        if (distanceToSegment < minDistance) {\n            minDistance = distanceToSegment;\n            foundIndex = i;\n        }\n    }\n    return foundIndex;\n}\nexports.findNearestSegmentIndex = findNearestSegmentIndex;\nfunction computeGrouping(elements) {\n    var grouping = new Map();\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var element = elements_1[_i];\n        var group = element.group;\n        if (typeof group === 'string') {\n            var children = grouping.get(group);\n            if (!children) {\n                children = [];\n                grouping.set(group, children);\n            }\n            children.push(element);\n        }\n    }\n    return grouping;\n}\nexports.computeGrouping = computeGrouping;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar d3_color_1 = require(\"d3-color\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar react_1 = require(\"../viewUtils/react\");\nvar keyedObserver_1 = require(\"../viewUtils/keyedObserver\");\nvar commands_1 = require(\"./commands\");\nvar view_1 = require(\"./view\");\n// tslint:disable:no-bitwise\nvar RedrawFlags;\n(function (RedrawFlags) {\n    RedrawFlags[RedrawFlags[\"None\"] = 0] = \"None\";\n    RedrawFlags[RedrawFlags[\"Render\"] = 1] = \"Render\";\n    RedrawFlags[RedrawFlags[\"RecomputeTemplate\"] = 3] = \"RecomputeTemplate\";\n    RedrawFlags[RedrawFlags[\"RecomputeBlurred\"] = 5] = \"RecomputeBlurred\";\n})(RedrawFlags || (RedrawFlags = {}));\nvar ElementLayer = /** @class */ (function (_super) {\n    tslib_1.__extends(ElementLayer, _super);\n    function ElementLayer(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.redrawBatch = {\n            requests: new Map(),\n            forAll: RedrawFlags.None,\n        };\n        _this.delatedRedraw = new async_1.Debouncer();\n        _this.sizeRequests = new Map();\n        _this.delayedUpdateSizes = new async_1.Debouncer();\n        _this.onMount = function (layer) {\n            _this.layer = layer;\n        };\n        _this.requestRedraw = function (element, request) {\n            // tslint:disable:no-bitwise\n            var flagsWithForAll = _this.redrawBatch.forAll | request;\n            if (flagsWithForAll === _this.redrawBatch.forAll) {\n                // forAll flags already include the request\n                return;\n            }\n            var existing = _this.redrawBatch.requests.get(element.id);\n            _this.redrawBatch.requests.set(element.id, existing | request);\n            _this.delatedRedraw.call(_this.redrawElements);\n            // tslint:enable:no-bitwise\n        };\n        _this.redrawElements = function () {\n            var props = _this.props;\n            _this.setState(function (state) { return ({\n                elementStates: applyRedrawRequests(props.view, props.group, _this.redrawBatch, state.elementStates)\n            }); });\n        };\n        _this.requestSizeUpdate = function (element, node) {\n            _this.sizeRequests.set(element.id, { element: element, node: node });\n            _this.delayedUpdateSizes.call(_this.recomputeQueuedSizes);\n        };\n        _this.recomputeQueuedSizes = function () {\n            var batch = _this.sizeRequests;\n            _this.sizeRequests = new Map();\n            batch.forEach(function (_a) {\n                var element = _a.element, node = _a.node;\n                var clientWidth = node.clientWidth, clientHeight = node.clientHeight;\n                element.setSize({ width: clientWidth, height: clientHeight });\n            });\n        };\n        var _a = _this.props, view = _a.view, group = _a.group;\n        _this.state = {\n            elementStates: applyRedrawRequests(view, group, _this.redrawBatch, new Map())\n        };\n        return _this;\n    }\n    ElementLayer.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, view = _a.view, style = _a.style;\n        var elementStates = this.state.elementStates;\n        var elementsToRender = [];\n        for (var _i = 0, _b = view.model.elements; _i < _b.length; _i++) {\n            var id = _b[_i].id;\n            var state = elementStates.get(id);\n            if (state) {\n                elementsToRender.push(state);\n            }\n        }\n        return React.createElement(\"div\", { className: 'ontodia-element-layer', ref: this.onMount, style: style }, elementsToRender.map(function (state) {\n            var overlayElement = (React.createElement(OverlayedElement, { key: state.element.id, state: state, view: view, onInvalidate: _this.requestRedraw, onResize: _this.requestSizeUpdate }));\n            var elementDecorator = view._decorateElement(state.element);\n            if (elementDecorator) {\n                return (React.createElement(\"div\", { key: state.element.id },\n                    overlayElement,\n                    elementDecorator));\n            }\n            return overlayElement;\n        }));\n    };\n    ElementLayer.prototype.componentDidMount = function () {\n        var _this = this;\n        var view = this.props.view;\n        this.listener.listen(view.model.events, 'changeCells', function () {\n            _this.requestRedrawAll(RedrawFlags.None);\n        });\n        this.listener.listen(view.events, 'changeLanguage', function () {\n            _this.requestRedrawAll(RedrawFlags.RecomputeTemplate);\n        });\n        this.listener.listen(view.events, 'changeHighlight', function () {\n            _this.requestRedrawAll(RedrawFlags.RecomputeBlurred);\n        });\n        this.listener.listen(view.model.events, 'elementEvent', function (_a) {\n            var data = _a.data;\n            var invalidatesTemplate = data.changeData || data.changeExpanded || data.changeElementState;\n            if (invalidatesTemplate) {\n                _this.requestRedraw(invalidatesTemplate.source, RedrawFlags.RecomputeTemplate);\n            }\n            var invalidatesRender = data.changePosition || data.requestedRedraw;\n            if (invalidatesRender) {\n                _this.requestRedraw(invalidatesRender.source, RedrawFlags.Render);\n            }\n        });\n        this.listener.listen(view.events, 'syncUpdate', function (_a) {\n            var layer = _a.layer;\n            if (layer === view_1.RenderingLayer.Element) {\n                _this.delatedRedraw.runSynchronously();\n            }\n            else if (layer === view_1.RenderingLayer.ElementSize) {\n                _this.delayedUpdateSizes.runSynchronously();\n            }\n        });\n    };\n    ElementLayer.prototype.componentWillReceiveProps = function (nextProps) {\n        var _this = this;\n        if (this.props.group !== nextProps.group) {\n            this.setState(function (state) { return ({\n                elementStates: applyRedrawRequests(nextProps.view, nextProps.group, _this.redrawBatch, state.elementStates)\n            }); });\n        }\n    };\n    ElementLayer.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.delatedRedraw.dispose();\n        this.delayedUpdateSizes.dispose();\n    };\n    ElementLayer.prototype.requestRedrawAll = function (request) {\n        // tslint:disable-next-line:no-bitwise\n        this.redrawBatch.forAll |= request;\n        this.delatedRedraw.call(this.redrawElements);\n    };\n    return ElementLayer;\n}(React.Component));\nexports.ElementLayer = ElementLayer;\nfunction applyRedrawRequests(view, targetGroup, batch, previous) {\n    var computed = new Map();\n    for (var _i = 0, _a = view.model.elements; _i < _a.length; _i++) {\n        var element = _a[_i];\n        if (element.group !== targetGroup) {\n            continue;\n        }\n        var elementId = element.id;\n        if (previous.has(elementId)) {\n            var state = previous.get(elementId);\n            // tslint:disable:no-bitwise\n            var request = (batch.requests.get(elementId) || RedrawFlags.None) | batch.forAll;\n            if (request & RedrawFlags.Render) {\n                state = {\n                    element: element,\n                    templateProps: (request & RedrawFlags.RecomputeTemplate) === RedrawFlags.RecomputeTemplate\n                        ? computeTemplateProps(state.element, view) : state.templateProps,\n                    blurred: (request & RedrawFlags.RecomputeBlurred) === RedrawFlags.RecomputeBlurred\n                        ? computeIsBlurred(state.element, view) : state.blurred,\n                };\n            }\n            computed.set(elementId, state);\n            batch.requests.delete(elementId);\n            // tslint:enable:no-bitwise\n        }\n        else {\n            computed.set(element.id, {\n                element: element,\n                templateProps: computeTemplateProps(element, view),\n                blurred: computeIsBlurred(element, view),\n            });\n        }\n    }\n    batch.forAll = RedrawFlags.None;\n    return computed;\n}\nexports.ElementContextTypes = {\n    ontodiaElement: react_1.PropTypes.anything,\n};\nvar OverlayedElement = /** @class */ (function (_super) {\n    tslib_1.__extends(OverlayedElement, _super);\n    function OverlayedElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.disposed = false;\n        _this.rerenderTemplate = function () {\n            if (_this.disposed) {\n                return;\n            }\n            _this.props.onInvalidate(_this.props.state.element, RedrawFlags.RecomputeTemplate);\n        };\n        _this.onMount = function (node) {\n            if (!node) {\n                return;\n            }\n            var _a = _this.props, state = _a.state, onResize = _a.onResize;\n            onResize(state.element, node);\n        };\n        _this.onLoadOrErrorEvent = function () {\n            var _a = _this.props, state = _a.state, onResize = _a.onResize;\n            onResize(state.element, react_dom_1.findDOMNode(_this));\n        };\n        _this.onClick = function (e) {\n            if (e.target instanceof HTMLElement && e.target.localName === 'a') {\n                var anchor = e.target;\n                var _a = _this.props, view = _a.view, state = _a.state;\n                var clickIntent = e.target.getAttribute('data-iri-click-intent') === view_1.IriClickIntent.OpenEntityIri ?\n                    view_1.IriClickIntent.OpenEntityIri : view_1.IriClickIntent.OpenOtherIri;\n                view.onIriClick(decodeURI(anchor.href), state.element, clickIntent, e);\n            }\n        };\n        _this.onDoubleClick = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var _a = _this.props, view = _a.view, element = _a.state.element;\n            view.model.history.execute(commands_1.setElementExpanded(element, !element.isExpanded));\n        };\n        return _this;\n    }\n    OverlayedElement.prototype.getChildContext = function () {\n        var ontodiaElement = {\n            element: this.props.state.element,\n        };\n        return { ontodiaElement: ontodiaElement };\n    };\n    OverlayedElement.prototype.render = function () {\n        var _a = this.props.state, element = _a.element, blurred = _a.blurred;\n        if (element.temporary) {\n            return React.createElement(\"div\", null);\n        }\n        var _b = element.position, _c = _b.x, x = _c === void 0 ? 0 : _c, _d = _b.y, y = _d === void 0 ? 0 : _d;\n        var transform = \"translate(\" + x + \"px,\" + y + \"px)\";\n        // const angle = model.get('angle') || 0;\n        // if (angle) { transform += `rotate(${angle}deg)`; }\n        var className = (\"ontodia-overlayed-element \" + (blurred ? 'ontodia-overlayed-element--blurred' : ''));\n        return React.createElement(\"div\", { className: className, \"data-element-id\": element.id, style: { position: 'absolute', transform: transform }, tabIndex: 0, ref: this.onMount, \n            // resize element when child image loaded\n            onLoad: this.onLoadOrErrorEvent, onError: this.onLoadOrErrorEvent, onClick: this.onClick, onDoubleClick: this.onDoubleClick },\n            React.createElement(TemplatedElement, tslib_1.__assign({}, this.props)));\n    };\n    OverlayedElement.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, state = _a.state, view = _a.view;\n        this.listener.listen(state.element.events, 'requestedFocus', function () {\n            var element = react_dom_1.findDOMNode(_this);\n            if (element) {\n                element.focus();\n            }\n        });\n        this.typesObserver = keyedObserver_1.observeElementTypes(view.model, 'changeLabel', this.rerenderTemplate);\n        this.propertiesObserver = keyedObserver_1.observeProperties(view.model, 'changeLabel', this.rerenderTemplate);\n        this.observeTypes();\n    };\n    OverlayedElement.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.typesObserver.stopListening();\n        this.propertiesObserver.stopListening();\n        this.disposed = true;\n    };\n    OverlayedElement.prototype.shouldComponentUpdate = function (nextProps) {\n        return this.props.state !== nextProps.state;\n    };\n    OverlayedElement.prototype.componentDidUpdate = function () {\n        this.observeTypes();\n        this.props.onResize(this.props.state.element, react_dom_1.findDOMNode(this));\n    };\n    OverlayedElement.prototype.observeTypes = function () {\n        var element = this.props.state.element;\n        this.typesObserver.observe(element.data.types);\n        this.propertiesObserver.observe(Object.keys(element.data.properties));\n    };\n    OverlayedElement.childContextTypes = exports.ElementContextTypes;\n    return OverlayedElement;\n}(React.Component));\nvar TemplatedElement = /** @class */ (function (_super) {\n    tslib_1.__extends(TemplatedElement, _super);\n    function TemplatedElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TemplatedElement.prototype.render = function () {\n        var _a = this.props, state = _a.state, view = _a.view;\n        var element = state.element, templateProps = state.templateProps;\n        var templateClass = view.getElementTemplate(element.data.types);\n        this.cachedTemplateClass = templateClass;\n        this.cachedTemplateProps = templateProps;\n        return React.createElement(templateClass, templateProps);\n    };\n    TemplatedElement.prototype.shouldComponentUpdate = function (nextProps) {\n        var templateClass = nextProps.view.getElementTemplate(nextProps.state.element.data.types);\n        return !(this.cachedTemplateClass === templateClass &&\n            this.cachedTemplateProps === nextProps.state.templateProps);\n    };\n    return TemplatedElement;\n}(React.Component));\nfunction computeTemplateProps(model, view) {\n    var types = model.data.types.length > 0\n        ? view.getElementTypeString(model.data) : 'Thing';\n    var label = view.formatLabel(model.data.label.values, model.iri);\n    var _a = computeStyleFor(model, view), color = _a.color, icon = _a.icon;\n    var propsAsList = computePropertyTable(model, view);\n    return {\n        elementId: model.id,\n        data: model.data,\n        iri: model.iri,\n        types: types,\n        label: label,\n        color: color,\n        iconUrl: icon,\n        imgUrl: model.data.image,\n        isExpanded: model.isExpanded,\n        props: model.data.properties,\n        propsAsList: propsAsList,\n    };\n}\nfunction computePropertyTable(model, view) {\n    if (!model.data.properties) {\n        return [];\n    }\n    var propertyIris = Object.keys(model.data.properties);\n    var propTable = propertyIris.map(function (key) {\n        var property = view.model.createProperty(key);\n        var name = view.formatLabel(property.label, key);\n        return {\n            id: key,\n            name: name,\n            property: model.data.properties[key],\n        };\n    });\n    propTable.sort(function (a, b) {\n        var aLabel = (a.name || a.id).toLowerCase();\n        var bLabel = (b.name || b.id).toLowerCase();\n        return aLabel.localeCompare(bLabel);\n    });\n    return propTable;\n}\nfunction computeStyleFor(model, view) {\n    var _a = view.getTypeStyle(model.data.types), _b = _a.color, h = _b.h, c = _b.c, l = _b.l, icon = _a.icon;\n    return {\n        icon: icon,\n        color: d3_color_1.hcl(h, c, l).toString(),\n    };\n}\nfunction computeIsBlurred(element, view) {\n    return view.highlighter && !view.highlighter(element);\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__58__;","module.exports = __WEBPACK_EXTERNAL_MODULE__59__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar events_1 = require(\"./events\");\nvar BatchingScheduler = /** @class */ (function () {\n    function BatchingScheduler(waitingTime) {\n        if (waitingTime === void 0) { waitingTime = 0; }\n        this.waitingTime = waitingTime;\n        this.useAnimationFrame = waitingTime === 0;\n        this.runSynchronously = this.runSynchronously.bind(this);\n    }\n    BatchingScheduler.prototype.schedule = function () {\n        if (typeof this.scheduled === 'undefined') {\n            if (this.useAnimationFrame) {\n                this.scheduled = requestAnimationFrame(this.runSynchronously);\n            }\n            else {\n                this.scheduled = setTimeout(this.runSynchronously, this.waitingTime);\n            }\n        }\n    };\n    BatchingScheduler.prototype.runSynchronously = function () {\n        var wasScheduled = this.cancelScheduledTimeout();\n        if (wasScheduled) {\n            this.run();\n        }\n    };\n    BatchingScheduler.prototype.dispose = function () {\n        this.cancelScheduledTimeout();\n    };\n    BatchingScheduler.prototype.cancelScheduledTimeout = function () {\n        if (typeof this.scheduled !== 'undefined') {\n            if (this.useAnimationFrame) {\n                cancelAnimationFrame(this.scheduled);\n            }\n            else {\n                clearTimeout(this.scheduled);\n            }\n            this.scheduled = undefined;\n            return true;\n        }\n        return false;\n    };\n    return BatchingScheduler;\n}());\nexports.BatchingScheduler = BatchingScheduler;\nvar BufferingQueue = /** @class */ (function (_super) {\n    tslib_1.__extends(BufferingQueue, _super);\n    function BufferingQueue(onFetch, waitingTime) {\n        if (waitingTime === void 0) { waitingTime = 200; }\n        var _this = _super.call(this, waitingTime) || this;\n        _this.onFetch = onFetch;\n        _this.fetchingQueue = Object.create(null);\n        return _this;\n    }\n    BufferingQueue.prototype.push = function (key) {\n        this.fetchingQueue[key] = true;\n        this.schedule();\n    };\n    BufferingQueue.prototype.clear = function () {\n        this.fetchingQueue = Object.create(null);\n    };\n    BufferingQueue.prototype.run = function () {\n        var _a = this, fetchingQueue = _a.fetchingQueue, onFetch = _a.onFetch;\n        this.fetchingQueue = Object.create(null);\n        onFetch(Object.keys(fetchingQueue));\n    };\n    return BufferingQueue;\n}(BatchingScheduler));\nexports.BufferingQueue = BufferingQueue;\nvar Debouncer = /** @class */ (function (_super) {\n    tslib_1.__extends(Debouncer, _super);\n    function Debouncer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Debouncer.prototype.call = function (callback) {\n        this.callback = callback;\n        this.schedule();\n    };\n    Debouncer.prototype.run = function () {\n        var callback = this.callback;\n        callback();\n    };\n    return Debouncer;\n}(BatchingScheduler));\nexports.Debouncer = Debouncer;\nvar Cancellation = /** @class */ (function () {\n    function Cancellation() {\n        this.source = new events_1.EventSource();\n        this.aborted = false;\n        this.signal = new (/** @class */ (function () {\n            function class_1(parent) {\n                this.parent = parent;\n            }\n            Object.defineProperty(class_1.prototype, \"aborted\", {\n                get: function () { return this.parent.aborted; },\n                enumerable: true,\n                configurable: true\n            });\n            class_1.prototype.addEventListener = function (event, handler) {\n                if (event !== 'abort') {\n                    return;\n                }\n                if (this.parent.source) {\n                    this.parent.source.on('abort', handler);\n                }\n                else {\n                    handler();\n                }\n            };\n            class_1.prototype.removeEventListener = function (event, handler) {\n                if (event !== 'abort') {\n                    return;\n                }\n                if (this.parent.source) {\n                    this.parent.source.off('abort', handler);\n                }\n            };\n            return class_1;\n        }()))(this);\n    }\n    Cancellation.prototype.abort = function () {\n        if (this.aborted) {\n            return;\n        }\n        this.aborted = true;\n        this.source.trigger('abort', undefined);\n        this.source = undefined;\n    };\n    Cancellation.NEVER_SIGNAL = {\n        aborted: false,\n        addEventListener: function () { },\n        removeEventListener: function () { },\n    };\n    return Cancellation;\n}());\nexports.Cancellation = Cancellation;\nvar CancelledError = /** @class */ (function (_super) {\n    tslib_1.__extends(CancelledError, _super);\n    function CancelledError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = CancelledError.name;\n        Object.setPrototypeOf(_this, CancelledError.prototype);\n        return _this;\n    }\n    return CancelledError;\n}(Error));\nexports.CancelledError = CancelledError;\nfunction delay(timeout) {\n    return new Promise(function (resolve) { return setTimeout(function () { return resolve(); }, timeout); });\n}\nexports.delay = delay;\nfunction animateInterval(duration, onProgress, cancellation) {\n    return new Promise(function (resolve) {\n        var animationFrameId;\n        var start;\n        var animate = function (time) {\n            if (cancellation && cancellation.signal.aborted) {\n                return;\n            }\n            start = start || time;\n            var timePassed = time - start;\n            if (timePassed > duration) {\n                timePassed = duration;\n            }\n            onProgress(timePassed / duration);\n            if (timePassed < duration) {\n                animationFrameId = requestAnimationFrame(animate);\n            }\n            else {\n                resolve();\n            }\n        };\n        cancellation.signal.addEventListener('abort', function () {\n            cancelAnimationFrame(animationFrameId);\n            resolve();\n        });\n        animationFrameId = requestAnimationFrame(animate);\n    });\n}\nexports.animateInterval = animateInterval;\nfunction easeInOutBezier(t) {\n    if (t < 0) {\n        return 0;\n    }\n    if (t > 1) {\n        return 1;\n    }\n    return t * t * (3.0 - 2.0 * t);\n}\nexports.easeInOutBezier = easeInOutBezier;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PropTypes;\n(function (PropTypes) {\n    PropTypes.anything = function () { return null; };\n})(PropTypes = exports.PropTypes || (exports.PropTypes = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar KeyedObserver = /** @class */ (function () {\n    function KeyedObserver(subscribe) {\n        this.subscribe = subscribe;\n        this.observedKeys = new Map();\n    }\n    KeyedObserver.prototype.observe = function (keys) {\n        if (keys.length === 0 && this.observedKeys.size === 0) {\n            return;\n        }\n        var newObservedKeys = new Map();\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (newObservedKeys.has(key)) {\n                continue;\n            }\n            var unsubscribe = this.observedKeys.get(key);\n            if (!unsubscribe) {\n                unsubscribe = this.subscribe(key);\n            }\n            newObservedKeys.set(key, unsubscribe);\n        }\n        this.observedKeys.forEach(function (unsubscribe, key) {\n            if (!newObservedKeys.has(key)) {\n                unsubscribe();\n            }\n        });\n        this.observedKeys = newObservedKeys;\n    };\n    KeyedObserver.prototype.stopListening = function () {\n        this.observe([]);\n    };\n    return KeyedObserver;\n}());\nexports.KeyedObserver = KeyedObserver;\nfunction observeElementTypes(model, event, listener) {\n    return new KeyedObserver(function (key) {\n        var type = model.getClass(key);\n        if (type) {\n            type.events.on(event, listener);\n            return function () { return type.events.off(event, listener); };\n        }\n        return undefined;\n    });\n}\nexports.observeElementTypes = observeElementTypes;\nfunction observeProperties(model, event, listener) {\n    return new KeyedObserver(function (key) {\n        var property = model.getProperty(key);\n        if (property) {\n            property.events.on(event, listener);\n            return function () { return property.events.off(event, listener); };\n        }\n        return undefined;\n    });\n}\nexports.observeProperties = observeProperties;\nfunction observeLinkTypes(model, event, listener) {\n    return new KeyedObserver(function (key) {\n        var type = model.createLinkType(key);\n        if (type) {\n            type.events.on(event, listener);\n            return function () { return type.events.off(event, listener); };\n        }\n        return undefined;\n    });\n}\nexports.observeLinkTypes = observeLinkTypes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar model_1 = require(\"../data/model\");\nvar geometry_1 = require(\"./geometry\");\nvar history_1 = require(\"./history\");\nvar RestoreGeometry = /** @class */ (function () {\n    function RestoreGeometry(elementState, linkState) {\n        this.elementState = elementState;\n        this.linkState = linkState;\n        this.title = 'Move elements and links';\n    }\n    RestoreGeometry.capture = function (model) {\n        return RestoreGeometry.captureElementsAndLinks(model.elements, model.links);\n    };\n    RestoreGeometry.captureElementsAndLinks = function (elements, links) {\n        return new RestoreGeometry(elements.map(function (element) { return ({ element: element, position: element.position }); }), links.map(function (link) { return ({ link: link, vertices: link.vertices }); }));\n    };\n    RestoreGeometry.prototype.hasChanges = function () {\n        return this.elementState.length > 0 || this.linkState.length > 0;\n    };\n    RestoreGeometry.prototype.filterOutUnchanged = function () {\n        return new RestoreGeometry(this.elementState.filter(function (_a) {\n            var element = _a.element, position = _a.position;\n            return !geometry_1.Vector.equals(element.position, position);\n        }), this.linkState.filter(function (_a) {\n            var link = _a.link, vertices = _a.vertices;\n            return !geometry_1.isPolylineEqual(link.vertices, vertices);\n        }));\n    };\n    RestoreGeometry.prototype.invoke = function () {\n        var previous = RestoreGeometry.captureElementsAndLinks(this.elementState.map(function (state) { return state.element; }), this.linkState.map(function (state) { return state.link; }));\n        // restore in reverse order to workaround position changed event\n        // handling in EmbeddedLayer inside nested elements\n        // (child's position change causes group to resize or move itself)\n        for (var _i = 0, _a = tslib_1.__spreadArrays(this.elementState).reverse(); _i < _a.length; _i++) {\n            var _b = _a[_i], element = _b.element, position = _b.position;\n            element.setPosition(position);\n        }\n        for (var _c = 0, _d = this.linkState; _c < _d.length; _c++) {\n            var _e = _d[_c], link = _e.link, vertices = _e.vertices;\n            link.setVertices(vertices);\n        }\n        return previous;\n    };\n    return RestoreGeometry;\n}());\nexports.RestoreGeometry = RestoreGeometry;\nfunction restoreCapturedLinkGeometry(link) {\n    var vertices = link.vertices;\n    return history_1.Command.create('Change link vertices', function () {\n        var capturedInverse = restoreCapturedLinkGeometry(link);\n        link.setVertices(vertices);\n        return capturedInverse;\n    });\n}\nexports.restoreCapturedLinkGeometry = restoreCapturedLinkGeometry;\nfunction setElementExpanded(element, expanded) {\n    var title = expanded ? 'Expand element' : 'Collapse element';\n    return history_1.Command.create(title, function () {\n        element.setExpanded(expanded);\n        return setElementExpanded(element, !expanded);\n    });\n}\nexports.setElementExpanded = setElementExpanded;\nfunction changeLinkTypeVisibility(params) {\n    var linkType = params.linkType, visible = params.visible, showLabel = params.showLabel, preventLoading = params.preventLoading;\n    return history_1.Command.create('Change link type visibility', function () {\n        var previousVisible = linkType.visible;\n        var previousShowLabel = linkType.showLabel;\n        linkType.setVisibility({ visible: visible, showLabel: showLabel, preventLoading: preventLoading });\n        return changeLinkTypeVisibility({\n            linkType: linkType,\n            visible: previousVisible,\n            showLabel: previousShowLabel,\n            preventLoading: preventLoading,\n        });\n    });\n}\nexports.changeLinkTypeVisibility = changeLinkTypeVisibility;\nfunction setElementData(model, target, data) {\n    var elements = model.elements.filter(function (el) { return el.iri === target; });\n    var previous = elements.length > 0 ? elements[0].data : undefined;\n    return history_1.Command.create('Set element data', function () {\n        for (var _i = 0, _a = model.elements.filter(function (el) { return el.iri === target; }); _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.setData(data);\n        }\n        return setElementData(model, data.id, previous);\n    });\n}\nexports.setElementData = setElementData;\nfunction setLinkData(model, oldData, newData) {\n    if (!model_1.sameLink(oldData, newData)) {\n        throw new Error('Cannot change typeId, sourceId or targetId when changing link data');\n    }\n    return history_1.Command.create('Set link data', function () {\n        for (var _i = 0, _a = model.links; _i < _a.length; _i++) {\n            var link = _a[_i];\n            if (model_1.sameLink(link.data, oldData)) {\n                link.setData(newData);\n            }\n        }\n        return setLinkData(model, newData, oldData);\n    });\n}\nexports.setLinkData = setLinkData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar events_1 = require(\"../viewUtils/events\");\nvar Command;\n(function (Command) {\n    function create(title, action) {\n        return { title: title, invoke: action };\n    }\n    Command.create = create;\n    function effect(title, body) {\n        var perform = {\n            title: title,\n            invoke: function () {\n                body();\n                return skip;\n            }\n        };\n        var skip = {\n            title: 'Skipped effect: ' + title,\n            invoke: function () { return perform; },\n        };\n        return perform;\n    }\n    Command.effect = effect;\n})(Command = exports.Command || (exports.Command = {}));\nvar NonRememberingHistory = /** @class */ (function () {\n    function NonRememberingHistory() {\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        this.undoStack = [];\n        this.redoStack = [];\n        this.storeBatch = function () { };\n        this.discardBatch = function () { };\n    }\n    NonRememberingHistory.prototype.reset = function () {\n        this.source.trigger('historyChanged', { hasChanges: false });\n    };\n    NonRememberingHistory.prototype.undo = function () {\n        throw new Error('Undo is unsupported');\n    };\n    NonRememberingHistory.prototype.redo = function () {\n        throw new Error('Redo is unsupported');\n    };\n    NonRememberingHistory.prototype.execute = function (command) {\n        command.invoke();\n        this.source.trigger('historyChanged', { hasChanges: true });\n    };\n    NonRememberingHistory.prototype.registerToUndo = function (command) {\n        this.source.trigger('historyChanged', { hasChanges: true });\n    };\n    NonRememberingHistory.prototype.startBatch = function (title) {\n        return {\n            history: this,\n            store: this.storeBatch,\n            discard: this.discardBatch,\n        };\n    };\n    return NonRememberingHistory;\n}());\nexports.NonRememberingHistory = NonRememberingHistory;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar d3_color_1 = require(\"d3-color\");\nvar lodash_1 = require(\"lodash\");\nvar defaultTypeStyles_1 = require(\"../customization/defaultTypeStyles\");\nvar defaultLinkStyles_1 = require(\"../customization/defaultLinkStyles\");\nvar templates_1 = require(\"../customization/templates\");\nvar blankNodes_1 = require(\"../data/sparql/blankNodes\");\nvar utils_1 = require(\"../data/utils\");\nvar events_1 = require(\"../viewUtils/events\");\nvar geometry_1 = require(\"./geometry\");\nvar linkRouter_1 = require(\"./linkRouter\");\nvar IriClickIntent;\n(function (IriClickIntent) {\n    IriClickIntent[\"JumpToEntity\"] = \"jumpToEntity\";\n    IriClickIntent[\"OpenEntityIri\"] = \"openEntityIri\";\n    IriClickIntent[\"OpenOtherIri\"] = \"openOtherIri\";\n})(IriClickIntent = exports.IriClickIntent || (exports.IriClickIntent = {}));\nvar RenderingLayer;\n(function (RenderingLayer) {\n    RenderingLayer[RenderingLayer[\"Element\"] = 1] = \"Element\";\n    RenderingLayer[RenderingLayer[\"ElementSize\"] = 2] = \"ElementSize\";\n    RenderingLayer[RenderingLayer[\"PaperArea\"] = 3] = \"PaperArea\";\n    RenderingLayer[RenderingLayer[\"Link\"] = 4] = \"Link\";\n    RenderingLayer[RenderingLayer[\"Editor\"] = 5] = \"Editor\";\n    RenderingLayer[RenderingLayer[\"FirstToUpdate\"] = 1] = \"FirstToUpdate\";\n    RenderingLayer[RenderingLayer[\"LastToUpdate\"] = 5] = \"LastToUpdate\";\n})(RenderingLayer = exports.RenderingLayer || (exports.RenderingLayer = {}));\nvar WidgetAttachment;\n(function (WidgetAttachment) {\n    WidgetAttachment[WidgetAttachment[\"Viewport\"] = 1] = \"Viewport\";\n    WidgetAttachment[WidgetAttachment[\"OverElements\"] = 2] = \"OverElements\";\n    WidgetAttachment[WidgetAttachment[\"OverLinks\"] = 3] = \"OverLinks\";\n})(WidgetAttachment = exports.WidgetAttachment || (exports.WidgetAttachment = {}));\nvar DiagramView = /** @class */ (function () {\n    function DiagramView(model, options) {\n        if (options === void 0) { options = {}; }\n        this.model = model;\n        this.options = options;\n        this.listener = new events_1.EventObserver();\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        this.disposed = false;\n        this.colorSeed = 0x0BADBEEF;\n        this._language = 'en';\n        this.linkTemplates = new Map();\n        this.routings = new Map();\n        this.resolveTypeStyle = options.typeStyleResolver || defaultTypeStyles_1.DefaultTypeStyleBundle;\n        this.resolveLinkTemplate = options.linkTemplateResolver || defaultLinkStyles_1.DefaultLinkTemplateBundle;\n        this.resolveElementTemplate = options.elementTemplateResolver || templates_1.DefaultElementTemplateBundle;\n        this.initRouting();\n    }\n    DiagramView.prototype.initRouting = function () {\n        var _this = this;\n        this.router = this.options.linkRouter || new linkRouter_1.DefaultLinkRouter();\n        this.updateRoutings();\n        this.listener.listen(this.model.events, 'changeCells', function () { return _this.updateRoutings(); });\n        this.listener.listen(this.model.events, 'linkEvent', function (_a) {\n            var key = _a.key, data = _a.data;\n            if (data.changeVertices) {\n                _this.updateRoutings();\n            }\n        });\n        this.listener.listen(this.model.events, 'elementEvent', function (_a) {\n            var key = _a.key, data = _a.data;\n            if (data.changePosition || data.changeSize) {\n                _this.updateRoutings();\n            }\n        });\n    };\n    DiagramView.prototype.updateRoutings = function () {\n        var previousRoutes = this.routings;\n        var computedRoutes = this.router.route(this.model);\n        previousRoutes.forEach(function (previous, linkId) {\n            var computed = computedRoutes.get(linkId);\n            if (computed && sameRoutedLink(previous, computed)) {\n                // replace new route with the old one if they're equal\n                // so other components can use a simple reference equality checks\n                computedRoutes.set(linkId, previous);\n            }\n        });\n        this.routings = computedRoutes;\n        this.source.trigger('updateRoutings', { source: this, previous: previousRoutes });\n    };\n    DiagramView.prototype.getRoutings = function () {\n        return this.routings;\n    };\n    DiagramView.prototype.getRouting = function (linkId) {\n        return this.routings.get(linkId);\n    };\n    DiagramView.prototype.getLanguage = function () { return this._language; };\n    DiagramView.prototype.setLanguage = function (value) {\n        if (!value) {\n            throw new Error('Cannot set empty language.');\n        }\n        var previous = this._language;\n        if (previous === value) {\n            return;\n        }\n        this._language = value;\n        this.source.trigger('changeLanguage', { source: this, previous: previous });\n    };\n    DiagramView.prototype.getLinkTemplates = function () {\n        return this.linkTemplates;\n    };\n    DiagramView.prototype.performSyncUpdate = function () {\n        for (var layer = RenderingLayer.FirstToUpdate; layer <= RenderingLayer.LastToUpdate; layer++) {\n            this.source.trigger('syncUpdate', { layer: layer });\n        }\n    };\n    DiagramView.prototype.onIriClick = function (iri, element, clickIntent, event) {\n        event.persist();\n        event.preventDefault();\n        var onIriClick = this.options.onIriClick;\n        if (onIriClick) {\n            onIriClick({ iri: iri, element: element, clickIntent: clickIntent, originalEvent: event });\n        }\n    };\n    DiagramView.prototype.setPaperWidget = function (widget) {\n        var _a;\n        var key = widget.key, element = widget.widget, attachment = widget.attachment;\n        var widgets = (_a = {}, _a[key] = element ? { element: element, attachment: attachment } : undefined, _a);\n        this.source.trigger('updateWidgets', { widgets: widgets });\n    };\n    DiagramView.prototype.setHandlerForNextDropOnPaper = function (handler) {\n        this.dropOnPaperHandler = handler;\n    };\n    DiagramView.prototype._tryHandleDropOnPaper = function (e) {\n        var dropOnPaperHandler = this.dropOnPaperHandler;\n        if (dropOnPaperHandler) {\n            this.dropOnPaperHandler = undefined;\n            dropOnPaperHandler(e);\n            return true;\n        }\n        return false;\n    };\n    DiagramView.prototype.selectLabel = function (labels, language) {\n        var targetLanguage = typeof language === 'undefined' ? this.getLanguage() : language;\n        var _a = this.options.selectLabelLanguage, selectLabelLanguage = _a === void 0 ? defaultSelectLabel : _a;\n        return selectLabelLanguage(labels, targetLanguage);\n    };\n    DiagramView.prototype.formatLabel = function (labels, fallbackIri, language) {\n        var label = this.selectLabel(labels, language);\n        return resolveLabel(label, fallbackIri);\n    };\n    DiagramView.prototype.getElementTypeString = function (elementModel) {\n        var _this = this;\n        return elementModel.types.map(function (typeId) {\n            var type = _this.model.createClass(typeId);\n            return _this.formatLabel(type.label, type.id);\n        }).sort().join(', ');\n    };\n    DiagramView.prototype.getTypeStyle = function (types) {\n        types.sort();\n        var customStyle = this.resolveTypeStyle(types);\n        var icon = customStyle ? customStyle.icon : undefined;\n        var color;\n        if (customStyle && customStyle.color) {\n            color = d3_color_1.hcl(customStyle.color);\n        }\n        else {\n            var hue = getHueFromClasses(types, this.colorSeed);\n            color = { h: hue, c: 40, l: 75 };\n        }\n        return { icon: icon, color: color };\n    };\n    DiagramView.prototype.formatIri = function (iri) {\n        if (blankNodes_1.isEncodedBlank(iri)) {\n            return '(blank node)';\n        }\n        return \"<\" + iri + \">\";\n    };\n    DiagramView.prototype.getElementTemplate = function (types) {\n        return this.resolveElementTemplate(types) || templates_1.StandardTemplate;\n    };\n    DiagramView.prototype.createLinkTemplate = function (linkType) {\n        var existingTemplate = this.linkTemplates.get(linkType.id);\n        if (existingTemplate) {\n            return existingTemplate;\n        }\n        var template = {};\n        var result = this.resolveLinkTemplate(linkType.id);\n        if (result) {\n            template = lodash_1.cloneDeep(result);\n        }\n        fillLinkTemplateDefaults(template);\n        this.linkTemplates.set(linkType.id, template);\n        this.source.trigger('changeLinkTemplates', {});\n        return template;\n    };\n    DiagramView.prototype.dispose = function () {\n        if (this.disposed) {\n            return;\n        }\n        this.source.trigger('dispose', {});\n        this.listener.stopListening();\n        this.disposed = true;\n    };\n    Object.defineProperty(DiagramView.prototype, \"highlighter\", {\n        get: function () { return this._highlighter; },\n        enumerable: true,\n        configurable: true\n    });\n    DiagramView.prototype.setHighlighter = function (value) {\n        var previous = this._highlighter;\n        if (previous === value) {\n            return;\n        }\n        this._highlighter = value;\n        this.source.trigger('changeHighlight', { source: this, previous: previous });\n    };\n    DiagramView.prototype._setElementDecorator = function (decorator) {\n        this._elementDecorator = decorator;\n    };\n    DiagramView.prototype._decorateElement = function (element) {\n        return this._elementDecorator(element);\n    };\n    return DiagramView;\n}());\nexports.DiagramView = DiagramView;\nfunction sameRoutedLink(a, b) {\n    return (a.linkId === b.linkId &&\n        a.labelTextAnchor === b.labelTextAnchor &&\n        geometry_1.isPolylineEqual(a.vertices, b.vertices));\n}\nfunction getHueFromClasses(classes, seed) {\n    var hash = seed;\n    for (var _i = 0, classes_1 = classes; _i < classes_1.length; _i++) {\n        var name_1 = classes_1[_i];\n        hash = utils_1.hashFnv32a(name_1, hash);\n    }\n    var MAX_INT32 = 0x7fffffff;\n    return 360 * ((hash === undefined ? 0 : hash) / MAX_INT32);\n}\nfunction fillLinkTemplateDefaults(template) {\n    var defaults = {\n        markerTarget: { d: 'M0,0 L0,8 L9,4 z', width: 9, height: 8, fill: 'black' },\n    };\n    lodash_1.defaultsDeep(template, defaults);\n    if (!template.renderLink) {\n        template.renderLink = function () { return ({}); };\n    }\n}\nfunction defaultSelectLabel(texts, language) {\n    if (texts.length === 0) {\n        return undefined;\n    }\n    var defaultValue;\n    var englishValue;\n    for (var _i = 0, texts_1 = texts; _i < texts_1.length; _i++) {\n        var text = texts_1[_i];\n        if (text.language === language) {\n            return text;\n        }\n        else if (text.language === '') {\n            defaultValue = text;\n        }\n        else if (text.language === 'en') {\n            englishValue = text;\n        }\n    }\n    return (defaultValue !== undefined ? defaultValue :\n        englishValue !== undefined ? englishValue :\n            texts[0]);\n}\nfunction resolveLabel(label, fallbackIri) {\n    if (label) {\n        return label.value;\n    }\n    return utils_1.getUriLocalName(fallbackIri) || fallbackIri;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__66__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classIcon = require('../../../images/icons/class.svg');\nvar objectPropertyIcon = require('../../../images/icons/objectProperty.svg');\nvar datatypePropertyIcon = require('../../../images/icons/datatypeProperty.svg');\nvar personIcon = require('../../../images/icons/person.svg');\nvar countryIcon = require('../../../images/icons/country.svg');\nvar organizationIcon = require('../../../images/icons/organization.svg');\nvar locationIcon = require('../../../images/icons/location.svg');\nvar eventIcon = require('../../../images/icons/event.svg');\nvar objectIcon = require('../../../images/icons/object.svg');\nexports.DefaultTypeStyleBundle = function (types) {\n    if (types.indexOf('http://www.w3.org/2002/07/owl#Class') !== -1 ||\n        types.indexOf('http://www.w3.org/2000/01/rdf-schema#Class') !== -1) {\n        return { color: '#eaac77', icon: classIcon };\n    }\n    else if (types.indexOf('http://www.w3.org/2002/07/owl#ObjectProperty') !== -1) {\n        return { color: '#34c7f3', icon: objectPropertyIcon };\n    }\n    else if (types.indexOf('http://www.w3.org/2002/07/owl#DatatypeProperty') !== -1) {\n        return { color: '#34c7f3', icon: datatypePropertyIcon };\n    }\n    else if (types.indexOf('http://xmlns.com/foaf/0.1/Person') !== -1 ||\n        types.indexOf('http://www.wikidata.org/entity/Q5') !== -1) {\n        return { color: '#eb7777', icon: personIcon };\n    }\n    else if (types.indexOf('http://www.wikidata.org/entity/Q6256') !== -1) {\n        return { color: '#77ca98', icon: countryIcon };\n    }\n    else if (types.indexOf('http://schema.org/Organization') !== -1 ||\n        types.indexOf('http://dbpedia.org/ontology/Organisation') !== -1 ||\n        types.indexOf('http://xmlns.com/foaf/0.1/Organization') !== -1 ||\n        types.indexOf('http://www.wikidata.org/entity/Q43229') !== -1) {\n        return { color: '#77ca98', icon: organizationIcon };\n    }\n    else if (types.indexOf('http://www.wikidata.org/entity/Q618123') !== -1) {\n        return { color: '#bebc71', icon: locationIcon };\n    }\n    else if (types.indexOf('http://www.wikidata.org/entity/Q1190554') !== -1) {\n        return { color: '#b4b1fb', icon: eventIcon };\n    }\n    else if (types.indexOf('http://www.wikidata.org/entity/Q488383') !== -1) {\n        return { color: '#53ccb2', icon: objectIcon };\n    }\n    else {\n        return undefined;\n    }\n};\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAyNiAyNiI+CiAgICA8dGV4dCB4PSIzIiB5PSIyMiIgY2xhc3M9InRleHQiIGZpbGw9IiNlYWFjNzciCiAgICAgICAgc3R5bGU9ImZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLCAnSGVsdmV0aWNhJywgJ0FyaWFsJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAyNnB4OyBmb250LXdlaWdodDogYm9sZDsiPgogICAgICAgIEMKICAgIDwvdGV4dD4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAyNiAyNiI+CiAgICA8dGV4dCB4PSIwIiB5PSIyMCIgY2xhc3M9InRleHQiIGZpbGw9IiMzNGM3ZjMiCiAgICAgICAgc3R5bGU9ImZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLCAnSGVsdmV0aWNhJywgJ0FyaWFsJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogYm9sZDsiPgogICAgICAgIE9QCiAgICA8L3RleHQ+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAyNiAyNiI+CiAgICA8dGV4dCB4PSIwIiB5PSIyMCIgY2xhc3M9InRleHQiIGZpbGw9IiMzNGM3ZjMiCiAgICAgICAgc3R5bGU9ImZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLCAnSGVsdmV0aWNhJywgJ0FyaWFsJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogYm9sZDsiPgogICAgICAgIERQCiAgICA8L3RleHQ+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAzNTAgMzUwIj4KCTxwYXRoIGZpbGw9IiNlYjc3NzciIGQ9Ik0xNzUsMTcxLjE3M2MzOC45MTQsMCw3MC40NjMtMzguMzE4LDcwLjQ2My04NS41ODZDMjQ1LjQ2MywzOC4zMTgsMjM1LjEwNSwwLDE3NSwwcy03MC40NjUsMzguMzE4LTcwLjQ2NSw4NS41ODcKCQlDMTA0LjUzNSwxMzIuODU1LDEzNi4wODQsMTcxLjE3MywxNzUsMTcxLjE3M3oiLz4KCTxwYXRoIGZpbGw9IiNlYjc3NzciIGQ9Ik00MS45MDksMzAxLjg1M0M0MS44OTcsMjk4Ljk3MSw0MS44ODUsMzAxLjA0MSw0MS45MDksMzAxLjg1M0w0MS45MDksMzAxLjg1M3oiLz4KCTxwYXRoIGZpbGw9IiNlYjc3NzciIGQ9Ik0zMDguMDg1LDMwNC4xMDRDMzA4LjEyMywzMDMuMzE1LDMwOC4wOTgsMjk4LjYzLDMwOC4wODUsMzA0LjEwNEwzMDguMDg1LDMwNC4xMDR6Ii8+Cgk8cGF0aCBmaWxsPSIjZWI3Nzc3IiBkPSJNMzA3LjkzNSwyOTguMzk3Yy0xLjMwNS04Mi4zNDItMTIuMDU5LTEwNS44MDUtOTQuMzUyLTEyMC42NTdjMCwwLTExLjU4NCwxNC43NjEtMzguNTg0LDE0Ljc2MQoJCXMtMzguNTg2LTE0Ljc2MS0zOC41ODYtMTQuNzYxYy04MS4zOTUsMTQuNjktOTIuODAzLDM3LjgwNS05NC4zMDMsMTE3Ljk4MmMtMC4xMjMsNi41NDctMC4xOCw2Ljg5MS0wLjIwMiw2LjEzMQoJCWMwLjAwNSwxLjQyNCwwLjAxMSw0LjA1OCwwLjAxMSw4LjY1MWMwLDAsMTkuNTkyLDM5LjQ5NiwxMzMuMDgsMzkuNDk2YzExMy40ODYsMCwxMzMuMDgtMzkuNDk2LDEzMy4wOC0zOS40OTYKCQljMC0yLjk1MSwwLjAwMi01LjAwMywwLjAwNS02LjM5OUMzMDguMDYyLDMwNC41NzUsMzA4LjAxOCwzMDMuNjY0LDMwNy45MzUsMjk4LjM5N3oiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4KICAgIDxwYXRoIGZpbGw9IiM3N2NhOTgiIGQ9Ik00NzIuOTI4LDM0Ljc1MmMtNC40MTYtMy4wMDgtMTAuMDE2LTMuNTUyLTE0Ljk0NC0xLjZjLTEuMDI0LDAuNDE2LTEwNi44OCw0Mi4wNDgtMTk1LjE2OCwwLjM4NAoJCQlDMTg2LjcyLTIuNDMyLDEwMi45MTIsMTQuNCw2NCwyNS43NlYxNmMwLTguODMyLTcuMTY4LTE2LTE2LTE2Yy04LjgzMiwwLTE2LDcuMTY4LTE2LDE2djMydjI1NnYxOTJjMCw4LjgzMiw3LjE2OCwxNiwxNiwxNgoJCQljOC44MzIsMCwxNi03LjE2OCwxNi0xNlYzMTUuMzI4YzI4LjM4NC05LjE4NCwxMTIuNjA4LTMxLjEzNiwxODUuMTg0LDMuMTM2YzM0LjU5MiwxNi4zNTIsNzAuNzg0LDIxLjc5MiwxMDMuNjQ4LDIxLjc5MgoJCQljNjMuMiwwLDExNC4wMTYtMjAuMTI4LDExNy4xODQtMjEuNDA4YzYuMDE2LTIuNDY0LDkuOTg0LTguMzIsOS45ODQtMTQuODQ4VjQ4QzQ4MCw0Mi42ODgsNDc3LjM0NCwzNy43MjgsNDcyLjkyOCwzNC43NTJ6Ii8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4KICAgIDxwYXRoIGZpbGw9IiM3N2NhOTgiIGQ9Ik0xNTUsMEgxNUM2LjcxNiwwLDAsNi43MTYsMCwxNXYzNWgxNzBWMTVDMTcwLDYuNzE2LDE2My4yODQsMCwxNTUsMHoiLz4KICAgIDxwYXRoIGZpbGw9IiM3N2NhOTgiIGQ9Ik01MDQuNDY0LDE0Mi45ODljLTQuNjYyLTIuNjc0LTEwLjM5Ny0yLjY1MS0xNS4wMzYsMC4wNjNMMzQxLDIyOS44NTJWMTU2YzAtNS4zNzQtMi44NzUtMTAuMzM3LTcuNTM2LTEzLjAxMQoJCQljLTQuNjYyLTIuNjc0LTEwLjM5Ny0yLjY1MS0xNS4wMzYsMC4wNjNMMTcwLDIyOS44NTJWODBIMHY0MTdjMCw4LjI4NCw2LjcxNiwxNSwxNSwxNWg0ODJjOC4yODQsMCwxNS02LjcxNiwxNS0xNVYxNTYKCQkJQzUxMiwxNTAuNjI2LDUwOS4xMjUsMTQ1LjY2Myw1MDQuNDY0LDE0Mi45ODl6IE0yMzAsNDA2LjVjMCw4LjI4NC02LjcxNiwxNS0xNSwxNWgtNjBjLTguMjg0LDAtMTUtNi43MTYtMTUtMTV2LTYwCgkJCWMwLTguMjg0LDYuNzE2LTE1LDE1LTE1aDYwYzguMjg0LDAsMTUsNi43MTYsMTUsMTVWNDA2LjV6IE00MDEsNDA2LjVjMCw4LjI4NC02LjcxNiwxNS0xNSwxNWgtNjBjLTguMjg0LDAtMTUtNi43MTYtMTUtMTV2LTYwCgkJCWMwLTguMjg0LDYuNzE2LTE1LDE1LTE1aDYwYzguMjg0LDAsMTUsNi43MTYsMTUsMTVWNDA2LjV6Ii8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI0Ny44MjVweCIgaGVpZ2h0PSI0Ny44MjVweCIgdmlld0JveD0iMCAwIDQ3LjgyNSA0Ny44MjUiPgogICAgPHBhdGggZmlsbD0iI2JlYmM3MSIgZD0iTTM2LjQzOSwxMi42NDZjMC02LjkxOS01LjYwOC0xMi41MjctMTIuNTI4LTEyLjUyN1MxMS4zODQsNS43MjcsMTEuMzg0LDEyLjY0NmMwLDkuOTEzLDEyLjUyNywyNC41ODIsMTIuNTI3LDI0LjU4MgoJCQkJUzM2LjQzOSwyMi41MDgsMzYuNDM5LDEyLjY0NnogTTE3LjczMywxMS44OThjMC0zLjQxMywyLjc2Ny02LjE3OSw2LjE3OS02LjE3OXM2LjE3OSwyLjc2Niw2LjE3OSw2LjE3OQoJCQkJYzAsMy40MTMtMi43NjcsNi4xNzktNi4xNzksNi4xNzlTMTcuNzMzLDE1LjMxMSwxNy43MzMsMTEuODk4eiIvPgogICAgPGNpcmNsZSBmaWxsPSIjYmViYzcxIiBjeD0iMjMuOTExIiBjeT0iMTEuODk4IiByPSIzLjAzOCIvPgogICAgPHBhdGggZmlsbD0iI2JlYmM3MSIgZD0iTTMwLjk5NCwzMi44N2MtMS4wMjEsMS40NzYtMS45NzksMi43NjEtMi43NzcsMy43OTNjNy45MTYsMC40NzYsMTMuMTA0LDIuMTg1LDE1LjAzNCwzLjQ1NgoJCQkJYy0yLjI2MSwxLjQ5MS04Ljk3OSwzLjU4Ny0xOS4zMzgsMy41ODdjLTEwLjM1OCwwLTE3LjA3Ny0yLjA5Ny0xOS4zMzgtMy41ODdjMS45My0xLjI3MSw3LjExNC0yLjk3OSwxNS4wMjItMy40NTUKCQkJCWMtMC44LTEuMDMyLTEuNzU5LTIuMzE2LTIuNzgxLTMuNzkyQzcuMDc1LDMzLjgzMSwwLDM2LjcxMywwLDQwLjExOGMwLDQuMTksMTAuNzA3LDcuNTg4LDIzLjkxMyw3LjU4OAoJCQkJYzEzLjIwNywwLDIzLjkxMi0zLjM5NiwyMy45MTItNy41ODhDNDcuODI3LDM2LjcxMSw0MC43NDQsMzMuODI4LDMwLjk5NCwzMi44N3oiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI5Ny40NzNweCIgaGVpZ2h0PSI5Ny40NzNweCIgdmlld0JveD0iMCAwIDk3LjQ3MyA5Ny40NzMiPgoJPHJlY3QgZmlsbD0iI2I0YjFmYiIgeD0iNDEuNTY5IiB5PSI0Ny43NTMiIHdpZHRoPSIxNC4zMzMiIGhlaWdodD0iMTQuMzMzIi8+Cgk8cmVjdCBmaWxsPSIjYjRiMWZiIiB4PSI0MS41NjkiIHk9IjY3Ljc1NCIgd2lkdGg9IjE0LjMzMyIgaGVpZ2h0PSIxNC4zMzIiLz4KCTxyZWN0IGZpbGw9IiNiNGIxZmIiIHg9IjE4LjU2OSIgeT0iNjcuNzU0IiB3aWR0aD0iMTQuMzMzIiBoZWlnaHQ9IjE0LjMzMiIvPgoJPHJlY3QgZmlsbD0iI2I0YjFmYiIgeD0iMTguNTY5IiB5PSI0Ny43NTMiIHdpZHRoPSIxNC4zMzMiIGhlaWdodD0iMTQuMzMzIi8+Cgk8cGF0aCBmaWxsPSIjYjRiMWZiIiBkPSJNOTUuNDcyLDE0LjQ2Nkg4NC40MjdWMi43MDFjMC0xLjEwNC0wLjg5Ni0yLTItMkg2NS44MTFjLTEuMTA0LDAtMiwwLjg5Ni0yLDJ2MTEuNzY1SDMzLjY2MlYyLjcwMWMwLTEuMTA0LTAuODk2LTItMi0yCgkJCQlIMTUuMDQ1Yy0xLjEwNCwwLTIsMC44OTYtMiwydjExLjc2NUgyYy0xLjEwNCwwLTIsMC44OTYtMiwydjc4LjMwNWMwLDEuMTA0LDAuODk2LDIsMiwyaDkzLjQ3M2MxLjEwNCwwLDItMC44OTYsMi0yVjE2LjQ2NgoJCQkJQzk3LjQ3MiwxNS4zNjIsOTYuNTc2LDE0LjQ2Niw5NS40NzIsMTQuNDY2eiBNNjkuNjQ1LDguMDM3YzAtMC44MjgsMC42NzItMS41LDEuNS0xLjVoNS45NDdjMC44MjksMCwxLjUsMC42NzIsMS41LDEuNXYyMC4zNAoJCQkJYzAsMC44MjgtMC42NzEsMS41LTEuNSwxLjVoLTUuOTQ3Yy0wLjgyOCwwLTEuNS0wLjY3Mi0xLjUtMS41VjguMDM3eiBNMTguODgsOC4wMzdjMC0wLjgyOCwwLjY3MS0xLjUsMS41LTEuNWg1Ljk0NwoJCQkJYzAuODI5LDAsMS41LDAuNjcyLDEuNSwxLjV2MjAuMzRjMCwwLjgyOC0wLjY3MSwxLjUtMS41LDEuNUgyMC4zOGMtMC44MjksMC0xLjUtMC42NzItMS41LTEuNVY4LjAzN3ogTTg3LjA2OCw4NC45MDIKCQkJCWMwLDAuODI4LTAuNjcsMS41LTEuNSwxLjVIMTEuOTAzYy0wLjgyOSwwLTEuNS0wLjY3Mi0xLjUtMS41di00MGMwLTAuODI4LDAuNjcxLTEuNSwxLjUtMS41aDczLjY2NmMwLjgzLDAsMS41LDAuNjcyLDEuNSwxLjUKCQkJCVY4NC45MDJ6Ii8+Cgk8cmVjdCBmaWxsPSIjYjRiMWZiIiB4PSI2NC41NjgiIHk9IjQ3Ljc1MyIgd2lkdGg9IjE0LjMzNCIgaGVpZ2h0PSIxNC4zMzMiLz4KCTxyZWN0IGZpbGw9IiNiNGIxZmIiIHg9IjY0LjU2OCIgeT0iNjcuNzU0IiB3aWR0aD0iMTQuMzM0IiBoZWlnaHQ9IjE0LjMzMiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IiBoZWlnaHQ9IjUwcHgiIHZpZXdCb3g9IjAgMCA1MCA1MCI+CiAgICA8cGF0aCBmaWxsPSIjNTNjY2IyIiBkPSJNMjYuMTIsMTQuNDg4YzAuODc5LTEuNDY4LDIuMjctMy41NjksNC4wMjctNS41ODVoMC4wMDJjMS40ODgtMS43MTEsNC40MDItMy45MDcsNC40MDItMy45MDcKCQkJYzAuNDM4LTAuMzMxLDAuMzkxLTAuNzkyLTAuMTA3LTEuMDI0bC0zLjUyMi0xLjY0NmMtMC40OTgtMC4yMzMtMS4xNzUtMC4wNjMtMS41MDUsMC4zNzZjMCwwLTIuNjA1LDMuNzM3LTUuNjcxLDExLjY5MgoJCQljLTkuNDgtNC4yODgtMTguNDkxLDEuNzE4LTE4LjQ5MSwxMi4xNjJjMCwxMC45MDksOC4zOTMsMjcuNDgsMTkuNzQzLDIyLjQ3OGMxMS45NTQsNS4xNzMsMTkuNzQ5LTExLjU2OCwxOS43NDktMjIuNDc4CgkJCUM0NC43NDcsMTYuMDIyLDM2LjY0Nyw5Ljg0NiwyNi4xMiwxNC40ODh6Ii8+CiAgICA8cGF0aCBmaWxsPSIjNTNjY2IyIiBkPSJNMjMuOTk3LDEwLjk1NWMwLjU0OC0wLjA0NiwxLjAzMi0wLjUzMSwxLjA3Ni0xLjA3OGMwLDAsMC4zNTItNC4yNjYtMi42MjEtNy4yNDJjLTIuOTgyLTIuOTc3LTcuMjQtMi42MjItNy4yNC0yLjYyMgoJCQljLTAuNTQ4LDAuMDQ2LTEuMDMyLDAuNTMxLTEuMDc3LDEuMDc4YzAsMC0wLjM1OCw0LjI2OCwyLjYxOSw3LjI0NUMxOS43MjksMTEuMzEsMjMuOTk3LDEwLjk1NSwyMy45OTcsMTAuOTU1eiIvPgo8L3N2Zz4K\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar schema_1 = require(\"../data/schema\");\nexports.LINK_SHOW_IRI = {\n    renderLink: function (link) { return ({\n        properties: [{\n                position: 0.5,\n                attrs: {\n                    text: {\n                        text: [{\n                                value: link.typeId,\n                                language: '',\n                            }],\n                        fill: 'gray',\n                        'font-size': 12,\n                        'font-weight': 'lighter',\n                    },\n                },\n            }],\n    }); },\n};\nvar LINK_SUB_CLASS_OF = {\n    markerTarget: {\n        fill: '#f8a485',\n        stroke: '#cf8e76',\n    },\n    renderLink: function () { return ({\n        connection: {\n            stroke: '#f8a485',\n            'stroke-width': 2,\n        },\n    }); },\n};\nvar LINK_DOMAIN = {\n    markerTarget: {\n        fill: '#34c7f3',\n        stroke: '#38b5db',\n    },\n    renderLink: function () { return ({\n        connection: {\n            stroke: '#34c7f3',\n            'stroke-width': 2,\n        },\n    }); },\n};\nvar LINK_RANGE = {\n    markerTarget: {\n        fill: '#34c7f3',\n        stroke: '#38b5db',\n    },\n    renderLink: function () { return ({\n        connection: {\n            stroke: '#34c7f3',\n            'stroke-width': 2,\n        },\n    }); },\n};\nvar LINK_TYPE_OF = {\n    markerTarget: {\n        fill: '#8cd965',\n        stroke: '#5b9a3b',\n    },\n    renderLink: function () { return ({\n        connection: {\n            stroke: '#8cd965',\n            'stroke-width': 2,\n        },\n    }); },\n};\nexports.DefaultLinkTemplateBundle = function (type) {\n    if (type === 'http://www.w3.org/2000/01/rdf-schema#subClassOf') {\n        return LINK_SUB_CLASS_OF;\n    }\n    else if (type === 'http://www.w3.org/2000/01/rdf-schema#domain') {\n        return LINK_DOMAIN;\n    }\n    else if (type === 'http://www.w3.org/2000/01/rdf-schema#range') {\n        return LINK_RANGE;\n    }\n    else if (type === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type') {\n        return LINK_TYPE_OF;\n    }\n    else if (type === schema_1.PLACEHOLDER_LINK_TYPE) {\n        return { markerTarget: { fill: 'none' } };\n    }\n    else {\n        return undefined;\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar utils_1 = require(\"../utils\");\nvar sparqlModels_1 = require(\"./sparqlModels\");\nexports.MAX_RECURSION_DEEP = 3;\nexports.ENCODED_PREFIX = 'sparql-blank:';\nexports.BLANK_NODE_QUERY_PARAMETERS = '?blankTrgProp ?blankTrg ?blankSrc ?blankSrcProp ?listHead';\nexports.BLANK_NODE_QUERY = \"\\n    OPTIONAL {\\n        FILTER (ISBLANK(?inst)).\\n        {\\n            ?inst ?blankTrgProp ?blankTrg.\\n            ?blankSrc ?blankSrcProp ?inst.\\n            FILTER NOT EXISTS { ?inst rdf:first _:smth1 }.\\n            BIND(\\\"blankNode\\\" as ?blankType)\\n        } UNION {\\n            ?inst rdf:rest*/rdf:first ?blankTrg.\\n            ?blankSrc ?blankSrcProp ?inst.\\n            _:smth2 rdf:first ?blankTrg.\\n            BIND(?blankSrcProp as ?blankTrgProp)\\n            BIND(\\\"listHead\\\" as ?blankType)\\n            FILTER NOT EXISTS { _:smth3 rdf:rest ?inst }.\\n        } UNION {\\n            ?listHead rdf:rest* ?inst.\\n            FILTER NOT EXISTS { _:smth4 rdf:rest ?listHead }.\\n\\n            ?listHead rdf:rest*/rdf:first ?blankTrg.\\n            ?blankSrc ?blankSrcProp ?listHead.\\n            _:smth5 rdf:first ?blankTrg.\\n            BIND(?blankSrcProp as ?blankTrgProp)\\n            BIND(\\\"listHead\\\" as ?blankType)\\n        }\\n    }\\n\";\nfunction isEncodedBlank(id) {\n    return id.startsWith(exports.ENCODED_PREFIX);\n}\nexports.isEncodedBlank = isEncodedBlank;\nvar QueryExecutor = /** @class */ (function () {\n    function QueryExecutor(queryFunction) {\n        this.queryFunction = queryFunction;\n        this.queryDictionary = {};\n    }\n    QueryExecutor.prototype.executeQuery = function (query) {\n        var _this = this;\n        var execution = this.queryDictionary[query];\n        if (execution) {\n            return execution;\n        }\n        else {\n            this.queryDictionary[query] = this.queryFunction(query).then(function (response) {\n                delete _this.queryDictionary[query];\n                return response;\n            });\n            return this.queryDictionary[query];\n        }\n    };\n    return QueryExecutor;\n}());\nexports.QueryExecutor = QueryExecutor;\nfunction updateFilterResults(result, queryFunction, settings) {\n    var completeBindings = [];\n    var blankBindings = [];\n    for (var _i = 0, _a = result.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (sparqlModels_1.isBlankBinding(binding)) {\n            blankBindings.push(binding);\n        }\n        else {\n            completeBindings.push(binding);\n        }\n    }\n    return processBlankBindings(blankBindings, function (callBackQuery) {\n        return queryFunction(callBackQuery);\n    }, settings).then(function (processedBindings) {\n        result.results.bindings = completeBindings.concat(processedBindings);\n        return result;\n    });\n}\nexports.updateFilterResults = updateFilterResults;\nfunction processBlankBindings(blankBindings, queryFunction, settings) {\n    var bindingGroupsById = {};\n    for (var _i = 0, blankBindings_1 = blankBindings; _i < blankBindings_1.length; _i++) {\n        var binding = blankBindings_1[_i];\n        if (binding.newInst) {\n            binding.inst = binding.newInst;\n        }\n        if (!bindingGroupsById[binding.inst.value]) {\n            bindingGroupsById[binding.inst.value] = [];\n        }\n        bindingGroupsById[binding.inst.value].push(binding);\n    }\n    var relatedBlankBindnings = [];\n    for (var _a = 0, blankBindings_2 = blankBindings; _a < blankBindings_2.length; _a++) {\n        var b = blankBindings_2[_a];\n        if (sparqlModels_1.isRdfBlank(b.blankTrg)) {\n            relatedBlankBindnings.push([b]);\n        }\n    }\n    var queryExecutor = new QueryExecutor(queryFunction);\n    return loadRelatedBlankNodes(relatedBlankBindnings, queryExecutor, settings).then(function (loadedGroupsById) {\n        var idsMap = getEncodedIdDictionary(loadedGroupsById);\n        var groups = Object.keys(bindingGroupsById).map(function (key) { return bindingGroupsById[key]; });\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var group = groups_1[_i];\n            for (var _a = 0, group_1 = group; _a < group_1.length; _a++) {\n                var blankBinding = group_1[_a];\n                if (!blankBinding.label) {\n                    blankBinding.label = createLabelForBlankBinding(blankBinding);\n                }\n                var encodedId4LoadedElement = idsMap[blankBinding.blankTrg.value];\n                if (encodedId4LoadedElement) {\n                    blankBinding.blankTrg.value = encodedId4LoadedElement;\n                }\n            }\n            var encodedId = encodeId(group);\n            updateGroupIds(group, encodedId);\n        }\n        return blankBindings;\n    });\n}\nexports.processBlankBindings = processBlankBindings;\nfunction getEncodedIdDictionary(blankBindingGroups) {\n    var idDictionary = {};\n    var keys = Object.keys(blankBindingGroups);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        idDictionary[key] = encodeId(blankBindingGroups[key]);\n        updateGroupIds(blankBindingGroups[key], idDictionary[key]);\n    }\n    return idDictionary;\n}\nfunction updateGroupIds(group, newId) {\n    for (var _i = 0, group_2 = group; _i < group_2.length; _i++) {\n        var loadedBlankBinding = group_2[_i];\n        loadedBlankBinding.inst.value = newId;\n    }\n}\nfunction encodeId(blankBindings) {\n    var bindingSet = {};\n    for (var _i = 0, blankBindings_3 = blankBindings; _i < blankBindings_3.length; _i++) {\n        var binding = blankBindings_3[_i];\n        // leave out instance unique ID\n        var inst = binding.inst, exceptInst = tslib_1.__rest(binding, [\"inst\"]);\n        var encodedBinding = JSON.stringify(exceptInst);\n        bindingSet[encodedBinding] = exceptInst;\n    }\n    var normalizedBindings = Object.keys(bindingSet).sort().map(function (key) { return bindingSet[key]; });\n    return exports.ENCODED_PREFIX + encodeURI(JSON.stringify(normalizedBindings));\n}\nexports.encodeId = encodeId;\nfunction decodeId(id) {\n    if (!isEncodedBlank(id)) {\n        return undefined;\n    }\n    try {\n        var clearId = id.substring(exports.ENCODED_PREFIX.length, id.length);\n        var parsedBindings = JSON.parse(decodeURI(clearId));\n        var bindings = parsedBindings.map(function (binding) {\n            // restore instance unique ID\n            binding.inst = { type: 'uri', value: id };\n            return binding;\n        });\n        return bindings;\n    }\n    catch (error) {\n        /* silent */\n        return undefined;\n    }\n}\nexports.decodeId = decodeId;\nfunction createLabelForBlankBinding(bn) {\n    if (bn.blankType.value === 'listHead') {\n        return {\n            type: 'literal',\n            value: 'RDFList',\n            'xml:lang': '',\n        };\n    }\n    else {\n        return {\n            type: 'literal',\n            value: bn.class ? (utils_1.getUriLocalName(bn.class.value) || bn.class.value) : 'anonymous',\n            'xml:lang': '',\n        };\n    }\n}\nexports.createLabelForBlankBinding = createLabelForBlankBinding;\nfunction loadRelatedBlankNodes(blankChains, queryExecutor, settings, recursionDeep) {\n    recursionDeep = recursionDeep || 1;\n    if (recursionDeep > exports.MAX_RECURSION_DEEP) {\n        return Promise.resolve({});\n    }\n    var queryPairs = blankChains.map(function (chain) { return ({\n        query: getQueryForChain(chain, settings),\n        chain: chain,\n    }); });\n    var promises = queryPairs.map(function (pair) { return queryExecutor.executeQuery(pair.query).then(function (response) { return ({\n        response: response,\n        chain: pair.chain,\n    }); }); });\n    return Promise.all(promises)\n        .then(function (results) {\n        var recursionPromises = [];\n        var loadedBlankBindings = {};\n        var _loop_1 = function (result) {\n            var bindings = result.response.results.bindings;\n            if (bindings.length > 0) {\n                var relatedBlankBindings = [];\n                for (var _i = 0, bindings_1 = bindings; _i < bindings_1.length; _i++) {\n                    var binding = bindings_1[_i];\n                    if (sparqlModels_1.isRdfBlank(binding.blankTrg)) {\n                        relatedBlankBindings.push(result.chain.concat([binding]));\n                    }\n                }\n                recursionPromises.push(loadRelatedBlankNodes(relatedBlankBindings, queryExecutor, settings, (recursionDeep + 1))\n                    .then(function (loadedGroupsById) {\n                    var idsMap = getEncodedIdDictionary(loadedGroupsById);\n                    var mergedResults = {};\n                    for (var _i = 0, bindings_2 = bindings; _i < bindings_2.length; _i++) {\n                        var binding = bindings_2[_i];\n                        binding.label = createLabelForBlankBinding(binding);\n                        var encodedId = idsMap[binding.blankTrg.value];\n                        if (encodedId) {\n                            binding.blankTrg.value = encodedId;\n                        }\n                        if (!mergedResults[binding.inst.value]) {\n                            mergedResults[binding.inst.value] = [];\n                        }\n                        mergedResults[binding.inst.value].push(binding);\n                    }\n                    Object.keys(mergedResults).forEach(function (key) {\n                        var group = mergedResults[key];\n                        var originalId = group[0].inst.value;\n                        loadedBlankBindings[originalId] = group;\n                    });\n                    return true;\n                }));\n            }\n        };\n        for (var _i = 0, results_1 = results; _i < results_1.length; _i++) {\n            var result = results_1[_i];\n            _loop_1(result);\n        }\n        return Promise.all(recursionPromises).then(function () {\n            return loadedBlankBindings;\n        });\n    });\n}\nfunction getQueryForChain(blankNodes, sparqlDataProviderSettings) {\n    function getQueryBlock(blankNode, index, maxIndex) {\n        // if blankNode has type 'listHead' then his target and targetProperty is artificial,\n        // and we can't include this id in chain\n        var trustableTrgProp = (index === 0 || blankNode.blankType.value !== 'listHead');\n        var sourceId = index > 0 ? '?inst' + (index - 1) : '<' + blankNode.blankSrc.value + '>';\n        var sourcePropId = trustableTrgProp ?\n            (index > 0 ? '?blankTrgProp' + (index - 1) : '<' + blankNode.blankSrcProp.value + '>') :\n            '?anyType' + index;\n        var instPostfix = index === maxIndex ? '' : index.toString();\n        var targetPropId = trustableTrgProp ? '<' + blankNode.blankTrgProp.value + '>' : '?anyType0' + index;\n        var firstRelation = index === 0 && blankNode.blankType.value === 'listHead' ?\n            \"\\n            ?blankSrc\" + index + \" rdf:rest*/rdf:first ?inst\" + instPostfix + \".\\n            \" :\n            \"?blankSrc\" + index + \" \" + targetPropId + \" ?inst\" + instPostfix + \".\";\n        return \"\\n            # ======================\\n            \" + sourceId + \" \" + sourcePropId + \" ?blankSrc\" + index + \".\\n            \" + firstRelation + \"\\n            BIND (<\" + blankNode.blankTrgProp.value + \"> as ?blankSrcProp\" + index + \").\\n            FILTER (ISBLANK(?inst\" + instPostfix + \")).\\n            {\\n                ?inst\" + instPostfix + \" ?blankTrgProp\" + instPostfix + \" ?blankTrg\" + instPostfix + \".\\n                BIND(\\\"blankNode\\\" as ?blankType\" + instPostfix + \").\\n                FILTER NOT EXISTS { ?inst\" + instPostfix + \" rdf:first _:smth1\" + index + \" }.\\n            } UNION {\\n                ?inst\" + instPostfix + \" rdf:rest*/rdf:first ?blankTrg\" + instPostfix + \".\\n                ?blankSrc\" + index + \" ?blankSrcProp\" + index + \" ?inst\" + instPostfix + \".\\n                _:smth2\" + index + \" rdf:first ?blankTrg\" + instPostfix + \".\\n                BIND(?blankSrcProp\" + index + \" as ?blankTrgProp\" + instPostfix + \")\\n                BIND(\\\"listHead\\\" as ?blankType\" + instPostfix + \")\\n                FILTER NOT EXISTS { _:smth3\" + index + \" rdf:rest ?inst\" + instPostfix + \" }.\\n            }\\n            OPTIONAL {\\n                ?inst\" + instPostfix + \" rdf:type ?class\" + instPostfix + \".\\n            }\\n        \";\n    }\n    var body = blankNodes.map(function (bn, index) { return getQueryBlock(bn, index, blankNodes.length - 1); }).join('\\n');\n    var query = sparqlDataProviderSettings.defaultPrefix + \"\\n    SELECT ?inst ?class ?label ?blankTrgProp ?blankTrg ?blankType\\n        WHERE {\\n           \" + body + \"\\n        }\\n    \";\n    return query;\n}\nfunction elementInfo(elementIds) {\n    var ids = elementIds.filter(function (id) { return isEncodedBlank(id); });\n    return {\n        head: undefined,\n        results: { bindings: getElementBindings(ids) },\n    };\n}\nexports.elementInfo = elementInfo;\nfunction linksInfo(elementIds) {\n    return {\n        head: undefined,\n        results: { bindings: getLinkBinding(elementIds) },\n    };\n}\nexports.linksInfo = linksInfo;\nfunction linkTypesOf(params) {\n    return {\n        head: undefined,\n        results: { bindings: getLinkCountBinding(params.elementId) },\n    };\n}\nexports.linkTypesOf = linkTypesOf;\nfunction filter(params) {\n    var filterResponse = {\n        head: undefined,\n        results: { bindings: [] },\n    };\n    if (params.limit === 0) {\n        params.limit = 100;\n    }\n    if (params.elementTypeId) {\n        filterResponse.results.bindings = [];\n    }\n    else if (params.refElementId && params.refElementLinkId) {\n        filterResponse.results.bindings = getAllRelatedByLinkTypeElements(params.refElementId, params.refElementLinkId, params.linkDirection);\n    }\n    else if (params.refElementId) {\n        filterResponse.results.bindings = getAllRelatedElements(params.refElementId);\n    }\n    if (params.text && filterResponse.results.bindings.length !== 0) {\n        filterResponse.results.bindings =\n            filterResponse.results.bindings.filter(function (be) { return be.inst.value.toLowerCase().indexOf(params.text) !== -1; });\n    }\n    return filterResponse;\n}\nexports.filter = filter;\nfunction getElementTypes(elementIds) {\n    var bindings = [];\n    for (var _i = 0, elementIds_1 = elementIds; _i < elementIds_1.length; _i++) {\n        var id = elementIds_1[_i];\n        var blankBindings = decodeId(id);\n        if (blankBindings) {\n            for (var _a = 0, blankBindings_4 = blankBindings; _a < blankBindings_4.length; _a++) {\n                var be = blankBindings_4[_a];\n                if (sparqlModels_1.isRdfIri(be.inst) && be.class) {\n                    bindings.push({ inst: be.inst, class: be.class });\n                }\n            }\n        }\n    }\n    return { head: undefined, results: { bindings: bindings } };\n}\nexports.getElementTypes = getElementTypes;\nfunction getAllRelatedByLinkTypeElements(refElementId, refElementLinkId, linkDirection) {\n    var blankElements = (decodeId(refElementId) || [])\n        .concat(decodeId(refElementLinkId) || []);\n    var bindings = [];\n    if (blankElements.length > 0) {\n        for (var _i = 0, blankElements_1 = blankElements; _i < blankElements_1.length; _i++) {\n            var be = blankElements_1[_i];\n            if (linkDirection === 'in') {\n                if (be.inst.value === refElementId &&\n                    (sparqlModels_1.isRdfIri(be.blankSrc) || sparqlModels_1.isRdfBlank(be.blankSrc)) &&\n                    refElementLinkId === be.blankSrcProp.value) {\n                    if (sparqlModels_1.isRdfIri(be.blankSrc)) {\n                        bindings.push({\n                            inst: be.blankSrc,\n                        });\n                    }\n                    else {\n                        bindings = bindings.concat(decodeId(be.blankSrc.value) || [{ inst: be.blankSrc }]);\n                    }\n                }\n                else if (be.blankTrg.value === refElementId &&\n                    refElementLinkId === be.blankTrgProp.value) {\n                    bindings.push(be);\n                }\n            }\n            else {\n                if (be.inst.value === refElementId &&\n                    (sparqlModels_1.isRdfIri(be.blankTrg) || sparqlModels_1.isRdfBlank(be.blankTrg)) &&\n                    refElementLinkId === be.blankTrgProp.value) {\n                    if (sparqlModels_1.isRdfIri(be.blankTrg)) {\n                        bindings.push({\n                            inst: be.blankTrg,\n                        });\n                    }\n                    else {\n                        bindings = bindings.concat(decodeId(be.blankTrg.value) || [{ inst: be.blankTrg }]);\n                    }\n                }\n                else if (be.blankSrc.value === refElementId &&\n                    refElementLinkId === be.blankSrcProp.value) {\n                    bindings.push(be);\n                }\n            }\n        }\n    }\n    return bindings;\n}\nfunction getAllRelatedElements(id) {\n    var blankElements = decodeId(id);\n    var bindings = [];\n    if (blankElements) {\n        for (var _i = 0, blankElements_2 = blankElements; _i < blankElements_2.length; _i++) {\n            var be = blankElements_2[_i];\n            if (be.inst.value === id || id === be.blankSrc.value || id === be.blankTrg.value) {\n                bindings.push(be);\n                if (sparqlModels_1.isRdfIri(be.blankSrc)) {\n                    bindings.push({ inst: be.blankSrc });\n                }\n                else if (sparqlModels_1.isRdfBlank(be.blankSrc)) {\n                    bindings = bindings.concat(decodeId(be.blankSrc.value) || [{ inst: be.blankSrc }]);\n                }\n                if (sparqlModels_1.isRdfIri(be.blankTrg)) {\n                    bindings.push({ inst: be.blankTrg });\n                }\n                else if (sparqlModels_1.isRdfBlank(be.blankTrg)) {\n                    bindings = bindings.concat(decodeId(be.blankTrg.value) || [{ inst: be.blankTrg }]);\n                }\n            }\n        }\n    }\n    return bindings;\n}\nfunction getElementBindings(ids) {\n    var blankElements = [];\n    for (var _i = 0, ids_1 = ids; _i < ids_1.length; _i++) {\n        var id = ids_1[_i];\n        var blankBindings = decodeId(id);\n        if (blankBindings) {\n            blankElements = blankElements.concat(decodeId(id));\n        }\n    }\n    return blankElements.filter(function (be) {\n        return ids.indexOf(be.inst.value) !== -1;\n    });\n}\nfunction getLinkBinding(ids) {\n    var blankElements = [];\n    for (var _i = 0, ids_2 = ids; _i < ids_2.length; _i++) {\n        var id = ids_2[_i];\n        var blankBindings = decodeId(id);\n        if (blankBindings) {\n            blankElements = blankElements.concat(decodeId(id));\n        }\n    }\n    var bindings = [];\n    for (var _a = 0, blankElements_3 = blankElements; _a < blankElements_3.length; _a++) {\n        var be = blankElements_3[_a];\n        if (ids.indexOf(be.inst.value) !== -1) {\n            if ((sparqlModels_1.isRdfIri(be.blankSrc) || sparqlModels_1.isRdfBlank(be.blankSrc)) &&\n                sparqlModels_1.isRdfIri(be.blankSrcProp) &&\n                ids.indexOf(be.blankSrc.value) !== -1) {\n                bindings.push({\n                    source: be.blankSrc,\n                    type: be.blankSrcProp,\n                    target: be.inst,\n                });\n            }\n            if ((sparqlModels_1.isRdfIri(be.blankTrg) || sparqlModels_1.isRdfBlank(be.blankTrg)) &&\n                sparqlModels_1.isRdfIri(be.blankTrgProp) &&\n                ids.indexOf(be.blankTrg.value) !== -1) {\n                bindings.push({\n                    source: be.inst,\n                    type: be.blankTrgProp,\n                    target: be.blankTrg,\n                });\n            }\n        }\n    }\n    return bindings;\n}\nfunction getLinkCountBinding(id) {\n    var blankElements = decodeId(id);\n    var bindings = [];\n    var dictionary = {};\n    for (var _i = 0, blankElements_4 = blankElements; _i < blankElements_4.length; _i++) {\n        var be = blankElements_4[_i];\n        if (id === be.inst.value) {\n            if ((sparqlModels_1.isRdfIri(be.blankTrg) || sparqlModels_1.isRdfBlank(be.blankTrg)) &&\n                sparqlModels_1.isRdfIri(be.blankTrgProp)) {\n                if ((sparqlModels_1.isRdfIri(be.blankSrc) || sparqlModels_1.isRdfBlank(be.blankSrc)) &&\n                    sparqlModels_1.isRdfIri(be.blankSrcProp)) {\n                    if (!dictionary[be.blankSrcProp.value]) {\n                        dictionary[be.blankSrcProp.value] = {\n                            link: be.blankSrcProp,\n                            inCount: {\n                                type: 'literal',\n                                value: '1',\n                                'xml:lang': '',\n                            },\n                            outCount: {\n                                type: 'literal',\n                                value: '0',\n                                'xml:lang': '',\n                            },\n                        };\n                    }\n                }\n                if (!dictionary[be.blankTrgProp.value]) {\n                    dictionary[be.blankTrgProp.value] = {\n                        link: be.blankTrgProp,\n                        inCount: {\n                            type: 'literal',\n                            value: '0',\n                            'xml:lang': '',\n                        },\n                        outCount: {\n                            type: 'literal',\n                            value: '1',\n                            'xml:lang': '',\n                        },\n                    };\n                }\n                else {\n                    dictionary[be.blankTrgProp.value].outCount.value =\n                        (+dictionary[be.blankTrgProp.value].outCount.value + 1).toString();\n                }\n            }\n        }\n    }\n    return Object.keys(dictionary).map(function (k) { return dictionary[k]; });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isRdfBlank(e) {\n    return e && e.type === 'bnode';\n}\nexports.isRdfBlank = isRdfBlank;\nfunction isRdfIri(e) {\n    return e && e.type === 'uri';\n}\nexports.isRdfIri = isRdfIri;\nfunction isRdfLiteral(e) {\n    return e && e.type === 'literal';\n}\nexports.isRdfLiteral = isRdfLiteral;\nfunction isBlankBinding(binding) {\n    var blank = binding;\n    return blank.blankTrgProp !== undefined\n        || blank.blankTrg !== undefined\n        || blank.blankSrcProp !== undefined\n        || blank.blankSrc !== undefined;\n}\nexports.isBlankBinding = isBlankBinding;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"./geometry\");\nvar DefaultLinkRouter = /** @class */ (function () {\n    function DefaultLinkRouter(gap) {\n        if (gap === void 0) { gap = 20; }\n        this.gap = gap;\n    }\n    DefaultLinkRouter.prototype.route = function (model) {\n        var routings = new Map();\n        for (var _i = 0, _a = model.links; _i < _a.length; _i++) {\n            var link = _a[_i];\n            if (routings.has(link.id)) {\n                continue;\n            }\n            // The cell is a link. Let's find its source and target models.\n            var sourceId = link.sourceId, targetId = link.targetId;\n            if (!sourceId || !targetId) {\n                continue;\n            }\n            else if (sourceId === targetId) {\n                this.routeFeedbackSiblingLinks(model, sourceId, routings);\n            }\n            else {\n                this.routeNormalSiblingLinks(model, sourceId, targetId, routings);\n            }\n        }\n        return routings;\n    };\n    DefaultLinkRouter.prototype.routeFeedbackSiblingLinks = function (model, elementId, routings) {\n        var element = model.getElement(elementId);\n        var _a = element.position, x = _a.x, y = _a.y;\n        var _b = element.size, width = _b.width, height = _b.height;\n        var index = 0;\n        for (var _i = 0, _c = element.links; _i < _c.length; _i++) {\n            var sibling = _c[_i];\n            if (routings.has(sibling.id) || hasUserPlacedVertices(sibling)) {\n                continue;\n            }\n            var sourceId = sibling.sourceId, targetId = sibling.targetId;\n            if (sourceId === targetId) {\n                var offset = this.gap * (index + 1);\n                var vertices = [\n                    { x: x - offset, y: y + height / 2 },\n                    { x: x - offset, y: y - offset },\n                    { x: x + width / 2, y: y - offset },\n                ];\n                routings.set(sibling.id, { linkId: sibling.id, vertices: vertices });\n                index++;\n            }\n        }\n    };\n    DefaultLinkRouter.prototype.routeNormalSiblingLinks = function (model, sourceId, targetId, routings) {\n        var _this = this;\n        var source = model.getElement(sourceId);\n        var target = model.getElement(targetId);\n        var sourceCenter = centerOfElement(source);\n        var targetCenter = centerOfElement(target);\n        var midPoint = {\n            x: (sourceCenter.x + targetCenter.x) / 2,\n            y: (sourceCenter.y + targetCenter.y) / 2,\n        };\n        var direction = geometry_1.Vector.normalize({\n            x: targetCenter.x - sourceCenter.x,\n            y: targetCenter.y - sourceCenter.y,\n        });\n        var siblings = source.links.filter(function (link) {\n            return (link.sourceId === targetId || link.targetId === targetId) &&\n                !routings.has(link.id) &&\n                !hasUserPlacedVertices(link);\n        });\n        if (siblings.length <= 1) {\n            return;\n        }\n        var indexModifier = siblings.length % 2 ? 0 : 1;\n        siblings.forEach(function (sibling, siblingIndex) {\n            // For mor beautifull positioning\n            var index = siblingIndex + indexModifier;\n            // We want the offset values to be calculated as follows 0, 50, 50, 100, 100, 150, 150 ..\n            var offset = _this.gap * Math.ceil(index / 2) - (indexModifier ? _this.gap / 2 : 0);\n            // Now we need the vertices to be placed at points which are 'offset' pixels distant\n            // from the first link and forms a perpendicular angle to it. And as index goes up\n            // alternate left and right.\n            //\n            //  ^  odd indexes\n            //  |\n            //  |---->  index 0 line (straight line between a source center and a target center.\n            //  |\n            //  v  even indexes\n            var offsetDirection = index % 2\n                ? { x: -direction.y, y: direction.x } // rotate by 90 degrees counter-clockwise\n                : { x: direction.y, y: -direction.x }; // rotate by 90 degrees clockwise\n            // We found the vertex.\n            var vertex = {\n                x: midPoint.x + offsetDirection.x * offset,\n                y: midPoint.y + offsetDirection.y * offset,\n            };\n            routings.set(sibling.id, {\n                linkId: sibling.id,\n                vertices: [vertex],\n                labelTextAnchor: _this.getLabelAlignment(direction, siblingIndex, siblings.length),\n            });\n        });\n    };\n    DefaultLinkRouter.prototype.getLabelAlignment = function (connectionDirection, siblingIndex, siblingCount) {\n        // offset direction angle in [0; 2 Pi] interval\n        var angle = Math.atan2(connectionDirection.y, connectionDirection.x);\n        var absoluteAngle = Math.abs(angle);\n        var isHorizontal = absoluteAngle < Math.PI * 1 / 8 || absoluteAngle > Math.PI * 7 / 8;\n        var isTop = angle < 0;\n        var isBottom = angle > 0;\n        var firstOuter = siblingCount - 2;\n        var secondOuter = siblingCount - 1;\n        if (!isHorizontal) {\n            if (isTop && siblingIndex === secondOuter || isBottom && siblingIndex === firstOuter) {\n                return 'end';\n            }\n            else if (isTop && siblingIndex === firstOuter || isBottom && siblingIndex === secondOuter) {\n                return 'start';\n            }\n        }\n        return 'middle';\n    };\n    return DefaultLinkRouter;\n}());\nexports.DefaultLinkRouter = DefaultLinkRouter;\nfunction hasUserPlacedVertices(link) {\n    var vertices = link.vertices;\n    return vertices && vertices.length > 0;\n}\nfunction centerOfElement(element) {\n    var _a = element.position, x = _a.x, y = _a.y;\n    var _b = element.size, width = _b.width, height = _b.height;\n    return { x: x + width / 2, y: y + height / 2 };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar async_1 = require(\"../viewUtils/async\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar events_1 = require(\"../viewUtils/events\");\nvar commands_1 = require(\"./commands\");\nvar elements_1 = require(\"./elements\");\nvar geometry_1 = require(\"./geometry\");\nvar view_1 = require(\"./view\");\nvar UpdateRequest;\n(function (UpdateRequest) {\n    /** Some part of layer requested an update */\n    UpdateRequest[UpdateRequest[\"Partial\"] = 1] = \"Partial\";\n    /** Full update requested */\n    UpdateRequest[UpdateRequest[\"All\"] = 2] = \"All\";\n})(UpdateRequest || (UpdateRequest = {}));\nvar CLASS_NAME = 'ontodia-link-layer';\nvar LinkLayer = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkLayer, _super);\n    function LinkLayer(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.delayedUpdate = new async_1.Debouncer();\n        _this.updateState = UpdateRequest.Partial;\n        /** List of link IDs to update at the next flush event */\n        _this.scheduledToUpdate = collections_1.createStringMap();\n        _this.scheduleUpdateAll = function () {\n            if (_this.updateState !== UpdateRequest.All) {\n                _this.updateState = UpdateRequest.All;\n                _this.scheduledToUpdate = collections_1.createStringMap();\n            }\n            _this.delayedUpdate.call(_this.performUpdate);\n        };\n        _this.performUpdate = function () {\n            _this.forceUpdate();\n        };\n        _this.getLinks = function () {\n            var _a = _this.props, view = _a.view, links = _a.links, group = _a.group;\n            if (!group) {\n                return links;\n            }\n            var grouping = geometry_1.computeGrouping(view.model.elements);\n            var nestedElements = computeDeepNestedElements(grouping, group);\n            return links.filter(function (link) {\n                var sourceId = link.sourceId, targetId = link.targetId;\n                var source = view.model.getElement(sourceId);\n                var target = view.model.getElement(targetId);\n                if (!source || !target) {\n                    return false;\n                }\n                var sourceGroup = source.group;\n                var targetGroup = target.group;\n                return nestedElements[sourceGroup] || nestedElements[targetGroup];\n            });\n        };\n        return _this;\n    }\n    LinkLayer.prototype.componentDidMount = function () {\n        var _this = this;\n        var view = this.props.view;\n        this.listener.listen(view.events, 'changeLanguage', this.scheduleUpdateAll);\n        this.listener.listen(view.events, 'changeHighlight', this.scheduleUpdateAll);\n        var updateChangedRoutes = function (changed, previous) {\n            changed.forEach(function (routing, linkId) {\n                if (previous.get(linkId) !== routing) {\n                    _this.scheduleUpdateLink(linkId);\n                }\n            });\n        };\n        this.listener.listen(view.events, 'updateRoutings', function (_a) {\n            var previous = _a.previous;\n            var newRoutes = view.getRoutings();\n            updateChangedRoutes(newRoutes, previous);\n            updateChangedRoutes(previous, newRoutes);\n        });\n        this.listener.listen(view.model.events, 'changeCells', this.scheduleUpdateAll);\n        this.listener.listen(view.model.events, 'elementEvent', function (_a) {\n            var data = _a.data;\n            var elementEvent = data.changePosition || data.changeSize;\n            if (!elementEvent) {\n                return;\n            }\n            for (var _i = 0, _b = elementEvent.source.links; _i < _b.length; _i++) {\n                var link = _b[_i];\n                _this.scheduleUpdateLink(link.id);\n            }\n        });\n        this.listener.listen(view.model.events, 'linkEvent', function (_a) {\n            var data = _a.data;\n            var linkEvent = (data.changeData ||\n                data.changeLayoutOnly ||\n                data.changeVertices ||\n                data.changeLinkState);\n            if (linkEvent) {\n                _this.scheduleUpdateLink(linkEvent.source.id);\n            }\n        });\n        this.listener.listen(view.model.events, 'linkTypeEvent', function (_a) {\n            var data = _a.data;\n            var linkTypeEvent = data.changeLabel || data.changeVisibility;\n            if (!linkTypeEvent) {\n                return;\n            }\n            var linkTypeId = linkTypeEvent.source.id;\n            for (var _i = 0, _b = view.model.linksOfType(linkTypeId); _i < _b.length; _i++) {\n                var link = _b[_i];\n                _this.scheduleUpdateLink(link.id);\n            }\n        });\n        this.listener.listen(view.events, 'syncUpdate', function (_a) {\n            var layer = _a.layer;\n            if (layer !== view_1.RenderingLayer.Link) {\n                return;\n            }\n            _this.delayedUpdate.runSynchronously();\n        });\n    };\n    LinkLayer.prototype.shouldComponentUpdate = function () {\n        return false;\n    };\n    LinkLayer.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.delayedUpdate.dispose();\n    };\n    LinkLayer.prototype.scheduleUpdateLink = function (linkId) {\n        if (this.updateState === UpdateRequest.Partial) {\n            this.scheduledToUpdate[linkId] = true;\n        }\n        this.delayedUpdate.call(this.performUpdate);\n    };\n    LinkLayer.prototype.popShouldUpdatePredicate = function () {\n        var _a = this, updateState = _a.updateState, scheduledToUpdate = _a.scheduledToUpdate;\n        this.scheduledToUpdate = collections_1.createStringMap();\n        this.updateState = UpdateRequest.Partial;\n        return updateState === UpdateRequest.All\n            ? function () { return true; }\n            : function (link) { return Boolean(scheduledToUpdate[link.id]); };\n    };\n    LinkLayer.prototype.render = function () {\n        var view = this.props.view;\n        var shouldUpdate = this.popShouldUpdatePredicate();\n        return React.createElement(\"g\", { className: CLASS_NAME }, this.getLinks().map(function (model) { return (React.createElement(LinkView, { key: model.id, view: view, model: model, shouldUpdate: shouldUpdate(model), route: view.getRouting(model.id) })); }));\n    };\n    return LinkLayer;\n}(react_1.Component));\nexports.LinkLayer = LinkLayer;\nfunction computeDeepNestedElements(grouping, groupId) {\n    var deepChildren = {};\n    function collectNestedItems(parentId) {\n        deepChildren[parentId] = true;\n        var children = grouping.get(parentId);\n        if (!children) {\n            return;\n        }\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n            var element = children_1[_i];\n            if (element.group !== parentId) {\n                continue;\n            }\n            collectNestedItems(element.id);\n        }\n    }\n    collectNestedItems(groupId);\n    return deepChildren;\n}\nvar LINK_CLASS = 'ontodia-link';\nvar LABEL_GROUPING_PRECISION = 100;\n// temporary, cleared-before-render map to hold line numbers for labels\n// grouped on the same link offset\nvar TEMPORARY_LABEL_LINES = new Map();\nvar LinkView = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkView, _super);\n    function LinkView(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.onRemoveLinkVertex = function (vertex) {\n            var model = _this.props.view.model;\n            model.history.registerToUndo(commands_1.restoreCapturedLinkGeometry(vertex.link));\n            vertex.remove();\n        };\n        _this.onBoundsUpdate = function (newBounds) {\n            var model = _this.props.model;\n            model.setLabelBounds(newBounds);\n        };\n        _this.grabLinkTemplate(_this.props);\n        return _this;\n    }\n    LinkView.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.linkType.id !== nextProps.model.typeId) {\n            this.grabLinkTemplate(nextProps);\n        }\n    };\n    LinkView.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        return nextProps.shouldUpdate;\n    };\n    LinkView.prototype.grabLinkTemplate = function (props) {\n        this.linkType = props.view.model.getLinkType(props.model.typeId);\n        this.template = props.view.createLinkTemplate(this.linkType);\n    };\n    LinkView.prototype.render = function () {\n        var _a = this.props, view = _a.view, model = _a.model, route = _a.route;\n        var source = view.model.getElement(model.sourceId);\n        var target = view.model.getElement(model.targetId);\n        if (!(source && target)) {\n            return null;\n        }\n        var verticesDefinedByUser = model.vertices || [];\n        var vertices = route ? route.vertices : verticesDefinedByUser;\n        var polyline = geometry_1.computePolyline(source, target, vertices);\n        var path = 'M' + polyline.map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return x + \",\" + y;\n        }).join(' L');\n        var _b = this.linkType, typeIndex = _b.index, showLabel = _b.showLabel;\n        var style = this.template.renderLink(model);\n        var pathAttributes = getPathAttributes(model, style);\n        var isBlurred = view.highlighter && !view.highlighter(model);\n        var className = LINK_CLASS + \" \" + (isBlurred ? LINK_CLASS + \"--blurred\" : '');\n        return (React.createElement(\"g\", { className: className, \"data-link-id\": model.id, \"data-source-id\": source.id, \"data-target-id\": target.id },\n            React.createElement(\"path\", tslib_1.__assign({ className: LINK_CLASS + \"__connection\", d: path }, pathAttributes, { markerStart: \"url(#\" + elements_1.linkMarkerKey(typeIndex, true) + \")\", markerEnd: \"url(#\" + elements_1.linkMarkerKey(typeIndex, false) + \")\" })),\n            React.createElement(\"path\", { className: LINK_CLASS + \"__wrap\", d: path }),\n            showLabel ? this.renderLabels(polyline, style) : undefined,\n            this.renderVertices(verticesDefinedByUser, pathAttributes.stroke)));\n    };\n    LinkView.prototype.renderVertices = function (vertices, fill) {\n        var elements = [];\n        var vertexClass = LINK_CLASS + \"__vertex\";\n        var vertexRadius = 10;\n        var index = 0;\n        for (var _i = 0, vertices_1 = vertices; _i < vertices_1.length; _i++) {\n            var _a = vertices_1[_i], x = _a.x, y = _a.y;\n            elements.push(React.createElement(\"circle\", { key: index * 2, \"data-vertex\": index, className: vertexClass, cx: x, cy: y, r: vertexRadius, fill: fill }));\n            elements.push(React.createElement(VertexTools, { key: index * 2 + 1, className: LINK_CLASS + \"__vertex-tools\", model: this.props.model, vertexIndex: index, vertexRadius: vertexRadius, x: x, y: y, onRemove: this.onRemoveLinkVertex }));\n            index++;\n        }\n        return React.createElement(\"g\", { className: LINK_CLASS + \"__vertices\" }, elements);\n    };\n    LinkView.prototype.renderLabels = function (polyline, style) {\n        var _this = this;\n        var _a = this.props, view = _a.view, model = _a.model, route = _a.route;\n        var labels = computeLinkLabels(model, style, view);\n        var textAnchor = 'middle';\n        if (route && route.labelTextAnchor) {\n            textAnchor = route.labelTextAnchor;\n        }\n        var polylineLength = geometry_1.computePolylineLength(polyline);\n        TEMPORARY_LABEL_LINES.clear();\n        return (React.createElement(\"g\", { className: LINK_CLASS + \"__labels\" }, labels.map(function (label, index) {\n            var _a = geometry_1.getPointAlongPolyline(polyline, polylineLength * label.offset), x = _a.x, y = _a.y;\n            var groupKey = Math.round(label.offset * LABEL_GROUPING_PRECISION) / LABEL_GROUPING_PRECISION;\n            var line = TEMPORARY_LABEL_LINES.get(groupKey) || 0;\n            TEMPORARY_LABEL_LINES.set(groupKey, line + 1);\n            return (React.createElement(LinkLabel, { key: index, x: x, y: y, line: line, label: label, textAnchor: textAnchor, onBoundsUpdate: index === 0 ? _this.onBoundsUpdate : undefined }));\n        })));\n    };\n    return LinkView;\n}(react_1.Component));\nfunction computeLinkLabels(model, style, view) {\n    var labels = [];\n    var labelStyle = style.label || {};\n    var labelTexts = labelStyle.attrs && labelStyle.attrs.text ? labelStyle.attrs.text.text : undefined;\n    var text;\n    var title = labelStyle.title;\n    if (labelTexts && labelTexts.length > 0) {\n        text = view.selectLabel(labelTexts);\n    }\n    else {\n        var type = view.model.getLinkType(model.typeId);\n        text = view.selectLabel(type.label) || {\n            value: view.formatLabel(type.label, type.id),\n            language: '',\n        };\n        if (title === undefined) {\n            title = text.value + \" \" + view.formatIri(model.typeId);\n        }\n    }\n    labels.push({\n        offset: labelStyle.position || 0.5,\n        text: text,\n        title: title,\n        attributes: {\n            text: getLabelTextAttributes(labelStyle),\n            rect: getLabelRectAttributes(labelStyle),\n        },\n    });\n    if (style.properties) {\n        for (var _i = 0, _a = style.properties; _i < _a.length; _i++) {\n            var property = _a[_i];\n            if (!(property.attrs && property.attrs.text && property.attrs.text.text)) {\n                continue;\n            }\n            labels.push({\n                offset: property.position || 0.5,\n                text: view.selectLabel(property.attrs.text.text),\n                title: property.title,\n                attributes: {\n                    text: getLabelTextAttributes(property),\n                    rect: getLabelRectAttributes(property),\n                },\n            });\n        }\n    }\n    return labels;\n}\nfunction getPathAttributes(model, style) {\n    var connectionAttributes = style.connection || {};\n    var defaultStrokeDasharray = model.layoutOnly ? '5,5' : undefined;\n    var _a = connectionAttributes.fill, fill = _a === void 0 ? 'none' : _a, _b = connectionAttributes.stroke, stroke = _b === void 0 ? 'black' : _b, strokeWidth = connectionAttributes[\"stroke-width\"], _c = connectionAttributes[\"stroke-dasharray\"], strokeDasharray = _c === void 0 ? defaultStrokeDasharray : _c;\n    return { fill: fill, stroke: stroke, strokeWidth: strokeWidth, strokeDasharray: strokeDasharray };\n}\nfunction getLabelTextAttributes(label) {\n    var _a = label.attrs ? label.attrs.text : {}, _b = _a.fill, fill = _b === void 0 ? 'black' : _b, _c = _a.stroke, stroke = _c === void 0 ? 'none' : _c, _d = _a[\"stroke-width\"], strokeWidth = _d === void 0 ? 0 : _d, _e = _a[\"font-family\"], fontFamily = _e === void 0 ? '\"Helvetica Neue\", \"Helvetica\", \"Arial\", sans-serif' : _e, _f = _a[\"font-size\"], fontSize = _f === void 0 ? 'inherit' : _f, _g = _a[\"font-weight\"], fontWeight = _g === void 0 ? 'bold' : _g;\n    return {\n        fill: fill, stroke: stroke, strokeWidth: strokeWidth, fontFamily: fontFamily, fontSize: fontSize,\n        fontWeight: fontWeight,\n    };\n}\nfunction getLabelRectAttributes(label) {\n    var _a = label.attrs && label.attrs.rect ? label.attrs.rect : {}, _b = _a.fill, fill = _b === void 0 ? 'white' : _b, _c = _a.stroke, stroke = _c === void 0 ? 'none' : _c, _d = _a[\"stroke-width\"], strokeWidth = _d === void 0 ? 0 : _d;\n    return { fill: fill, stroke: stroke, strokeWidth: strokeWidth };\n}\nvar GROUPED_LABEL_MARGIN = 2;\nvar LinkLabel = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkLabel, _super);\n    function LinkLabel(props) {\n        var _this = _super.call(this, props) || this;\n        _this.shouldUpdateBounds = true;\n        _this.onTextMount = function (text) {\n            _this.text = text;\n        };\n        _this.state = { width: 0, height: 0 };\n        return _this;\n    }\n    LinkLabel.prototype.render = function () {\n        var _a = this.props, x = _a.x, y = _a.y, label = _a.label, line = _a.line, textAnchor = _a.textAnchor;\n        var _b = this.state, width = _b.width, height = _b.height;\n        var _c = this.getLabelRectangle(width, height), rectX = _c.x, rectY = _c.y;\n        var transform = line === 0 ? undefined :\n            \"translate(0, \" + line * (height + GROUPED_LABEL_MARGIN) + \"px)\";\n        // HACK: 'alignment-baseline' and 'dominant-baseline' are not supported in Edge and IE\n        var dy = '0.6ex';\n        return (React.createElement(\"g\", { style: transform ? { transform: transform } : undefined },\n            label.title ? React.createElement(\"title\", null, label.title) : undefined,\n            React.createElement(\"rect\", { x: rectX, y: rectY, width: width, height: height, style: label.attributes.rect }),\n            React.createElement(\"text\", { ref: this.onTextMount, x: x, y: y, dy: dy, textAnchor: textAnchor, style: label.attributes.text }, label.text.value)));\n    };\n    LinkLabel.prototype.getLabelRectangle = function (width, height) {\n        var _a = this.props, x = _a.x, y = _a.y, textAnchor = _a.textAnchor;\n        var xOffset = 0;\n        if (textAnchor === 'middle') {\n            xOffset = -width / 2;\n        }\n        else if (textAnchor === 'end') {\n            xOffset = -width;\n        }\n        return {\n            x: x + xOffset,\n            y: y - height / 2,\n            width: width,\n            height: height,\n        };\n    };\n    LinkLabel.prototype.componentDidMount = function () {\n        this.recomputeBounds(this.props);\n    };\n    LinkLabel.prototype.componentWillUnmount = function () {\n        var onBoundsUpdate = this.props.onBoundsUpdate;\n        onBoundsUpdate(undefined);\n    };\n    LinkLabel.prototype.componentWillReceiveProps = function (nextProps) {\n        this.shouldUpdateBounds = true;\n    };\n    LinkLabel.prototype.componentDidUpdate = function (props) {\n        this.recomputeBounds(this.props);\n    };\n    LinkLabel.prototype.recomputeBounds = function (props) {\n        if (this.shouldUpdateBounds) {\n            var onBoundsUpdate = this.props.onBoundsUpdate;\n            this.shouldUpdateBounds = false;\n            var bounds = this.text.getBBox();\n            if (onBoundsUpdate) {\n                var labelBounds = this.getLabelRectangle(bounds.width, bounds.height);\n                onBoundsUpdate(labelBounds);\n            }\n            this.setState({\n                width: bounds.width,\n                height: bounds.height,\n            });\n        }\n    };\n    return LinkLabel;\n}(react_1.Component));\nvar VertexTools = /** @class */ (function (_super) {\n    tslib_1.__extends(VertexTools, _super);\n    function VertexTools() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onRemoveVertex = function (e) {\n            if (e.button !== 0 /* left button */) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            var _a = _this.props, onRemove = _a.onRemove, model = _a.model, vertexIndex = _a.vertexIndex;\n            onRemove(new elements_1.LinkVertex(model, vertexIndex));\n        };\n        return _this;\n    }\n    VertexTools.prototype.render = function () {\n        var _a = this.props, className = _a.className, vertexIndex = _a.vertexIndex, vertexRadius = _a.vertexRadius, x = _a.x, y = _a.y;\n        var transform = \"translate(\" + (x + 2 * vertexRadius) + \",\" + (y - 2 * vertexRadius) + \")scale(\" + vertexRadius + \")\";\n        return (React.createElement(\"g\", { className: className, transform: transform, onMouseDown: this.onRemoveVertex },\n            React.createElement(\"title\", null, \"Remove vertex\"),\n            React.createElement(\"circle\", { r: 1 }),\n            React.createElement(\"path\", { d: 'M-0.5,-0.5 L0.5,0.5 M0.5,-0.5 L-0.5,0.5', strokeWidth: 2 / vertexRadius })));\n    };\n    return VertexTools;\n}(react_1.Component));\nvar LinkMarkers = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkMarkers, _super);\n    function LinkMarkers() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.delayedUpdate = new async_1.Debouncer();\n        return _this;\n    }\n    LinkMarkers.prototype.render = function () {\n        var view = this.props.view;\n        var markers = [];\n        view.getLinkTemplates().forEach(function (template, linkTypeId) {\n            var type = view.model.getLinkType(linkTypeId);\n            if (!type) {\n                return;\n            }\n            var typeIndex = type.index;\n            if (template.markerSource) {\n                markers.push(React.createElement(LinkMarker, { key: typeIndex * 2, linkTypeIndex: typeIndex, style: template.markerSource, isStartMarker: true }));\n            }\n            if (template.markerTarget) {\n                markers.push(React.createElement(LinkMarker, { key: typeIndex * 2 + 1, linkTypeIndex: typeIndex, style: template.markerTarget, isStartMarker: false }));\n            }\n        });\n        return React.createElement(\"defs\", null, markers);\n    };\n    LinkMarkers.prototype.componentDidMount = function () {\n        var _this = this;\n        var view = this.props.view;\n        this.listener.listen(view.events, 'syncUpdate', function (_a) {\n            var layer = _a.layer;\n            if (layer !== view_1.RenderingLayer.Link) {\n                return;\n            }\n            _this.delayedUpdate.runSynchronously();\n        });\n        this.listener.listen(view.events, 'changeLinkTemplates', function () {\n            _this.delayedUpdate.call(function () { return _this.forceUpdate(); });\n        });\n    };\n    LinkMarkers.prototype.shouldComponentUpdate = function () {\n        return false;\n    };\n    LinkMarkers.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.delayedUpdate.dispose();\n    };\n    return LinkMarkers;\n}(react_1.Component));\nexports.LinkMarkers = LinkMarkers;\nvar SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nvar LinkMarker = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkMarker, _super);\n    function LinkMarker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onMarkerMount = function (marker) {\n            if (!marker) {\n                return;\n            }\n            var _a = _this.props, linkTypeIndex = _a.linkTypeIndex, isStartMarker = _a.isStartMarker, style = _a.style;\n            marker.setAttribute('id', elements_1.linkMarkerKey(linkTypeIndex, isStartMarker));\n            marker.setAttribute('markerWidth', style.width.toString());\n            marker.setAttribute('markerHeight', style.height.toString());\n            marker.setAttribute('orient', 'auto');\n            var xOffset = isStartMarker ? 0 : (style.width - 1);\n            marker.setAttribute('refX', xOffset.toString());\n            marker.setAttribute('refY', (style.height / 2).toString());\n            marker.setAttribute('markerUnits', 'userSpaceOnUse');\n            var path = document.createElementNS(SVG_NAMESPACE, 'path');\n            path.setAttribute('d', style.d);\n            if (style.fill !== undefined) {\n                path.setAttribute('fill', style.fill);\n            }\n            if (style.stroke !== undefined) {\n                path.setAttribute('stroke', style.stroke);\n            }\n            if (style.strokeWidth !== undefined) {\n                path.setAttribute('stroke-width', style.strokeWidth);\n            }\n            marker.appendChild(path);\n        };\n        return _this;\n    }\n    LinkMarker.prototype.render = function () {\n        return React.createElement(\"marker\", { ref: this.onMarkerMount });\n    };\n    LinkMarker.prototype.shouldComponentUpdate = function () {\n        return false;\n    };\n    return LinkMarker;\n}(react_1.Component));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar polyfills_1 = require(\"../viewUtils/polyfills\");\nvar react_1 = require(\"../viewUtils/react\");\nvar toSvg_1 = require(\"../viewUtils/toSvg\");\nvar commands_1 = require(\"./commands\");\nvar elements_1 = require(\"./elements\");\nvar geometry_1 = require(\"./geometry\");\nvar view_1 = require(\"./view\");\nvar paper_1 = require(\"./paper\");\nexports.PaperAreaContextTypes = {\n    ontodiaPaperArea: react_1.PropTypes.anything,\n};\nvar CLASS_NAME = 'ontodia-paper-area';\nvar DEFAULT_ANIMATION_DURATION = 500;\nvar LEFT_MOUSE_BUTTON = 0;\nvar PaperArea = /** @class */ (function (_super) {\n    tslib_1.__extends(PaperArea, _super);\n    function PaperArea(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.source = new events_1.EventSource();\n        _this.events = _this.source;\n        _this.widgets = {};\n        _this.pageSize = { x: 1500, y: 800 };\n        _this.cssAnimations = 0;\n        _this.delayedPaperAdjust = new async_1.Debouncer();\n        _this.onOuterMount = function (outer) { _this.outer = outer; };\n        _this.onAreaMount = function (area) { _this.area = area; };\n        _this.onWidgetsMouseDown = function (e) {\n            // prevent PaperArea from generating click on a blank area\n            e.stopPropagation();\n        };\n        _this.adjustPaper = function (callback) {\n            var _a = _this.area, clientWidth = _a.clientWidth, clientHeight = _a.clientHeight;\n            var adjusted = tslib_1.__assign(tslib_1.__assign({}, _this.computeAdjustedBox()), { paddingX: Math.ceil(clientWidth), paddingY: Math.ceil(clientHeight) });\n            var previous = _this.state;\n            var samePaperProps = (adjusted.paperWidth === previous.paperWidth &&\n                adjusted.paperHeight === previous.paperHeight &&\n                adjusted.originX === previous.originX &&\n                adjusted.originY === previous.originY &&\n                adjusted.paddingX === previous.paddingX &&\n                adjusted.paddingY === previous.paddingY);\n            if (!samePaperProps) {\n                _this.scrollBeforeUpdate = {\n                    left: _this.area.scrollLeft,\n                    top: _this.area.scrollTop,\n                };\n                _this.setState(adjusted, callback);\n            }\n            else if (callback) {\n                callback();\n            }\n        };\n        _this.onPaperPointerDown = function (e, cell) {\n            if (_this.movingState) {\n                return;\n            }\n            var restore = commands_1.RestoreGeometry.capture(_this.props.view.model);\n            var batch = _this.props.view.model.history.startBatch(restore.title);\n            if (cell && e.button === LEFT_MOUSE_BUTTON) {\n                if (cell instanceof elements_1.Element) {\n                    e.preventDefault();\n                    _this.startMoving(e, cell);\n                    _this.listenToPointerMove(e, cell, batch, restore);\n                }\n                else {\n                    e.preventDefault();\n                    _this.listenToPointerMove(e, cell, batch, restore);\n                }\n            }\n            else {\n                e.preventDefault();\n                _this.listenToPointerMove(e, undefined, batch, restore);\n            }\n        };\n        _this.onAreaPointerDown = function (e) {\n            if (e.target === _this.area) {\n                _this.onPaperPointerDown(e, undefined);\n            }\n        };\n        _this.onPointerMove = function (e) {\n            if (!_this.movingState || _this.scrollBeforeUpdate) {\n                return;\n            }\n            var _a = _this.movingState, origin = _a.origin, target = _a.target, panning = _a.panning;\n            var pageOffsetX = e.pageX - origin.pageX;\n            var pageOffsetY = e.pageY - origin.pageY;\n            if (Math.abs(pageOffsetX) >= 1 && Math.abs(pageOffsetY) >= 1) {\n                _this.movingState.pointerMoved = true;\n            }\n            if (typeof target === 'undefined') {\n                if (panning) {\n                    _this.area.scrollLeft = _this.panningScrollOrigin.scrollLeft - pageOffsetX;\n                    _this.area.scrollTop = _this.panningScrollOrigin.scrollTop - pageOffsetY;\n                }\n                _this.source.trigger('pointerMove', { source: _this, sourceEvent: e, target: target, panning: panning });\n            }\n            else if (target instanceof elements_1.Element) {\n                var _b = _this.pageToPaperCoords(e.pageX, e.pageY), x = _b.x, y = _b.y;\n                var _c = _this.movingElementOrigin, pointerX = _c.pointerX, pointerY = _c.pointerY, elementX = _c.elementX, elementY = _c.elementY;\n                target.setPosition({\n                    x: elementX + x - pointerX,\n                    y: elementY + y - pointerY,\n                });\n                _this.source.trigger('pointerMove', { source: _this, sourceEvent: e, target: target, panning: panning });\n                _this.props.view.performSyncUpdate();\n            }\n            else if (target instanceof elements_1.Link) {\n                var location_1 = _this.pageToPaperCoords(e.pageX, e.pageY);\n                var linkVertex = _this.generateLinkVertex(target, location_1);\n                linkVertex.createAt(location_1);\n                _this.movingState.target = linkVertex;\n            }\n            else if (target instanceof elements_1.LinkVertex) {\n                var location_2 = _this.pageToPaperCoords(e.pageX, e.pageY);\n                target.moveTo(location_2);\n                _this.source.trigger('pointerMove', { source: _this, sourceEvent: e, target: target, panning: panning });\n                _this.props.view.performSyncUpdate();\n            }\n        };\n        _this.stopListeningToPointerMove = function (e) {\n            var movingState = _this.movingState;\n            _this.movingState = undefined;\n            if (movingState) {\n                document.removeEventListener('mousemove', _this.onPointerMove);\n                document.removeEventListener('mouseup', _this.stopListeningToPointerMove);\n            }\n            if (e && movingState) {\n                var pointerMoved = movingState.pointerMoved, target = movingState.target, batch = movingState.batch, restoreGeometry = movingState.restoreGeometry;\n                _this.source.trigger('pointerUp', {\n                    source: _this,\n                    sourceEvent: e,\n                    target: target,\n                    panning: movingState.panning,\n                    triggerAsClick: !pointerMoved,\n                });\n                var restore = restoreGeometry.filterOutUnchanged();\n                if (restore.hasChanges()) {\n                    batch.history.registerToUndo(restore);\n                }\n                batch.store();\n            }\n        };\n        _this.onWheel = function (e) {\n            if (_this.shouldStartZooming(e)) {\n                e.preventDefault();\n                var delta = Math.max(-1, Math.min(1, e.deltaY || e.deltaX));\n                var pivot = _this.pageToPaperCoords(e.pageX, e.pageY);\n                _this.zoomBy(-delta * 0.1, { pivot: pivot });\n            }\n        };\n        _this.onDragOver = function (e) {\n            // Necessary. Allows us to drop.\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            e.dataTransfer.dropEffect = 'move';\n            var _a = clientCoordsFor(_this.area, e), x = _a.x, y = _a.y;\n            return false;\n        };\n        _this.onDragDrop = function (e) {\n            if (_this.props.onDragDrop) {\n                var _a = clientCoordsFor(_this.area, e), x = _a.x, y = _a.y;\n                var paperPosition = _this.clientToPaperCoords(x, y);\n                _this.props.onDragDrop(e, paperPosition);\n            }\n        };\n        _this.onScroll = function () {\n            _this.source.trigger('scroll', { source: _this });\n        };\n        _this.applyViewportState = function (targetState) {\n            var scale = targetState.scale.x;\n            var paperCenter = targetState.center;\n            _this.setState({ scale: scale }, function () {\n                var _a = _this.state, originX = _a.originX, originY = _a.originY, paddingX = _a.paddingX, paddingY = _a.paddingY;\n                var scrollCenterX = (paperCenter.x + originX) * scale;\n                var scrollCenterY = (paperCenter.y + originY) * scale;\n                var _b = _this.area, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\n                _this.area.scrollLeft = scrollCenterX - clientWidth / 2 + paddingX;\n                _this.area.scrollTop = scrollCenterY - clientHeight / 2 + paddingY;\n                if (_this.props.onZoom) {\n                    _this.props.onZoom(scale, scale);\n                }\n            });\n        };\n        _this.state = {\n            paperWidth: _this.pageSize.x,\n            paperHeight: _this.pageSize.y,\n            originX: 0,\n            originY: 0,\n            scale: 1,\n            paddingX: 0,\n            paddingY: 0,\n            renderedWidgets: [],\n        };\n        return _this;\n    }\n    Object.defineProperty(PaperArea.prototype, \"zoomOptions\", {\n        get: function () {\n            var _a = this.props.zoomOptions || {}, _b = _a.min, min = _b === void 0 ? 0.2 : _b, _c = _a.max, max = _c === void 0 ? 2 : _c, _d = _a.step, step = _d === void 0 ? 0.1 : _d, _e = _a.maxFit, maxFit = _e === void 0 ? 1 : _e, _f = _a.fitPadding, fitPadding = _f === void 0 ? 20 : _f, _g = _a.requireCtrl, requireCtrl = _g === void 0 ? true : _g;\n            return { min: min, max: max, step: step, maxFit: maxFit, fitPadding: fitPadding, requireCtrl: requireCtrl };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PaperArea.prototype.getChildContext = function () {\n        var view = this.props.view;\n        var ontodiaPaperArea = { paperArea: this, view: view };\n        return { ontodiaPaperArea: ontodiaPaperArea };\n    };\n    PaperArea.prototype.render = function () {\n        var _a = this.props, view = _a.view, watermarkSvg = _a.watermarkSvg, watermarkUrl = _a.watermarkUrl;\n        var _b = this.state, paperWidth = _b.paperWidth, paperHeight = _b.paperHeight, originX = _b.originX, originY = _b.originY, scale = _b.scale, paddingX = _b.paddingX, paddingY = _b.paddingY, renderedWidgets = _b.renderedWidgets;\n        var paperTransform = {\n            width: paperWidth, height: paperHeight,\n            originX: originX, originY: originY, scale: scale, paddingX: paddingX, paddingY: paddingY,\n        };\n        var widgetProps = { paperArea: this, paperTransform: paperTransform };\n        var areaClass = CLASS_NAME + \"__area\";\n        if (this.props.hideScrollBars) {\n            areaClass += \" \" + CLASS_NAME + \"--hide-scrollbars\";\n        }\n        var componentClass = CLASS_NAME;\n        if (this.isAnimatingGraph()) {\n            componentClass += \" \" + CLASS_NAME + \"--animated\";\n        }\n        return (React.createElement(\"div\", { className: componentClass, ref: this.onOuterMount },\n            React.createElement(\"div\", { className: areaClass, ref: this.onAreaMount, onMouseDown: this.onAreaPointerDown },\n                React.createElement(paper_1.Paper, { view: view, paperTransform: paperTransform, onPointerDown: this.onPaperPointerDown, linkLayerWidgets: React.createElement(\"div\", { className: CLASS_NAME + \"__widgets\", onMouseDown: this.onWidgetsMouseDown }, renderedWidgets.filter(function (w) { return w.attachment === view_1.WidgetAttachment.OverLinks; }).map(function (widget) { return React.cloneElement(widget.element, widgetProps); })), elementLayerWidgets: React.createElement(\"div\", { className: CLASS_NAME + \"__widgets\", onMouseDown: this.onWidgetsMouseDown }, renderedWidgets.filter(function (w) { return w.attachment === view_1.WidgetAttachment.OverElements; }).map(function (widget) { return React.cloneElement(widget.element, widgetProps); })) }),\n                watermarkSvg ? (React.createElement(\"a\", { href: watermarkUrl, target: '_blank', rel: 'noopener' },\n                    React.createElement(\"img\", { className: CLASS_NAME + \"__watermark\", src: watermarkSvg, draggable: false }))) : null),\n            renderedWidgets.filter(function (w) { return w.attachment === view_1.WidgetAttachment.Viewport; }).map(function (widget) {\n                return React.cloneElement(widget.element, widgetProps);\n            })));\n    };\n    PaperArea.prototype.componentDidMount = function () {\n        var _this = this;\n        this.adjustPaper(function () { return _this.centerTo(); });\n        var view = this.props.view;\n        var delayedAdjust = function () { return _this.delayedPaperAdjust.call(_this.adjustPaper); };\n        this.listener.listen(view.model.events, 'changeCells', delayedAdjust);\n        this.listener.listen(view.model.events, 'elementEvent', function (_a) {\n            var data = _a.data;\n            if (data.changePosition || data.changeSize) {\n                delayedAdjust();\n            }\n        });\n        this.listener.listen(view.model.events, 'linkEvent', function (_a) {\n            var data = _a.data;\n            if (data.changeVertices) {\n                delayedAdjust();\n            }\n        });\n        this.listener.listen(view.events, 'syncUpdate', function (_a) {\n            var layer = _a.layer;\n            if (layer !== view_1.RenderingLayer.PaperArea) {\n                return;\n            }\n            _this.delayedPaperAdjust.runSynchronously();\n        });\n        this.listener.listen(view.events, 'updateWidgets', function (_a) {\n            var widgets = _a.widgets;\n            _this.updateWidgets(widgets);\n        });\n        this.area.addEventListener('dragover', this.onDragOver);\n        this.area.addEventListener('drop', this.onDragDrop);\n        this.area.addEventListener('scroll', this.onScroll);\n        this.area.addEventListener('wheel', this.onWheel, polyfills_1.isIE11() ? false : { passive: false });\n    };\n    PaperArea.prototype.componentDidUpdate = function (prevProps, prevState) {\n        if (this.scrollBeforeUpdate) {\n            var _a = this.state, scale = _a.scale, originX = _a.originX, originY = _a.originY, paddingX = _a.paddingX, paddingY = _a.paddingY;\n            var scrollX_1 = (originX - prevState.originX) * scale + (paddingX - prevState.paddingX);\n            var scrollY_1 = (originY - prevState.originY) * scale + (paddingY - prevState.paddingY);\n            var scrollLeft = this.scrollBeforeUpdate.left + scrollX_1;\n            var scrollTop = this.scrollBeforeUpdate.top + scrollY_1;\n            this.area.scrollLeft = scrollLeft;\n            this.area.scrollTop = scrollTop;\n            this.scrollBeforeUpdate = undefined;\n        }\n    };\n    PaperArea.prototype.componentWillUnmount = function () {\n        this.stopListeningToPointerMove();\n        this.listener.stopListening();\n        this.area.removeEventListener('dragover', this.onDragOver);\n        this.area.removeEventListener('drop', this.onDragDrop);\n        this.area.removeEventListener('scroll', this.onScroll);\n        this.area.removeEventListener('wheel', this.onWheel);\n    };\n    PaperArea.prototype.updateWidgets = function (update) {\n        var _this = this;\n        this.widgets = tslib_1.__assign(tslib_1.__assign({}, this.widgets), update);\n        var renderedWidgets = Object.keys(this.widgets)\n            .filter(function (key) { return _this.widgets[key]; })\n            .map(function (key) {\n            var widget = _this.widgets[key];\n            var element = React.cloneElement(widget.element, { key: key });\n            return tslib_1.__assign(tslib_1.__assign({}, widget), { element: element });\n        });\n        this.setState({ renderedWidgets: renderedWidgets });\n    };\n    PaperArea.prototype.pageToPaperCoords = function (pageX, pageY) {\n        var _a = this.area.getBoundingClientRect(), left = _a.left, top = _a.top;\n        return this.clientToPaperCoords(pageX - (left + window.pageXOffset), pageY - (top + window.pageYOffset));\n    };\n    PaperArea.prototype.clientToPaperCoords = function (areaClientX, areaClientY) {\n        var _a = this.clientToScrollablePaneCoords(areaClientX, areaClientY), paneX = _a.x, paneY = _a.y;\n        return this.scrollablePaneToPaperCoords(paneX, paneY);\n    };\n    PaperArea.prototype.clientToScrollablePaneCoords = function (areaClientX, areaClientY) {\n        var _a = this.state, paddingX = _a.paddingX, paddingY = _a.paddingY;\n        var paneX = areaClientX + this.area.scrollLeft - paddingX;\n        var paneY = areaClientY + this.area.scrollTop - paddingY;\n        return { x: paneX, y: paneY };\n    };\n    PaperArea.prototype.scrollablePaneToPaperCoords = function (paneX, paneY) {\n        var _a = this.state, scale = _a.scale, paddingX = _a.paddingX, paddingY = _a.paddingY, originX = _a.originX, originY = _a.originY;\n        var paperX = paneX / scale - originX;\n        var paperY = paneY / scale - originY;\n        return { x: paperX, y: paperY };\n    };\n    PaperArea.prototype.paperToScrollablePaneCoords = function (paperX, paperY) {\n        var _a = this.state, scale = _a.scale, paddingX = _a.paddingX, paddingY = _a.paddingY, originX = _a.originX, originY = _a.originY;\n        var paneX = (paperX + originX) * scale;\n        var paneY = (paperY + originY) * scale;\n        return { x: paneX, y: paneY };\n    };\n    /** Returns bounding box of paper content in paper coordinates. */\n    PaperArea.prototype.getContentFittingBox = function () {\n        var _a = this.props.view.model, elements = _a.elements, links = _a.links;\n        return getContentFittingBox(elements, links);\n    };\n    /** Returns paper size in paper coordinates. */\n    PaperArea.prototype.getPaperSize = function () {\n        var _a = this.state, width = _a.paperWidth, height = _a.paperHeight, scale = _a.scale;\n        return { width: width / scale, height: height / scale };\n    };\n    PaperArea.prototype.getAreaMetrics = function () {\n        var _a = this.area, clientWidth = _a.clientWidth, clientHeight = _a.clientHeight, offsetWidth = _a.offsetWidth, offsetHeight = _a.offsetHeight;\n        return { clientWidth: clientWidth, clientHeight: clientHeight, offsetWidth: offsetWidth, offsetHeight: offsetHeight };\n    };\n    PaperArea.prototype.computeAdjustedBox = function () {\n        // bbox in paper coordinates\n        var bbox = this.getContentFittingBox();\n        var bboxLeft = bbox.x;\n        var bboxTop = bbox.y;\n        var bboxRight = bbox.x + bbox.width;\n        var bboxBottom = bbox.y + bbox.height;\n        var _a = this.pageSize, gridWidth = _a.x, gridHeight = _a.y;\n        // bbox in integer grid coordinates (open-closed intervals)\n        var bboxGrid = {\n            left: Math.floor(bboxLeft / gridWidth),\n            top: Math.floor(bboxTop / gridHeight),\n            right: Math.ceil(bboxRight / gridWidth),\n            bottom: Math.ceil(bboxBottom / gridHeight),\n        };\n        // const oldOrigin = this.paper.options.origin;\n        var originX = -bboxGrid.left * gridWidth;\n        var originY = -bboxGrid.top * gridHeight;\n        var paperWidth = Math.max(bboxGrid.right - bboxGrid.left, 1) * gridWidth;\n        var paperHeight = Math.max(bboxGrid.bottom - bboxGrid.top, 1) * gridHeight;\n        return { paperWidth: paperWidth, paperHeight: paperHeight, originX: originX, originY: originY };\n    };\n    PaperArea.prototype.shouldStartZooming = function (e) {\n        return Boolean(e.ctrlKey) && Boolean(this.zoomOptions.requireCtrl) || !this.zoomOptions.requireCtrl;\n    };\n    PaperArea.prototype.shouldStartPanning = function (e) {\n        var modifierPressed = e.ctrlKey || e.shiftKey || e.altKey;\n        return e.button === LEFT_MOUSE_BUTTON && !modifierPressed;\n    };\n    PaperArea.prototype.startMoving = function (e, element) {\n        var _a = this.pageToPaperCoords(e.pageX, e.pageY), pointerX = _a.x, pointerY = _a.y;\n        var _b = element.position, elementX = _b.x, elementY = _b.y;\n        this.movingElementOrigin = { pointerX: pointerX, pointerY: pointerY, elementX: elementX, elementY: elementY };\n    };\n    PaperArea.prototype.startPanning = function (event) {\n        var _a = this.area, scrollLeft = _a.scrollLeft, scrollTop = _a.scrollTop;\n        this.panningScrollOrigin = { scrollLeft: scrollLeft, scrollTop: scrollTop };\n        this.clearTextSelectionInArea();\n    };\n    /** Clears accidental text selection in the diagram area. */\n    PaperArea.prototype.clearTextSelectionInArea = function () {\n        if (document.getSelection) {\n            var selection = document.getSelection();\n            if (selection.removeAllRanges) {\n                selection.removeAllRanges();\n            }\n        }\n    };\n    PaperArea.prototype.generateLinkVertex = function (link, location) {\n        var previous = link.vertices;\n        var vertices = previous ? tslib_1.__spreadArrays(previous) : [];\n        var model = this.props.view.model;\n        var polyline = geometry_1.computePolyline(model.getElement(link.sourceId), model.getElement(link.targetId), vertices);\n        var segmentIndex = geometry_1.findNearestSegmentIndex(polyline, location);\n        return new elements_1.LinkVertex(link, segmentIndex);\n    };\n    PaperArea.prototype.listenToPointerMove = function (event, cell, batch, restoreGeometry) {\n        if (this.movingState) {\n            return;\n        }\n        var panning = cell === undefined && this.shouldStartPanning(event);\n        if (panning) {\n            this.startPanning(event);\n        }\n        var pageX = event.pageX, pageY = event.pageY;\n        this.movingState = {\n            origin: { pageX: pageX, pageY: pageY },\n            target: cell,\n            panning: panning,\n            pointerMoved: false,\n            batch: batch,\n            restoreGeometry: restoreGeometry,\n        };\n        document.addEventListener('mousemove', this.onPointerMove);\n        document.addEventListener('mouseup', this.stopListeningToPointerMove);\n        this.source.trigger('pointerDown', {\n            source: this, sourceEvent: event, target: cell, panning: panning,\n        });\n    };\n    PaperArea.prototype.centerTo = function (paperPosition, options) {\n        if (options === void 0) { options = {}; }\n        var _a = this.state, paperWidth = _a.paperWidth, paperHeight = _a.paperHeight;\n        var paperCenter = paperPosition || { x: paperWidth / 2, y: paperHeight / 2 };\n        var viewportState = {\n            center: paperCenter,\n        };\n        return this.setViewportState(viewportState, options);\n    };\n    PaperArea.prototype.centerContent = function (options) {\n        if (options === void 0) { options = {}; }\n        var bbox = this.getContentFittingBox();\n        return this.centerTo({\n            x: bbox.x + bbox.width / 2,\n            y: bbox.y + bbox.height / 2,\n        }, options);\n    };\n    PaperArea.prototype.getScale = function () {\n        return this.state.scale;\n    };\n    PaperArea.prototype.setScale = function (value, options) {\n        var scale = value;\n        var _a = this.zoomOptions, min = _a.min, max = _a.max;\n        scale = Math.max(scale, min);\n        scale = Math.min(scale, max);\n        var viewportState;\n        if (options && options.pivot) {\n            var _b = options.pivot, x = _b.x, y = _b.y;\n            var paperCenter = this.clientToPaperCoords(this.area.clientWidth / 2, this.area.clientHeight / 2);\n            var previousScale = this.state.scale;\n            var scaledBy = scale / previousScale;\n            viewportState = {\n                center: {\n                    x: x - (x - paperCenter.x) / scaledBy,\n                    y: y - (y - paperCenter.y) / scaledBy,\n                },\n                scale: { x: scale, y: scale },\n            };\n        }\n        else {\n            viewportState = {\n                scale: { x: scale, y: scale },\n            };\n        }\n        return this.setViewportState(viewportState, options);\n    };\n    PaperArea.prototype.zoomBy = function (value, options) {\n        return this.setScale(this.getScale() + value, options);\n    };\n    PaperArea.prototype.zoomIn = function (scaleOptions) {\n        return this.zoomBy(this.zoomOptions.step, scaleOptions);\n    };\n    PaperArea.prototype.zoomOut = function (scaleOptions) {\n        return this.zoomBy(-this.zoomOptions.step, scaleOptions);\n    };\n    PaperArea.prototype.zoomToFit = function (options) {\n        if (options === void 0) { options = {}; }\n        if (options.elements && options.elements.size === 0) {\n            return;\n        }\n        if (this.props.view.model.elements.length === 0) {\n            return this.centerTo();\n        }\n        var bbox;\n        var elements;\n        if (options.elements) {\n            var selectionElements_1 = [];\n            options.elements.forEach(function (el) { return selectionElements_1.push(el); });\n            elements = selectionElements_1;\n        }\n        else {\n            elements = this.props.view.model.elements;\n        }\n        bbox = getContentFittingBox(elements, []);\n        return this.zoomToFitRect(bbox, options);\n    };\n    PaperArea.prototype.zoomToFitRect = function (bbox, options) {\n        if (options === void 0) { options = {}; }\n        var _a = this.area, clientWidth = _a.clientWidth, clientHeight = _a.clientHeight;\n        if (bbox.width === 0) {\n            return;\n        }\n        var width = toSvg_1.fitRectKeepingAspectRatio(bbox.width, bbox.height, clientWidth, clientHeight).width;\n        var scale = width / bbox.width;\n        var _b = this.zoomOptions, min = _b.min, maxFit = _b.maxFit;\n        scale = Math.max(scale, min);\n        scale = Math.min(scale, maxFit);\n        var center = {\n            x: bbox.x + bbox.width / 2,\n            y: bbox.y + bbox.height / 2,\n        };\n        var viewPortState = {\n            center: center,\n            scale: { x: scale, y: scale },\n        };\n        return this.setViewportState(viewPortState, options);\n    };\n    PaperArea.prototype.makeToSVGOptions = function () {\n        var _this = this;\n        var svg = this.area.querySelector('.ontodia-paper__canvas');\n        if (!svg) {\n            throw new Error('Cannot find SVG canvas to export');\n        }\n        return {\n            model: this.props.view.model,\n            paper: svg,\n            contentBox: this.getContentFittingBox(),\n            getOverlayedElement: function (id) { return _this.area.querySelector(\"[data-element-id='\" + id + \"']\"); },\n            preserveDimensions: true,\n            convertImagesToDataUris: true,\n            elementsToRemoveSelector: '.ontodia-link__vertex-tools',\n            watermarkSvg: this.props.watermarkSvg,\n        };\n    };\n    PaperArea.prototype.exportSVG = function () {\n        return toSvg_1.toSVG(this.makeToSVGOptions());\n    };\n    PaperArea.prototype.exportPNG = function (options) {\n        return toSvg_1.toDataURL(tslib_1.__assign(tslib_1.__assign({}, options), this.makeToSVGOptions()));\n    };\n    PaperArea.prototype.isAnimatingGraph = function () {\n        return this.cssAnimations > 0;\n    };\n    /**\n     * Starts animation for graph elements and links.\n     *\n     * @param setupChanges immediately called function to perform animatable changes on graph\n     * @param duration animation duration in milliseconds (requires custom CSS to override)\n     * @returns promise which resolves when this animation ends\n     */\n    PaperArea.prototype.animateGraph = function (setupChanges, duration) {\n        var _this = this;\n        this.changeGraphAnimationCount(+1);\n        setupChanges();\n        var timeout = typeof duration === 'number' ? duration : DEFAULT_ANIMATION_DURATION;\n        return async_1.delay(timeout).then(function () { return _this.onGraphAnimationEnd(); });\n    };\n    PaperArea.prototype.onGraphAnimationEnd = function () {\n        this.changeGraphAnimationCount(-1);\n    };\n    PaperArea.prototype.changeGraphAnimationCount = function (change) {\n        var newValue = this.cssAnimations + change;\n        if (newValue < 0) {\n            return;\n        }\n        var previous = this.isAnimatingGraph();\n        this.cssAnimations = newValue;\n        var current = this.isAnimatingGraph();\n        if (previous !== current) {\n            this.forceUpdate();\n            this.source.trigger('changeAnimatingGraph', { source: this, previous: previous });\n        }\n    };\n    Object.defineProperty(PaperArea.prototype, \"viewportState\", {\n        get: function () {\n            var _a = this.area, clientWidth = _a.clientWidth, clientHeight = _a.clientHeight;\n            var _b = this.state, originX = _b.originX, originY = _b.originY, paddingX = _b.paddingX, paddingY = _b.paddingY, scale = _b.scale;\n            var scrollCenterX = this.area.scrollLeft + clientWidth / 2 - paddingX;\n            var scrollCenterY = this.area.scrollTop + clientHeight / 2 - paddingY;\n            var paperCenter = {\n                x: scrollCenterX / scale - originX,\n                y: scrollCenterY / scale - originY,\n            };\n            return {\n                center: paperCenter,\n                scale: {\n                    x: scale,\n                    y: scale,\n                }\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PaperArea.prototype.setViewportState = function (state, options) {\n        var _this = this;\n        if (this.viewportAnimation) {\n            this.viewportAnimation.cancellation.abort();\n        }\n        var from = this.viewportState;\n        var to = tslib_1.__assign(tslib_1.__assign({}, from), state);\n        var animate = options && (options.animate || options.duration > 0);\n        if (animate) {\n            var viewportAnimation = {\n                from: from, to: to, cancellation: new async_1.Cancellation(),\n            };\n            var durationMs = typeof options.duration === 'number'\n                ? options.duration : DEFAULT_ANIMATION_DURATION;\n            var awaitPromise = async_1.animateInterval(durationMs, function (progress) {\n                var t = async_1.easeInOutBezier(progress);\n                var computed = {\n                    center: {\n                        x: from.center.x + (to.center.x - from.center.x) * t,\n                        y: from.center.y + (to.center.y - from.center.y) * t,\n                    },\n                    scale: {\n                        x: from.scale.x + (to.scale.x - from.scale.x) * t,\n                        y: from.scale.y + (to.scale.y - from.scale.y) * t,\n                    },\n                };\n                _this.applyViewportState(computed);\n            }, viewportAnimation.cancellation);\n            this.viewportAnimation = viewportAnimation;\n            return awaitPromise.then(function () {\n                _this.viewportAnimation = undefined;\n            });\n        }\n        else {\n            this.applyViewportState(to);\n            return Promise.resolve();\n        }\n    };\n    PaperArea.childContextTypes = exports.PaperAreaContextTypes;\n    return PaperArea;\n}(React.Component));\nexports.PaperArea = PaperArea;\nfunction clientCoordsFor(container, e) {\n    var target = (e.target instanceof SVGElement && e.target.ownerSVGElement !== null)\n        ? e.target.ownerSVGElement : e.target;\n    var targetBox = target.getBoundingClientRect();\n    var containerBox = container.getBoundingClientRect();\n    return {\n        x: e.offsetX + (targetBox.left - containerBox.left),\n        y: e.offsetY + (targetBox.top - containerBox.top),\n    };\n}\nfunction getContentFittingBox(elements, links) {\n    var minX = Infinity, minY = Infinity;\n    var maxX = -Infinity, maxY = -Infinity;\n    for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n        var element = elements_2[_i];\n        var _a = element.position, x = _a.x, y = _a.y;\n        var size = element.size;\n        minX = Math.min(minX, x);\n        minY = Math.min(minY, y);\n        maxX = Math.max(maxX, x + size.width);\n        maxY = Math.max(maxY, y + size.height);\n    }\n    for (var _b = 0, links_1 = links; _b < links_1.length; _b++) {\n        var link = links_1[_b];\n        var vertices = link.vertices || [];\n        for (var _c = 0, vertices_1 = vertices; _c < vertices_1.length; _c++) {\n            var _d = vertices_1[_c], x = _d.x, y = _d.y;\n            minX = Math.min(minX, x);\n            minY = Math.min(minY, y);\n            maxX = Math.max(maxX, x);\n            maxY = Math.max(maxY, y);\n        }\n    }\n    return {\n        x: Number.isFinite(minX) ? minX : 0,\n        y: Number.isFinite(minY) ? minY : 0,\n        width: Number.isFinite(minX) && Number.isFinite(maxX) ? (maxX - minX) : 0,\n        height: Number.isFinite(minY) && Number.isFinite(maxY) ? (maxY - minY) : 0,\n    };\n}\nexports.getContentFittingBox = getContentFittingBox;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar lodash_1 = require(\"lodash\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar polyfills_1 = require(\"./polyfills\");\nvar htmlToSvg_1 = require(\"./htmlToSvg\");\nvar canvg = require('canvg-fixed');\nvar SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n/**\n * Padding (in px) for <foreignObject> elements of exported SVG to\n * mitigate issues with elements body overflow caused by missing styles\n * in exported image.\n */\nvar FOREIGN_OBJECT_SIZE_PADDING = 2;\nvar BORDER_PADDING = 100;\nfunction toSVG(options) {\n    return exportSVG(options).then(function (svg) { return new XMLSerializer().serializeToString(svg); });\n}\nexports.toSVG = toSVG;\nfunction exportSVG(options) {\n    var bbox = options.contentBox, watermarkSvg = options.watermarkSvg;\n    var _a = clonePaperSvg(options, FOREIGN_OBJECT_SIZE_PADDING), svgClone = _a.svgClone, imageBounds = _a.imageBounds;\n    if (polyfills_1.isIE11()) {\n        clearAttributes(svgClone);\n    }\n    var paddedWidth = bbox.width + 2 * BORDER_PADDING;\n    var paddedHeight = bbox.height + 2 * BORDER_PADDING;\n    if (options.preserveDimensions) {\n        svgClone.setAttribute('width', paddedWidth.toString());\n        svgClone.setAttribute('height', paddedHeight.toString());\n    }\n    else {\n        svgClone.setAttribute('width', '100%');\n        svgClone.setAttribute('height', '100%');\n    }\n    var viewBox = {\n        x: bbox.x - BORDER_PADDING,\n        y: bbox.y - BORDER_PADDING,\n        width: paddedWidth,\n        height: paddedHeight,\n    };\n    svgClone.setAttribute('viewBox', viewBox.x + \" \" + viewBox.y + \" \" + viewBox.width + \" \" + viewBox.height);\n    addWatermark(svgClone, viewBox, watermarkSvg);\n    var images = [];\n    if (!polyfills_1.isIE11()) {\n        var nodes = svgClone.querySelectorAll('img');\n        foreachNode(nodes, function (node) { return images.push(node); });\n    }\n    var convertingImages = Promise.all(images.map(function (img) {\n        var exportKey = img.getAttribute('export-key');\n        img.removeAttribute('export-key');\n        if (exportKey) {\n            var _a = imageBounds[exportKey], width = _a.width, height = _a.height;\n            img.setAttribute('width', width.toString());\n            img.setAttribute('height', height.toString());\n            if (!options.convertImagesToDataUris) {\n                return Promise.resolve();\n            }\n            return exportAsDataUri(img).then(function (dataUri) {\n                // check for empty svg data URI which happens when mockJointXHR catches an exception\n                if (dataUri && dataUri !== 'data:image/svg+xml,') {\n                    img.src = dataUri;\n                }\n            }).catch(function (err) {\n                // tslint:disable-next-line:no-console\n                console.warn('Failed to export image: ' + img.src, err);\n            });\n        }\n        else {\n            return Promise.resolve();\n        }\n    }));\n    return convertingImages.then(function () {\n        // workaround to include only ontodia-related stylesheets\n        var exportedCssText = extractCSSFromDocument(svgClone);\n        var defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n        defs.innerHTML = \"<style>\" + exportedCssText + \"</style>\";\n        svgClone.insertBefore(defs, svgClone.firstChild);\n        if (options.elementsToRemoveSelector) {\n            foreachNode(svgClone.querySelectorAll(options.elementsToRemoveSelector), function (node) { return node.remove(); });\n        }\n        return svgClone;\n    });\n}\nfunction addWatermark(svg, viewBox, watermarkSvg) {\n    var WATERMARK_CLASS = 'ontodia-exported-watermark';\n    var WATERMARK_MAX_WIDTH = 120;\n    var WATERMARK_PADDING = 20;\n    var image = document.createElementNS(SVG_NAMESPACE, 'image');\n    image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', watermarkSvg);\n    image.setAttribute('class', WATERMARK_CLASS);\n    var width = Math.min(viewBox.width * 0.2, WATERMARK_MAX_WIDTH);\n    var x = viewBox.x + viewBox.width - width - WATERMARK_PADDING;\n    var y = viewBox.y + WATERMARK_PADDING;\n    image.setAttribute('x', x.toString());\n    image.setAttribute('y', y.toString());\n    image.setAttribute('width', width.toString());\n    image.setAttribute('opacity', '0.3');\n    svg.insertBefore(image, svg.firstChild);\n}\nfunction clearAttributes(svg) {\n    var availableIds = {};\n    var prohibitedIds = {};\n    var defss = svg.querySelectorAll('defs');\n    foreachNode(defss, function (defs) {\n        foreachNode(defs.childNodes, function (def) {\n            var id = def.getAttribute('id');\n            if (id) {\n                availableIds[id] = true;\n                if (polyfills_1.isIE11() && def instanceof SVGFilterElement) {\n                    availableIds[id] = false;\n                }\n            }\n        });\n    });\n    var paths = svg.querySelectorAll('*');\n    foreachNode(paths, function (path) {\n        var markerStart = extractId(path.getAttribute('marker-start'));\n        if (markerStart && !availableIds[markerStart]) {\n            path.removeAttribute('marker-start');\n        }\n        var markerEnd = extractId(path.getAttribute('marker-end'));\n        if (markerEnd && !availableIds[markerEnd]) {\n            path.removeAttribute('marker-end');\n        }\n        var filterId = extractId(path.getAttribute('filter'));\n        if (filterId && !availableIds[filterId]) {\n            path.removeAttribute('filter');\n        }\n    });\n    function extractId(attributeValue) {\n        if (attributeValue) {\n            if (polyfills_1.isIE11()) {\n                return (attributeValue.match(/#(.*?)\"/) || [])[1];\n            }\n            else {\n                return (attributeValue.match(/#(.*?)\\)/) || [])[1];\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nfunction extractCSSFromDocument(targetSubtree) {\n    var exportedRules = new Set();\n    for (var i = 0; i < document.styleSheets.length; i++) {\n        var rules = void 0;\n        try {\n            var cssSheet = document.styleSheets[i];\n            rules = cssSheet.cssRules || cssSheet.rules;\n            if (!rules) {\n                continue;\n            }\n        }\n        catch (e) {\n            continue;\n        }\n        for (var j = 0; j < rules.length; j++) {\n            var rule = rules[j];\n            if (rule instanceof CSSStyleRule) {\n                if (targetSubtree.querySelector(rule.selectorText)) {\n                    exportedRules.add(rule);\n                }\n            }\n        }\n    }\n    var exportedCssTexts = [];\n    exportedRules.forEach(function (rule) { return exportedCssTexts.push(rule.cssText); });\n    return exportedCssTexts.join('\\n');\n}\nfunction clonePaperSvg(options, elementSizePadding) {\n    var model = options.model, paper = options.paper, getOverlayedElement = options.getOverlayedElement;\n    var svgClone = paper.cloneNode(true);\n    svgClone.removeAttribute('class');\n    svgClone.removeAttribute('style');\n    function findViewport() {\n        var child = svgClone.firstChild;\n        while (child) {\n            if (child instanceof SVGGElement) {\n                return child;\n            }\n            child = child.nextSibling;\n        }\n        return undefined;\n    }\n    var viewport = findViewport();\n    viewport.removeAttribute('transform');\n    var imageBounds = {};\n    var _loop_1 = function (element) {\n        var modelId = element.id;\n        var overlayedView = getOverlayedElement(modelId);\n        if (!overlayedView) {\n            return \"continue\";\n        }\n        var elementRoot = document.createElementNS(SVG_NAMESPACE, 'g');\n        var overlayedViewContent = overlayedView.firstChild.cloneNode(true);\n        elementRoot.setAttribute('class', 'ontodia-exported-element');\n        var newRoot = void 0;\n        if (polyfills_1.isIE11()) {\n            newRoot = htmlToSvg_1.htmlToSvg(overlayedView, [], options.mockImages);\n        }\n        else {\n            newRoot = document.createElementNS(SVG_NAMESPACE, 'foreignObject');\n            newRoot.appendChild(overlayedViewContent);\n        }\n        var _a = geometry_1.boundsOf(element), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        newRoot.setAttribute('transform', \"translate(\" + x + \",\" + y + \")\");\n        newRoot.setAttribute('width', (width + elementSizePadding).toString());\n        newRoot.setAttribute('height', (height + elementSizePadding).toString());\n        elementRoot.appendChild(newRoot);\n        viewport.appendChild(elementRoot);\n        var originalNodes = overlayedView.firstChild.querySelectorAll('img');\n        var clonedNodes = overlayedViewContent.querySelectorAll('img');\n        foreachNode(overlayedView.querySelectorAll('img'), function (img, index) {\n            var exportKey = lodash_1.uniqueId('export-key-');\n            clonedNodes[index].setAttribute('export-key', exportKey);\n            imageBounds[exportKey] = {\n                width: img.clientWidth,\n                height: img.clientHeight,\n            };\n        });\n    };\n    for (var _i = 0, _a = model.elements; _i < _a.length; _i++) {\n        var element = _a[_i];\n        _loop_1(element);\n    }\n    return { svgClone: svgClone, imageBounds: imageBounds };\n}\nfunction exportAsDataUri(original) {\n    var url = original.src;\n    if (!url || url.startsWith('data:')) {\n        return Promise.resolve(url);\n    }\n    return loadCrossOriginImage(original.src).then(function (image) {\n        var canvas = document.createElement('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0);\n        // match extensions like htttp://example.com/images/foo.JPG&w=200\n        var extensionMatch = url.match(/\\.([a-zA-Z0-9]+)[^\\.a-zA-Z0-9]?[^\\.]*$/);\n        var extension = extensionMatch ? extensionMatch[1].toLowerCase() : 'png';\n        try {\n            var mimeType = 'image/' + (extension === 'jpg' ? 'jpeg' : extension);\n            var dataUri = canvas.toDataURL(mimeType);\n            return Promise.resolve(dataUri);\n        }\n        catch (e) {\n            if (extension !== 'svg') {\n                return Promise.reject('Failed to convert image to data URI');\n            }\n            return fetch(url)\n                .then(function (response) { return response.text(); })\n                .then(function (svg) { return svg.length > 0 ? ('data:image/svg+xml,' + encodeURIComponent(svg)) : ''; });\n        }\n    });\n}\nfunction loadCrossOriginImage(src) {\n    var image = new Image();\n    image.crossOrigin = 'anonymous';\n    var promise = new Promise(function (resolve, reject) {\n        image.onload = function () { return resolve(image); };\n        image.onerror = function (ev) { return reject(ev); };\n    });\n    image.src = src;\n    return promise;\n}\nfunction foreachNode(nodeList, callback) {\n    for (var i = 0; i < nodeList.length; i++) {\n        callback(nodeList[i], i);\n    }\n}\nvar MAX_CANVAS_LENGTH = 4096;\nfunction toDataURL(options) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        function createCanvas(canvasWidth, canvasHeight, backgroundColor) {\n            var cnv = document.createElement('canvas');\n            cnv.width = canvasWidth;\n            cnv.height = canvasHeight;\n            var cnt = cnv.getContext('2d');\n            if (backgroundColor) {\n                cnt.fillStyle = backgroundColor;\n                cnt.fillRect(0, 0, canvasWidth, canvasHeight);\n            }\n            return { canvas: cnv, context: cnt };\n        }\n        var paper, _a, mimeType, svgOptions, svg, svgBox, containerSize, _b, innerSize, outerSize, offset, svgString, _c, canvas, context, image;\n        return tslib_1.__generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    paper = options.paper, _a = options.mimeType, mimeType = _a === void 0 ? 'image/png' : _a;\n                    svgOptions = tslib_1.__assign(tslib_1.__assign({}, options), { convertImagesToDataUris: true, mockImages: polyfills_1.isIE11(), preserveDimensions: true });\n                    return [4 /*yield*/, exportSVG(svgOptions)];\n                case 1:\n                    svg = _d.sent();\n                    svgBox = {\n                        width: Number(svg.getAttribute('width')),\n                        height: Number(svg.getAttribute('height')),\n                    };\n                    containerSize = (typeof options.width === 'number' || typeof options.height === 'number')\n                        ? { width: options.width, height: options.height }\n                        : fallbackContainerSize(svgBox);\n                    _b = computeAutofit(svgBox, containerSize), innerSize = _b.innerSize, outerSize = _b.outerSize, offset = _b.offset;\n                    svg.setAttribute('width', innerSize.width.toString());\n                    svg.setAttribute('height', innerSize.height.toString());\n                    svgString = new XMLSerializer().serializeToString(svg);\n                    _c = createCanvas(outerSize.width, outerSize.height, options.backgroundColor), canvas = _c.canvas, context = _c.context;\n                    if (!polyfills_1.isIE11()) return [3 /*break*/, 2];\n                    if (!canvg) {\n                        throw new Error('\"canvg-fixed\" dependency required to support exporting in the IE.');\n                    }\n                    canvg(canvas, svgString, {\n                        offsetX: offset.x,\n                        offsetY: offset.y,\n                        scaleWidth: innerSize.width,\n                        scaleHeight: innerSize.height,\n                        ignoreDimensions: true,\n                        ignoreClear: true,\n                    });\n                    return [2 /*return*/, canvas.toDataURL(mimeType, options.quality)];\n                case 2: return [4 /*yield*/, loadImage('data:image/svg+xml,' + encodeURIComponent(svgString))];\n                case 3:\n                    image = _d.sent();\n                    context.drawImage(image, offset.x, offset.y, innerSize.width, innerSize.height);\n                    return [2 /*return*/, canvas.toDataURL(mimeType, options.quality)];\n                case 4: return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.toDataURL = toDataURL;\nfunction loadImage(source) {\n    return new Promise(function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n            resolve(image);\n        };\n        image.onerror = function (ev) {\n            reject(ev);\n        };\n        image.src = source;\n    });\n}\nexports.loadImage = loadImage;\nfunction computeAutofit(itemSize, containerSize) {\n    var fit = fitRectKeepingAspectRatio(itemSize.width, itemSize.height, containerSize.width, containerSize.height);\n    var innerSize = {\n        width: Math.floor(fit.width),\n        height: Math.floor(fit.height),\n    };\n    var outerSize = {\n        width: typeof containerSize.width === 'number' ? containerSize.width : innerSize.width,\n        height: typeof containerSize.height === 'number' ? containerSize.height : innerSize.height,\n    };\n    var offset = {\n        x: Math.round((outerSize.width - innerSize.width) / 2),\n        y: Math.round((outerSize.height - innerSize.height) / 2),\n    };\n    return { innerSize: innerSize, outerSize: outerSize, offset: offset };\n}\nfunction fallbackContainerSize(itemSize) {\n    var maxResolutionScale = Math.min(MAX_CANVAS_LENGTH / itemSize.width, MAX_CANVAS_LENGTH / itemSize.height);\n    var resolutionScale = Math.min(2.0, maxResolutionScale);\n    var width = Math.floor(itemSize.width * resolutionScale);\n    var height = Math.floor(itemSize.height * resolutionScale);\n    return { width: width, height: height };\n}\nfunction fitRectKeepingAspectRatio(sourceWidth, sourceHeight, targetWidth, targetHeight) {\n    if (!(typeof targetWidth === 'number' || typeof targetHeight === 'number')) {\n        return { width: sourceWidth, height: sourceHeight };\n    }\n    var sourceAspectRatio = sourceWidth / sourceHeight;\n    targetWidth = typeof targetWidth === 'number' ? targetWidth : targetHeight * sourceAspectRatio;\n    targetHeight = typeof targetHeight === 'number' ? targetHeight : targetWidth / sourceAspectRatio;\n    if (targetHeight * sourceAspectRatio <= targetWidth) {\n        return { width: targetHeight * sourceAspectRatio, height: targetHeight };\n    }\n    else {\n        return { width: targetWidth, height: targetWidth / sourceAspectRatio };\n    }\n}\nexports.fitRectKeepingAspectRatio = fitRectKeepingAspectRatio;\n/**\n * Creates and returns a blob from a data URL (either base64 encoded or not).\n *\n * @param {string} dataURL The data URL to convert.\n * @return {Blob} A blob representing the array buffer data.\n */\nfunction dataURLToBlob(dataURL) {\n    var BASE64_MARKER = ';base64,';\n    if (dataURL.indexOf(BASE64_MARKER) === -1) {\n        var parts = dataURL.split(',');\n        var contentType = parts[0].split(':')[1];\n        var raw = decodeURIComponent(parts[1]);\n        return new Blob([raw], { type: contentType });\n    }\n    else {\n        var parts = dataURL.split(BASE64_MARKER);\n        var contentType = parts[0].split(':')[1];\n        var raw = window.atob(parts[1]);\n        var rawLength = raw.length;\n        var uInt8Array = new Uint8Array(rawLength);\n        for (var i = 0; i < rawLength; ++i) {\n            uInt8Array[i] = raw.charCodeAt(i);\n        }\n        return new Blob([uInt8Array], { type: contentType });\n    }\n}\nexports.dataURLToBlob = dataURLToBlob;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_1 = require(\"lodash\");\nfunction htmlToSvg(htmlView, blackList, mockImages) {\n    blackList = blackList || [];\n    var g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    var defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n    var primitives = breakIntoPrimitives(htmlView);\n    for (var _i = 0, primitives_1 = primitives; _i < primitives_1.length; _i++) {\n        var primitive = primitives_1[_i];\n        var id = primitive.getAttribute('id');\n        if (!id) {\n            g.appendChild(primitive);\n        }\n        else {\n            primitive.removeAttribute('id');\n            var clipPath = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');\n            clipPath.setAttribute('id', id);\n            clipPath.appendChild(primitive);\n            defs.appendChild(clipPath);\n        }\n    }\n    g.appendChild(defs);\n    return g;\n    function breakIntoPrimitives(domElement) {\n        if (domElement instanceof Element) {\n            if (domElement instanceof HTMLImageElement) {\n                return !mockImages ? processImage(domElement) : processElement(domElement);\n            }\n            else if (domElement instanceof HTMLElement) {\n                return processElement(domElement);\n            }\n        }\n        else if (domElement instanceof Text) {\n            return processText(domElement);\n        }\n        return [];\n    }\n    function processImage(htmlElement) {\n        var image = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n        // Process current node\n        var style = window.getComputedStyle(htmlElement);\n        var offsetTop = getOffsetTop(htmlElement);\n        var offsetLeft = getOffsetLeft(htmlElement);\n        var width = style.width;\n        var height = style.height;\n        // path.setAttribute('className', htmlElement.className);\n        image.setAttribute('stroke', style.borderColor);\n        image.setAttribute('stroke-width', style.borderWidth);\n        image.setAttribute('x', \"\" + offsetLeft);\n        image.setAttribute('y', \"\" + offsetTop);\n        image.setAttribute('width', \"\" + width);\n        image.setAttribute('height', \"\" + height);\n        image.setAttribute('href', htmlElement.getAttribute('src'));\n        htmlElement.removeAttribute('crossorigin');\n        return [image];\n    }\n    function processElement(htmlElement) {\n        var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        var parts = [];\n        // Process children\n        var contentSize = { width: 0, height: 0 };\n        forEachNode(htmlElement.childNodes, function (child) {\n            var nestedParts = breakIntoPrimitives(child);\n            if (nestedParts.length > 0) {\n                for (var _i = 0, nestedParts_1 = nestedParts; _i < nestedParts_1.length; _i++) {\n                    var p = nestedParts_1[_i];\n                    var bbox = getElementBoundingBox(p);\n                    contentSize.width = Math.max(contentSize.width, bbox.x + bbox.width);\n                    contentSize.height = Math.max(contentSize.height, bbox.y + bbox.height);\n                }\n                parts = parts.concat(nestedParts);\n            }\n        });\n        // Process current node\n        var style = window.getComputedStyle(htmlElement);\n        var y = getOffsetTop(htmlElement);\n        var x = getOffsetLeft(htmlElement);\n        var _a = htmlElement.getBoundingClientRect(), width = _a.width, height = _a.height;\n        // const width = !style.width.endsWith('px') ? contentSize.width + 'px' : style.width;\n        // const height = !style.width.endsWith('px') ? contentSize.height + 'px' : style.height;\n        var radius = getBorderRadius(style);\n        var borderColor = getBorderColor(style);\n        var borderWidth = getBorderWidth(style);\n        // path.setAttribute('className', htmlElement.className);\n        path.setAttribute('fill', style.backgroundColor);\n        path.setAttribute('stroke', borderColor);\n        path.setAttribute('stroke-width', borderWidth + \"px\");\n        // path.setAttribute('transform', `translate(${x}, ${y})`);\n        path.setAttribute('x', \"\" + x);\n        path.setAttribute('y', \"\" + y);\n        path.setAttribute('width', \"\" + width);\n        path.setAttribute('height', \"\" + height);\n        path.setAttribute('d', generatePathData(x, y, width, height, radius[0], radius[1], radius[2], radius[3]));\n        // create mask if it's needed\n        if (style.overflow === 'hidden' || style.overflow === 'auto') {\n            var rect = createRect(x, y, width, height);\n            var id_1 = rect.getAttribute('id');\n            parts.forEach(function (p) {\n                if (!p.getAttribute('clip-path') && !p.getAttribute('id') && !(p instanceof SVGTextElement)) {\n                    p.setAttribute('clip-path', \"url(\" + ('#' + id_1) + \")\");\n                }\n            });\n            parts.push(rect);\n        }\n        parts = [path].concat(parts);\n        return parts;\n    }\n    function processText(textElement) {\n        var parts = [];\n        var textContent = textElement.textContent.trim();\n        if (textContent.length === 0 || !(textElement.parentNode instanceof Element)) {\n            return [];\n        }\n        var parent = textElement.parentNode;\n        var style = window.getComputedStyle(parent);\n        var x = getOffsetLeft(parent);\n        var y = getOffsetTop(parent);\n        var fill = style.color;\n        var textSize = getTextSize(textContent, style.font);\n        var prefferedWidth = stringToNumber(style.width);\n        var lines = breakInLines(textContent, textSize, stringToNumber(style.width));\n        lines.forEach(function (line, index) {\n            var text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n            text.setAttribute('transform', \"translate(\" + x + \", \" + (y + index * textSize.height) + \")\");\n            text.setAttribute('x', \"\" + 0);\n            text.setAttribute('y', \"\" + 0);\n            // text.setAttribute('x', `${x}`);\n            // text.setAttribute('y', `${y + index * textSize.height}`);\n            text.setAttribute('width', \"\" + (prefferedWidth || textSize.width));\n            text.setAttribute('height', \"\" + textSize.height);\n            text.setAttribute('fill', fill);\n            text.setAttribute('font', style.font);\n            // It's not working for IE11 (our main goal)\n            // text.setAttribute('alignment-baseline', 'hanging');\n            text.setAttribute('dy', \"\" + textSize.height);\n            text.textContent = line;\n            parts.push(text);\n        });\n        return parts;\n    }\n}\nexports.htmlToSvg = htmlToSvg;\nfunction getBorderRadius(style) {\n    var radius = Math.round(stringToNumber(style.borderRadius.split(' ')[0])) || 0;\n    return [\n        Math.round(stringToNumber(style.borderTopLeftRadius)) || radius,\n        Math.round(stringToNumber(style.borderTopRightRadius)) || radius,\n        Math.round(stringToNumber(style.borderBottomRightRadius)) || radius,\n        Math.round(stringToNumber(style.borderBottomLeftRadius)) || radius,\n    ];\n}\nfunction getBorderColor(style) {\n    var color = style.borderColor.split(' ')[0];\n    return style.borderTopColor ||\n        style.borderRightColor ||\n        style.borderBottomColor ||\n        style.borderLeftColor || color || null;\n}\nfunction getBorderWidth(style) {\n    // const width = Math.round(stringToNumber(style.borderWidth.split(' ')[0]) || 0);\n    var top = Math.round(stringToNumber(style.borderTopWidth) || 0);\n    var right = Math.round(stringToNumber(style.borderRightWidth) || 0);\n    var bottom = Math.round(stringToNumber(style.borderBottomWidth) || 0);\n    var left = Math.round(stringToNumber(style.borderLeftWidth) || 0);\n    return Math.min(top, right, bottom, left);\n}\nfunction createRect(x, y, width, height) {\n    var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rect.setAttribute('id', lodash_1.uniqueId('clip-rect-'));\n    rect.setAttribute('x', \"\" + x);\n    rect.setAttribute('y', \"\" + y);\n    rect.setAttribute('width', width + \"px\");\n    rect.setAttribute('height', height + \"px\");\n    return rect;\n}\nfunction getOffsetTop(element) {\n    if (element.className !== 'ontodia-overlayed-element') {\n        return element.offsetTop +\n            element.clientTop +\n            (element.offsetParent && element.offsetParent instanceof HTMLElement ?\n                getOffsetTop(element.offsetParent) : 0);\n    }\n    else {\n        return 0;\n    }\n}\nfunction getOffsetLeft(element) {\n    if (element.className !== 'ontodia-overlayed-element') {\n        return element.offsetLeft +\n            element.clientLeft +\n            (element.offsetParent && element.offsetParent instanceof HTMLElement ?\n                getOffsetLeft(element.offsetParent) : 0);\n    }\n    else {\n        return 0;\n    }\n}\nfunction breakInLines(text, textSize, prefferedWidth, elipsis) {\n    var width = textSize.width, height = textSize.height;\n    var lines = [];\n    // breakText\n    if (!prefferedWidth || width <= prefferedWidth) {\n        lines.push(text);\n    }\n    else {\n        var oneCharLength = width / text.length;\n        var charsInLine = Math.floor(prefferedWidth / oneCharLength);\n        if (elipsis) {\n            var ELIPSIS_LENGTH = 3;\n            lines.push(text.substring(0, charsInLine - ELIPSIS_LENGTH) + '...');\n        }\n        else {\n            var c = 0;\n            var line = '';\n            for (var i = 0; i < text.length; i++, c++) {\n                if (c >= charsInLine) {\n                    lines.push(line);\n                    line = '';\n                    c = 0;\n                }\n                line += text[i];\n            }\n        }\n    }\n    return lines;\n}\nfunction getElementBoundingBox(element) {\n    return {\n        x: stringToNumber(element.getAttribute('x')),\n        y: stringToNumber(element.getAttribute('y')),\n        width: stringToNumber(element.getAttribute('width')),\n        height: stringToNumber(element.getAttribute('height')),\n    };\n}\n/**\n * @param {string} text\n * @param {string} font\n */\nfunction getTextSize(text, font) {\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    context.font = font;\n    var fontSizeString = context.font.split(' ').filter(function (term) { return term.indexOf('px') !== -1; })[0];\n    var fontSize = +fontSizeString.substring(0, fontSizeString.length - 2);\n    var metrics = context.measureText(text);\n    return {\n        width: metrics.width,\n        height: fontSize,\n    };\n}\nfunction forEachNode(nodeList, callback) {\n    for (var i = 0; i < nodeList.length; i++) {\n        callback(nodeList[i]);\n    }\n}\nfunction stringToNumber(value) {\n    var newValue = +cutExtension(value);\n    return newValue;\n}\nvar postfixes = ['px', 'vh', 'vw'];\nfunction cutExtension(value) {\n    var lowerCaseValue = value.toLowerCase();\n    if (postfixes.filter(function (postfix) { return lowerCaseValue.indexOf(postfix) !== -1; }).length > 0) {\n        return value.substring(0, value.length - 2);\n    }\n    else {\n        return value;\n    }\n}\n/*\n * Generate a path's data attribute\n *\n * @param {Number} width Width of the rectangular shape\n * @param {Number} height Height of the rectangular shape\n * @param {Number} tr Top border radius of the rectangular shape\n * @param {Number} br Bottom border radius of the rectangular shape\n * @return {String} a path's data attribute value\n */\nfunction generatePathData(x, y, width, height, tl, tr, br, bl) {\n    var data = [];\n    // start point in top-middle of the rectangle\n    data.push('M' + (width / 2 + x) + ',' + y);\n    // next we go to the right\n    data.push('H' + (x + width - tr));\n    if (tr > 0) {\n        // now we draw the arc in the top-right corner\n        data.push('A' + arcParameter(tr, tr, 0, 0, 1, x + width, y + tr));\n    }\n    // next we go down\n    data.push('V' + (y + height - br));\n    if (br > 0) {\n        // now we draw the arc in the lower-right corner\n        data.push('A' + arcParameter(br, br, 0, 0, 1, x + width - br, y + height));\n    }\n    // now we go to the left\n    data.push('H' + (x + bl));\n    if (bl > 0) {\n        // now we draw the arc in the lower-left corner\n        data.push('A' + arcParameter(bl, bl, 0, 0, 1, x, y + height - bl));\n    }\n    // next we go up\n    data.push('V' + (y + tl));\n    if (tl > 0) {\n        // now we draw the arc in the top-left corner\n        data.push('A' + arcParameter(tl, tl, 0, 0, 1, x + tl, y));\n    }\n    // and we close the path\n    data.push('Z');\n    return data.join(' ');\n}\nfunction arcParameter(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    return [\n        rx, ',',\n        ry, ' ',\n        xAxisRotation, ' ',\n        largeArcFlag, ',',\n        sweepFlag, ' ',\n        x, ',',\n        y,\n    ].join('');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar blankNodes_1 = require(\"../../data/sparql/blankNodes\");\nvar utils_1 = require(\"./utils\");\nvar schema_1 = require(\"../../data/schema\");\nvar authoredEntity_1 = require(\"../../editor/authoredEntity\");\nvar authoringState_1 = require(\"../../editor/authoringState\");\nvar spinner_1 = require(\"../../viewUtils/spinner\");\nvar FOAF_NAME = 'http://xmlns.com/foaf/0.1/name';\nvar CLASS_NAME = 'ontodia-standard-template';\nvar StandardTemplate = /** @class */ (function (_super) {\n    tslib_1.__extends(StandardTemplate, _super);\n    function StandardTemplate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StandardTemplate.prototype.render = function () {\n        var _this = this;\n        return (React.createElement(authoredEntity_1.AuthoredEntity, { templateProps: this.props }, function (context) { return _this.renderTemplate(context); }));\n    };\n    StandardTemplate.prototype.renderTemplate = function (context) {\n        var _a = this.props, color = _a.color, types = _a.types, isExpanded = _a.isExpanded, iri = _a.iri, propsAsList = _a.propsAsList;\n        var label = this.getLabel();\n        var editor = context.editor;\n        var isNewElement = authoringState_1.AuthoringState.isNewElement(editor.authoringState, iri);\n        var leftStripeColor = isNewElement ? 'white' : color;\n        var pinnedProperties = this.findPinnedProperties(context);\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__main\", style: { backgroundColor: leftStripeColor, borderColor: color } },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__body\", style: { borderLeftColor: color } },\n                    React.createElement(\"div\", { className: CLASS_NAME + \"__body-horizontal\" },\n                        this.renderThumbnail(),\n                        React.createElement(\"div\", { className: CLASS_NAME + \"__body-content\" },\n                            React.createElement(\"div\", { title: types, className: CLASS_NAME + \"__type\" },\n                                React.createElement(\"div\", { className: CLASS_NAME + \"__type-value\" }, this.getTypesLabel())),\n                            React.createElement(\"div\", { className: CLASS_NAME + \"__label\", title: label }, label))),\n                    pinnedProperties ? (React.createElement(\"div\", { className: CLASS_NAME + \"__pinned-props\", style: { borderColor: color } }, this.renderProperties(pinnedProperties))) : null)),\n            isExpanded ? (React.createElement(\"div\", { className: CLASS_NAME + \"__dropdown\", style: { borderColor: color } },\n                this.renderPhoto(),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__dropdown-content\" },\n                    this.renderIri(context),\n                    this.renderProperties(propsAsList),\n                    editor.inAuthoringMode ? React.createElement(\"hr\", { className: CLASS_NAME + \"__hr\" }) : null,\n                    editor.inAuthoringMode ? this.renderActions(context) : null))) : null));\n    };\n    StandardTemplate.prototype.findPinnedProperties = function (context) {\n        var _a = this.props, isExpanded = _a.isExpanded, propsAsList = _a.propsAsList, elementId = _a.elementId;\n        if (isExpanded) {\n            return undefined;\n        }\n        var templateState = context.view.model.getElement(elementId).elementState;\n        if (!templateState) {\n            return undefined;\n        }\n        var pinned = templateState[schema_1.TemplateProperties.PinnedProperties];\n        if (!pinned) {\n            return undefined;\n        }\n        var filtered = propsAsList.filter(function (prop) { return Boolean(pinned[prop.id]); });\n        return filtered.length === 0 ? undefined : filtered;\n    };\n    StandardTemplate.prototype.renderProperties = function (propsAsList) {\n        if (!propsAsList.length) {\n            return React.createElement(\"div\", null, \"no properties\");\n        }\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__properties\" }, propsAsList.map(function (_a) {\n            var name = _a.name, id = _a.id, property = _a.property;\n            var propertyValues = utils_1.getPropertyValues(property);\n            return React.createElement(\"div\", { key: id, className: CLASS_NAME + \"__properties-row\" },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__properties-key\", title: name + \" (\" + id + \")\" }, name),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__properties-values\" }, propertyValues.map(function (text, index) { return (React.createElement(\"div\", { className: CLASS_NAME + \"__properties-value\", key: index, title: text }, text)); })));\n        })));\n    };\n    StandardTemplate.prototype.renderPhoto = function () {\n        var _a = this.props, color = _a.color, imgUrl = _a.imgUrl;\n        if (!imgUrl) {\n            return null;\n        }\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__photo\", style: { borderColor: color } },\n            React.createElement(\"img\", { src: imgUrl, className: CLASS_NAME + \"__photo-image\" })));\n    };\n    StandardTemplate.prototype.renderIri = function (context) {\n        var iri = this.props.iri;\n        var finalIri = context.editedIri === undefined ? iri : context.editedIri;\n        return (React.createElement(\"div\", null,\n            React.createElement(\"div\", { className: CLASS_NAME + \"__iri\" },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__iri-key\" },\n                    \"IRI\",\n                    context.editedIri ? '\\u00A0(edited)' : '',\n                    \":\"),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__iri-value\" }, blankNodes_1.isEncodedBlank(finalIri)\n                    ? React.createElement(\"span\", null, \"(blank node)\")\n                    : React.createElement(\"a\", { href: finalIri, title: finalIri, \"data-iri-click-intent\": 'openEntityIri' }, finalIri))),\n            React.createElement(\"hr\", { className: CLASS_NAME + \"__hr\" })));\n    };\n    StandardTemplate.prototype.renderThumbnail = function () {\n        var _a = this.props, color = _a.color, imgUrl = _a.imgUrl, iconUrl = _a.iconUrl;\n        if (imgUrl) {\n            return (React.createElement(\"div\", { className: CLASS_NAME + \"__thumbnail\", \"aria-hidden\": 'true' },\n                React.createElement(\"img\", { src: imgUrl, className: CLASS_NAME + \"__thumbnail-image\" })));\n        }\n        else if (iconUrl) {\n            return (React.createElement(\"div\", { className: CLASS_NAME + \"__thumbnail\", \"aria-hidden\": 'true' },\n                React.createElement(\"img\", { src: iconUrl, className: CLASS_NAME + \"__thumbnail-icon\" })));\n        }\n        var typeLabel = this.getTypesLabel();\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__thumbnail\", \"aria-hidden\": 'true', style: { color: color } }, typeLabel.length > 0 ? typeLabel.charAt(0).toUpperCase() : ''));\n    };\n    StandardTemplate.prototype.getTypesLabel = function () {\n        return this.props.types;\n    };\n    StandardTemplate.prototype.getLabel = function () {\n        var _a = this.props, label = _a.label, props = _a.props;\n        return utils_1.getProperty(props, FOAF_NAME) || label;\n    };\n    StandardTemplate.prototype.renderActions = function (context) {\n        var canEdit = context.canEdit, canDelete = context.canDelete, onEdit = context.onEdit, onDelete = context.onDelete;\n        var SPINNER_WIDTH = 15;\n        var SPINNER_HEIGHT = 12;\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__actions\" },\n            React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: canDelete ? 'Delete entity' : 'Deletion is unavailable for the selected element', disabled: !canDelete, onClick: onDelete },\n                React.createElement(\"span\", { className: 'fa fa-trash' }),\n                \"\\u00A0\",\n                canEdit === undefined\n                    ? React.createElement(spinner_1.HtmlSpinner, { width: SPINNER_WIDTH, height: SPINNER_HEIGHT })\n                    : 'Delete'),\n            React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: canEdit ? 'Edit entity' : 'Editing is unavailable for the selected element', disabled: !canEdit, onClick: onEdit },\n                React.createElement(\"span\", { className: 'fa fa-edit' }),\n                \"\\u00A0\",\n                canEdit === undefined\n                    ? React.createElement(spinner_1.HtmlSpinner, { width: SPINNER_WIDTH, height: SPINNER_HEIGHT })\n                    : 'Edit')));\n    };\n    return StandardTemplate;\n}(react_1.Component));\nexports.StandardTemplate = StandardTemplate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar paperArea_1 = require(\"../diagram/paperArea\");\nvar async_1 = require(\"../viewUtils/async\");\nvar workspaceContext_1 = require(\"../workspace/workspaceContext\");\nvar authoringState_1 = require(\"./authoringState\");\n/**\n * Component to simplify tracking changes in validation messages (property and link type labels).\n */\nvar AuthoredEntity = /** @class */ (function (_super) {\n    tslib_1.__extends(AuthoredEntity, _super);\n    function AuthoredEntity(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.queryCancellation = new async_1.Cancellation();\n        _this.onChangeAuthoringState = function (e) {\n            var editor = e.source, previous = e.previous;\n            var iri = _this.props.templateProps.data.id;\n            var current = editor.authoringState;\n            if (current.elements.get(iri) !== previous.elements.get(iri)) {\n                _this.queryAllowedActions();\n            }\n        };\n        _this.onEdit = function () {\n            var editor = _this.context.ontodiaWorkspace.editor;\n            var elementId = _this.props.templateProps.elementId;\n            var element = editor.model.getElement(elementId);\n            editor.showEditEntityForm(element);\n        };\n        _this.onDelete = function () {\n            var editor = _this.context.ontodiaWorkspace.editor;\n            var data = _this.props.templateProps.data;\n            editor.deleteEntity(data.id);\n        };\n        _this.state = {};\n        return _this;\n    }\n    AuthoredEntity.prototype.componentDidMount = function () {\n        var editor = this.context.ontodiaWorkspace.editor;\n        editor.events.on('changeAuthoringState', this.onChangeAuthoringState);\n        this.queryAllowedActions();\n    };\n    AuthoredEntity.prototype.componentDidUpdate = function (prevProps) {\n        var shouldUpdateAllowedActions = !(this.props.templateProps.data === prevProps.templateProps.data &&\n            this.props.templateProps.isExpanded === prevProps.templateProps.isExpanded);\n        if (shouldUpdateAllowedActions) {\n            this.queryAllowedActions();\n        }\n    };\n    AuthoredEntity.prototype.componentWillUnmount = function () {\n        var editor = this.context.ontodiaWorkspace.editor;\n        editor.events.off('changeAuthoringState', this.onChangeAuthoringState);\n        this.queryCancellation.abort();\n    };\n    AuthoredEntity.prototype.queryAllowedActions = function () {\n        var data = this.props.templateProps.data;\n        this.queryCancellation.abort();\n        this.queryCancellation = new async_1.Cancellation();\n        var editor = this.context.ontodiaWorkspace.editor;\n        if (!editor.metadataApi || authoringState_1.AuthoringState.isDeletedElement(editor.authoringState, data.id)) {\n            this.setState({ canEdit: false, canDelete: false });\n        }\n        else {\n            this.queryCanEdit(data);\n            this.queryCanDelete(data);\n        }\n    };\n    AuthoredEntity.prototype.queryCanEdit = function (data) {\n        var _this = this;\n        var editor = this.context.ontodiaWorkspace.editor;\n        var signal = this.queryCancellation.signal;\n        this.setState({ canEdit: undefined });\n        editor.metadataApi.canEditElement(data, signal).then(function (canEdit) {\n            if (signal.aborted) {\n                return;\n            }\n            _this.setState({ canEdit: canEdit });\n        });\n    };\n    AuthoredEntity.prototype.queryCanDelete = function (data) {\n        var _this = this;\n        var editor = this.context.ontodiaWorkspace.editor;\n        var signal = this.queryCancellation.signal;\n        this.setState({ canDelete: undefined });\n        editor.metadataApi.canDeleteElement(data, signal).then(function (canDelete) {\n            if (signal.aborted) {\n                return;\n            }\n            _this.setState({ canDelete: canDelete });\n        });\n    };\n    AuthoredEntity.prototype.render = function () {\n        var renderTemplate = this.props.children;\n        var view = this.context.ontodiaPaperArea.view;\n        var editor = this.context.ontodiaWorkspace.editor;\n        var _a = this.state, canEdit = _a.canEdit, canDelete = _a.canDelete;\n        var iri = this.props.templateProps.iri;\n        var elementEvent = editor.authoringState.elements.get(iri);\n        var editedIri = elementEvent && elementEvent.type === authoringState_1.AuthoringKind.ChangeElement ?\n            elementEvent.newIri : undefined;\n        return renderTemplate({\n            editor: editor, view: view, canEdit: canEdit, canDelete: canDelete, editedIri: editedIri,\n            onEdit: this.onEdit,\n            onDelete: this.onDelete,\n        });\n    };\n    AuthoredEntity.contextTypes = tslib_1.__assign(tslib_1.__assign({}, paperArea_1.PaperAreaContextTypes), workspaceContext_1.WorkspaceContextTypes);\n    return AuthoredEntity;\n}(React.Component));\nexports.AuthoredEntity = AuthoredEntity;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"../viewUtils/react\");\nvar WorkspaceEventKey;\n(function (WorkspaceEventKey) {\n    WorkspaceEventKey[\"searchUpdateCriteria\"] = \"search:updateCriteria\";\n    WorkspaceEventKey[\"searchQueryItem\"] = \"search:queryItems\";\n    WorkspaceEventKey[\"connectionsLoadLinks\"] = \"connections:loadLinks\";\n    WorkspaceEventKey[\"connectionsExpandLink\"] = \"connections:expandLink\";\n    WorkspaceEventKey[\"connectionsLoadElements\"] = \"connections:loadElements\";\n    WorkspaceEventKey[\"editorChangeSelection\"] = \"editor:changeSelection\";\n    WorkspaceEventKey[\"editorToggleDialog\"] = \"editor:toggleDialog\";\n    WorkspaceEventKey[\"editorAddElements\"] = \"editor:addElements\";\n})(WorkspaceEventKey = exports.WorkspaceEventKey || (exports.WorkspaceEventKey = {}));\nexports.WorkspaceContextTypes = {\n    ontodiaWorkspace: react_1.PropTypes.anything,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar model_1 = require(\"../data/model\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar AuthoringKind;\n(function (AuthoringKind) {\n    AuthoringKind[\"ChangeElement\"] = \"changeElement\";\n    AuthoringKind[\"ChangeLink\"] = \"changeLink\";\n})(AuthoringKind = exports.AuthoringKind || (exports.AuthoringKind = {}));\nvar AuthoringState;\n(function (AuthoringState) {\n    AuthoringState.empty = {\n        elements: new Map(),\n        links: new collections_1.HashMap(model_1.hashLink, model_1.sameLink),\n    };\n    function isEmpty(state) {\n        return state.elements.size === 0 && state.links.size === 0;\n    }\n    AuthoringState.isEmpty = isEmpty;\n    function clone(index) {\n        return {\n            elements: collections_1.cloneMap(index.elements),\n            links: index.links.clone(),\n        };\n    }\n    AuthoringState.clone = clone;\n    function has(state, event) {\n        return event.type === AuthoringKind.ChangeElement\n            ? state.elements.get(event.after.id) === event\n            : state.links.get(event.after) === event;\n    }\n    AuthoringState.has = has;\n    function discard(state, discarded) {\n        if (!has(state, discarded)) {\n            return state;\n        }\n        var newState = clone(state);\n        if (discarded.type === AuthoringKind.ChangeElement) {\n            newState.elements.delete(discarded.after.id);\n            if (!discarded.before) {\n                state.links.forEach(function (e) {\n                    if (isLinkConnectedToElement(e.after, discarded.after.id)) {\n                        newState.links.delete(e.after);\n                    }\n                });\n            }\n        }\n        else {\n            newState.links.delete(discarded.after);\n        }\n        return newState;\n    }\n    AuthoringState.discard = discard;\n    function addElement(state, item) {\n        var event = { type: AuthoringKind.ChangeElement, after: item, deleted: false };\n        var newState = clone(state);\n        newState.elements.set(event.after.id, event);\n        return newState;\n    }\n    AuthoringState.addElement = addElement;\n    function addLink(state, item) {\n        var event = { type: AuthoringKind.ChangeLink, after: item, deleted: false };\n        var newState = clone(state);\n        newState.links.set(event.after, event);\n        return newState;\n    }\n    AuthoringState.addLink = addLink;\n    function changeElement(state, before, after) {\n        var newState = clone(state);\n        // delete previous state for an entity\n        newState.elements.delete(before.id);\n        var previous = state.elements.get(before.id);\n        if (previous && !previous.before) {\n            // adding or changing new entity\n            newState.elements.set(after.id, {\n                type: AuthoringKind.ChangeElement,\n                after: after,\n                deleted: false,\n            });\n            if (before.id !== after.id) {\n                state.links.forEach(function (e) {\n                    if (!e.before && isLinkConnectedToElement(e.after, before.id)) {\n                        var updatedLink = updateLinkToReferByNewIri(e.after, before.id, after.id);\n                        newState.links.delete(e.after);\n                        newState.links.set(updatedLink, {\n                            type: AuthoringKind.ChangeLink,\n                            after: updatedLink,\n                            deleted: false,\n                        });\n                    }\n                });\n            }\n        }\n        else {\n            // changing existing entity\n            var iriChanged = after.id !== before.id;\n            var previousBefore = previous ? previous.before : undefined;\n            newState.elements.set(before.id, {\n                type: AuthoringKind.ChangeElement,\n                // always initialize 'before', otherwise entity will be considered new\n                before: previousBefore || before,\n                after: iriChanged ? tslib_1.__assign(tslib_1.__assign({}, after), { id: before.id }) : after,\n                newIri: iriChanged ? after.id : undefined,\n                deleted: false,\n            });\n        }\n        return newState;\n    }\n    AuthoringState.changeElement = changeElement;\n    function changeLink(state, before, after) {\n        if (!model_1.sameLink(before, after)) {\n            throw new Error('Cannot move link to another element or change its type');\n        }\n        var newState = clone(state);\n        var previous = state.links.get(before);\n        newState.links.set(before, {\n            type: AuthoringKind.ChangeLink,\n            before: previous ? previous.before : undefined,\n            after: after,\n            deleted: false,\n        });\n        return newState;\n    }\n    AuthoringState.changeLink = changeLink;\n    function deleteElement(state, model) {\n        var newState = clone(state);\n        newState.elements.delete(model.id);\n        state.links.forEach(function (e) {\n            if (isLinkConnectedToElement(e.after, model.id)) {\n                newState.links.delete(e.after);\n            }\n        });\n        if (!isNewElement(state, model.id)) {\n            newState.elements.set(model.id, {\n                type: AuthoringKind.ChangeElement,\n                before: model,\n                after: model,\n                deleted: true,\n            });\n        }\n        return newState;\n    }\n    AuthoringState.deleteElement = deleteElement;\n    function deleteLink(state, target) {\n        var newState = clone(state);\n        newState.links.delete(target);\n        if (!isNewLink(state, target)) {\n            newState.links.set(target, {\n                type: AuthoringKind.ChangeLink,\n                before: target,\n                after: target,\n                deleted: true,\n            });\n        }\n        return newState;\n    }\n    AuthoringState.deleteLink = deleteLink;\n    function deleteNewLinksConnectedToElements(state, elementIris) {\n        var newState = clone(state);\n        state.links.forEach(function (e) {\n            if (!e.before) {\n                var target = e.after;\n                if (elementIris.has(target.sourceId) || elementIris.has(target.targetId)) {\n                    newState.links.delete(target);\n                }\n            }\n        });\n        return newState;\n    }\n    AuthoringState.deleteNewLinksConnectedToElements = deleteNewLinksConnectedToElements;\n    function isNewElement(state, target) {\n        var event = state.elements.get(target);\n        return event && event.type === AuthoringKind.ChangeElement && !event.before;\n    }\n    AuthoringState.isNewElement = isNewElement;\n    function isDeletedElement(state, target) {\n        var event = state.elements.get(target);\n        return event && event.deleted;\n    }\n    AuthoringState.isDeletedElement = isDeletedElement;\n    function isElementWithModifiedIri(state, target) {\n        var event = state.elements.get(target);\n        return event && event.type === AuthoringKind.ChangeElement &&\n            event.before && Boolean(event.newIri);\n    }\n    AuthoringState.isElementWithModifiedIri = isElementWithModifiedIri;\n    function isNewLink(state, linkModel) {\n        var event = state.links.get(linkModel);\n        return event && !event.before;\n    }\n    AuthoringState.isNewLink = isNewLink;\n    function isDeletedLink(state, linkModel) {\n        var event = state.links.get(linkModel);\n        return event && event.deleted ||\n            isDeletedElement(state, linkModel.sourceId) ||\n            isDeletedElement(state, linkModel.targetId);\n    }\n    AuthoringState.isDeletedLink = isDeletedLink;\n    function isUncertainLink(state, linkModel) {\n        return !isDeletedLink(state, linkModel) && (isElementWithModifiedIri(state, linkModel.sourceId) ||\n            isElementWithModifiedIri(state, linkModel.targetId));\n    }\n    AuthoringState.isUncertainLink = isUncertainLink;\n})(AuthoringState = exports.AuthoringState || (exports.AuthoringState = {}));\nvar TemporaryState;\n(function (TemporaryState) {\n    TemporaryState.empty = {\n        elements: new Map(),\n        links: new collections_1.HashMap(model_1.hashLink, model_1.sameLink),\n    };\n    function addElement(state, element) {\n        var elements = collections_1.cloneMap(state.elements);\n        elements.set(element.id, element);\n        return tslib_1.__assign(tslib_1.__assign({}, state), { elements: elements });\n    }\n    TemporaryState.addElement = addElement;\n    function deleteElement(state, element) {\n        var elements = collections_1.cloneMap(state.elements);\n        elements.delete(element.id);\n        return tslib_1.__assign(tslib_1.__assign({}, state), { elements: elements });\n    }\n    TemporaryState.deleteElement = deleteElement;\n    function addLink(state, link) {\n        var links = state.links.clone();\n        links.set(link, link);\n        return tslib_1.__assign(tslib_1.__assign({}, state), { links: links });\n    }\n    TemporaryState.addLink = addLink;\n    function deleteLink(state, link) {\n        var links = state.links.clone();\n        links.delete(link);\n        return tslib_1.__assign(tslib_1.__assign({}, state), { links: links });\n    }\n    TemporaryState.deleteLink = deleteLink;\n})(TemporaryState = exports.TemporaryState || (exports.TemporaryState = {}));\nfunction isLinkConnectedToElement(link, elementIri) {\n    return link.sourceId === elementIri || link.targetId === elementIri;\n}\nexports.isLinkConnectedToElement = isLinkConnectedToElement;\nfunction updateLinkToReferByNewIri(link, oldIri, newIri) {\n    return tslib_1.__assign(tslib_1.__assign({}, link), { sourceId: link.sourceId === oldIri ? newIri : link.sourceId, targetId: link.targetId === oldIri ? newIri : link.targetId });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar CLASS_NAME = 'ontodia-spinner';\nvar Spinner = /** @class */ (function (_super) {\n    tslib_1.__extends(Spinner, _super);\n    function Spinner() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Spinner.prototype.render = function () {\n        var _a = this.props, _b = _a.position, position = _b === void 0 ? { x: 0, y: 0 } : _b, _c = _a.size, size = _c === void 0 ? 50 : _c, statusText = _a.statusText, errorOccured = _a.errorOccured;\n        var textLeftMargin = 5;\n        var pathGeometry = 'm3.47,-19.7 a20,20 0 1,1 -6.95,0 m0,0 l-6,5 m6,-5 l-8,-0' +\n            (errorOccured ? 'M-8,-8L8,8M-8,8L8,-8' : '');\n        return React.createElement(\"g\", { className: CLASS_NAME, \"data-error\": errorOccured, transform: \"translate(\" + position.x + \",\" + position.y + \")\" },\n            React.createElement(\"g\", { className: CLASS_NAME + \"__arrow\" },\n                React.createElement(\"path\", { d: pathGeometry, transform: \"scale(0.02)scale(\" + size + \")\", fill: 'none', stroke: errorOccured ? 'red' : 'black', strokeWidth: '3', strokeLinecap: 'round' })),\n            React.createElement(\"text\", { style: { dominantBaseline: 'middle' }, x: size / 2 + textLeftMargin }, statusText));\n    };\n    return Spinner;\n}(React.Component));\nexports.Spinner = Spinner;\nvar HtmlSpinner = /** @class */ (function (_super) {\n    tslib_1.__extends(HtmlSpinner, _super);\n    function HtmlSpinner() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlSpinner.prototype.render = function () {\n        var _a = this.props, width = _a.width, height = _a.height;\n        var size = Math.min(width, height);\n        return (React.createElement(\"svg\", { width: width, height: height },\n            React.createElement(Spinner, { size: size, position: { x: width / 2, y: height / 2 } })));\n    };\n    return HtmlSpinner;\n}(React.Component));\nexports.HtmlSpinner = HtmlSpinner;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_1 = require(\"lodash\");\nvar DemoDataProvider = /** @class */ (function () {\n    function DemoDataProvider(allClasses, allLinkTypes, allElements, allLinks) {\n        this.allClasses = allClasses;\n        this.allLinkTypes = allLinkTypes;\n        this.allElements = allElements;\n        this.allLinks = allLinks;\n    }\n    DemoDataProvider.prototype.simulateNetwork = function (result) {\n        var MEAN_DELAY = 200;\n        var cloned = lodash_1.cloneDeep(result);\n        // simulate exponential distribution\n        var delay = -Math.log(Math.random()) * MEAN_DELAY;\n        return new Promise(function (resolve) {\n            setTimeout(function () { return resolve(cloned); }, delay);\n        });\n    };\n    DemoDataProvider.prototype.classTree = function () {\n        return this.simulateNetwork(this.allClasses);\n    };\n    DemoDataProvider.prototype.classInfo = function (params) {\n        var classIds = params.classIds || [];\n        return this.simulateNetwork(this.allClasses.filter(function (cl) { return classIds.indexOf(cl.id); }));\n    };\n    DemoDataProvider.prototype.linkTypes = function () {\n        return this.simulateNetwork(this.allLinkTypes);\n    };\n    DemoDataProvider.prototype.linkTypesInfo = function (params) {\n        var types = lodash_1.keyBy(params.linkTypeIds);\n        var linkTypes = this.allLinkTypes.filter(function (type) { return types[type.id]; });\n        return this.simulateNetwork(linkTypes);\n    };\n    DemoDataProvider.prototype.elementInfo = function (params) {\n        var _this = this;\n        var elements = params.elementIds\n            .map(function (elementId) { return _this.allElements[elementId]; })\n            .filter(function (element) { return element !== undefined; });\n        return this.simulateNetwork(lodash_1.keyBy(elements, function (element) { return element.id; }));\n    };\n    DemoDataProvider.prototype.linksInfo = function (params) {\n        var nodes = lodash_1.keyBy(params.elementIds);\n        var types = lodash_1.keyBy(params.linkTypeIds);\n        var links = this.allLinks.filter(function (link) {\n            return types[link.linkTypeId] && nodes[link.sourceId] && nodes[link.targetId];\n        });\n        return this.simulateNetwork(links);\n    };\n    DemoDataProvider.prototype.linkTypesOf = function (params) {\n        var counts = {};\n        for (var _i = 0, _a = this.allLinks; _i < _a.length; _i++) {\n            var link = _a[_i];\n            if (link.sourceId === params.elementId ||\n                link.targetId === params.elementId) {\n                var linkCount = counts[link.linkTypeId];\n                var isSource = link.sourceId === params.elementId;\n                if (linkCount) {\n                    isSource ? linkCount.outCount++ : linkCount.inCount++;\n                }\n                else {\n                    counts[link.linkTypeId] = isSource\n                        ? { id: link.linkTypeId, inCount: 0, outCount: 1 }\n                        : { id: link.linkTypeId, inCount: 1, outCount: 0 };\n                }\n            }\n        }\n        return this.simulateNetwork(lodash_1.map(counts));\n    };\n    DemoDataProvider.prototype.linkElements = function (params) {\n        // for sparql we have rich filtering features and we just reuse filter.\n        return this.filter({\n            refElementId: params.elementId,\n            refElementLinkId: params.linkId,\n            linkDirection: params.direction,\n            limit: params.limit,\n            offset: params.offset,\n            languageCode: '',\n        });\n    };\n    DemoDataProvider.prototype.filter = function (params) {\n        if (params.limit === undefined) {\n            params.limit = 100;\n        }\n        if (params.offset > 0) {\n            return Promise.resolve({});\n        }\n        var filtered = {};\n        if (params.elementTypeId) {\n            lodash_1.each(this.allElements, function (element) {\n                if (element.types.indexOf(params.elementTypeId) >= 0) {\n                    filtered[element.id] = element;\n                }\n            });\n        }\n        else if (params.refElementId) {\n            var filteredLinks = params.refElementLinkId\n                ? this.allLinks.filter(function (link) { return link.linkTypeId === params.refElementLinkId; })\n                : this.allLinks;\n            var nodeId = params.refElementId;\n            for (var _i = 0, filteredLinks_1 = filteredLinks; _i < filteredLinks_1.length; _i++) {\n                var link = filteredLinks_1[_i];\n                var linkedElementId = void 0;\n                if (link.sourceId === nodeId && params.linkDirection !== 'in') {\n                    linkedElementId = link.targetId;\n                }\n                else if (link.targetId === nodeId && params.linkDirection !== 'out') {\n                    linkedElementId = link.sourceId;\n                }\n                if (linkedElementId !== undefined) {\n                    var linkedElement = this.allElements[linkedElementId];\n                    if (linkedElement) {\n                        filtered[linkedElement.id] = linkedElement;\n                    }\n                }\n            }\n        }\n        else if (params.text) {\n            filtered = this.allElements; // filtering by text is done below\n        }\n        else {\n            return Promise.reject(new Error('This type of filter is not implemented'));\n        }\n        if (params.text) {\n            var filteredByText_1 = {};\n            var text_1 = params.text.toLowerCase();\n            lodash_1.each(filtered, function (element) {\n                var found = false;\n                if (element.id.toLowerCase().indexOf(text_1) >= 0) {\n                    found = true;\n                }\n                else {\n                    found = element.label.values.some(function (label) { return label.value.toLowerCase().indexOf(text_1) >= 0; });\n                }\n                if (found) {\n                    filteredByText_1[element.id] = element;\n                }\n            });\n            return this.simulateNetwork(filteredByText_1);\n        }\n        else {\n            return this.simulateNetwork(filtered);\n        }\n    };\n    return DemoDataProvider;\n}());\nexports.DemoDataProvider = DemoDataProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar rdfCacheableStore_1 = require(\"./rdfCacheableStore\");\nvar rdfLoader_1 = require(\"./rdfLoader\");\nvar rdfCompositeParser_1 = require(\"./rdfCompositeParser\");\nvar PREFIX_FACTORIES = {\n    RDF: rdfCacheableStore_1.prefixFactory('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),\n    RDFS: rdfCacheableStore_1.prefixFactory('http://www.w3.org/2000/01/rdf-schema#'),\n    FOAF: rdfCacheableStore_1.prefixFactory('http://xmlns.com/foaf/0.1/'),\n    XSD: rdfCacheableStore_1.prefixFactory('http://www.w3.org/2001/XMLSchema#'),\n    OWL: rdfCacheableStore_1.prefixFactory('http://www.w3.org/2002/07/owl#'),\n};\nvar RDFDataProvider = /** @class */ (function () {\n    function RDFDataProvider(options) {\n        var _this = this;\n        var parser = new rdfCompositeParser_1.RDFCompositeParser(options.parsers);\n        this.rdfStorage = new rdfCacheableStore_1.RDFCacheableStore({\n            parser: parser,\n            acceptBlankNodes: options.acceptBlankNodes,\n        });\n        this.rdfLoader = new rdfLoader_1.RDFLoader({\n            parser: parser,\n            proxy: options.proxy,\n        });\n        this.dataFetching = options.dataFetching;\n        var parsePromises = (options.data || []).map(function (datum) {\n            return parser.parse(datum.content, datum.type, datum.fileName)\n                .then(function (rdfGraph) {\n                _this.rdfStorage.add(rdfGraph);\n                return true;\n            });\n        });\n        this.initStatement = Promise.all(parsePromises).catch(function (error) {\n            error.message = 'Initialization failed! Cause: ' + error.message;\n            throw error;\n        });\n        this.options = options;\n    }\n    RDFDataProvider.prototype.addGraph = function (graph) {\n        this.rdfStorage.add(graph);\n    };\n    RDFDataProvider.prototype.waitInitCompleted = function () {\n        var _this = this;\n        if (this.initStatement) {\n            return this.initStatement.then(function () {\n                delete _this.initStatement;\n            });\n        }\n        else {\n            return Promise.resolve();\n        }\n    };\n    RDFDataProvider.prototype.classTree = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var rdfClassesQuery, owlClassesQuery, fromRDFTypesQuery, subClassesQuery, _a, rdfClassesGraph, owlClassesGraph, rdfTypesGraph, subClassesGraph, rdfClasses, owlClasses, rdfTypes, subClasses, classes, classIris, parents, _i, subClasses_1, triple, subClassIRI, classIRI, dictionary, firstLevel, labelQueries, _loop_1, this_1, _b, classIris_1, classIri, result;\n            return tslib_1.__generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _c.sent();\n                        rdfClassesQuery = this.rdfStorage.match(null, PREFIX_FACTORIES.RDF('type'), PREFIX_FACTORIES.RDFS('Class'), null);\n                        owlClassesQuery = this.rdfStorage.match(null, PREFIX_FACTORIES.RDF('type'), PREFIX_FACTORIES.OWL('Class'));\n                        fromRDFTypesQuery = this.rdfStorage.match(null, PREFIX_FACTORIES.RDF('type'), null);\n                        subClassesQuery = this.rdfStorage.match(null, PREFIX_FACTORIES.RDFS('subClassOf'), null);\n                        return [4 /*yield*/, Promise.all([\n                                rdfClassesQuery,\n                                owlClassesQuery,\n                                fromRDFTypesQuery,\n                                subClassesQuery,\n                            ])];\n                    case 2:\n                        _a = _c.sent(), rdfClassesGraph = _a[0], owlClassesGraph = _a[1], rdfTypesGraph = _a[2], subClassesGraph = _a[3];\n                        rdfClasses = rdfClassesGraph.toArray().map(function (cl) { return cl.subject; });\n                        owlClasses = owlClassesGraph.toArray().map(function (cl) { return cl.subject; });\n                        rdfTypes = rdfTypesGraph.toArray().map(function (cl) { return cl.object; });\n                        subClasses = subClassesGraph.toArray();\n                        classes = rdfClasses.concat(owlClasses).concat(rdfTypes);\n                        classIris = classes\n                            .filter(function (clazz) { return clazz.interfaceName !== 'BlankNode'; })\n                            .map(function (clazz) { return clazz.nominalValue; });\n                        parents = {};\n                        for (_i = 0, subClasses_1 = subClasses; _i < subClasses_1.length; _i++) {\n                            triple = subClasses_1[_i];\n                            subClassIRI = triple.subject.nominalValue;\n                            classIRI = triple.object.nominalValue;\n                            if (rdfCacheableStore_1.isNamedNode(triple.subject) && !parents[subClassIRI]) {\n                                parents[subClassIRI] = [];\n                            }\n                            if (rdfCacheableStore_1.isNamedNode(triple.object) && parents[subClassIRI].indexOf(classIRI) === -1) {\n                                parents[subClassIRI].push(classIRI);\n                            }\n                        }\n                        dictionary = {};\n                        firstLevel = {};\n                        labelQueries = [];\n                        _loop_1 = function (classIri) {\n                            var classElement;\n                            if (!dictionary[classIri]) {\n                                classElement = this_1.createEmptyClass(classIri);\n                                dictionary[classIri] = classElement;\n                                firstLevel[classIri] = classElement;\n                                labelQueries.push(this_1.getLabels(classIri).then(function (labels) {\n                                    classElement.label = { values: labels };\n                                }));\n                            }\n                            else {\n                                classElement = dictionary[classIri];\n                            }\n                            if (parents[classIri]) {\n                                var _loop_2 = function (parentIri) {\n                                    if (!dictionary[parentIri]) {\n                                        var parentElement_1 = this_1.createEmptyClass(parentIri);\n                                        dictionary[parentIri] = parentElement_1;\n                                        firstLevel[parentIri] = parentElement_1;\n                                        labelQueries.push(this_1.getLabels(parentIri).then(function (labels) {\n                                            parentElement_1.label = { values: labels };\n                                        }));\n                                    }\n                                    if (dictionary[parentIri].children.indexOf(classElement) === -1) {\n                                        dictionary[parentIri].children.push(classElement);\n                                        dictionary[parentIri].count += classElement.count;\n                                    }\n                                    delete firstLevel[classElement.id];\n                                };\n                                for (var _i = 0, _a = parents[classIri]; _i < _a.length; _i++) {\n                                    var parentIri = _a[_i];\n                                    _loop_2(parentIri);\n                                }\n                            }\n                        };\n                        this_1 = this;\n                        for (_b = 0, classIris_1 = classIris; _b < classIris_1.length; _b++) {\n                            classIri = classIris_1[_b];\n                            _loop_1(classIri);\n                        }\n                        return [4 /*yield*/, Promise.all(labelQueries)];\n                    case 3:\n                        _c.sent();\n                        result = Object.keys(firstLevel).map(function (k) { return firstLevel[k]; });\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.propertyInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var propertyInfoResult, queries, fetchedModels, _i, fetchedModels_1, model;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _a.sent();\n                        propertyInfoResult = {};\n                        queries = params.propertyIds.map(function (propId) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                            var isExists, labels, error_1;\n                            return tslib_1.__generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        _a.trys.push([0, 4, , 5]);\n                                        return [4 /*yield*/, this.checkElement(propId)];\n                                    case 1:\n                                        isExists = _a.sent();\n                                        return [4 /*yield*/, this.fetchIfNecessary(propId, isExists)];\n                                    case 2:\n                                        _a.sent();\n                                        return [4 /*yield*/, this.getLabels(propId)];\n                                    case 3:\n                                        labels = _a.sent();\n                                        return [2 /*return*/, {\n                                                id: propId,\n                                                label: { values: labels },\n                                            }];\n                                    case 4:\n                                        error_1 = _a.sent();\n                                        // tslint:disable-next-line:no-console\n                                        console.warn(error_1);\n                                        return [2 /*return*/, null];\n                                    case 5: return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                        return [4 /*yield*/, Promise.all(queries)];\n                    case 2:\n                        fetchedModels = _a.sent();\n                        for (_i = 0, fetchedModels_1 = fetchedModels; _i < fetchedModels_1.length; _i++) {\n                            model = fetchedModels_1[_i];\n                            if (model) {\n                                propertyInfoResult[model.id] = model;\n                            }\n                        }\n                        return [2 /*return*/, propertyInfoResult];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.classInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var queries, fetchedModels;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _a.sent();\n                        queries = params.classIds.map(function (classId) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                            var isExists, labels, error_2;\n                            return tslib_1.__generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        _a.trys.push([0, 4, , 5]);\n                                        return [4 /*yield*/, this.checkElement(classId)];\n                                    case 1:\n                                        isExists = _a.sent();\n                                        return [4 /*yield*/, this.fetchIfNecessary(classId, isExists)];\n                                    case 2:\n                                        _a.sent();\n                                        return [4 /*yield*/, this.getLabels(classId)];\n                                    case 3:\n                                        labels = _a.sent();\n                                        return [2 /*return*/, {\n                                                id: classId,\n                                                label: { values: labels },\n                                                count: this.rdfStorage.getTypeCount(classId),\n                                                children: [],\n                                            }];\n                                    case 4:\n                                        error_2 = _a.sent();\n                                        // tslint:disable-next-line:no-console\n                                        console.warn(error_2);\n                                        return [2 /*return*/, null];\n                                    case 5: return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                        return [4 /*yield*/, Promise.all(queries)];\n                    case 2:\n                        fetchedModels = _a.sent();\n                        return [2 /*return*/, fetchedModels.filter(function (cm) { return cm; })];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.linkTypesInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var queries, fetchedModels;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _a.sent();\n                        queries = params.linkTypeIds.map(function (typeId) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                            var isExists, labels, error_3;\n                            return tslib_1.__generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        _a.trys.push([0, 4, , 5]);\n                                        return [4 /*yield*/, this.rdfStorage.checkElement(typeId)];\n                                    case 1:\n                                        isExists = _a.sent();\n                                        return [4 /*yield*/, this.fetchIfNecessary(typeId, isExists)];\n                                    case 2:\n                                        _a.sent();\n                                        return [4 /*yield*/, this.getLabels(typeId)];\n                                    case 3:\n                                        labels = _a.sent();\n                                        return [2 /*return*/, {\n                                                id: typeId,\n                                                label: { values: labels },\n                                                count: this.rdfStorage.getTypeCount(typeId),\n                                            }];\n                                    case 4:\n                                        error_3 = _a.sent();\n                                        // tslint:disable-next-line:no-console\n                                        console.warn(error_3);\n                                        return [2 /*return*/, null];\n                                    case 5: return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                        return [4 /*yield*/, Promise.all(queries)];\n                    case 2:\n                        fetchedModels = _a.sent();\n                        return [2 /*return*/, fetchedModels.filter(function (lt) { return lt; })];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.linkTypes = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var linkTypes, rdfLinksQueries, owlLinksQueries, _a, rdfLinks, owlLinks, linkTypeIds, mapLinkTriple, linkTypePromises, _i, _b, linkTriple, _c, _d, linkTriple;\n            var _this = this;\n            return tslib_1.__generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _e.sent();\n                        linkTypes = [];\n                        rdfLinksQueries = this.rdfStorage.match(undefined, PREFIX_FACTORIES.RDF('type'), PREFIX_FACTORIES.RDF('Property'));\n                        owlLinksQueries = this.rdfStorage.match(undefined, PREFIX_FACTORIES.RDF('type'), PREFIX_FACTORIES.OWL('ObjectProperty'));\n                        return [4 /*yield*/, Promise.all([rdfLinksQueries, owlLinksQueries])];\n                    case 2:\n                        _a = _e.sent(), rdfLinks = _a[0], owlLinks = _a[1];\n                        linkTypeIds = new Set();\n                        mapLinkTriple = function (triple) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                            var labels;\n                            return tslib_1.__generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        if (!!linkTypeIds.has(triple.subject.nominalValue)) return [3 /*break*/, 2];\n                                        linkTypeIds.add(triple.subject.nominalValue);\n                                        return [4 /*yield*/, this.getLabels(triple.subject.nominalValue)];\n                                    case 1:\n                                        labels = _a.sent();\n                                        linkTypes.push({\n                                            id: triple.subject.nominalValue,\n                                            label: { values: labels },\n                                            count: this.rdfStorage.getTypeCount(triple.subject.nominalValue),\n                                        });\n                                        _a.label = 2;\n                                    case 2: return [2 /*return*/];\n                                }\n                            });\n                        }); };\n                        linkTypePromises = [];\n                        for (_i = 0, _b = rdfLinks.toArray(); _i < _b.length; _i++) {\n                            linkTriple = _b[_i];\n                            linkTypePromises.push(mapLinkTriple(linkTriple));\n                        }\n                        for (_c = 0, _d = owlLinks.toArray(); _c < _d.length; _c++) {\n                            linkTriple = _d[_c];\n                            linkTypePromises.push(mapLinkTriple(linkTriple));\n                        }\n                        return [4 /*yield*/, Promise.all(linkTypePromises)];\n                    case 3:\n                        _e.sent();\n                        return [2 /*return*/, linkTypes];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.elementInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var elementInfoResult, queries, fetchedModels, _i, fetchedModels_2, model;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _a.sent();\n                        elementInfoResult = {};\n                        queries = params.elementIds.map(function (elementId) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                            var isExists, error_4;\n                            return tslib_1.__generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        _a.trys.push([0, 3, , 4]);\n                                        return [4 /*yield*/, this.rdfStorage.checkElement(elementId)];\n                                    case 1:\n                                        isExists = _a.sent();\n                                        return [4 /*yield*/, this.fetchIfNecessary(elementId, isExists)];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/, this.getElementInfo(elementId)];\n                                    case 3:\n                                        error_4 = _a.sent();\n                                        // tslint:disable-next-line:no-console\n                                        console.warn(error_4);\n                                        return [2 /*return*/, null];\n                                    case 4: return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                        return [4 /*yield*/, Promise.all(queries)];\n                    case 2:\n                        fetchedModels = _a.sent();\n                        for (_i = 0, fetchedModels_2 = fetchedModels; _i < fetchedModels_2.length; _i++) {\n                            model = fetchedModels_2[_i];\n                            if (model) {\n                                elementInfoResult[model.id] = model;\n                            }\n                        }\n                        return [2 /*return*/, elementInfoResult];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.linksInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var statementPromises, _loop_3, this_2, _i, _a, source, statements, graph, triples, fetchedModels;\n            var _this = this;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _b.sent();\n                        statementPromises = [];\n                        _loop_3 = function (source) {\n                            var _loop_4 = function (target) {\n                                statementPromises.push(Promise.all([\n                                    this_2.rdfStorage.checkElement(source)\n                                        .then(function (exists) { return _this.fetchIfNecessary(source, exists); }),\n                                    this_2.rdfStorage.checkElement(target)\n                                        .then(function (exists) { return _this.fetchIfNecessary(target, exists); }),\n                                ]).then(function () { return ({ subject: source, object: target }); }).catch(function (error) {\n                                    // tslint:disable-next-line:no-console\n                                    console.warn(error);\n                                    return null;\n                                }));\n                            };\n                            for (var _i = 0, _a = params.elementIds; _i < _a.length; _i++) {\n                                var target = _a[_i];\n                                _loop_4(target);\n                            }\n                        };\n                        this_2 = this;\n                        for (_i = 0, _a = params.elementIds; _i < _a.length; _i++) {\n                            source = _a[_i];\n                            _loop_3(source);\n                        }\n                        return [4 /*yield*/, Promise.all(statementPromises)];\n                    case 2:\n                        statements = _b.sent();\n                        return [4 /*yield*/, this.rdfStorage.matchAll(statements.filter(function (statement) { return statement; }))];\n                    case 3:\n                        graph = _b.sent();\n                        if (this.options.acceptBlankNodes) {\n                            triples = graph.toArray();\n                        }\n                        else {\n                            triples = graph.toArray().filter(function (tripple) {\n                                return rdfCacheableStore_1.isNamedNode(tripple.subject) && rdfCacheableStore_1.isNamedNode(tripple.object);\n                            });\n                        }\n                        fetchedModels = triples.map(function (t) { return ({\n                            linkTypeId: t.predicate.nominalValue,\n                            sourceId: t.subject.nominalValue,\n                            targetId: t.object.nominalValue,\n                        }); });\n                        return [2 /*return*/, fetchedModels];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.linkTypesOf = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var links, element, linkMap, incomingElementsTriples, incomingElements, _i, incomingElements_1, el, linkTypeId, outgoingElementsTriples, outElements, _a, outElements_1, el, linkTypeId;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _b.sent();\n                        links = [];\n                        element = params.elementId;\n                        linkMap = {};\n                        return [4 /*yield*/, this.rdfStorage.match(null, null, element)];\n                    case 2:\n                        incomingElementsTriples = _b.sent();\n                        incomingElements = incomingElementsTriples.toArray()\n                            .filter(function (t) { return rdfCacheableStore_1.isNamedNode(t.subject); })\n                            .map(function (triple) { return triple.predicate; });\n                        for (_i = 0, incomingElements_1 = incomingElements; _i < incomingElements_1.length; _i++) {\n                            el = incomingElements_1[_i];\n                            linkTypeId = el.nominalValue;\n                            if (!linkMap[linkTypeId]) {\n                                linkMap[linkTypeId] = {\n                                    id: linkTypeId,\n                                    inCount: 1,\n                                    outCount: 0,\n                                };\n                                links.push(linkMap[linkTypeId]);\n                            }\n                            else {\n                                linkMap[linkTypeId].inCount++;\n                            }\n                        }\n                        return [4 /*yield*/, this.rdfStorage.match(element, null, null)];\n                    case 3:\n                        outgoingElementsTriples = _b.sent();\n                        outElements = outgoingElementsTriples.toArray()\n                            .filter(function (t) { return rdfCacheableStore_1.isNamedNode(t.object); })\n                            .map(function (triple) { return triple.predicate; });\n                        for (_a = 0, outElements_1 = outElements; _a < outElements_1.length; _a++) {\n                            el = outElements_1[_a];\n                            linkTypeId = el.nominalValue;\n                            if (!linkMap[linkTypeId]) {\n                                linkMap[linkTypeId] = {\n                                    id: linkTypeId,\n                                    inCount: 0,\n                                    outCount: 1,\n                                };\n                                links.push(linkMap[linkTypeId]);\n                            }\n                            else {\n                                linkMap[linkTypeId].outCount++;\n                            }\n                        }\n                        return [2 /*return*/, links];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.linkElements = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.filter({\n                                refElementId: params.elementId,\n                                refElementLinkId: params.linkId,\n                                linkDirection: params.direction,\n                                limit: params.limit,\n                                offset: params.offset,\n                                languageCode: '',\n                            })];\n                    case 2: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.filter = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var limitCallback, offsetIndex, limitIndex, blankNodes, elementsPromise, filteredElements, elements;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.waitInitCompleted()];\n                    case 1:\n                        _a.sent();\n                        if (params.limit === undefined) {\n                            params.limit = 100;\n                        }\n                        limitCallback = function (node, index) {\n                            return (blankNodes || rdfCacheableStore_1.isNamedNode(node))\n                                && offsetIndex <= index\n                                && index < limitIndex;\n                        };\n                        offsetIndex = params.offset;\n                        limitIndex = params.offset + params.limit;\n                        blankNodes = this.options.acceptBlankNodes;\n                        if (!params.elementTypeId) return [3 /*break*/, 2];\n                        elementsPromise = this.filterByTypeId(params.elementTypeId, limitCallback);\n                        return [3 /*break*/, 7];\n                    case 2:\n                        if (!(params.refElementId && params.refElementLinkId)) return [3 /*break*/, 3];\n                        elementsPromise = this.filterByRefAndLink(params.refElementId, params.refElementLinkId, params.linkDirection, limitCallback);\n                        return [3 /*break*/, 7];\n                    case 3:\n                        if (!params.refElementId) return [3 /*break*/, 4];\n                        elementsPromise = this.filterByRef(params.refElementId, limitCallback);\n                        return [3 /*break*/, 7];\n                    case 4:\n                        if (!params.text) return [3 /*break*/, 6];\n                        return [4 /*yield*/, this.getAllElements(params.text, limitCallback)];\n                    case 5:\n                        filteredElements = _a.sent();\n                        return [2 /*return*/, this.filterByKey(undefined, filteredElements)];\n                    case 6: return [2 /*return*/, {}];\n                    case 7: return [4 /*yield*/, elementsPromise];\n                    case 8:\n                        elements = _a.sent();\n                        return [2 /*return*/, this.filterByKey(params.text, elements)];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.filterByTypeId = function (elementTypeId, filter) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var elementTriples;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.rdfStorage.match(undefined, PREFIX_FACTORIES.RDF('type'), elementTypeId)];\n                    case 1:\n                        elementTriples = _a.sent();\n                        return [2 /*return*/, Promise.all(elementTriples.toArray()\n                                .filter(function (t, index) { return filter(t.subject, index); })\n                                .map(function (el) { return _this.getElementInfo(el.subject.nominalValue, true); }))];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.filterByRefAndLink = function (refEl, refLink, linkDirection, filter) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var elementTriples, elementTriples;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(linkDirection === 'in')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.rdfStorage.match(null, refLink, refEl)];\n                    case 1:\n                        elementTriples = _a.sent();\n                        return [2 /*return*/, Promise.all(elementTriples.toArray().filter(function (t, index) { return filter(t.subject, index); })\n                                .map(function (el) { return _this.getElementInfo(el.subject.nominalValue, true); }))];\n                    case 2: return [4 /*yield*/, this.rdfStorage.match(refEl, refLink, null)];\n                    case 3:\n                        elementTriples = _a.sent();\n                        return [2 /*return*/, Promise.all(elementTriples.toArray().filter(function (t, index) { return filter(t.object, index); })\n                                .map(function (el) { return _this.getElementInfo(el.object.nominalValue, true); }))];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.filterByRef = function (refEl, filter) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var incomingTriples, inRelations, outgoingTriples, outRelations;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.rdfStorage.match(null, null, refEl)];\n                    case 1:\n                        incomingTriples = _a.sent();\n                        return [4 /*yield*/, Promise.all(incomingTriples.toArray().filter(function (t, index) { return filter(t.subject, index); })\n                                .map(function (el) { return _this.getElementInfo(el.subject.nominalValue, true); }))];\n                    case 2:\n                        inRelations = _a.sent();\n                        return [4 /*yield*/, this.rdfStorage.match(refEl, null, null)];\n                    case 3:\n                        outgoingTriples = _a.sent();\n                        return [4 /*yield*/, Promise.all(outgoingTriples.toArray().filter(function (t, index) { return filter(t.object, index); })\n                                .map(function (el) { return _this.getElementInfo(el.object.nominalValue, true); }))];\n                    case 4:\n                        outRelations = _a.sent();\n                        return [2 /*return*/, inRelations.concat(outRelations)];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.getAllElements = function (text, filter) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var key, elementTriples, promices, _i, _a, triple, objectIsLiteral, isLabel, containsKey;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        key = (text ? text.toLowerCase() : null);\n                        return [4 /*yield*/, this.rdfStorage.match(null, null, null)];\n                    case 1:\n                        elementTriples = _b.sent();\n                        promices = [];\n                        for (_i = 0, _a = elementTriples.toArray(); _i < _a.length; _i++) {\n                            triple = _a[_i];\n                            if (filter(triple.subject, promices.length)) {\n                                objectIsLiteral = triple.object.interfaceName === 'Literal';\n                                isLabel = rdfCacheableStore_1.isLabelType(triple.predicate.nominalValue);\n                                containsKey = isLabel &&\n                                    triple.object.nominalValue.toLowerCase().indexOf(key) !== -1 ||\n                                    !objectIsLiteral &&\n                                        triple.subject.nominalValue.toLowerCase().indexOf(key) !== -1;\n                                if (containsKey) {\n                                    promices.push(this.getElementInfo(triple.subject.nominalValue, true));\n                                }\n                            }\n                        }\n                        return [2 /*return*/, Promise.all(promices)];\n                }\n            });\n        });\n    };\n    RDFDataProvider.prototype.filterByKey = function (text, elements) {\n        var result = {};\n        var key = (text ? text.toLowerCase() : null);\n        if (key) {\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var el = elements_1[_i];\n                var acceptableKey = false;\n                for (var _a = 0, _b = el.label.values; _a < _b.length; _a++) {\n                    var label = _b[_a];\n                    acceptableKey = acceptableKey || label.value.toLowerCase().indexOf(key) !== -1;\n                    if (acceptableKey) {\n                        break;\n                    }\n                }\n                acceptableKey = acceptableKey || el.id.toLowerCase().indexOf(key) !== -1;\n                if (acceptableKey) {\n                    result[el.id] = el;\n                }\n            }\n        }\n        else {\n            for (var _c = 0, elements_2 = elements; _c < elements_2.length; _c++) {\n                var el = elements_2[_c];\n                result[el.id] = el;\n            }\n        }\n        return result;\n    };\n    RDFDataProvider.prototype.checkElement = function (id) {\n        return this.dataFetching ?\n            this.rdfStorage.checkElement(id) :\n            Promise.resolve(true);\n    };\n    RDFDataProvider.prototype.fetchIfNecessary = function (id, exists) {\n        var _this = this;\n        if (exists || !this.dataFetching) {\n            return Promise.resolve();\n        }\n        else {\n            return this.rdfLoader.downloadElement(id).then(function (rdfGraph) {\n                _this.rdfStorage.add(rdfGraph);\n                return;\n            }).catch(function (error) {\n                // tslint:disable-next-line:no-console\n                console.warn(error);\n                return;\n            });\n        }\n    };\n    RDFDataProvider.prototype.getElementInfo = function (id, shortInfo) {\n        return Promise.all([\n            this.getTypes(id),\n            (!shortInfo ? this.getProps(id) : Promise.resolve({})),\n            this.getLabels(id),\n        ]).then(function (_a) {\n            var types = _a[0], props = _a[1], labels = _a[2];\n            return {\n                id: id,\n                types: types,\n                label: { values: labels },\n                properties: props,\n            };\n        });\n    };\n    RDFDataProvider.prototype.getLabels = function (id) {\n        return this.rdfStorage.getLabels(id).then(function (labelTriples) {\n            return labelTriples.toArray().map(function (l) { return ({\n                value: l.object.nominalValue,\n                language: rdfCacheableStore_1.isLiteral(l.object) ? l.object.language || '' : '',\n            }); });\n        });\n    };\n    RDFDataProvider.prototype.getProps = function (el) {\n        return this.rdfStorage.match(el, null, null).then(function (propsGraph) {\n            var props = {};\n            var propTriples = propsGraph.toArray();\n            for (var _i = 0, propTriples_1 = propTriples; _i < propTriples_1.length; _i++) {\n                var statemet = propTriples_1[_i];\n                if (rdfCacheableStore_1.isLiteral(statemet.object) &&\n                    statemet.predicate.nominalValue !== PREFIX_FACTORIES.RDFS('label')) {\n                    var property = props[statemet.predicate.nominalValue];\n                    var value = {\n                        text: statemet.object.nominalValue,\n                        lang: statemet.object.language || '',\n                    };\n                    props[statemet.predicate.nominalValue] = {\n                        type: 'string',\n                        values: property ? tslib_1.__spreadArrays(property.values, [value]) : [value],\n                    };\n                }\n            }\n            return props;\n        });\n    };\n    RDFDataProvider.prototype.getTypes = function (el) {\n        return this.rdfStorage.match(el, PREFIX_FACTORIES.RDF('type'), null)\n            .then(function (typeTriples) {\n            return typeTriples.toArray().map(function (t) { return t.object.nominalValue; });\n        });\n    };\n    RDFDataProvider.prototype.createEmptyClass = function (classIri) {\n        return {\n            id: classIri,\n            label: {\n                values: [],\n            },\n            count: this.rdfStorage.getTypeCount(classIri),\n            children: [],\n        };\n    };\n    return RDFDataProvider;\n}());\nexports.RDFDataProvider = RDFDataProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar rdf_ext_1 = require(\"rdf-ext\");\nvar lodash_1 = require(\"lodash\");\nvar DEFAULT_STORAGE_TYPE = 'text/turtle';\nvar DEFAULT_STORAGE_URI = 'http://ontodia.org/defaultGraph';\nfunction prefixFactory(prefix) {\n    var lastSymbol = prefix[prefix.length - 1];\n    var _prefix = lastSymbol === '/' || lastSymbol === '#' ? prefix : prefix + '/';\n    return function (id) {\n        return _prefix + id;\n    };\n}\nexports.prefixFactory = prefixFactory;\nfunction isLiteral(el) {\n    return el.interfaceName === 'Literal';\n}\nexports.isLiteral = isLiteral;\nfunction isNamedNode(el) {\n    return el.interfaceName === 'NamedNode';\n}\nexports.isNamedNode = isNamedNode;\nexports.LABEL_URIS = [\n    'http://www.w3.org/2004/02/skos/core#prefLabel',\n    'http://www.w3.org/2004/02/skos/core#label',\n    'http://www.w3.org/2004/02/skos/core#altLabel',\n    'http://www.w3.org/2000/01/rdf-schema#prefLabel',\n    'http://www.w3.org/2000/01/rdf-schema#label',\n    'http://xmlns.com/foaf/0.1/name',\n    'http://schema.org/name',\n];\nexports.LABEL_POSTFIXES = [\n    'prefLabel',\n    'prefName',\n    'label',\n    'name',\n    'title',\n];\nfunction isLabelType(predicateIri) {\n    var isLabelIri = exports.LABEL_URIS.indexOf(predicateIri) !== -1;\n    var type = predicateIri.toLocaleLowerCase();\n    var looksLikeLabel = Boolean(exports.LABEL_POSTFIXES.find(function (value, index, array) {\n        var postfix = value.toLocaleLowerCase();\n        return type.indexOf(postfix) !== -1;\n    }));\n    return isLabelIri || looksLikeLabel;\n}\nexports.isLabelType = isLabelType;\nvar RDFCacheableStore = /** @class */ (function () {\n    function RDFCacheableStore(options) {\n        this.checkingElementMap = {};\n        this.labelsMap = {};\n        this.countMap = {};\n        this.elementTypes = {};\n        this.parser = options.parser;\n        this.acceptBlankNodes = Boolean(options.acceptBlankNodes);\n        this.rdfStorage = rdf_ext_1.createStore();\n        this.prefs = {\n            RDF: prefixFactory('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),\n            RDFS: prefixFactory('http://www.w3.org/2000/01/rdf-schema#'),\n            FOAF: prefixFactory('http://xmlns.com/foaf/0.1/'),\n            XSD: prefixFactory('http://www.w3.org/2001/XMLSchema#'),\n            OWL: prefixFactory('http://www.w3.org/2002/07/owl#'),\n        };\n    }\n    RDFCacheableStore.prototype.add = function (rdfGraph, prefix) {\n        this.rdfStorage.add(lodash_1.uniqueId(prefix) || (lodash_1.uniqueId(DEFAULT_STORAGE_URI)), rdfGraph);\n        this.enrichMaps(rdfGraph);\n    };\n    RDFCacheableStore.prototype.match = function (subject, predicate, object, iri, callback, limit) {\n        if (subject && (exports.LABEL_URIS.indexOf(predicate) !== -1) && !object) {\n            return Promise.resolve(this._getLabels(subject));\n        }\n        else if (subject && predicate === this.prefs.RDF('type') && !object) {\n            return Promise.resolve(this.getTypes(subject));\n        }\n        else {\n            return this.rdfStorage.match(subject, predicate, object, iri, callback, limit);\n        }\n    };\n    RDFCacheableStore.prototype.matchAll = function (statements) {\n        var _this = this;\n        var slowQueries = [];\n        var queries = [];\n        statements.forEach(function (statement) {\n            if (statement.subject && (exports.LABEL_URIS.indexOf(statement.predicate) !== -1) && !statement.object) {\n                queries.push(_this._getLabels(statement.subject));\n            }\n            else if (statement.subject && statement.predicate === _this.prefs.RDF('type') && !statement.object) {\n                queries.push(_this.getTypes(statement.subject));\n            }\n            else {\n                slowQueries.push(statement);\n            }\n        });\n        queries.push(this.multipleMatch(slowQueries));\n        return Promise.resolve(this.combineGraphs(queries));\n    };\n    RDFCacheableStore.prototype.getLabels = function (id) {\n        return Promise.resolve(rdf_ext_1.createGraph(this.labelsMap[id]));\n    };\n    // Checks whetger the element is in the storage.\n    RDFCacheableStore.prototype.checkElement = function (id) {\n        if (this.labelsMap[id]) { // if there is label for an id then the element is already fetched\n            return Promise.resolve(true);\n        }\n        else {\n            if (!this.checkingElementMap[id]) {\n                this.checkingElementMap[id] = this.rdfStorage.match(id, null, null).then(function (result) {\n                    var resultArray = result.toArray();\n                    return resultArray.length !== 0;\n                });\n            }\n            return this.checkingElementMap[id];\n        }\n    };\n    RDFCacheableStore.prototype.getTypeCount = function (id) {\n        return this.countMap[id] || 0;\n    };\n    RDFCacheableStore.prototype.enrichMaps = function (newGraph) {\n        var _this = this;\n        var triples = newGraph.toArray();\n        // Deal with labels\n        for (var _i = 0, triples_1 = triples; _i < triples_1.length; _i++) {\n            var triple = triples_1[_i];\n            var element = triple.subject.nominalValue;\n            var predicate = triple.predicate.nominalValue;\n            if (isLabelType(predicate)) {\n                if (!this.labelsMap[element]) {\n                    this.labelsMap[element] = [];\n                }\n                if (isLiteral(triple.object)) {\n                    this.labelsMap[element].push(triple);\n                    this.labelsMap[element].sort(function (a, b) {\n                        var index1 = exports.LABEL_URIS.indexOf(a.predicate.nominalValue);\n                        var index2 = exports.LABEL_URIS.indexOf(b.predicate.nominalValue);\n                        if (index1 > index2) {\n                            return 1;\n                        }\n                        else if (index1 < index2) {\n                            return -1;\n                        }\n                        else {\n                            return 0;\n                        }\n                    });\n                }\n            }\n        }\n        // Deal with counts\n        var typeInstances = newGraph.match(null, this.prefs.RDF('type'), null).toArray();\n        var typeInstMap = {};\n        for (var _a = 0, typeInstances_1 = typeInstances; _a < typeInstances_1.length; _a++) {\n            var instTriple = typeInstances_1[_a];\n            var type = instTriple.object.nominalValue;\n            var inst = instTriple.subject.nominalValue;\n            if (!typeInstMap[type]) {\n                typeInstMap[type] = [];\n            }\n            if (this.acceptBlankNodes || isNamedNode(instTriple.subject)) {\n                if (!this.elementTypes[inst]) {\n                    this.elementTypes[inst] = [];\n                }\n                if (typeInstMap[type].indexOf(inst) === -1) {\n                    typeInstMap[type].push(inst);\n                }\n                this.elementTypes[inst].push(instTriple);\n            }\n        }\n        Object.keys(typeInstMap).forEach(function (key) { return _this.countMap[key] = typeInstMap[key].length; });\n        return true;\n    };\n    RDFCacheableStore.prototype._getLabels = function (id) {\n        return rdf_ext_1.createGraph(this.labelsMap[id]);\n    };\n    RDFCacheableStore.prototype.getTypes = function (id) {\n        return rdf_ext_1.createGraph(this.elementTypes[id]);\n    };\n    RDFCacheableStore.prototype.combineGraphs = function (graphs) {\n        var triples = [];\n        for (var _i = 0, graphs_1 = graphs; _i < graphs_1.length; _i++) {\n            var graph = graphs_1[_i];\n            for (var _a = 0, _b = graph.toArray(); _a < _b.length; _a++) {\n                var triple = _b[_a];\n                triples.push(triple);\n            }\n        }\n        return rdf_ext_1.createGraph(triples);\n    };\n    RDFCacheableStore.prototype.multipleMatch = function (statements) {\n        var _this = this;\n        var triples = [];\n        var graphs = Object.keys(this.rdfStorage.graphs).map(function (id) { return _this.rdfStorage.graphs[id]; });\n        for (var _i = 0, graphs_2 = graphs; _i < graphs_2.length; _i++) {\n            var graph = graphs_2[_i];\n            for (var _a = 0, _b = graph._graph; _a < _b.length; _a++) {\n                var triple = _b[_a];\n                for (var _c = 0, statements_1 = statements; _c < statements_1.length; _c++) {\n                    var statement = statements_1[_c];\n                    if (((!statement.object) || statement.object === triple.object.nominalValue) &&\n                        ((!statement.predicate) || statement.predicate === triple.predicate.nominalValue) &&\n                        ((!statement.subject) || statement.subject === triple.subject.nominalValue)) {\n                        triples.push(triple);\n                        continue;\n                    }\n                }\n            }\n        }\n        return rdf_ext_1.createGraph(triples);\n    };\n    return RDFCacheableStore;\n}());\nexports.RDFCacheableStore = RDFCacheableStore;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__93__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_PROXY = '/lod-proxy/';\nvar RDFLoader = /** @class */ (function () {\n    function RDFLoader(parameters) {\n        this.fetchingFileCatche = {};\n        this.parser = parameters.parser;\n        this.proxy = parameters.proxy || exports.DEFAULT_PROXY;\n    }\n    RDFLoader.prototype.parseData = function (data, contentType, prefix) {\n        var result;\n        result = this.parser.parse(data, contentType);\n        return result;\n    };\n    RDFLoader.prototype.downloadElement = function (elementId) {\n        var _this = this;\n        var sharpIndex = elementId.indexOf('#');\n        var fileUrl = sharpIndex !== -1 ? elementId.substr(0, sharpIndex) : elementId;\n        var typePointer = 0;\n        var mimeTypes = Object.keys(this.parser.parserMap);\n        var recursivePart = function () {\n            var acceptType = mimeTypes[typePointer++];\n            if (acceptType && (elementId.startsWith('http') || elementId.startsWith('file'))) {\n                return fetchFile({\n                    url: elementId,\n                    proxy: _this.proxy,\n                    headers: {\n                        'Accept': acceptType,\n                    },\n                }).then(function (body) {\n                    return _this.parseData(body, acceptType, elementId)\n                        .catch(function (error) {\n                        // tslint:disable-next-line:no-console\n                        console.warn(error);\n                        if (typePointer < mimeTypes.length) {\n                            return recursivePart();\n                        }\n                        else {\n                            throw new Error(\"Unable to parse response. Response: \" + body);\n                        }\n                    });\n                });\n            }\n            else {\n                throw new Error(\"Unable to fetch data using this id (\" + elementId + \")\");\n            }\n        };\n        if (!this.fetchingFileCatche[fileUrl]) {\n            this.fetchingFileCatche[fileUrl] = recursivePart();\n        }\n        return this.fetchingFileCatche[fileUrl];\n    };\n    return RDFLoader;\n}());\nexports.RDFLoader = RDFLoader;\nfunction fetchFile(params) {\n    return fetch(params.proxy + params.url, {\n        method: 'GET',\n        credentials: 'same-origin',\n        mode: 'cors',\n        cache: 'default',\n        headers: params.headers || {\n            'Accept': 'application/rdf+xml',\n        },\n    }).then(function (response) {\n        if (response.ok) {\n            return response.text();\n        }\n        else {\n            var error = new Error(response.statusText);\n            error.response = response;\n            throw error;\n        }\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction workaroundForRDFXmlParser(body) {\n    // For some strange reason we've encountered xml parser errors\n    // when parsing rdf/xml file with Collection tag.\n    // As I remember, file came from x3c Ontology\n    // and this workaround helps to get file through xml parsing.\n    return body.replace(/parseType=[\"']Collection[\"']/ig, 'parseType=\"Collection1\"');\n}\nvar POSTFIX_TO_MIME = {\n    'xml': 'application/rdf+xml',\n    'rdf': 'application/rdf+xml',\n    'owl': 'application/rdf+xml',\n    'nttl': 'application/x-turtle',\n    'jsonld': 'application/ld+json',\n    'rj': 'application/ld+json',\n    'ttl': 'text/turtle',\n    'nt': 'text/turtle',\n    'nq': 'text/turtle',\n};\nfunction getMimeTypeByFileName(fileName) {\n    var postfix = (fileName.match(/\\.([\\S]*)$/i) || [])[1];\n    return postfix ? POSTFIX_TO_MIME[postfix] : undefined;\n}\nvar RDFCompositeParser = /** @class */ (function () {\n    function RDFCompositeParser(parserMap) {\n        this.parserMap = parserMap;\n    }\n    RDFCompositeParser.prototype.parse = function (body, mimeType, fileName) {\n        if (mimeType) {\n            if (mimeType === 'application/rdf+xml') {\n                body = workaroundForRDFXmlParser(body);\n            }\n            if (!this.parserMap[mimeType]) {\n                throw Error('There is no parser for this MIME type');\n            }\n            return this.parserMap[mimeType].parse(body);\n        }\n        else {\n            return this.tryToGuessMimeType(body, fileName);\n        }\n    };\n    RDFCompositeParser.prototype.tryToGuessMimeType = function (body, fileName) {\n        var _this = this;\n        var mimeTypeIndex = 0;\n        var mimeTypes = Object.keys(this.parserMap);\n        if (fileName) {\n            var mime_1 = getMimeTypeByFileName(fileName);\n            if (mime_1) {\n                mimeTypes = [mime_1].concat(mimeTypes.filter(function (type) { return type !== mime_1; }));\n            }\n        }\n        var errors = [];\n        var recursion = function () {\n            if (mimeTypeIndex < mimeTypes.length) {\n                var mimeType_1 = mimeTypes[mimeTypeIndex++];\n                try {\n                    var bodyToParse = mimeType_1 === 'application/rdf+xml' ?\n                        workaroundForRDFXmlParser(body) : body;\n                    return _this.parserMap[mimeType_1].parse(bodyToParse).catch(function (error) {\n                        errors.push({ mimeType: mimeType_1, error: error });\n                        return recursion();\n                    });\n                }\n                catch (error) {\n                    return recursion();\n                }\n            }\n            else {\n                throw new Error('Unknow mime type. Parse errors:\\n' +\n                    errors.map(function (e) { return e.mimeType + \": \" + e.error.message + \" \" + e.error.stack + \";\\n\"; }).join('\\n'));\n            }\n        };\n        return recursion();\n    };\n    return RDFCompositeParser;\n}());\nexports.RDFCompositeParser = RDFCompositeParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar collections_1 = require(\"../../viewUtils/collections\");\nvar responseHandler_1 = require(\"./responseHandler\");\nvar sparqlDataProviderSettings_1 = require(\"./sparqlDataProviderSettings\");\nvar BlankNodes = require(\"./blankNodes\");\nvar turtle_1 = require(\"./turtle\");\nvar SparqlQueryMethod;\n(function (SparqlQueryMethod) {\n    SparqlQueryMethod[SparqlQueryMethod[\"GET\"] = 1] = \"GET\";\n    SparqlQueryMethod[SparqlQueryMethod[\"POST\"] = 2] = \"POST\";\n})(SparqlQueryMethod = exports.SparqlQueryMethod || (exports.SparqlQueryMethod = {}));\nvar SparqlDataProvider = /** @class */ (function () {\n    function SparqlDataProvider(options, settings) {\n        if (settings === void 0) { settings = sparqlDataProviderSettings_1.OWLStatsSettings; }\n        this.linkByPredicate = new Map();\n        this.linkById = new Map();\n        this.propertyByPredicate = new Map();\n        var _a = options.queryFunction, queryFunction = _a === void 0 ? queryInternal : _a;\n        this.options = tslib_1.__assign(tslib_1.__assign({}, options), { queryFunction: queryFunction });\n        this.settings = settings;\n        for (var _i = 0, _b = settings.linkConfigurations; _i < _b.length; _i++) {\n            var link = _b[_i];\n            this.linkById.set(link.id, link);\n            var predicate = responseHandler_1.isDirectLink(link) ? link.path : link.id;\n            collections_1.getOrCreateArrayInMap(this.linkByPredicate, predicate).push(link);\n        }\n        this.openWorldLinks = settings.linkConfigurations.length === 0 ||\n            Boolean(settings.openWorldLinks);\n        for (var _c = 0, _d = settings.propertyConfigurations; _c < _d.length; _c++) {\n            var property = _d[_c];\n            var predicate = responseHandler_1.isDirectProperty(property) ? property.path : property.id;\n            collections_1.getOrCreateArrayInMap(this.propertyByPredicate, predicate).push(property);\n        }\n        this.openWorldProperties = settings.propertyConfigurations.length === 0 ||\n            Boolean(settings.openWorldProperties);\n    }\n    SparqlDataProvider.prototype.classTree = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, defaultPrefix, schemaLabelProperty, classTreeQuery, query, result, classTree;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, schemaLabelProperty = _a.schemaLabelProperty, classTreeQuery = _a.classTreeQuery;\n                        if (!classTreeQuery) {\n                            return [2 /*return*/, []];\n                        }\n                        query = defaultPrefix + resolveTemplate(classTreeQuery, {\n                            schemaLabelProperty: schemaLabelProperty,\n                        });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        result = _b.sent();\n                        classTree = responseHandler_1.getClassTree(result);\n                        if (!this.options.prepareLabels) return [3 /*break*/, 3];\n                        return [4 /*yield*/, attachLabels(responseHandler_1.flattenClassTree(classTree), this.options.prepareLabels)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3: return [2 /*return*/, classTree];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.propertyInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, defaultPrefix, schemaLabelProperty, propertyInfoQuery, properties, ids, query, result, _i, _b, id;\n            return tslib_1.__generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, schemaLabelProperty = _a.schemaLabelProperty, propertyInfoQuery = _a.propertyInfoQuery;\n                        if (!propertyInfoQuery) return [3 /*break*/, 2];\n                        ids = params.propertyIds.map(escapeIri).map(function (id) { return \" ( \" + id + \" )\"; }).join(' ');\n                        query = defaultPrefix + resolveTemplate(propertyInfoQuery, {\n                            ids: ids,\n                            schemaLabelProperty: schemaLabelProperty,\n                        });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        result = _c.sent();\n                        properties = responseHandler_1.getPropertyInfo(result);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        properties = {};\n                        for (_i = 0, _b = params.propertyIds; _i < _b.length; _i++) {\n                            id = _b[_i];\n                            properties[id] = { id: id, label: { values: [] } };\n                        }\n                        _c.label = 3;\n                    case 3:\n                        if (!this.options.prepareLabels) return [3 /*break*/, 5];\n                        return [4 /*yield*/, attachLabels(collections_1.objectValues(properties), this.options.prepareLabels)];\n                    case 4:\n                        _c.sent();\n                        _c.label = 5;\n                    case 5: return [2 /*return*/, properties];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.classInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, defaultPrefix, schemaLabelProperty, classInfoQuery, classes, ids, query, result;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, schemaLabelProperty = _a.schemaLabelProperty, classInfoQuery = _a.classInfoQuery;\n                        if (!classInfoQuery) return [3 /*break*/, 2];\n                        ids = params.classIds.map(escapeIri).map(function (id) { return \" ( \" + id + \" )\"; }).join(' ');\n                        query = defaultPrefix + resolveTemplate(classInfoQuery, {\n                            ids: ids,\n                            schemaLabelProperty: schemaLabelProperty,\n                        });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        result = _b.sent();\n                        classes = responseHandler_1.getClassInfo(result);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        classes = params.classIds.map(function (id) { return ({ id: id, label: { values: [] }, children: [] }); });\n                        _b.label = 3;\n                    case 3:\n                        if (!this.options.prepareLabels) return [3 /*break*/, 5];\n                        return [4 /*yield*/, attachLabels(classes, this.options.prepareLabels)];\n                    case 4:\n                        _b.sent();\n                        _b.label = 5;\n                    case 5: return [2 /*return*/, classes];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.linkTypesInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, defaultPrefix, schemaLabelProperty, linkTypesInfoQuery, linkTypes, ids, query, result;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, schemaLabelProperty = _a.schemaLabelProperty, linkTypesInfoQuery = _a.linkTypesInfoQuery;\n                        if (!linkTypesInfoQuery) return [3 /*break*/, 2];\n                        ids = params.linkTypeIds.map(escapeIri).map(function (id) { return \" ( \" + id + \" )\"; }).join(' ');\n                        query = defaultPrefix + resolveTemplate(linkTypesInfoQuery, {\n                            ids: ids,\n                            schemaLabelProperty: schemaLabelProperty,\n                        });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        result = _b.sent();\n                        linkTypes = responseHandler_1.getLinkTypes(result);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        linkTypes = params.linkTypeIds.map(function (id) { return ({ id: id, label: { values: [] } }); });\n                        _b.label = 3;\n                    case 3:\n                        if (!this.options.prepareLabels) return [3 /*break*/, 5];\n                        return [4 /*yield*/, attachLabels(linkTypes, this.options.prepareLabels)];\n                    case 4:\n                        _b.sent();\n                        _b.label = 5;\n                    case 5: return [2 /*return*/, linkTypes];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.linkTypes = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, defaultPrefix, schemaLabelProperty, linkTypesQuery, linkTypesPattern, query, result, linkTypes;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, schemaLabelProperty = _a.schemaLabelProperty, linkTypesQuery = _a.linkTypesQuery, linkTypesPattern = _a.linkTypesPattern;\n                        if (!linkTypesQuery) {\n                            return [2 /*return*/, []];\n                        }\n                        query = defaultPrefix + resolveTemplate(linkTypesQuery, {\n                            linkTypesPattern: linkTypesPattern,\n                            schemaLabelProperty: schemaLabelProperty,\n                        });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        result = _b.sent();\n                        linkTypes = responseHandler_1.getLinkTypes(result);\n                        if (!this.options.prepareLabels) return [3 /*break*/, 3];\n                        return [4 /*yield*/, attachLabels(linkTypes, this.options.prepareLabels)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3: return [2 /*return*/, linkTypes];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.elementInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var nonBlankResources, blankNodeResponse, triples, ids, _a, defaultPrefix, dataLabelProperty, elementInfoQuery, query, types, bindings, bindingsWithBlanks, elementModels, _b, _c;\n            return tslib_1.__generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        nonBlankResources = params.elementIds.filter(function (id) { return !BlankNodes.isEncodedBlank(id); });\n                        blankNodeResponse = this.options.acceptBlankNodes\n                            ? BlankNodes.elementInfo(params.elementIds) : undefined;\n                        if (!(nonBlankResources.length > 0)) return [3 /*break*/, 2];\n                        ids = nonBlankResources.map(escapeIri).map(function (id) { return \" (\" + id + \")\"; }).join(' ');\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, dataLabelProperty = _a.dataLabelProperty, elementInfoQuery = _a.elementInfoQuery;\n                        query = defaultPrefix + resolveTemplate(elementInfoQuery, {\n                            ids: ids,\n                            dataLabelProperty: dataLabelProperty,\n                            propertyConfigurations: this.formatPropertyInfo(),\n                        });\n                        return [4 /*yield*/, this.executeSparqlConstruct(query)];\n                    case 1:\n                        triples = _d.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        triples = [];\n                        _d.label = 3;\n                    case 3:\n                        types = this.queryManyElementTypes(this.settings.propertyConfigurations.length > 0 ? params.elementIds : []);\n                        bindings = responseHandler_1.triplesToElementBinding(triples);\n                        bindingsWithBlanks = responseHandler_1.prependAdditionalBindings(bindings, blankNodeResponse);\n                        _b = responseHandler_1.getElementsInfo;\n                        _c = [bindingsWithBlanks];\n                        return [4 /*yield*/, types];\n                    case 4:\n                        elementModels = _b.apply(void 0, _c.concat([_d.sent(),\n                            this.propertyByPredicate,\n                            this.openWorldProperties]));\n                        if (!this.options.prepareLabels) return [3 /*break*/, 6];\n                        return [4 /*yield*/, attachLabels(collections_1.objectValues(elementModels), this.options.prepareLabels)];\n                    case 5:\n                        _d.sent();\n                        _d.label = 6;\n                    case 6:\n                        if (!this.options.prepareImages) return [3 /*break*/, 8];\n                        return [4 /*yield*/, prepareElementImages(this.options.prepareImages, elementModels)];\n                    case 7:\n                        _d.sent();\n                        return [3 /*break*/, 10];\n                    case 8:\n                        if (!(this.options.imagePropertyUris && this.options.imagePropertyUris.length)) return [3 /*break*/, 10];\n                        return [4 /*yield*/, this.attachImages(elementModels, this.options.imagePropertyUris)];\n                    case 9:\n                        _d.sent();\n                        _d.label = 10;\n                    case 10: return [2 /*return*/, elementModels];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.attachImages = function (elementsInfo, types) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var ids, typesString, query, bindings, err_1;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ids = Object.keys(elementsInfo).filter(function (id) { return !BlankNodes.isEncodedBlank(id); })\n                            .map(escapeIri).map(function (id) { return \" ( \" + id + \" )\"; }).join(' ');\n                        typesString = types.map(escapeIri).map(function (id) { return \" ( \" + id + \" )\"; }).join(' ');\n                        query = this.settings.defaultPrefix + (\"\\n            SELECT ?inst ?linkType ?image\\n            WHERE {{\\n                VALUES (?inst) {\" + ids + \"}\\n                VALUES (?linkType) {\" + typesString + \"}\\n                \" + this.settings.imageQueryPattern + \"\\n            }}\\n        \");\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 2:\n                        bindings = _a.sent();\n                        responseHandler_1.enrichElementsWithImages(bindings, elementsInfo);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        // tslint:disable-next-line:no-console\n                        console.error(err_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.linksInfo = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var nonBlankResources, blankNodeResponse, linkConfigurations, bindings, types, ids, linksInfoQuery, bindingsWithBlanks, _a, linksInfo, _b, _c;\n            return tslib_1.__generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        nonBlankResources = params.elementIds.filter(function (id) { return !BlankNodes.isEncodedBlank(id); });\n                        blankNodeResponse = this.options.acceptBlankNodes\n                            ? BlankNodes.linksInfo(params.elementIds) : undefined;\n                        linkConfigurations = this.formatLinkLinks();\n                        if (nonBlankResources.length > 0) {\n                            ids = nonBlankResources.map(escapeIri).map(function (id) { return \" ( \" + id + \" )\"; }).join(' ');\n                            linksInfoQuery = this.settings.defaultPrefix + resolveTemplate(this.settings.linksInfoQuery, {\n                                ids: ids,\n                                linkConfigurations: linkConfigurations,\n                            });\n                            bindings = this.executeSparqlQuery(linksInfoQuery);\n                            types = this.queryManyElementTypes(params.elementIds);\n                        }\n                        else {\n                            bindings = Promise.resolve({\n                                head: { vars: [] },\n                                results: { bindings: [] },\n                            });\n                            types = this.queryManyElementTypes([]);\n                        }\n                        _a = responseHandler_1.prependAdditionalBindings;\n                        return [4 /*yield*/, bindings];\n                    case 1:\n                        bindingsWithBlanks = _a.apply(void 0, [_d.sent(), blankNodeResponse]);\n                        _b = responseHandler_1.getLinksInfo;\n                        _c = [bindingsWithBlanks];\n                        return [4 /*yield*/, types];\n                    case 2:\n                        linksInfo = _b.apply(void 0, _c.concat([_d.sent(),\n                            this.linkByPredicate,\n                            this.openWorldLinks]));\n                        return [2 /*return*/, linksInfo];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.linkTypesOf = function (params) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, defaultPrefix, linkTypesOfQuery, linkTypesStatisticsQuery, filterTypePattern, elementIri, forAll, query, linkTypeBindings, linkTypeIds, navigateElementFilterOut, navigateElementFilterIn, foundLinkStats;\n            var _this = this;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.options.acceptBlankNodes && BlankNodes.isEncodedBlank(params.elementId)) {\n                            return [2 /*return*/, Promise.resolve(responseHandler_1.getLinksTypesOf(BlankNodes.linkTypesOf(params)))];\n                        }\n                        _a = this.settings, defaultPrefix = _a.defaultPrefix, linkTypesOfQuery = _a.linkTypesOfQuery, linkTypesStatisticsQuery = _a.linkTypesStatisticsQuery, filterTypePattern = _a.filterTypePattern;\n                        elementIri = escapeIri(params.elementId);\n                        forAll = this.formatLinkUnion(params.elementId, undefined, undefined, '?outObject', '?inObject', false);\n                        if (forAll.usePredicatePart) {\n                            forAll.unionParts.push(\"{ \" + elementIri + \" ?link ?outObject }\");\n                            forAll.unionParts.push(\"{ ?inObject ?link \" + elementIri + \" }\");\n                        }\n                        query = defaultPrefix + resolveTemplate(linkTypesOfQuery, {\n                            elementIri: elementIri,\n                            linkConfigurations: forAll.unionParts.join('\\nUNION\\n'),\n                        });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        linkTypeBindings = _b.sent();\n                        linkTypeIds = responseHandler_1.getLinksTypeIds(linkTypeBindings, this.linkByPredicate, this.openWorldLinks);\n                        navigateElementFilterOut = this.options.acceptBlankNodes\n                            ? \"FILTER (IsIri(?outObject) || IsBlank(?outObject))\"\n                            : \"FILTER IsIri(?outObject)\";\n                        navigateElementFilterIn = this.options.acceptBlankNodes\n                            ? \"FILTER (IsIri(?inObject) || IsBlank(?inObject))\"\n                            : \"FILTER IsIri(?inObject)\";\n                        foundLinkStats = [];\n                        return [4 /*yield*/, Promise.all(linkTypeIds.map(function (linkId) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                                var linkConfig, linkConfigurationOut, linkConfigurationIn, predicate, commaSeparatedDomains, restrictionOut, restrictionIn, statsQuery, bindings, linkStats;\n                                var _a;\n                                return tslib_1.__generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            linkConfig = this.linkById.get(linkId);\n                                            if (!linkConfig || responseHandler_1.isDirectLink(linkConfig)) {\n                                                predicate = escapeIri(linkConfig && responseHandler_1.isDirectLink(linkConfig) ? linkConfig.path : linkId);\n                                                linkConfigurationOut = elementIri + \" \" + predicate + \" ?outObject\";\n                                                linkConfigurationIn = \"?inObject \" + predicate + \" \" + elementIri;\n                                            }\n                                            else {\n                                                linkConfigurationOut = this.formatLinkPath(linkConfig.path, elementIri, '?outObject');\n                                                linkConfigurationIn = this.formatLinkPath(linkConfig.path, '?inObject', elementIri);\n                                            }\n                                            if (linkConfig && ((_a = linkConfig.domain) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n                                                commaSeparatedDomains = linkConfig.domain.map(escapeIri).join(', ');\n                                                restrictionOut = filterTypePattern.replace(/[?$]inst\\b/g, elementIri);\n                                                restrictionIn = filterTypePattern.replace(/[?$]inst\\b/g, '?inObject');\n                                                linkConfigurationOut += \" { \" + restrictionOut + \" FILTER(?class IN (\" + commaSeparatedDomains + \")) }\";\n                                                linkConfigurationIn += \" { \" + restrictionIn + \" FILTER(?class IN (\" + commaSeparatedDomains + \")) }\";\n                                            }\n                                            statsQuery = defaultPrefix + resolveTemplate(linkTypesStatisticsQuery, {\n                                                linkId: escapeIri(linkId),\n                                                elementIri: elementIri,\n                                                linkConfigurationOut: linkConfigurationOut,\n                                                linkConfigurationIn: linkConfigurationIn,\n                                                navigateElementFilterOut: navigateElementFilterOut,\n                                                navigateElementFilterIn: navigateElementFilterIn,\n                                            });\n                                            return [4 /*yield*/, this.executeSparqlQuery(statsQuery)];\n                                        case 1:\n                                            bindings = _b.sent();\n                                            linkStats = responseHandler_1.getLinkStatistics(bindings);\n                                            if (linkStats) {\n                                                foundLinkStats.push(linkStats);\n                                            }\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); }))];\n                    case 2:\n                        _b.sent();\n                        return [2 /*return*/, foundLinkStats];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.linkElements = function (params) {\n        // for sparql we have rich filtering features and we just reuse filter.\n        return this.filter({\n            refElementId: params.elementId,\n            refElementLinkId: params.linkId,\n            linkDirection: params.direction,\n            limit: params.limit,\n            offset: params.offset,\n            languageCode: ''\n        });\n    };\n    SparqlDataProvider.prototype.filter = function (baseParams) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var params, types, blankFiltration, _a, _b, filterQuery, bindings, bindingsWithBlanks, elementModels, _c, _d;\n            var _this = this;\n            return tslib_1.__generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        params = tslib_1.__assign({}, baseParams);\n                        if (params.limit === undefined) {\n                            params.limit = 100;\n                        }\n                        types = this.querySingleElementTypes(params.refElementId && this.settings.linkConfigurations.length > 0\n                            ? params.refElementId : undefined);\n                        blankFiltration = this.options.acceptBlankNodes ? BlankNodes.filter(params) : undefined;\n                        if (!(blankFiltration && blankFiltration.results.bindings.length > 0)) return [3 /*break*/, 2];\n                        _a = responseHandler_1.getFilteredData;\n                        _b = [blankFiltration];\n                        return [4 /*yield*/, types];\n                    case 1: return [2 /*return*/, _a.apply(void 0, _b.concat([_e.sent(), this.linkByPredicate, this.openWorldLinks]))];\n                    case 2:\n                        filterQuery = this.createFilterQuery(params);\n                        return [4 /*yield*/, this.executeSparqlQuery(filterQuery)];\n                    case 3:\n                        bindings = _e.sent();\n                        if (!this.options.acceptBlankNodes) return [3 /*break*/, 5];\n                        return [4 /*yield*/, BlankNodes.updateFilterResults(bindings, function (blankQuery) { return _this.executeSparqlQuery(blankQuery); }, this.settings)];\n                    case 4:\n                        bindingsWithBlanks = _e.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        bindingsWithBlanks = bindings;\n                        _e.label = 6;\n                    case 6:\n                        _c = responseHandler_1.getFilteredData;\n                        _d = [bindingsWithBlanks];\n                        return [4 /*yield*/, types];\n                    case 7:\n                        elementModels = _c.apply(void 0, _d.concat([_e.sent(), this.linkByPredicate, this.openWorldLinks]));\n                        if (!this.options.prepareLabels) return [3 /*break*/, 9];\n                        return [4 /*yield*/, attachLabels(collections_1.objectValues(elementModels), this.options.prepareLabels)];\n                    case 8:\n                        _e.sent();\n                        _e.label = 9;\n                    case 9: return [2 /*return*/, elementModels];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.createFilterQuery = function (params) {\n        if (!params.refElementId && params.refElementLinkId) {\n            throw new Error('Cannot execute refElementLink filter without refElement');\n        }\n        var outerProjection = '?inst ?class ?label ?blankType';\n        var innerProjection = '?inst';\n        var refQueryPart = '';\n        var refQueryTypes = '';\n        if (params.refElementId) {\n            outerProjection += ' ?link ?direction';\n            innerProjection += ' ?link ?direction';\n            refQueryPart = this.createRefQueryPart({\n                elementId: params.refElementId,\n                linkId: params.refElementLinkId,\n                direction: params.linkDirection,\n            });\n            if (this.settings.linkConfigurations.length > 0) {\n                outerProjection += ' ?classAll';\n                refQueryTypes = this.settings.filterTypePattern.replace(/[?$]class\\b/g, '?classAll');\n            }\n        }\n        var elementTypePart = '';\n        if (params.elementTypeId) {\n            var elementTypeIri = escapeIri(params.elementTypeId);\n            elementTypePart = this.settings.filterTypePattern.replace(/[?$]class\\b/g, elementTypeIri);\n        }\n        var _a = this.settings, defaultPrefix = _a.defaultPrefix, fullTextSearch = _a.fullTextSearch, dataLabelProperty = _a.dataLabelProperty;\n        var textSearchPart = '';\n        if (params.text) {\n            innerProjection += ' ?score';\n            if (this.settings.fullTextSearch.extractLabel) {\n                textSearchPart += sparqlExtractLabel('?inst', '?extractedLabel');\n            }\n            textSearchPart = resolveTemplate(fullTextSearch.queryPattern, { text: params.text, dataLabelProperty: dataLabelProperty });\n        }\n        var blankNodes = this.options.acceptBlankNodes;\n        if (blankNodes) {\n            outerProjection += \" \" + BlankNodes.BLANK_NODE_QUERY_PARAMETERS;\n        }\n        return defaultPrefix + \"\\n            \" + fullTextSearch.prefix + \"\\n\\n        SELECT \" + outerProjection + \"\\n        WHERE {\\n            {\\n                SELECT DISTINCT \" + innerProjection + \" WHERE {\\n                    \" + elementTypePart + \"\\n                    \" + refQueryPart + \"\\n                    \" + textSearchPart + \"\\n                    \" + this.settings.filterAdditionalRestriction + \"\\n                }\\n                \" + (textSearchPart ? 'ORDER BY DESC(?score)' : '') + \"\\n                LIMIT \" + params.limit + \" OFFSET \" + params.offset + \"\\n            }\\n            \" + refQueryTypes + \"\\n            \" + resolveTemplate(this.settings.filterElementInfoPattern, { dataLabelProperty: dataLabelProperty }) + \"\\n            \" + (blankNodes ? BlankNodes.BLANK_NODE_QUERY : '') + \"\\n        } \" + (textSearchPart ? 'ORDER BY DESC(?score)' : '') + \"\\n        \";\n    };\n    SparqlDataProvider.prototype.executeSparqlQuery = function (query) {\n        var method = this.options.queryMethod ? this.options.queryMethod : SparqlQueryMethod.GET;\n        return executeSparqlQuery(this.options.endpointUrl, query, method, this.options.queryFunction);\n    };\n    SparqlDataProvider.prototype.executeSparqlConstruct = function (query) {\n        var method = this.options.queryMethod ? this.options.queryMethod : SparqlQueryMethod.GET;\n        return executeSparqlConstruct(this.options.endpointUrl, query, method, this.options.queryFunction);\n    };\n    SparqlDataProvider.prototype.createRefQueryPart = function (params) {\n        var elementId = params.elementId, linkId = params.linkId, direction = params.direction;\n        var _a = this.formatLinkUnion(elementId, linkId, direction, '?inst', '?inst', true), unionParts = _a.unionParts, usePredicatePart = _a.usePredicatePart;\n        if (usePredicatePart) {\n            var refElementIRI = escapeIri(params.elementId);\n            var refLinkType = void 0;\n            if (linkId) {\n                var link = this.linkById.get(linkId);\n                refLinkType = link && responseHandler_1.isDirectLink(link) ? escapeIri(link.path) : escapeIri(linkId);\n            }\n            var linkPattern = refLinkType || '?link';\n            var bindType = refLinkType ? \"BIND(\" + refLinkType + \" as ?link)\" : '';\n            // FILTER ISIRI is used to prevent blank nodes appearing in results\n            var blankFilter = this.options.acceptBlankNodes\n                ? 'FILTER(isIri(?inst) || isBlank(?inst))'\n                : 'FILTER(isIri(?inst))';\n            if (!direction || direction === 'out') {\n                unionParts.push(\"{ \" + refElementIRI + \" \" + linkPattern + \" ?inst BIND(\\\"out\\\" as ?direction) \" + bindType + \" \" + blankFilter + \" }\");\n            }\n            if (!direction || direction === 'in') {\n                unionParts.push(\"{ ?inst \" + linkPattern + \" \" + refElementIRI + \" BIND(\\\"in\\\" as ?direction) \" + bindType + \" \" + blankFilter + \" }\");\n            }\n        }\n        var resultPattern = unionParts.length === 0 ? 'FILTER(false)' : unionParts.join(\"\\nUNION\\n\");\n        var useAllLinksPattern = !linkId && this.settings.filterRefElementLinkPattern.length > 0;\n        if (useAllLinksPattern) {\n            resultPattern += \"\\n\" + this.settings.filterRefElementLinkPattern;\n        }\n        return resultPattern;\n    };\n    SparqlDataProvider.prototype.formatLinkUnion = function (refElementIri, linkIri, direction, outElementVar, inElementVar, bindDirection) {\n        var linkConfigurations = this.settings.linkConfigurations;\n        var fixedIri = escapeIri(refElementIri);\n        var unionParts = [];\n        var hasDirectLink = false;\n        for (var _i = 0, linkConfigurations_1 = linkConfigurations; _i < linkConfigurations_1.length; _i++) {\n            var link = linkConfigurations_1[_i];\n            if (linkIri && link.id !== linkIri) {\n                continue;\n            }\n            if (responseHandler_1.isDirectLink(link)) {\n                hasDirectLink = true;\n            }\n            else {\n                var linkType = escapeIri(link.id);\n                if (!direction || direction === 'out') {\n                    var path = this.formatLinkPath(link.path, fixedIri, outElementVar);\n                    var boundedDirection = bindDirection ? \"BIND(\\\"out\\\" as ?direction) \" : '';\n                    unionParts.push(\"{ \" + path + \" BIND(\" + linkType + \" as ?link) \" + boundedDirection + \"}\");\n                }\n                if (!direction || direction === 'in') {\n                    var path = this.formatLinkPath(link.path, inElementVar, fixedIri);\n                    var boundedDirection = bindDirection ? \"BIND(\\\"in\\\" as ?direction) \" : '';\n                    unionParts.push(\"{ \" + path + \" BIND(\" + linkType + \" as ?link) \" + boundedDirection + \"}\");\n                }\n            }\n        }\n        var usePredicatePart = this.openWorldLinks || hasDirectLink;\n        return { unionParts: unionParts, usePredicatePart: usePredicatePart };\n    };\n    SparqlDataProvider.prototype.formatLinkLinks = function () {\n        var unionParts = [];\n        var hasDirectLink = false;\n        for (var _i = 0, _a = this.settings.linkConfigurations; _i < _a.length; _i++) {\n            var link = _a[_i];\n            if (responseHandler_1.isDirectLink(link)) {\n                hasDirectLink = true;\n            }\n            else {\n                var linkType = escapeIri(link.id);\n                unionParts.push(\"{ \" + this.formatLinkPath(link.path, '?source', '?target') + \" BIND(\" + linkType + \" as ?type) }\");\n            }\n        }\n        var usePredicatePart = this.openWorldLinks || hasDirectLink;\n        if (usePredicatePart) {\n            unionParts.push(\"{ ?source ?type ?target }\");\n        }\n        return unionParts.join('\\nUNION\\n');\n    };\n    SparqlDataProvider.prototype.formatLinkPath = function (path, source, target) {\n        return path.replace(/[?$]source\\b/g, source).replace(/[?$]target\\b/g, target);\n    };\n    SparqlDataProvider.prototype.formatPropertyInfo = function () {\n        var unionParts = [];\n        var hasDirectProperty = false;\n        for (var _i = 0, _a = this.settings.propertyConfigurations; _i < _a.length; _i++) {\n            var property = _a[_i];\n            if (responseHandler_1.isDirectProperty(property)) {\n                hasDirectProperty = true;\n            }\n            else {\n                var propType = escapeIri(property.id);\n                var formatted = this.formatPropertyPath(property.path, '?inst', '?propValue');\n                unionParts.push(\"{ \" + formatted + \" BIND(\" + propType + \" as ?propType) }\");\n            }\n        }\n        var usePredicatePart = this.openWorldProperties || hasDirectProperty;\n        if (usePredicatePart) {\n            unionParts.push(\"{ ?inst ?propType ?propValue }\");\n        }\n        return unionParts.join('\\nUNION\\n');\n    };\n    SparqlDataProvider.prototype.formatPropertyPath = function (path, subject, value) {\n        return path.replace(/[?$]inst\\b/g, subject).replace(/[?$]value\\b/g, value);\n    };\n    SparqlDataProvider.prototype.querySingleElementTypes = function (element) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var types;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.queryManyElementTypes(element ? [element] : [])];\n                    case 1:\n                        types = _a.sent();\n                        return [2 /*return*/, types.get(element)];\n                }\n            });\n        });\n    };\n    SparqlDataProvider.prototype.queryManyElementTypes = function (elements) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var filterTypePattern, ids, queryTemplate, query, response, blankResponse;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (elements.length === 0) {\n                            return [2 /*return*/, new Map()];\n                        }\n                        filterTypePattern = this.settings.filterTypePattern;\n                        ids = elements\n                            .filter(function (iri) { return !BlankNodes.isEncodedBlank(iri); })\n                            .map(function (iri) { return \"(\" + escapeIri(iri) + \")\"; }).join(' ');\n                        queryTemplate = \"SELECT ?inst ?class { VALUES(?inst) { ${ids} } ${filterTypePattern} }\";\n                        query = resolveTemplate(queryTemplate, { ids: ids, filterTypePattern: filterTypePattern });\n                        return [4 /*yield*/, this.executeSparqlQuery(query)];\n                    case 1:\n                        response = _a.sent();\n                        if (this.options.acceptBlankNodes && elements.find(BlankNodes.isEncodedBlank)) {\n                            blankResponse = BlankNodes.getElementTypes(elements);\n                            response = responseHandler_1.prependAdditionalBindings(response, blankResponse);\n                        }\n                        return [2 /*return*/, responseHandler_1.getElementTypes(response)];\n                }\n            });\n        });\n    };\n    return SparqlDataProvider;\n}());\nexports.SparqlDataProvider = SparqlDataProvider;\nfunction attachLabels(items, fetchLabels) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var resources, _i, items_1, item, labels, _a, items_2, item;\n        return tslib_1.__generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    resources = new Set();\n                    for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\n                        item = items_1[_i];\n                        if (BlankNodes.isEncodedBlank(item.id)) {\n                            continue;\n                        }\n                        resources.add(item.id);\n                    }\n                    return [4 /*yield*/, fetchLabels(resources)];\n                case 1:\n                    labels = _b.sent();\n                    for (_a = 0, items_2 = items; _a < items_2.length; _a++) {\n                        item = items_2[_a];\n                        if (labels.has(item.id)) {\n                            item.label = { values: labels.get(item.id) };\n                        }\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction prepareElementImages(fetchImages, elementsInfo) {\n    return fetchImages(elementsInfo).then(function (images) {\n        for (var iri in images) {\n            if (Object.prototype.hasOwnProperty.call(images, iri) && elementsInfo[iri]) {\n                elementsInfo[iri].image = images[iri];\n            }\n        }\n    });\n}\nfunction resolveTemplate(template, values) {\n    var result = template;\n    for (var replaceKey in values) {\n        if (!values.hasOwnProperty(replaceKey)) {\n            continue;\n        }\n        var replaceValue = values[replaceKey];\n        if (replaceValue) {\n            result = result.replace(new RegExp('\\\\${' + replaceKey + '}', 'g'), replaceValue);\n        }\n    }\n    return result;\n}\nfunction executeSparqlQuery(endpoint, query, method, queryFunction) {\n    var internalQuery;\n    if (method === SparqlQueryMethod.GET) {\n        internalQuery = queryFunction({\n            url: appendQueryParams(endpoint, { query: query }),\n            headers: {\n                'Accept': 'application/sparql-results+json',\n            },\n            method: 'GET',\n        });\n    }\n    else {\n        internalQuery = queryFunction({\n            url: endpoint,\n            body: query,\n            headers: {\n                'Accept': 'application/sparql-results+json',\n                'Content-Type': 'application/sparql-query; charset=UTF-8',\n            },\n            method: 'POST',\n        });\n    }\n    return internalQuery.then(function (response) {\n        if (response.ok) {\n            return response.json();\n        }\n        else {\n            var error = new Error(response.statusText);\n            error.response = response;\n            throw error;\n        }\n    });\n}\nexports.executeSparqlQuery = executeSparqlQuery;\nfunction executeSparqlConstruct(endpoint, query, method, queryFunction) {\n    var internalQuery;\n    if (method === SparqlQueryMethod.GET) {\n        internalQuery = queryFunction({\n            url: appendQueryParams(endpoint, { query: query }),\n            headers: {\n                'Accept': 'text/turtle',\n            },\n            method: 'GET',\n        });\n    }\n    else {\n        internalQuery = queryFunction({\n            url: endpoint,\n            body: query,\n            headers: {\n                'Accept': 'text/turtle',\n                'Content-Type': 'application/sparql-query; charset=UTF-8',\n            },\n            method: 'POST',\n        });\n    }\n    return internalQuery.then(function (response) {\n        if (response.ok) {\n            return response.text();\n        }\n        else {\n            var error = new Error(response.statusText);\n            error.response = response;\n            throw error;\n        }\n    }).then(turtle_1.parseTurtleText);\n}\nexports.executeSparqlConstruct = executeSparqlConstruct;\nfunction appendQueryParams(endpoint, queryParams) {\n    if (queryParams === void 0) { queryParams = {}; }\n    var initialSeparator = endpoint.indexOf('?') < 0 ? '?' : '&';\n    var additionalParams = initialSeparator + Object.keys(queryParams)\n        .map(function (key) { return key + \"=\" + encodeURIComponent(queryParams[key]); })\n        .join('&');\n    return endpoint + additionalParams;\n}\nfunction queryInternal(params) {\n    return fetch(params.url, {\n        method: params.method,\n        body: params.body,\n        credentials: 'same-origin',\n        mode: 'cors',\n        cache: 'default',\n        headers: params.headers,\n    });\n}\nfunction sparqlExtractLabel(subject, label) {\n    return \"\\n        BIND ( str( \" + subject + \" ) as ?uriStr)\\n        BIND ( strafter(?uriStr, \\\"#\\\") as ?label3)\\n        BIND ( strafter(strafter(?uriStr, \\\"//\\\"), \\\"/\\\") as ?label6)\\n        BIND ( strafter(?label6, \\\"/\\\") as ?label5)\\n        BIND ( strafter(?label5, \\\"/\\\") as ?label4)\\n        BIND (if (?label3 != \\\"\\\", ?label3,\\n            if (?label4 != \\\"\\\", ?label4,\\n            if (?label5 != \\\"\\\", ?label5, ?label6))) as \" + label + \")\\n    \";\n}\nfunction escapeIri(iri) {\n    if (typeof iri !== 'string') {\n        throw new Error(\"Cannot escape IRI of type \\\"\" + typeof iri + \"\\\"\");\n    }\n    return \"<\" + iri + \">\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar sparqlModels_1 = require(\"./sparqlModels\");\nvar model_1 = require(\"../model\");\nvar collections_1 = require(\"../../viewUtils/collections\");\nvar LABEL_URI = 'http://www.w3.org/2000/01/rdf-schema#label';\nvar RDF_TYPE_URI = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type';\nvar EMPTY_MAP = new Map();\nfunction getClassTree(response) {\n    var treeNodes = createClassMap(response.results.bindings);\n    var allNodes = [];\n    // createClassMap ensures we get both elements and parents and we can use treeNodes[treeNode.parent] safely\n    treeNodes.forEach(function (node) {\n        allNodes.push(node);\n        node.parents.forEach(function (parent) {\n            treeNodes.get(parent).children.push(node);\n        });\n        node.parents = undefined;\n    });\n    var withoutCycles = breakCyclesAndCalculateCounts(allNodes);\n    var leafs = new Set();\n    for (var _i = 0, withoutCycles_1 = withoutCycles; _i < withoutCycles_1.length; _i++) {\n        var node = withoutCycles_1[_i];\n        for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n            var child = _b[_a];\n            leafs.add(child.id);\n        }\n    }\n    var tree = withoutCycles.filter(function (node) { return !leafs.has(node.id); });\n    return tree;\n}\nexports.getClassTree = getClassTree;\nfunction flattenClassTree(classTree) {\n    var all = [];\n    var visitClasses = function (classes) {\n        for (var _i = 0, classes_1 = classes; _i < classes_1.length; _i++) {\n            var model = classes_1[_i];\n            all.push(model);\n            visitClasses(model.children);\n        }\n    };\n    visitClasses(classTree);\n    return all;\n}\nexports.flattenClassTree = flattenClassTree;\nfunction createClassMap(bindings) {\n    var treeNodes = new Map();\n    for (var _i = 0, bindings_1 = bindings; _i < bindings_1.length; _i++) {\n        var binding = bindings_1[_i];\n        if (!sparqlModels_1.isRdfIri(binding.class)) {\n            continue;\n        }\n        var classIri = binding.class.value;\n        var node = treeNodes.get(classIri);\n        if (!node) {\n            node = createEmptyModel(classIri);\n            treeNodes.set(classIri, node);\n        }\n        if (binding.label) {\n            appendLabel(node.label, getLocalizedString(binding.label));\n        }\n        if (binding.parent) {\n            var parentIri = binding.parent.value;\n            node.parents.add(parentIri);\n        }\n        if (binding.instcount) {\n            node.count = getInstCount(binding.instcount);\n        }\n    }\n    // ensuring parent will always be there\n    for (var _a = 0, bindings_2 = bindings; _a < bindings_2.length; _a++) {\n        var binding = bindings_2[_a];\n        if (binding.parent) {\n            var parentIri = binding.parent.value;\n            if (!treeNodes.has(parentIri)) {\n                treeNodes.set(parentIri, createEmptyModel(parentIri));\n            }\n        }\n    }\n    function createEmptyModel(iri) {\n        return {\n            id: iri,\n            children: [],\n            label: { values: [] },\n            count: undefined,\n            parents: new Set(),\n        };\n    }\n    return treeNodes;\n}\nfunction breakCyclesAndCalculateCounts(tree) {\n    var visiting = new Set();\n    function reduceChildren(acc, node) {\n        if (visiting.has(node.id)) {\n            // prevent unbounded recursion\n            return acc;\n        }\n        // no more to count\n        if (!node.children) {\n            return;\n        }\n        // ensure all children have their counts completed;\n        visiting.add(node.id);\n        node.children = node.children.reduce(reduceChildren, []);\n        visiting.delete(node.id);\n        // we have to preserve no data here. If nor element nor childs have no count information,\n        // we just pass undefined upwards.\n        var childCount;\n        node.children.forEach(function (_a) {\n            var count = _a.count;\n            if (count === undefined) {\n                return;\n            }\n            childCount = childCount === undefined ? count : childCount + count;\n        });\n        if (childCount !== undefined) {\n            node.count = node.count === undefined ? childCount : node.count + childCount;\n        }\n        acc.push(node);\n        return acc;\n    }\n    return tree.reduce(reduceChildren, []);\n}\nfunction getClassInfo(response) {\n    var classes = {};\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (!binding.class) {\n            continue;\n        }\n        var id = binding.class.value;\n        var model = classes[id];\n        if (model) {\n            appendLabel(model.label, getLocalizedString(binding.label));\n            var instanceCount = getInstCount(binding.instcount);\n            if (instanceCount !== undefined) {\n                model.count = Math.max(model.count, instanceCount);\n            }\n        }\n        else {\n            var label = getLocalizedString(binding.label);\n            classes[id] = {\n                id: id,\n                children: [],\n                label: { values: label ? [label] : [] },\n                count: getInstCount(binding.instcount),\n            };\n        }\n    }\n    var classesList = [];\n    for (var id in classes) {\n        if (!classes.hasOwnProperty(id)) {\n            continue;\n        }\n        var model = classes[id];\n        classesList.push(model);\n    }\n    return classesList;\n}\nexports.getClassInfo = getClassInfo;\nfunction getPropertyInfo(response) {\n    var models = {};\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var sProperty = _a[_i];\n        var sPropertyTypeId = sProperty.property.value;\n        if (models[sPropertyTypeId]) {\n            if (sProperty.label) {\n                var label = models[sPropertyTypeId].label;\n                if (label.values.length === 1 && !label.values[0].language) {\n                    label.values = [];\n                }\n                label.values.push(getLocalizedString(sProperty.label));\n            }\n        }\n        else {\n            models[sPropertyTypeId] = getPropertyModel(sProperty);\n        }\n    }\n    return models;\n}\nexports.getPropertyInfo = getPropertyInfo;\nfunction getLinkTypes(response) {\n    var sInst = response.results.bindings;\n    var linkTypes = [];\n    var linkTypesMap = {};\n    for (var _i = 0, sInst_1 = sInst; _i < sInst_1.length; _i++) {\n        var sLink = sInst_1[_i];\n        var sInstTypeId = sLink.link.value;\n        if (linkTypesMap[sInstTypeId]) {\n            if (sLink.label) {\n                var label = linkTypesMap[sInstTypeId].label;\n                if (label.values.length === 1 && !label.values[0].language) {\n                    label.values = [];\n                }\n                label.values.push(getLocalizedString(sLink.label));\n            }\n        }\n        else {\n            linkTypesMap[sInstTypeId] = getLinkTypeInfo(sLink);\n            linkTypes.push(linkTypesMap[sInstTypeId]);\n        }\n    }\n    return linkTypes;\n}\nexports.getLinkTypes = getLinkTypes;\nfunction triplesToElementBinding(triples) {\n    var map = {};\n    var convertedResponse = {\n        head: {\n            vars: ['inst', 'class', 'label', 'blankType', 'propType', 'propValue'],\n        },\n        results: {\n            bindings: [],\n        },\n    };\n    for (var _i = 0, triples_1 = triples; _i < triples_1.length; _i++) {\n        var triple = triples_1[_i];\n        var trippleId = triple.subject.value;\n        if (!map[trippleId]) {\n            map[trippleId] = createAndPushBinding(triple);\n        }\n        if (triple.predicate.value === LABEL_URI && sparqlModels_1.isRdfLiteral(triple.object)) { // Label\n            if (map[trippleId].label) {\n                map[trippleId] = createAndPushBinding(triple);\n            }\n            map[trippleId].label = triple.object;\n        }\n        else if ( // Class\n        triple.predicate.value === RDF_TYPE_URI &&\n            sparqlModels_1.isRdfIri(triple.object) && sparqlModels_1.isRdfIri(triple.predicate)) {\n            if (map[trippleId].class) {\n                map[trippleId] = createAndPushBinding(triple);\n            }\n            map[trippleId].class = triple.object;\n        }\n        else if (!sparqlModels_1.isRdfBlank(triple.object) && sparqlModels_1.isRdfIri(triple.predicate)) { // Property\n            if (map[trippleId].propType) {\n                map[trippleId] = createAndPushBinding(triple);\n            }\n            map[trippleId].propType = triple.predicate;\n            map[trippleId].propValue = triple.object;\n        }\n    }\n    function createAndPushBinding(tripple) {\n        var binding = {\n            inst: tripple.subject,\n        };\n        convertedResponse.results.bindings.push(binding);\n        return binding;\n    }\n    return convertedResponse;\n}\nexports.triplesToElementBinding = triplesToElementBinding;\nfunction getElementsInfo(response, types, propertyByPredicate, openWorldProperties) {\n    if (types === void 0) { types = EMPTY_MAP; }\n    if (propertyByPredicate === void 0) { propertyByPredicate = EMPTY_MAP; }\n    if (openWorldProperties === void 0) { openWorldProperties = true; }\n    var instancesMap = {};\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (!sparqlModels_1.isRdfIri(binding.inst)) {\n            continue;\n        }\n        var iri = binding.inst.value;\n        var model = instancesMap[iri];\n        if (!model) {\n            model = emptyElementInfo(iri);\n            instancesMap[iri] = model;\n        }\n        enrichElement(model, binding);\n    }\n    if (!openWorldProperties || propertyByPredicate.size > 0) {\n        for (var iri in instancesMap) {\n            if (!Object.hasOwnProperty.call(instancesMap, iri)) {\n                continue;\n            }\n            var model = instancesMap[iri];\n            var modelTypes = types.get(model.id);\n            model.properties = mapPropertiesByConfig(model, modelTypes, propertyByPredicate, openWorldProperties);\n        }\n    }\n    return instancesMap;\n}\nexports.getElementsInfo = getElementsInfo;\nfunction mapPropertiesByConfig(model, modelTypes, propertyByPredicate, openWorldProperties) {\n    var mapped = {};\n    for (var propertyIri in model.properties) {\n        if (!Object.hasOwnProperty.call(model.properties, propertyIri)) {\n            continue;\n        }\n        var properties = propertyByPredicate.get(propertyIri);\n        if (properties && properties.length > 0) {\n            for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n                var property = properties_1[_i];\n                if (typeMatchesDomain(property, modelTypes)) {\n                    mapped[property.id] = model.properties[propertyIri];\n                }\n            }\n        }\n        else if (openWorldProperties) {\n            mapped[propertyIri] = model.properties[propertyIri];\n        }\n    }\n    return mapped;\n}\nfunction enrichElementsWithImages(response, elementsInfo) {\n    var respElements = response.results.bindings;\n    for (var _i = 0, respElements_1 = respElements; _i < respElements_1.length; _i++) {\n        var respEl = respElements_1[_i];\n        var elementInfo = elementsInfo[respEl.inst.value];\n        if (elementInfo) {\n            elementInfo.image = respEl.image.value;\n        }\n    }\n}\nexports.enrichElementsWithImages = enrichElementsWithImages;\nfunction getElementTypes(response) {\n    var types = new Map();\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (sparqlModels_1.isRdfIri(binding.inst) && sparqlModels_1.isRdfIri(binding.class)) {\n            var element = binding.inst.value;\n            var type = binding.class.value;\n            collections_1.getOrCreateSetInMap(types, element).add(type);\n        }\n    }\n    return types;\n}\nexports.getElementTypes = getElementTypes;\nfunction getLinksInfo(response, types, linkByPredicateType, openWorldLinks) {\n    if (types === void 0) { types = EMPTY_MAP; }\n    if (linkByPredicateType === void 0) { linkByPredicateType = EMPTY_MAP; }\n    if (openWorldLinks === void 0) { openWorldLinks = true; }\n    var sparqlLinks = response.results.bindings;\n    var links = new collections_1.HashMap(model_1.hashLink, model_1.sameLink);\n    for (var _i = 0, sparqlLinks_1 = sparqlLinks; _i < sparqlLinks_1.length; _i++) {\n        var binding = sparqlLinks_1[_i];\n        var model = {\n            sourceId: binding.source.value,\n            linkTypeId: binding.type.value,\n            targetId: binding.target.value,\n            properties: {},\n        };\n        if (links.has(model)) {\n            // this can only happen due to error in sparql or when merging properties\n            if (binding.propType) {\n                var existing = links.get(model);\n                mergeProperties(existing.properties, binding.propType, binding.propValue);\n            }\n        }\n        else {\n            if (binding.propType) {\n                mergeProperties(model.properties, binding.propType, binding.propValue);\n            }\n            var linkConfigs = linkByPredicateType.get(model.linkTypeId);\n            if (linkConfigs && linkConfigs.length > 0) {\n                for (var _a = 0, linkConfigs_1 = linkConfigs; _a < linkConfigs_1.length; _a++) {\n                    var linkConfig = linkConfigs_1[_a];\n                    if (typeMatchesDomain(linkConfig, types.get(model.sourceId))) {\n                        var mappedModel = isDirectLink(linkConfig)\n                            ? tslib_1.__assign(tslib_1.__assign({}, model), { linkTypeId: linkConfig.id }) : model;\n                        links.set(mappedModel, mappedModel);\n                    }\n                }\n            }\n            else if (openWorldLinks) {\n                links.set(model, model);\n            }\n        }\n    }\n    var linkArray = [];\n    links.forEach(function (value) { return linkArray.push(value); });\n    return linkArray;\n}\nexports.getLinksInfo = getLinksInfo;\nfunction getLinksTypesOf(response) {\n    var sparqlLinkTypes = response.results.bindings.filter(function (b) { return !sparqlModels_1.isRdfBlank(b.link); });\n    return sparqlLinkTypes.map(function (sLink) { return getLinkCount(sLink); });\n}\nexports.getLinksTypesOf = getLinksTypesOf;\nfunction getLinksTypeIds(response, linkByPredicateType, openWorldLinks) {\n    if (linkByPredicateType === void 0) { linkByPredicateType = EMPTY_MAP; }\n    if (openWorldLinks === void 0) { openWorldLinks = true; }\n    var linkTypes = [];\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (!sparqlModels_1.isRdfIri(binding.link)) {\n            continue;\n        }\n        var linkConfigs = linkByPredicateType.get(binding.link.value);\n        if (linkConfigs && linkConfigs.length > 0) {\n            for (var _b = 0, linkConfigs_2 = linkConfigs; _b < linkConfigs_2.length; _b++) {\n                var linkConfig = linkConfigs_2[_b];\n                var mappedLinkType = isDirectLink(linkConfig)\n                    ? linkConfig.id : binding.link.value;\n                linkTypes.push(mappedLinkType);\n            }\n        }\n        else if (openWorldLinks) {\n            linkTypes.push(binding.link.value);\n        }\n    }\n    return linkTypes;\n}\nexports.getLinksTypeIds = getLinksTypeIds;\nfunction getLinkStatistics(response) {\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (sparqlModels_1.isRdfIri(binding.link)) {\n            return getLinkCount(binding);\n        }\n    }\n    return undefined;\n}\nexports.getLinkStatistics = getLinkStatistics;\nfunction getFilteredData(response, sourceTypes, linkByPredicateType, openWorldLinks) {\n    if (linkByPredicateType === void 0) { linkByPredicateType = EMPTY_MAP; }\n    if (openWorldLinks === void 0) { openWorldLinks = true; }\n    var instancesMap = {};\n    var resultTypes = new Map();\n    var outPredicates = new Map();\n    var inPredicates = new Map();\n    for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n        var binding = _a[_i];\n        if (!sparqlModels_1.isRdfIri(binding.inst) && !sparqlModels_1.isRdfBlank(binding.inst)) {\n            continue;\n        }\n        var iri = binding.inst.value;\n        var model = instancesMap[iri];\n        if (!model) {\n            model = emptyElementInfo(iri);\n            instancesMap[iri] = model;\n        }\n        enrichElement(model, binding);\n        if (sparqlModels_1.isRdfIri(binding.classAll)) {\n            collections_1.getOrCreateSetInMap(resultTypes, iri).add(binding.classAll.value);\n        }\n        if (!openWorldLinks && binding.link && binding.direction) {\n            var predicates = binding.direction.value === 'out' ? outPredicates : inPredicates;\n            collections_1.getOrCreateSetInMap(predicates, model.id).add(binding.link.value);\n        }\n    }\n    if (!openWorldLinks) {\n        for (var _b = 0, _c = Object.keys(instancesMap); _b < _c.length; _b++) {\n            var id = _c[_b];\n            var model = instancesMap[id];\n            var targetTypes = resultTypes.get(model.id);\n            var doesMatchesDomain = (matchesDomainForLink(sourceTypes, outPredicates.get(model.id), linkByPredicateType) &&\n                matchesDomainForLink(targetTypes, inPredicates.get(model.id), linkByPredicateType));\n            if (!doesMatchesDomain) {\n                delete instancesMap[id];\n            }\n        }\n    }\n    return instancesMap;\n}\nexports.getFilteredData = getFilteredData;\nfunction matchesDomainForLink(types, predicates, linkByPredicateType) {\n    if (!predicates) {\n        return true;\n    }\n    var hasMatch = false;\n    predicates.forEach(function (predicate) {\n        var matched = linkByPredicateType.get(predicate);\n        if (matched) {\n            for (var _i = 0, matched_1 = matched; _i < matched_1.length; _i++) {\n                var link = matched_1[_i];\n                if (typeMatchesDomain(link, types)) {\n                    hasMatch = true;\n                }\n            }\n        }\n    });\n    return hasMatch;\n}\nfunction isDirectLink(link) {\n    // link configuration is path-based if includes any variables\n    var pathBased = /[?$][a-zA-Z]+\\b/.test(link.path);\n    return !pathBased;\n}\nexports.isDirectLink = isDirectLink;\nfunction isDirectProperty(property) {\n    // property configuration is path-based if includes any variables\n    var pathBased = /[?$][a-zA-Z]+\\b/.test(property.path);\n    return !pathBased;\n}\nexports.isDirectProperty = isDirectProperty;\nfunction typeMatchesDomain(config, types) {\n    if (!config.domain || config.domain.length === 0) {\n        return true;\n    }\n    else if (!types) {\n        return false;\n    }\n    else {\n        for (var _i = 0, _a = config.domain; _i < _a.length; _i++) {\n            var type = _a[_i];\n            if (types.has(type)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n/**\n * Modifies properties with merging with new values, couls be new peroperty or new value for existing properties.\n * @param properties\n * @param propType\n * @param propValue\n */\nfunction mergeProperties(properties, propType, propValue) {\n    var property = properties[propType.value];\n    if (sparqlModels_1.isRdfIri(propValue)) {\n        if (!property) {\n            property = { type: 'uri', values: [] };\n        }\n        if (model_1.isIriProperty(property) && property.values.every(function (_a) {\n            var value = _a.value;\n            return value !== propValue.value;\n        })) {\n            property.values = tslib_1.__spreadArrays(property.values, [propValue]);\n        }\n    }\n    else if (sparqlModels_1.isRdfLiteral(propValue)) {\n        if (!property) {\n            property = { type: 'string', values: [] };\n        }\n        var propertyValue_1 = getLocalizedString(propValue);\n        if (model_1.isLiteralProperty(property) && property.values.every(function (value) { return !isLocalizedEqual(value, propertyValue_1); })) {\n            property.values = tslib_1.__spreadArrays(property.values, [propertyValue_1]);\n        }\n    }\n    properties[propType.value] = property;\n}\nfunction enrichElement(element, sInst) {\n    if (!element) {\n        return;\n    }\n    if (sInst.label) {\n        var label_1 = getLocalizedString(sInst.label);\n        if (element.label.values.every(function (value) { return !isLocalizedEqual(value, label_1); })) {\n            element.label.values.push(label_1);\n        }\n    }\n    if (sInst.class && element.types.indexOf(sInst.class.value) < 0) {\n        element.types.push(sInst.class.value);\n    }\n    if (sInst.propType && sInst.propType.value !== LABEL_URI) {\n        mergeProperties(element.properties, sInst.propType, sInst.propValue);\n    }\n}\nexports.enrichElement = enrichElement;\nfunction appendLabel(container, newLabel) {\n    if (!newLabel) {\n        return;\n    }\n    for (var _i = 0, _a = container.values; _i < _a.length; _i++) {\n        var existing = _a[_i];\n        if (isLocalizedEqual(existing, newLabel)) {\n            return;\n        }\n    }\n    container.values.push(newLabel);\n}\nfunction isLocalizedEqual(left, right) {\n    return left.language === right.language && left.value === right.value;\n}\nfunction getLocalizedString(label) {\n    if (label) {\n        return {\n            value: label.value,\n            language: label['xml:lang'],\n            datatype: label.datatype ? { value: label.datatype } : undefined,\n        };\n    }\n    else {\n        return undefined;\n    }\n}\nexports.getLocalizedString = getLocalizedString;\nfunction getInstCount(instcount) {\n    return (instcount ? +instcount.value : undefined);\n}\nexports.getInstCount = getInstCount;\nfunction getPropertyModel(node) {\n    var label = getLocalizedString(node.label);\n    return {\n        id: node.property.value,\n        label: { values: label ? [label] : [] },\n    };\n}\nexports.getPropertyModel = getPropertyModel;\nfunction getLinkCount(sLinkType) {\n    return {\n        id: sLinkType.link.value,\n        inCount: getInstCount(sLinkType.inCount),\n        outCount: getInstCount(sLinkType.outCount),\n    };\n}\nexports.getLinkCount = getLinkCount;\nfunction emptyElementInfo(id) {\n    var elementInfo = {\n        id: id,\n        label: { values: [] },\n        types: [],\n        properties: {},\n    };\n    return elementInfo;\n}\nexports.emptyElementInfo = emptyElementInfo;\nfunction getLinkTypeInfo(sLinkInfo) {\n    if (!sLinkInfo) {\n        return undefined;\n    }\n    var label = getLocalizedString(sLinkInfo.label);\n    return {\n        id: sLinkInfo.link.value,\n        label: { values: label ? [label] : [] },\n        count: getInstCount(sLinkInfo.instcount),\n    };\n}\nexports.getLinkTypeInfo = getLinkTypeInfo;\nfunction prependAdditionalBindings(base, additional) {\n    if (!additional) {\n        return base;\n    }\n    return {\n        head: { vars: base.head.vars },\n        results: {\n            bindings: tslib_1.__spreadArrays(additional.results.bindings, base.results.bindings)\n        },\n    };\n}\nexports.prependAdditionalBindings = prependAdditionalBindings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nexports.RDFSettings = {\n    linkConfigurations: [],\n    openWorldLinks: false,\n    propertyConfigurations: [],\n    openWorldProperties: false,\n    linksInfoQuery: \"SELECT ?source ?type ?target\\n            WHERE {\\n                ${linkConfigurations}\\n                VALUES (?source) {${ids}}\\n                VALUES (?target) {${ids}}\\n            }\",\n    defaultPrefix: '',\n    schemaLabelProperty: 'rdfs:label',\n    dataLabelProperty: 'rdfs:label',\n    fullTextSearch: {\n        prefix: '',\n        queryPattern: \"\",\n    },\n    classTreeQuery: \"\",\n    classInfoQuery: \"SELECT ?class ?label ?instcount WHERE {\\n    VALUES(?class) {${ids}}\\n    OPTIONAL { ?class ${schemaLabelProperty} ?label }\\n    BIND(\\\"\\\" as ?instcount)\\n}\",\n    linkTypesQuery: \"SELECT DISTINCT ?link ?instcount ?label WHERE {\\n    ${linkTypesPattern}\\n    OPTIONAL { ?link ${schemaLabelProperty} ?label }\\n}\",\n    linkTypesPattern: \"\",\n    linkTypesInfoQuery: \"SELECT ?link ?label WHERE {\\n    VALUES(?link) {${ids}}\\n    OPTIONAL { ?link ${schemaLabelProperty} ?label }\\n}\",\n    propertyInfoQuery: \"SELECT ?property ?label WHERE {\\n    VALUES(?property) {${ids}}\\n    OPTIONAL { ?property ${schemaLabelProperty} ?label }\\n}\",\n    elementInfoQuery: \"\",\n    imageQueryPattern: \"\",\n    linkTypesOfQuery: \"\",\n    linkTypesStatisticsQuery: \"\",\n    filterRefElementLinkPattern: '',\n    filterTypePattern: \"\",\n    filterAdditionalRestriction: \"\",\n    filterElementInfoPattern: \"\",\n};\nvar WikidataSettingsOverride = {\n    defaultPrefix: \"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\n PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\n PREFIX wdt: <http://www.wikidata.org/prop/direct/>\\n PREFIX wd: <http://www.wikidata.org/entity/>\\n PREFIX owl:  <http://www.w3.org/2002/07/owl#>\\n\\n\",\n    schemaLabelProperty: 'rdfs:label',\n    dataLabelProperty: 'rdfs:label',\n    fullTextSearch: {\n        prefix: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>' + '\\n',\n        queryPattern: \"\\n              ?inst rdfs:label ?searchLabel.\\n              SERVICE bds:search {\\n                     ?searchLabel bds:search \\\"${text}*\\\" ;\\n                                  bds:minRelevance '0.5' ;\\n                                  bds:matchAllTerms 'true' .\\n              }\\n              BIND(IF(STRLEN(?strInst) > 33,\\n                            0-<http://www.w3.org/2001/XMLSchema#integer>(SUBSTR(?strInst, 33)),\\n                            -10000) as ?score)\\n            \",\n    },\n    classTreeQuery: \"\\n            SELECT distinct ?class ?label ?parent WHERE {\\n              ?class rdfs:label ?label.\\n              { ?class wdt:P279 wd:Q35120. }\\n                UNION\\n              { ?parent wdt:P279 wd:Q35120.\\n                ?class wdt:P279 ?parent. }\\n                UNION\\n              { ?parent wdt:P279/wdt:P279 wd:Q35120.\\n                ?class wdt:P279 ?parent. }\\n            }\\n        \",\n    // todo: think more, maybe add a limit here?\n    linkTypesPattern: \"?link wdt:P279* wd:Q18616576.\\n    BIND(0 as ?instcount)\\n\",\n    elementInfoQuery: \"\\n        CONSTRUCT {\\n            ?inst rdf:type ?class .\\n            ?inst rdfs:label ?label .\\n            ?inst ?propType ?propValue.\\n        } WHERE {\\n            VALUES (?inst) {${ids}}\\n            OPTIONAL {\\n                ?inst wdt:P31 ?class\\n            }\\n            OPTIONAL {?inst rdfs:label ?label}\\n            OPTIONAL {\\n                ${propertyConfigurations}\\n                FILTER (isLiteral(?propValue))\\n            }\\n        }\\n    \",\n    imageQueryPattern: \" { ?inst ?linkType ?fullImage } union { ?inst wdt:P163/wdt:P18 ?fullImage }\\n                BIND(CONCAT(\\\"https://commons.wikimedia.org/w/thumb.php?f=\\\",\\n                    STRAFTER(STR(?fullImage), \\\"Special:FilePath/\\\"), \\\"&w=200\\\") AS ?image)\",\n    linkTypesOfQuery: \"\\n        SELECT DISTINCT ?link\\n        WHERE {\\n            ${linkConfigurations}\\n            ?claim <http://wikiba.se/ontology#directClaim> ?link .\\n        }\\n    \",\n    linkTypesStatisticsQuery: \"\\n        SELECT (${linkId} as ?link) (COUNT(?outObject) AS ?outCount) (COUNT(?inObject) AS ?inCount)\\n        WHERE {\\n            {\\n                {\\n                    SELECT DISTINCT ?outObject WHERE {\\n                        ${linkConfigurationOut}\\n                        FILTER(ISIRI(?outObject))\\n                        ?outObject ?someprop ?someobj.\\n                    }\\n                    LIMIT 101\\n                }\\n            } UNION {\\n                {\\n                    SELECT DISTINCT ?inObject WHERE {\\n                        ${linkConfigurationIn}\\n                        FILTER(ISIRI(?inObject))\\n                        ?inObject ?someprop ?someobj.\\n                    }\\n                    LIMIT 101\\n                }\\n            }\\n        }\\n    \",\n    filterRefElementLinkPattern: '?claim <http://wikiba.se/ontology#directClaim> ?link .',\n    filterTypePattern: \"?inst wdt:P31 ?instType. ?instType wdt:P279* ?class\",\n    filterAdditionalRestriction: \"FILTER ISIRI(?inst)\\n                        BIND(STR(?inst) as ?strInst)\\n                        FILTER exists {?inst ?someprop ?someobj}\\n\",\n    filterElementInfoPattern: \"OPTIONAL {?inst wdt:P31 ?foundClass}\\n                BIND (coalesce(?foundClass, owl:Thing) as ?class)\\n                OPTIONAL {?inst rdfs:label ?label}\\n\",\n};\nexports.WikidataSettings = tslib_1.__assign(tslib_1.__assign({}, exports.RDFSettings), WikidataSettingsOverride);\nexports.OWLRDFSSettingsOverride = {\n    defaultPrefix: \"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\n PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\n PREFIX owl:  <http://www.w3.org/2002/07/owl#>\\n\",\n    schemaLabelProperty: 'rdfs:label',\n    dataLabelProperty: 'rdfs:label',\n    fullTextSearch: {\n        prefix: '',\n        queryPattern: \" OPTIONAL {?inst ${dataLabelProperty} ?search1}\\n        FILTER regex(COALESCE(str(?search1), str(?extractedLabel)), \\\"${text}\\\", \\\"i\\\")\\n        BIND(0 as ?score)\\n\",\n        extractLabel: true,\n    },\n    classTreeQuery: \"\\n            SELECT ?class ?label ?parent\\n            WHERE {\\n                {\\n                    ?class a rdfs:Class\\n                } UNION {\\n                    ?class a owl:Class\\n                }\\n                FILTER ISIRI(?class)\\n                OPTIONAL {?class rdfs:label ?label}\\n                OPTIONAL {?class rdfs:subClassOf ?parent. FILTER ISIRI(?parent)}\\n            }\\n        \",\n    // todo: think more, maybe add a limit here?\n    linkTypesPattern: \"{\\t?link a rdf:Property\\n                    } UNION {\\n                    ?link a owl:ObjectProperty\\n                }\\n                BIND('' as ?instcount)\\n    \",\n    elementInfoQuery: \"\\n        CONSTRUCT {\\n            ?inst rdf:type ?class .\\n            ?inst rdfs:label ?label .\\n            ?inst ?propType ?propValue.\\n        } WHERE {\\n            VALUES (?inst) {${ids}}\\n            OPTIONAL { ?inst a ?class }\\n            OPTIONAL {?inst ${dataLabelProperty} ?label}\\n            OPTIONAL {\\n                ${propertyConfigurations}\\n                FILTER (isLiteral(?propValue))\\n            }\\n        }\\n    \",\n    imageQueryPattern: \"{ ?inst ?linkType ?image } UNION { [] ?linkType ?inst. BIND(?inst as ?image) }\",\n    linkTypesOfQuery: \"\\n        SELECT DISTINCT ?link\\n        WHERE {\\n            ${linkConfigurations}\\n        }\\n    \",\n    linkTypesStatisticsQuery: \"\\n        SELECT ?link ?outCount ?inCount\\n        WHERE {\\n            {\\n                SELECT (${linkId} as ?link) (count(?outObject) as ?outCount) WHERE {\\n                    ${linkConfigurationOut}\\n                    ${navigateElementFilterOut}\\n                } LIMIT 101\\n            } {\\n                SELECT (${linkId} as ?link) (count(?inObject) as ?inCount) WHERE {\\n                    ${linkConfigurationIn}\\n                    ${navigateElementFilterIn}\\n                } LIMIT 101\\n            }\\n        }\\n    \",\n    filterRefElementLinkPattern: '',\n    filterTypePattern: \"?inst a ?instType. ?instType rdfs:subClassOf* ?class\",\n    filterElementInfoPattern: \"OPTIONAL {?inst rdf:type ?foundClass}\\n                BIND (coalesce(?foundClass, owl:Thing) as ?class)\\n                OPTIONAL {?inst ${dataLabelProperty} ?label}\",\n    filterAdditionalRestriction: '',\n};\nexports.OWLRDFSSettings = tslib_1.__assign(tslib_1.__assign({}, exports.RDFSettings), exports.OWLRDFSSettingsOverride);\nvar OWLStatsOverride = {\n    classTreeQuery: \"\\n        SELECT ?class ?instcount ?label ?parent\\n        WHERE {\\n            {SELECT ?class (count(?inst) as ?instcount)\\n                WHERE {\\n                    ?inst rdf:type ?class.\\n                    FILTER ISIRI(?class)\\n                } GROUP BY ?class } UNION\\n            {\\n                ?class rdf:type rdfs:Class\\n            } UNION {\\n                ?class rdf:type owl:Class\\n            }\\n            OPTIONAL {?class rdfs:label ?label}\\n            OPTIONAL {?class rdfs:subClassOf ?parent. FILTER ISIRI(?parent)}\\n        }\\n    \",\n};\nexports.OWLStatsSettings = tslib_1.__assign(tslib_1.__assign({}, exports.OWLRDFSSettings), OWLStatsOverride);\nvar DBPediaOverride = {\n    fullTextSearch: {\n        prefix: 'PREFIX dbo: <http://dbpedia.org/ontology/>\\n',\n        queryPattern: \"\\n              ?inst rdfs:label ?searchLabel.\\n              ?searchLabel bif:contains \\\"${text}\\\".\\n              ?inst dbo:wikiPageID ?origScore .\\n              BIND(0-?origScore as ?score)\\n        \",\n    },\n    classTreeQuery: \"\\n        SELECT distinct ?class ?label ?parent WHERE {\\n            ?class rdfs:label ?label.\\n            OPTIONAL {?class rdfs:subClassOf ?parent}\\n            ?root rdfs:subClassOf owl:Thing.\\n            ?class rdfs:subClassOf? | rdfs:subClassOf/rdfs:subClassOf ?root\\n        }\\n    \",\n    elementInfoQuery: \"\\n        CONSTRUCT {\\n            ?inst rdf:type ?class .\\n            ?inst rdfs:label ?label .\\n            ?inst ?propType ?propValue.\\n        } WHERE {\\n            VALUES (?inst) {${ids}}\\n            ?inst a ?class .\\n            ?inst rdfs:label ?label .\\n            FILTER (!contains(str(?class), 'http://dbpedia.org/class/yago'))\\n            OPTIONAL {\\n                ${propertyConfigurations}\\n                FILTER (isLiteral(?propValue))\\n            }\\n        }\\n    \",\n    filterTypePattern: \"?inst a ?instType. ?instType rdfs:subClassOf* ?class\",\n    filterElementInfoPattern: \"\\n        OPTIONAL {?inst rdf:type ?foundClass. FILTER (!contains(str(?foundClass), 'http://dbpedia.org/class/yago'))}\\n        BIND (coalesce(?foundClass, owl:Thing) as ?class)\\n        OPTIONAL {?inst ${dataLabelProperty} ?label}\",\n    imageQueryPattern: \" { ?inst ?linkType ?fullImage } UNION { [] ?linkType ?inst. BIND(?inst as ?fullImage) }\\n            BIND(CONCAT(\\\"https://commons.wikimedia.org/w/thumb.php?f=\\\",\\n            STRAFTER(STR(?fullImage), \\\"Special:FilePath/\\\"), \\\"&w=200\\\") AS ?image)\\n    \",\n};\nexports.DBPediaSettings = tslib_1.__assign(tslib_1.__assign({}, exports.OWLRDFSSettings), DBPediaOverride);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar N3 = require(\"n3\");\nfunction parseTurtleText(turtleText) {\n    return new Promise(function (resolve, reject) {\n        var triples = [];\n        N3.Parser().parse(turtleText, function (error, triple, hash) {\n            if (error) {\n                reject(error);\n            }\n            else if (triple) {\n                triples.push({\n                    subject: n3toRdfNode(triple.subject),\n                    predicate: n3toRdfNode(triple.predicate),\n                    object: n3toRdfNode(triple.object),\n                });\n            }\n            else {\n                resolve(triples);\n            }\n        });\n    });\n}\nexports.parseTurtleText = parseTurtleText;\nfunction n3toRdfNode(entity) {\n    if (N3.Util.isLiteral(entity)) {\n        return {\n            type: 'literal',\n            value: N3.Util.getLiteralValue(entity),\n            datatype: N3.Util.getLiteralType(entity),\n            'xml:lang': N3.Util.getLiteralLanguage(entity),\n        };\n    }\n    else {\n        return { type: 'uri', value: entity };\n    }\n}\nexports.n3toRdfNode = n3toRdfNode;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__100__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mergeUtils_1 = require(\"./mergeUtils\");\nfunction isDefinition(dp) {\n    var definition = dp;\n    return definition.name !== undefined && definition.dataProvider !== undefined;\n}\nvar CompositeDataProvider = /** @class */ (function () {\n    function CompositeDataProvider(dataProviders, params) {\n        this.mergeMode = 'fetchAll';\n        var dpCounter = 1;\n        this.dataProviders = dataProviders.map(function (dp) {\n            if (isDefinition(dp)) {\n                return dp;\n            }\n            else {\n                return {\n                    name: 'dataProvider_' + dpCounter++,\n                    dataProvider: dp,\n                };\n            }\n        });\n        if (params && params.mergeMode) {\n            this.mergeMode = params.mergeMode;\n        }\n    }\n    CompositeDataProvider.prototype.classTree = function () {\n        return this.fetchSequentially('classTree', mergeUtils_1.mergeClassTree, undefined);\n    };\n    CompositeDataProvider.prototype.propertyInfo = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('propertyInfo', mergeUtils_1.mergePropertyInfo, params);\n        }\n        else {\n            var propertyIds_1 = params.propertyIds;\n            return this.queueProcessResults(function (previousResult, dp) {\n                propertyIds_1 = propertyIds_1.filter(function (id) { return !previousResult || !previousResult[id]; });\n                return propertyIds_1.length > 0 ? dp.dataProvider.propertyInfo({ propertyIds: propertyIds_1 }) : undefined;\n            }).then(mergeUtils_1.mergePropertyInfo);\n        }\n    };\n    CompositeDataProvider.prototype.classInfo = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('classInfo', mergeUtils_1.mergeClassInfo, params);\n        }\n        else {\n            var classIds_1 = params.classIds;\n            return this.queueProcessResults(function (previousResult, dp) {\n                classIds_1 = classIds_1.filter(function (id) { return !previousResult || previousResult.map(function (cm) { return cm.id; }).indexOf(id) === -1; });\n                return classIds_1.length > 0 ? dp.dataProvider.classInfo({ classIds: classIds_1 }) : undefined;\n            }).then(mergeUtils_1.mergeClassInfo);\n        }\n    };\n    CompositeDataProvider.prototype.linkTypesInfo = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('linkTypesInfo', mergeUtils_1.mergeLinkTypesInfo, params);\n        }\n        else {\n            var linkTypeIds_1 = params.linkTypeIds;\n            return this.queueProcessResults(function (previousResult, dp) {\n                linkTypeIds_1 = linkTypeIds_1.filter(function (id) {\n                    return !previousResult || previousResult.map(function (lt) { return lt.id; }).indexOf(id) === -1;\n                });\n                return linkTypeIds_1.length > 0 ? dp.dataProvider.linkTypesInfo({ linkTypeIds: linkTypeIds_1 }) : undefined;\n            }).then(mergeUtils_1.mergeLinkTypesInfo);\n        }\n    };\n    CompositeDataProvider.prototype.linkTypes = function () {\n        return this.fetchSequentially('linkTypes', mergeUtils_1.mergeLinkTypes, undefined);\n    };\n    CompositeDataProvider.prototype.elementInfo = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('elementInfo', mergeUtils_1.mergeElementInfo, params);\n        }\n        else {\n            var elementIds_1 = params.elementIds;\n            return this.queueProcessResults(function (previousResult, dp) {\n                elementIds_1 = elementIds_1.filter(function (id) { return !previousResult || !previousResult[id]; });\n                return elementIds_1.length > 0 ? dp.dataProvider.elementInfo({ elementIds: elementIds_1 }) : undefined;\n            }).then(mergeUtils_1.mergeElementInfo);\n        }\n    };\n    CompositeDataProvider.prototype.linksInfo = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('linksInfo', mergeUtils_1.mergeLinksInfo, params);\n        }\n        else {\n            var elementIds_2 = params.elementIds;\n            return this.queueProcessResults(function (previousResult, dp) {\n                elementIds_2 = elementIds_2.filter(function (id) {\n                    if (previousResult) {\n                        for (var _i = 0, previousResult_1 = previousResult; _i < previousResult_1.length; _i++) {\n                            var linkModel = previousResult_1[_i];\n                            if (linkModel.sourceId === id) {\n                                return false;\n                            }\n                        }\n                    }\n                    return true;\n                });\n                return elementIds_2.length > 0 ?\n                    dp.dataProvider.linksInfo({ elementIds: elementIds_2, linkTypeIds: params.linkTypeIds }) : undefined;\n            }).then(mergeUtils_1.mergeLinksInfo);\n        }\n    };\n    CompositeDataProvider.prototype.linkTypesOf = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('linkTypesOf', mergeUtils_1.mergeLinkTypesOf, params);\n        }\n        else {\n            return this.queueProcessResults(function (previousResult, dp) {\n                if (!previousResult || previousResult && previousResult.length === 0) {\n                    return dp.dataProvider.linkTypesOf(params);\n                }\n                else {\n                    return undefined;\n                }\n            }).then(mergeUtils_1.mergeLinkTypesOf);\n        }\n    };\n    CompositeDataProvider.prototype.linkElements = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('linkElements', mergeUtils_1.mergeLinkElements, params);\n        }\n        else {\n            return this.queueProcessResults(function (previousResult, dp) {\n                if (!previousResult || previousResult && Object.keys(previousResult).length === 0) {\n                    return dp.dataProvider.linkElements(params);\n                }\n                else {\n                    return undefined;\n                }\n            }).then(mergeUtils_1.mergeLinkElements);\n        }\n    };\n    CompositeDataProvider.prototype.filter = function (params) {\n        if (this.mergeMode === 'fetchAll') {\n            return this.fetchSequentially('filter', mergeUtils_1.mergeFilter, params);\n        }\n        else {\n            return this.queueProcessResults(function (previousResult, dp) {\n                if (!previousResult || previousResult && Object.keys(previousResult).length === 0) {\n                    return dp.dataProvider.filter(params);\n                }\n                else {\n                    return undefined;\n                }\n            }).then(mergeUtils_1.mergeFilter);\n        }\n    };\n    CompositeDataProvider.prototype.processResults = function (responsePromise, dpName, useProviderInStats) {\n        return responsePromise\n            .then(function (response) { return ({ dataSourceName: dpName, useInStats: useProviderInStats, response: response }); })\n            .catch(function (error) {\n            // tslint:disable-next-line:no-console\n            console.error(error);\n            return { dataSourceName: dpName, useInStats: useProviderInStats, response: undefined };\n        });\n    };\n    CompositeDataProvider.prototype.queueProcessResults = function (callBack) {\n        var _this = this;\n        var counter = 0;\n        var responseList = [];\n        var recursiveCall = function (result) {\n            if (_this.dataProviders.length > counter) {\n                var dp_1 = _this.dataProviders[counter++];\n                var callBackResult = callBack(result, dp_1);\n                if (!callBackResult) {\n                    return Promise.resolve(responseList);\n                }\n                return callBackResult.then(function (newResult) {\n                    responseList.push({\n                        dataSourceName: dp_1.name,\n                        response: newResult,\n                    });\n                    return recursiveCall(newResult);\n                }).catch(function (error) {\n                    // tslint:disable-next-line:no-console\n                    console.error(error);\n                    return recursiveCall(result);\n                });\n            }\n            else {\n                return Promise.resolve(responseList);\n            }\n        };\n        return recursiveCall();\n    };\n    CompositeDataProvider.prototype.fetchSequentially = function (functionName, mergeFunction, params) {\n        var _this = this;\n        var resultPromises = this.dataProviders.map(function (dp) {\n            var providerMethod = dp.dataProvider[functionName];\n            return _this.processResults(providerMethod.call(dp.dataProvider, params), dp.name, dp.useInStats);\n        });\n        return Promise.all(resultPromises).then(mergeFunction);\n    };\n    return CompositeDataProvider;\n}());\nexports.CompositeDataProvider = CompositeDataProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DATA_PROVIDER_PROPERTY = 'http://ontodia.org/property/DataProvider';\nfunction mergeClassTree(composite) {\n    var lists = composite.filter(function (r) { return r.response; }).map(function (_a) {\n        var useInStats = _a.useInStats, response = _a.response;\n        return ({ useInStats: useInStats, classes: classTreeToArray(response) });\n    });\n    var dictionary = {};\n    var topLevelModels = {};\n    var childrenMap = {};\n    for (var _i = 0, lists_1 = lists; _i < lists_1.length; _i++) {\n        var _a = lists_1[_i], useInStats = _a.useInStats, classes = _a.classes;\n        var _loop_1 = function (model) {\n            var childrenIds = childrenMap[model.id] || [];\n            model.children.map(function (ch) { return ch.id; }).forEach(function (id) {\n                if (childrenIds.indexOf(id) === -1) {\n                    childrenIds.push(id);\n                }\n            });\n            model.children = [];\n            if (!useInStats) {\n                delete model.count;\n            }\n            if (!dictionary[model.id]) {\n                topLevelModels[model.id] = model;\n                dictionary[model.id] = model;\n                childrenMap[model.id] = childrenIds;\n            }\n            else {\n                topLevelModels[model.id] = mergeClassModel(dictionary[model.id], model);\n                dictionary[model.id] = topLevelModels[model.id];\n            }\n        };\n        for (var _b = 0, classes_1 = classes; _b < classes_1.length; _b++) {\n            var model = classes_1[_b];\n            _loop_1(model);\n        }\n    }\n    var models = Object.keys(dictionary).map(function (key) { return dictionary[key]; });\n    for (var _c = 0, models_1 = models; _c < models_1.length; _c++) {\n        var m = models_1[_c];\n        m.children = (childrenMap[m.id] || []).map(function (id) {\n            delete topLevelModels[id];\n            return dictionary[id];\n        });\n    }\n    return Object.keys(topLevelModels).map(function (key) { return topLevelModels[key]; });\n}\nexports.mergeClassTree = mergeClassTree;\nfunction mergePropertyInfo(response) {\n    var result = {};\n    var props = response.filter(function (r) { return r.response; }).map(function (r) { return r.response; });\n    for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n        var model = props_1[_i];\n        var keys = Object.keys(model);\n        for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n            var key = keys_1[_a];\n            var prop = model[key];\n            if (!result[key]) {\n                result[key] = prop;\n            }\n            else {\n                result[key].label = mergeLabels(result[key].label, prop.label);\n            }\n        }\n    }\n    return result;\n}\nexports.mergePropertyInfo = mergePropertyInfo;\nfunction mergeClassInfo(response) {\n    var dictionaries = response.filter(function (r) { return r.response; }).map(function (r) { return r.response; });\n    var dictionary = {};\n    for (var _i = 0, dictionaries_1 = dictionaries; _i < dictionaries_1.length; _i++) {\n        var models = dictionaries_1[_i];\n        for (var _a = 0, models_2 = models; _a < models_2.length; _a++) {\n            var model = models_2[_a];\n            if (!dictionary[model.id]) {\n                dictionary[model.id] = model;\n            }\n            else {\n                dictionary[model.id] = mergeClassModel(dictionary[model.id], model);\n            }\n        }\n    }\n    return Object.keys(dictionary).map(function (key) { return dictionary[key]; });\n}\nexports.mergeClassInfo = mergeClassInfo;\nfunction mergeLinkTypesInfo(response) {\n    var lists = response.filter(function (r) { return r.response; }).map(function (r) { return r.response; });\n    var mergeLinkType = function (a, b) {\n        return {\n            id: a.id,\n            label: mergeLabels(a.label, b.label),\n            count: a.count + b.count,\n        };\n    };\n    var dictionary = {};\n    for (var _i = 0, lists_2 = lists; _i < lists_2.length; _i++) {\n        var linkTypes = lists_2[_i];\n        for (var _a = 0, linkTypes_1 = linkTypes; _a < linkTypes_1.length; _a++) {\n            var linkType = linkTypes_1[_a];\n            if (!dictionary[linkType.id]) {\n                dictionary[linkType.id] = linkType;\n            }\n            else {\n                dictionary[linkType.id] = mergeLinkType(dictionary[linkType.id], linkType);\n            }\n        }\n    }\n    return Object.keys(dictionary).map(function (key) { return dictionary[key]; });\n}\nexports.mergeLinkTypesInfo = mergeLinkTypesInfo;\nfunction mergeLinkTypes(response) {\n    return mergeLinkTypesInfo(response);\n}\nexports.mergeLinkTypes = mergeLinkTypes;\nfunction mergeElementInfo(response) {\n    var mergeElementModels = function (a, b) {\n        var types = a.types;\n        for (var _i = 0, _a = b.types; _i < _a.length; _i++) {\n            var t = _a[_i];\n            if (types.indexOf(t) === -1) {\n                types.push(t);\n            }\n        }\n        var sources = [];\n        for (var _b = 0, _c = a.sources; _b < _c.length; _b++) {\n            var s = _c[_b];\n            if (sources.indexOf(s) === -1) {\n                sources.push(s);\n            }\n        }\n        for (var _d = 0, _e = b.sources; _d < _e.length; _d++) {\n            var s = _e[_d];\n            if (sources.indexOf(s) === -1) {\n                sources.push(s);\n            }\n        }\n        return {\n            id: a.id,\n            label: mergeLabels(a.label, b.label),\n            types: types,\n            image: a.image || b.image,\n            properties: mergeProperties(a.properties, b.properties),\n            sources: sources,\n        };\n    };\n    var dictionaries = response.filter(function (r) { return r.response; }).map(function (r) { return r.response; });\n    var dictionary = {};\n    var _loop_2 = function (resp) {\n        if (!resp.response) {\n            return \"continue\";\n        }\n        var list = Object.keys(resp.response).map(function (k) { return resp.response[k]; });\n        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var em = list_1[_i];\n            em.sources = [resp.dataSourceName];\n            em.properties[DATA_PROVIDER_PROPERTY] = {\n                type: 'string',\n                values: [{ value: resp.dataSourceName, language: '' }],\n            };\n            if (!dictionary[em.id]) {\n                dictionary[em.id] = em;\n            }\n            else {\n                dictionary[em.id] = mergeElementModels(dictionary[em.id], em);\n            }\n        }\n    };\n    for (var _i = 0, response_1 = response; _i < response_1.length; _i++) {\n        var resp = response_1[_i];\n        _loop_2(resp);\n    }\n    return dictionary;\n}\nexports.mergeElementInfo = mergeElementInfo;\nfunction mergeProperties(a, b) {\n    var aLists = Object.keys(a);\n    var bLists = Object.keys(b);\n    var result = {};\n    function createIdForProperty(baseId) {\n        var counter = 1;\n        while (result[baseId + '_' + counter]) {\n            counter++;\n        }\n        return baseId + '_' + counter;\n    }\n    for (var _i = 0, aLists_1 = aLists; _i < aLists_1.length; _i++) {\n        var pKey = aLists_1[_i];\n        var prop = a[pKey];\n        if (!result[pKey]) {\n            result[pKey] = prop;\n        }\n        else {\n            result[createIdForProperty(pKey)] = prop;\n        }\n    }\n    for (var _a = 0, bLists_1 = bLists; _a < bLists_1.length; _a++) {\n        var pKey = bLists_1[_a];\n        var prop = b[pKey];\n        if (!result[pKey]) {\n            result[pKey] = prop;\n        }\n        else {\n            result[createIdForProperty(pKey)] = prop;\n        }\n    }\n    return result;\n}\nexports.mergeProperties = mergeProperties;\nfunction mergeLinksInfo(response) {\n    var lists = response.filter(function (r) { return r.response; }).map(function (r) { return r.response; });\n    var resultInfo = [];\n    function compareLinksInfo(a, b) {\n        return a.sourceId === b.sourceId &&\n            a.targetId === b.targetId &&\n            a.linkTypeId === b.linkTypeId;\n    }\n    for (var _i = 0, lists_3 = lists; _i < lists_3.length; _i++) {\n        var linkInfo = lists_3[_i];\n        var _loop_3 = function (linkModel) {\n            if (!resultInfo.some(function (l) { return compareLinksInfo(l, linkModel); })) {\n                resultInfo.push(linkModel);\n            }\n        };\n        for (var _a = 0, linkInfo_1 = linkInfo; _a < linkInfo_1.length; _a++) {\n            var linkModel = linkInfo_1[_a];\n            _loop_3(linkModel);\n        }\n    }\n    return resultInfo;\n}\nexports.mergeLinksInfo = mergeLinksInfo;\nfunction mergeLinkTypesOf(response) {\n    var lists = response.filter(function (r) { return r.response; }).map(function (r) { return r.response; });\n    var dictionary = {};\n    var merge = function (a, b) {\n        return {\n            id: a.id,\n            inCount: a.inCount + b.inCount,\n            outCount: a.outCount + b.outCount,\n        };\n    };\n    for (var _i = 0, lists_4 = lists; _i < lists_4.length; _i++) {\n        var linkCount = lists_4[_i];\n        for (var _a = 0, linkCount_1 = linkCount; _a < linkCount_1.length; _a++) {\n            var lCount = linkCount_1[_a];\n            if (!dictionary[lCount.id]) {\n                dictionary[lCount.id] = lCount;\n            }\n            else {\n                dictionary[lCount.id] = merge(lCount, dictionary[lCount.id]);\n            }\n        }\n    }\n    return Object.keys(dictionary).map(function (key) { return dictionary[key]; });\n}\nexports.mergeLinkTypesOf = mergeLinkTypesOf;\nfunction mergeLinkElements(response) {\n    return mergeElementInfo(response);\n}\nexports.mergeLinkElements = mergeLinkElements;\nfunction mergeFilter(response) {\n    return mergeElementInfo(response);\n}\nexports.mergeFilter = mergeFilter;\nfunction classTreeToArray(models) {\n    var resultArray = models;\n    function getDescendants(model) {\n        var descendants = model.children || [];\n        for (var _i = 0, descendants_1 = descendants; _i < descendants_1.length; _i++) {\n            var descendant = descendants_1[_i];\n            var nextGeneration = getDescendants(descendant);\n            descendants = descendants.concat(nextGeneration);\n        }\n        return descendants;\n    }\n    for (var _i = 0, models_3 = models; _i < models_3.length; _i++) {\n        var model = models_3[_i];\n        var descendants = getDescendants(model);\n        resultArray = resultArray.concat(descendants);\n    }\n    return resultArray;\n}\nexports.classTreeToArray = classTreeToArray;\nfunction mergeLabels(a, b) {\n    function compareLabels(l1, l2) {\n        return l1.language === l2.language && l1.value === l2.value;\n    }\n    var mergedValuesList = a.values;\n    var _loop_4 = function (locStr) {\n        if (!mergedValuesList.some(function (l) { return compareLabels(l, locStr); })) {\n            mergedValuesList.push(locStr);\n        }\n    };\n    for (var _i = 0, _a = b.values; _i < _a.length; _i++) {\n        var locStr = _a[_i];\n        _loop_4(locStr);\n    }\n    return {\n        values: mergedValuesList,\n    };\n}\nexports.mergeLabels = mergeLabels;\nfunction mergeCounts(a, b) {\n    if (a === undefined && b === undefined) {\n        return undefined;\n    }\n    return (a || 0) + (b || 0);\n}\nexports.mergeCounts = mergeCounts;\nfunction mergeClassModel(a, b) {\n    var childrenDictionary = {};\n    for (var _i = 0, _a = a.children.concat(b.children); _i < _a.length; _i++) {\n        var child = _a[_i];\n        if (!childrenDictionary[child.id]) {\n            childrenDictionary[child.id] = child;\n        }\n    }\n    return {\n        id: a.id,\n        label: mergeLabels(a.label, b.label),\n        count: mergeCounts(a.count, b.count),\n        children: Object.keys(childrenDictionary).map(function (key) { return childrenDictionary[key]; }),\n    };\n}\nexports.mergeClassModel = mergeClassModel;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_1 = require(\"lodash\");\nvar schema_1 = require(\"../../data/schema\");\nvar serializedDiagram_1 = require(\"../../editor/serializedDiagram\");\nvar layout_1 = require(\"../../viewUtils/layout\");\nvar turtle_1 = require(\"./turtle\");\nvar GREED_STEP = 150;\nvar GraphBuilder = /** @class */ (function () {\n    function GraphBuilder(dataProvider) {\n        this.dataProvider = dataProvider;\n    }\n    GraphBuilder.prototype.createGraph = function (graph) {\n        return this.dataProvider.elementInfo({ elementIds: graph.elementIds }).then(function (elementsInfo) { return ({\n            preloadedElements: elementsInfo,\n            diagram: makeLayout(graph.elementIds, graph.links),\n        }); });\n    };\n    GraphBuilder.prototype.getGraphFromRDFGraph = function (graph) {\n        var _a = makeGraphItems(graph), elementIds = _a.elementIds, links = _a.links;\n        return this.createGraph({ elementIds: elementIds, links: links });\n    };\n    GraphBuilder.prototype.getGraphFromTurtleGraph = function (graph) {\n        var _this = this;\n        return turtle_1.parseTurtleText(graph).then(function (triples) { return _this.getGraphFromRDFGraph(triples); });\n    };\n    return GraphBuilder;\n}());\nexports.GraphBuilder = GraphBuilder;\nfunction makeGraphItems(response) {\n    var elements = {};\n    var links = [];\n    for (var _i = 0, response_1 = response; _i < response_1.length; _i++) {\n        var _a = response_1[_i], subject = _a.subject, predicate = _a.predicate, object = _a.object;\n        if (subject.type === 'uri' && !elements[subject.value]) {\n            elements[subject.value] = true;\n        }\n        if (object.type === 'uri' && !elements[object.value]) {\n            elements[object.value] = true;\n        }\n        if (subject.type === 'uri' && object.type === 'uri') {\n            links.push({\n                linkTypeId: predicate.value,\n                sourceId: subject.value,\n                targetId: object.value,\n            });\n        }\n    }\n    return { elementIds: Object.keys(elements), links: links };\n}\nexports.makeGraphItems = makeGraphItems;\nfunction makeLayout(elementsIds, linksInfo) {\n    var rows = Math.ceil(Math.sqrt(elementsIds.length));\n    var grid = layout_1.uniformGrid({ rows: rows, cellSize: { x: GREED_STEP, y: GREED_STEP } });\n    var elements = elementsIds.map(function (id, index) {\n        var _a = grid(index), x = _a.x, y = _a.y;\n        return { '@type': 'Element', '@id': schema_1.GenerateID.forElement(), iri: id, position: { x: x, y: y } };\n    });\n    var layoutElementsMap = lodash_1.keyBy(elements, 'iri');\n    var links = [];\n    linksInfo.forEach(function (link, index) {\n        var source = layoutElementsMap[link.sourceId];\n        var target = layoutElementsMap[link.targetId];\n        if (!source || !target) {\n            return;\n        }\n        links.push({\n            '@type': 'Link',\n            '@id': schema_1.GenerateID.forLink(),\n            property: link.linkTypeId,\n            source: { '@id': source['@id'] },\n            target: { '@id': target['@id'] },\n        });\n    });\n    return serializedDiagram_1.makeSerializedDiagram({ layoutData: { '@type': 'Layout', elements: elements, links: links }, linkTypeOptions: [] });\n}\nexports.makeLayout = makeLayout;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar lodash_1 = require(\"lodash\");\nvar schema_1 = require(\"../data/schema\");\nvar serializedCellProperties = [\n    // common properties\n    'id', 'type',\n    // element properties\n    'size', 'angle', 'isExpanded', 'position', 'iri', 'group',\n    // link properties\n    'typeId', 'source', 'target', 'vertices',\n];\nfunction emptyDiagram() {\n    return {\n        '@context': schema_1.DIAGRAM_CONTEXT_URL_V1,\n        '@type': 'Diagram',\n        layoutData: emptyLayoutData(),\n        linkTypeOptions: [],\n    };\n}\nexports.emptyDiagram = emptyDiagram;\nfunction emptyLayoutData() {\n    return { '@type': 'Layout', elements: [], links: [] };\n}\nexports.emptyLayoutData = emptyLayoutData;\nfunction convertToSerializedDiagram(params) {\n    var elements = [];\n    var links = [];\n    for (var _i = 0, _a = params.layoutData.cells; _i < _a.length; _i++) {\n        var cell = _a[_i];\n        // get rid of unused properties\n        var newCell = lodash_1.pick(cell, serializedCellProperties);\n        // normalize type\n        if (newCell.type === 'Ontodia.Element' || newCell.type === 'element') {\n            newCell.type = 'Element';\n        }\n        // normalize type\n        if (newCell.type === 'link') {\n            newCell.type = 'Link';\n        }\n        if (!newCell.iri) {\n            newCell.iri = newCell.id;\n        }\n        // rename to @id and @type to match JSON-LD\n        newCell['@id'] = newCell.id;\n        delete newCell.id;\n        newCell['@type'] = newCell.type;\n        delete newCell.type;\n        // make two separate lists\n        switch (newCell['@type']) {\n            case 'Element':\n                elements.push(newCell);\n                break;\n            case 'Link':\n                // rename internal IDs\n                newCell.source['@id'] = newCell.source.id;\n                delete newCell.source.id;\n                newCell.target['@id'] = newCell.target.id;\n                delete newCell.target.id;\n                // rename typeID to property\n                newCell.property = newCell.typeId;\n                delete newCell.typeId;\n                links.push(newCell);\n                break;\n        }\n    }\n    return tslib_1.__assign(tslib_1.__assign({}, emptyDiagram()), { layoutData: { '@type': 'Layout', elements: elements, links: links }, linkTypeOptions: params.linkTypeOptions });\n}\nexports.convertToSerializedDiagram = convertToSerializedDiagram;\nfunction makeSerializedDiagram(params) {\n    var diagram = tslib_1.__assign(tslib_1.__assign({}, emptyDiagram()), { linkTypeOptions: params.linkTypeOptions });\n    // layout data is a complex structure we want to persist\n    if (params.layoutData) {\n        diagram.layoutData = params.layoutData;\n    }\n    return diagram;\n}\nexports.makeSerializedDiagram = makeSerializedDiagram;\nfunction makeLayoutData(modelElements, modelLinks) {\n    var elements = modelElements.map(function (element) { return ({\n        '@type': 'Element',\n        '@id': element.id,\n        iri: element.iri,\n        position: element.position,\n        size: element.size,\n        isExpanded: element.isExpanded,\n        group: element.group,\n        elementState: element.elementState,\n    }); });\n    var links = modelLinks.map(function (link) { return ({\n        '@type': 'Link',\n        '@id': link.id,\n        property: link.typeId,\n        source: { '@id': link.sourceId },\n        target: { '@id': link.targetId },\n        vertices: tslib_1.__spreadArrays(link.vertices),\n        linkState: link.linkState,\n    }); });\n    return { '@type': 'Layout', elements: elements, links: links };\n}\nexports.makeLayoutData = makeLayoutData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cola = require(\"webcola\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar events_1 = require(\"./events\");\nvar paperArea_1 = require(\"../diagram/paperArea\");\nfunction groupForceLayout(params) {\n    var layout = new cola.Layout()\n        .nodes(params.nodes)\n        .links(params.links)\n        .avoidOverlaps(params.avoidOvelaps)\n        .convergenceThreshold(1e-9)\n        .jaccardLinkLengths(params.preferredLinkLength)\n        .handleDisconnected(true);\n    layout.start(30, 0, 10, undefined, false);\n}\nexports.groupForceLayout = groupForceLayout;\nfunction groupRemoveOverlaps(nodes) {\n    var nodeRectangles = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var node = nodes_1[_i];\n        nodeRectangles.push(new cola.Rectangle(node.x, node.x + node.width, node.y, node.y + node.height));\n    }\n    cola.removeOverlaps(nodeRectangles);\n    for (var i = 0; i < nodeRectangles.length; i++) {\n        var node = nodes[i];\n        var rectangle = nodeRectangles[i];\n        node.x = rectangle.x;\n        node.y = rectangle.y;\n    }\n}\nexports.groupRemoveOverlaps = groupRemoveOverlaps;\nfunction translateToPositiveQuadrant(positions, offset) {\n    var minX = Infinity, minY = Infinity;\n    positions.forEach(function (position) {\n        minX = Math.min(minX, position.x);\n        minY = Math.min(minY, position.y);\n    });\n    var x = offset.x, y = offset.y;\n    positions.forEach(function (position, key) {\n        positions.set(key, {\n            x: position.x - minX + x,\n            y: position.y - minY + y,\n        });\n    });\n}\nexports.translateToPositiveQuadrant = translateToPositiveQuadrant;\nfunction uniformGrid(params) {\n    return function (cellIndex) {\n        var row = Math.floor(cellIndex / params.rows);\n        var column = cellIndex - row * params.rows;\n        return {\n            x: column * params.cellSize.x,\n            y: row * params.cellSize.y,\n            width: params.cellSize.x,\n            height: params.cellSize.y,\n        };\n    };\n}\nexports.uniformGrid = uniformGrid;\nfunction padded(nodes, padding, transform) {\n    if (padding) {\n        for (var _i = 0, nodes_2 = nodes; _i < nodes_2.length; _i++) {\n            var node = nodes_2[_i];\n            node.x -= padding.x;\n            node.y -= padding.y;\n            node.width += 2 * padding.x;\n            node.height += 2 * padding.y;\n        }\n    }\n    transform();\n    if (padding) {\n        for (var _a = 0, nodes_3 = nodes; _a < nodes_3.length; _a++) {\n            var node = nodes_3[_a];\n            node.x += padding.x;\n            node.y += padding.y;\n            node.width -= 2 * padding.x;\n            node.height -= 2 * padding.y;\n        }\n    }\n}\nexports.padded = padded;\nfunction biasFreePadded(nodes, padding, transform) {\n    var nodeSizeMap = new Map();\n    var possibleCompression = { x: Infinity, y: Infinity };\n    for (var _i = 0, nodes_4 = nodes; _i < nodes_4.length; _i++) {\n        var node = nodes_4[_i];\n        nodeSizeMap.set(node.id, { width: node.width, height: node.height });\n        var maxSide = Math.max(node.width, node.height);\n        var compressionX = node.width ? (maxSide / node.width) : 1;\n        var compressionY = node.height ? (maxSide / node.height) : 1;\n        possibleCompression.x = Math.min(1 + (compressionX - 1), possibleCompression.x);\n        possibleCompression.y = Math.min(1 + (compressionY - 1), possibleCompression.y);\n        node.height = maxSide;\n        node.width = maxSide;\n    }\n    padded(nodes, padding, function () { return transform(); });\n    var fittingBox = getContentFittingBoxForLayout(nodes);\n    for (var _a = 0, nodes_5 = nodes; _a < nodes_5.length; _a++) {\n        var node = nodes_5[_a];\n        var size = nodeSizeMap.get(node.id);\n        node.x = (node.x - fittingBox.x) / possibleCompression.x + fittingBox.x;\n        node.y = (node.y - fittingBox.y) / possibleCompression.y + fittingBox.y;\n        node.height = size.height;\n        node.width = size.width;\n    }\n}\nexports.biasFreePadded = biasFreePadded;\nfunction calculateLayout(params) {\n    var grouping = geometry_1.computeGrouping(params.model.elements);\n    var layoutFunction = params.layoutFunction, model = params.model, fixedElements = params.fixedElements, selectedElements = params.selectedElements;\n    if (selectedElements && selectedElements.size <= 1) {\n        return {\n            positions: new Map(),\n            nestedLayouts: [],\n            keepAveragePosition: false,\n        };\n    }\n    return internalRecursion(params.group);\n    function internalRecursion(group) {\n        var elementsToProcess = group\n            ? grouping.get(group)\n            : model.elements.filter(function (el) { return el.group === undefined; });\n        var elements = selectedElements\n            ? elementsToProcess.filter(function (el) { return selectedElements.has(el); })\n            : elementsToProcess;\n        var nestedLayouts = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            if (grouping.has(element.id)) {\n                nestedLayouts.push(internalRecursion(element.id));\n            }\n        }\n        var nodes = [];\n        var nodeById = {};\n        for (var _a = 0, elements_2 = elements; _a < elements_2.length; _a++) {\n            var element = elements_2[_a];\n            var _b = geometry_1.boundsOf(element), x = _b.x, y = _b.y, width = _b.width, height = _b.height;\n            var node = {\n                id: element.id,\n                x: x, y: y, width: width, height: height,\n                fixed: fixedElements && fixedElements.has(element) ? 1 : 0,\n            };\n            nodeById[element.id] = node;\n            nodes.push(node);\n        }\n        var links = [];\n        for (var _c = 0, _d = model.links; _c < _d.length; _c++) {\n            var link = _d[_c];\n            if (!model.isSourceAndTargetVisible(link)) {\n                continue;\n            }\n            var source = model.sourceOf(link);\n            var target = model.targetOf(link);\n            var sourceNode = nodeById[source.id];\n            var targetNode = nodeById[target.id];\n            if (sourceNode && targetNode) {\n                links.push({ source: sourceNode, target: targetNode });\n            }\n        }\n        layoutFunction(nodes, links, group);\n        var positions = new Map();\n        for (var _e = 0, nodes_6 = nodes; _e < nodes_6.length; _e++) {\n            var node = nodes_6[_e];\n            positions.set(node.id, { x: node.x, y: node.y });\n        }\n        return {\n            positions: positions,\n            group: group,\n            nestedLayouts: nestedLayouts,\n            keepAveragePosition: Boolean(selectedElements)\n        };\n    }\n}\nexports.calculateLayout = calculateLayout;\nfunction applyLayout(model, layout) {\n    var _a = layout, positions = _a.positions, group = _a.group, nestedLayouts = _a.nestedLayouts, keepAveragePosition = _a.keepAveragePosition;\n    var elements = model.elements.filter(function (_a) {\n        var id = _a.id;\n        return positions.has(id);\n    });\n    for (var _i = 0, nestedLayouts_1 = nestedLayouts; _i < nestedLayouts_1.length; _i++) {\n        var nestedLayout = nestedLayouts_1[_i];\n        applyLayout(model, nestedLayout);\n    }\n    if (group) {\n        var offset = paperArea_1.getContentFittingBox(elements, []);\n        translateToPositiveQuadrant(positions, offset);\n    }\n    var averagePosition = keepAveragePosition ? calculateAveragePosition(elements) : undefined;\n    for (var _b = 0, elements_3 = elements; _b < elements_3.length; _b++) {\n        var element = elements_3[_b];\n        element.setPosition(positions.get(element.id));\n    }\n    if (keepAveragePosition) {\n        var newAveragePosition = calculateAveragePosition(elements);\n        var averageDiff_1 = {\n            x: averagePosition.x - newAveragePosition.x,\n            y: averagePosition.y - newAveragePosition.y,\n        };\n        positions.forEach(function (position, elementId) {\n            var element = model.getElement(elementId);\n            element.setPosition({\n                x: position.x + averageDiff_1.x,\n                y: position.y + averageDiff_1.y,\n            });\n        });\n    }\n}\nexports.applyLayout = applyLayout;\nfunction calculateAveragePosition(position) {\n    var xSum = 0;\n    var ySum = 0;\n    for (var _i = 0, position_1 = position; _i < position_1.length; _i++) {\n        var element = position_1[_i];\n        xSum += element.position.x + element.size.width / 2;\n        ySum += element.position.y + element.size.height / 2;\n    }\n    return {\n        x: xSum / position.length,\n        y: ySum / position.length,\n    };\n}\nexports.calculateAveragePosition = calculateAveragePosition;\nfunction placeElementsAround(params) {\n    var model = params.model, elements = params.elements, targetElement = params.targetElement, prefferedLinksLength = params.prefferedLinksLength;\n    var targetElementBounds = geometry_1.boundsOf(targetElement);\n    var targetPosition = {\n        x: targetElementBounds.x + targetElementBounds.width / 2,\n        y: targetElementBounds.y + targetElementBounds.height / 2,\n    };\n    var outgoingAngle = 0;\n    if (targetElement.links.length > 0) {\n        var averageSourcePosition = calculateAveragePosition(targetElement.links.map(function (link) {\n            var linkSource = model.sourceOf(link);\n            return linkSource !== targetElement ? linkSource : model.targetOf(link);\n        }));\n        var vectorDiff = {\n            x: targetPosition.x - averageSourcePosition.x, y: targetPosition.y - averageSourcePosition.y,\n        };\n        if (vectorDiff.x !== 0 || vectorDiff.y !== 0) {\n            outgoingAngle = Math.atan2(vectorDiff.y, vectorDiff.x);\n        }\n    }\n    var step = Math.min(Math.PI / elements.length, Math.PI / 6);\n    var elementsSteck = [].concat(elements);\n    var placeElementFromSteck = function (curAngle, element) {\n        if (element) {\n            var size = element.size;\n            element.setPosition({\n                x: targetPosition.x + prefferedLinksLength * Math.cos(curAngle) - size.width / 2,\n                y: targetPosition.y + prefferedLinksLength * Math.sin(curAngle) - size.height / 2,\n            });\n        }\n    };\n    var isOddLength = elementsSteck.length % 2 === 0;\n    if (isOddLength) {\n        for (var angle = step / 2; elementsSteck.length > 0; angle += step) {\n            placeElementFromSteck(outgoingAngle - angle, elementsSteck.pop());\n            placeElementFromSteck(outgoingAngle + angle, elementsSteck.pop());\n        }\n    }\n    else {\n        placeElementFromSteck(outgoingAngle, elementsSteck.pop());\n        for (var angle = step; elementsSteck.length > 0; angle += step) {\n            placeElementFromSteck(outgoingAngle - angle, elementsSteck.pop());\n            placeElementFromSteck(outgoingAngle + angle, elementsSteck.pop());\n        }\n    }\n    return new Promise(function (resolve) {\n        var listener = new events_1.EventObserver();\n        listener.listen(model.events, 'changeCells', function () {\n            listener.stopListening();\n            removeOverlaps({\n                model: model,\n                padding: { x: 15, y: 15 },\n            });\n            resolve();\n        });\n    });\n}\nexports.placeElementsAround = placeElementsAround;\nfunction removeOverlaps(params) {\n    var padding = params.padding, model = params.model, group = params.group, fixedElements = params.fixedElements, selectedElements = params.selectedElements;\n    return calculateLayout({\n        model: model,\n        group: group,\n        fixedElements: fixedElements,\n        selectedElements: selectedElements,\n        layoutFunction: function (nodes) {\n            padded(nodes, padding, function () { return groupRemoveOverlaps(nodes); });\n        },\n    });\n}\nexports.removeOverlaps = removeOverlaps;\nfunction forceLayout(params) {\n    var model = params.model, group = params.group, fixedElements = params.fixedElements, selectedElements = params.selectedElements;\n    return calculateLayout({\n        model: model,\n        group: group,\n        fixedElements: fixedElements,\n        selectedElements: selectedElements,\n        layoutFunction: function (nodes, links) {\n            if (fixedElements && fixedElements.size > 0) {\n                biasFreePadded(nodes, { x: 50, y: 50 }, function () { return groupForceLayout({\n                    nodes: nodes, links: links, preferredLinkLength: 200,\n                    avoidOvelaps: true,\n                }); });\n            }\n            else {\n                groupForceLayout({ nodes: nodes, links: links, preferredLinkLength: 200 });\n                biasFreePadded(nodes, { x: 50, y: 50 }, function () { return groupRemoveOverlaps(nodes); });\n            }\n        },\n    });\n}\nexports.forceLayout = forceLayout;\nfunction getContentFittingBoxForLayout(nodes) {\n    var minX = Infinity, minY = Infinity;\n    var maxX = -Infinity, maxY = -Infinity;\n    for (var _i = 0, nodes_7 = nodes; _i < nodes_7.length; _i++) {\n        var node = nodes_7[_i];\n        var x = node.x, y = node.y, width = node.width, height = node.height;\n        minX = Math.min(minX, x);\n        minY = Math.min(minY, y);\n        maxX = Math.max(maxX, x + width);\n        maxY = Math.max(maxY, y + height);\n    }\n    return {\n        x: Number.isFinite(minX) ? minX : 0,\n        y: Number.isFinite(minY) ? minY : 0,\n        width: Number.isFinite(minX) && Number.isFinite(maxX) ? (maxX - minX) : 0,\n        height: Number.isFinite(minY) && Number.isFinite(maxY) ? (maxY - minY) : 0,\n    };\n}\nexports.getContentFittingBoxForLayout = getContentFittingBoxForLayout;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__106__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphBuilder_1 = require(\"./graphBuilder\");\nvar DEFAULT_PREFIX = \"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\n PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\n PREFIX owl:  <http://www.w3.org/2002/07/owl#>\" + '\\n\\n';\nvar SparqlGraphBuilder = /** @class */ (function () {\n    function SparqlGraphBuilder(dataProvider) {\n        this.dataProvider = dataProvider;\n        this.graphBuilder = new graphBuilder_1.GraphBuilder(dataProvider);\n    }\n    SparqlGraphBuilder.prototype.getGraphFromConstruct = function (constructQuery) {\n        var _this = this;\n        var query = DEFAULT_PREFIX + constructQuery;\n        return this.dataProvider.executeSparqlConstruct(query)\n            .then(function (graph) { return _this.graphBuilder.getGraphFromRDFGraph(graph); });\n    };\n    return SparqlGraphBuilder;\n}());\nexports.SparqlGraphBuilder = SparqlGraphBuilder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar schema_1 = require(\"../data/schema\");\nvar events_1 = require(\"../viewUtils/events\");\nvar elements_1 = require(\"./elements\");\nvar graph_1 = require(\"./graph\");\nvar history_1 = require(\"./history\");\n/**\n * Model of diagram.\n */\nvar DiagramModel = /** @class */ (function () {\n    function DiagramModel(history) {\n        this.history = history;\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        this.graph = new graph_1.Graph();\n        this.graphListener = new events_1.EventObserver();\n    }\n    Object.defineProperty(DiagramModel.prototype, \"elements\", {\n        get: function () { return this.graph.getElements(); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DiagramModel.prototype, \"links\", {\n        get: function () { return this.graph.getLinks(); },\n        enumerable: true,\n        configurable: true\n    });\n    DiagramModel.prototype.getElement = function (elementId) {\n        return this.graph.getElement(elementId);\n    };\n    DiagramModel.prototype.getLinkById = function (linkId) {\n        return this.graph.getLink(linkId);\n    };\n    DiagramModel.prototype.linksOfType = function (linkTypeId) {\n        return this.graph.getLinks().filter(function (link) { return link.typeId === linkTypeId; });\n    };\n    DiagramModel.prototype.findLink = function (linkTypeId, sourceId, targetId) {\n        return this.graph.findLink(linkTypeId, sourceId, targetId);\n    };\n    DiagramModel.prototype.sourceOf = function (link) { return this.getElement(link.sourceId); };\n    DiagramModel.prototype.targetOf = function (link) { return this.getElement(link.targetId); };\n    DiagramModel.prototype.isSourceAndTargetVisible = function (link) {\n        return Boolean(this.sourceOf(link) && this.targetOf(link));\n    };\n    DiagramModel.prototype.resetGraph = function () {\n        if (this.graphListener) {\n            this.graphListener.stopListening();\n            this.graphListener = new events_1.EventObserver();\n        }\n        this.graph = new graph_1.Graph();\n    };\n    DiagramModel.prototype.subscribeGraph = function () {\n        var _this = this;\n        this.graphListener.listen(this.graph.events, 'changeCells', function () {\n            _this.source.trigger('changeCells', {});\n        });\n        this.graphListener.listen(this.graph.events, 'elementEvent', function (e) {\n            _this.source.trigger('elementEvent', e);\n        });\n        this.graphListener.listen(this.graph.events, 'linkEvent', function (e) {\n            _this.source.trigger('linkEvent', e);\n        });\n        this.graphListener.listen(this.graph.events, 'linkTypeEvent', function (e) {\n            _this.source.trigger('linkTypeEvent', e);\n        });\n        this.graphListener.listen(this.graph.events, 'classEvent', function (e) {\n            _this.source.trigger('classEvent', e);\n        });\n        this.source.trigger('changeCells', { source: this });\n    };\n    DiagramModel.prototype.reorderElements = function (compare) {\n        this.graph.reorderElements(compare);\n    };\n    DiagramModel.prototype.createElement = function (elementIriOrModel, group) {\n        var elementIri = typeof elementIriOrModel === 'string'\n            ? elementIriOrModel : elementIriOrModel.id;\n        var elements = this.elements.filter(function (el) { return el.iri === elementIri && el.group === group; });\n        if (elements.length > 0) {\n            // usually there should be only one element\n            return elements[0];\n        }\n        var data = typeof elementIriOrModel === 'string'\n            ? placeholderDataFromIri(elementIri)\n            : elementIriOrModel;\n        data = tslib_1.__assign(tslib_1.__assign({}, data), { id: data.id });\n        var element = new elements_1.Element({ id: schema_1.GenerateID.forElement(), data: data, group: group });\n        this.history.execute(addElement(this.graph, element, []));\n        return element;\n    };\n    DiagramModel.prototype.removeElement = function (elementId) {\n        var element = this.getElement(elementId);\n        if (element) {\n            this.history.execute(removeElement(this.graph, element));\n        }\n    };\n    DiagramModel.prototype.addLink = function (link) {\n        var typeId = link.typeId, sourceId = link.sourceId, targetId = link.targetId, data = link.data;\n        if (data && data.linkTypeId !== typeId) {\n            throw new Error('linkTypeId must match linkType.id');\n        }\n        var existingLink = this.findLink(typeId, sourceId, targetId);\n        if (existingLink) {\n            if (link.data) {\n                existingLink.setLayoutOnly(false);\n                existingLink.setData(data);\n            }\n            return existingLink;\n        }\n        var linkType = this.createLinkType(link.typeId);\n        var source = this.getElement(sourceId);\n        var target = this.getElement(targetId);\n        var shouldBeVisible = linkType.visible && source && target;\n        if (!shouldBeVisible) {\n            return undefined;\n        }\n        if (!link.data) {\n            link.setData({ linkTypeId: typeId, sourceId: source.iri, targetId: target.iri });\n        }\n        this.graph.addLink(link);\n        return link;\n    };\n    DiagramModel.prototype.removeLink = function (linkId) {\n        this.graph.removeLink(linkId);\n    };\n    DiagramModel.prototype.getClass = function (classIri) {\n        return this.graph.getClass(classIri);\n    };\n    DiagramModel.prototype.createClass = function (classIri) {\n        var existing = this.graph.getClass(classIri);\n        if (existing) {\n            return existing;\n        }\n        var classModel = new elements_1.FatClassModel({ id: classIri });\n        this.addClass(classModel);\n        return classModel;\n    };\n    DiagramModel.prototype.addClass = function (model) {\n        this.graph.addClass(model);\n    };\n    DiagramModel.prototype.getLinkType = function (linkTypeIri) {\n        return this.graph.getLinkType(linkTypeIri);\n    };\n    DiagramModel.prototype.createLinkType = function (linkTypeIri) {\n        var existing = this.graph.getLinkType(linkTypeIri);\n        if (existing) {\n            return existing;\n        }\n        var linkType = new elements_1.FatLinkType({ id: linkTypeIri });\n        this.graph.addLinkType(linkType);\n        return linkType;\n    };\n    DiagramModel.prototype.getProperty = function (propertyTypeIri) {\n        return this.graph.getProperty(propertyTypeIri);\n    };\n    DiagramModel.prototype.createProperty = function (propertyIri) {\n        var existing = this.graph.getProperty(propertyIri);\n        if (existing) {\n            return existing;\n        }\n        var property = new elements_1.RichProperty({ id: propertyIri });\n        this.graph.addProperty(property);\n        return property;\n    };\n    DiagramModel.prototype.triggerChangeGroupContent = function (group) {\n        this.source.trigger('changeGroupContent', { group: group });\n    };\n    DiagramModel.prototype.createTemporaryElement = function () {\n        var target = new elements_1.Element({\n            id: schema_1.GenerateID.forElement(),\n            data: placeholderDataFromIri(''),\n            temporary: true,\n        });\n        this.graph.addElement(target);\n        return target;\n    };\n    return DiagramModel;\n}());\nexports.DiagramModel = DiagramModel;\nfunction placeholderDataFromIri(iri) {\n    return {\n        id: iri,\n        types: [],\n        label: { values: [] },\n        properties: {},\n    };\n}\nexports.placeholderDataFromIri = placeholderDataFromIri;\nfunction addElement(graph, element, connectedLinks) {\n    return history_1.Command.create('Add element', function () {\n        graph.addElement(element);\n        for (var _i = 0, connectedLinks_1 = connectedLinks; _i < connectedLinks_1.length; _i++) {\n            var link = connectedLinks_1[_i];\n            var existing = graph.getLink(link.id) || graph.findLink(link.typeId, link.sourceId, link.targetId);\n            if (!existing) {\n                graph.addLink(link);\n            }\n        }\n        return removeElement(graph, element);\n    });\n}\nfunction removeElement(graph, element) {\n    return history_1.Command.create('Remove element', function () {\n        var connectedLinks = tslib_1.__spreadArrays(element.links);\n        graph.removeElement(element.id);\n        return addElement(graph, element, connectedLinks);\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar events_1 = require(\"../viewUtils/events\");\nvar Graph = /** @class */ (function () {\n    function Graph() {\n        var _this = this;\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        this.elements = new collections_1.OrderedMap();\n        this.links = new collections_1.OrderedMap();\n        this.classesById = new Map();\n        this.propertiesById = new Map();\n        this.linkTypes = new Map();\n        this.onElementEvent = function (data, key) {\n            _this.source.trigger('elementEvent', { key: key, data: data });\n        };\n        this.onLinkEvent = function (data, key) {\n            _this.source.trigger('linkEvent', { key: key, data: data });\n        };\n        this.onLinkTypeEvent = function (data, key) {\n            _this.source.trigger('linkTypeEvent', { key: key, data: data });\n        };\n        this.onClassEvent = function (data, key) {\n            _this.source.trigger('classEvent', { key: key, data: data });\n        };\n    }\n    Graph.prototype.getElements = function () { return this.elements.items; };\n    Graph.prototype.getLinks = function () { return this.links.items; };\n    Graph.prototype.getLink = function (linkId) {\n        return this.links.get(linkId);\n    };\n    Graph.prototype.findLink = function (linkTypeId, sourceId, targetId) {\n        var source = this.getElement(sourceId);\n        if (!source) {\n            return undefined;\n        }\n        var index = findLinkIndex(source.links, linkTypeId, sourceId, targetId);\n        return index >= 0 ? source.links[index] : undefined;\n    };\n    Graph.prototype.sourceOf = function (link) {\n        return this.getElement(link.sourceId);\n    };\n    Graph.prototype.targetOf = function (link) {\n        return this.getElement(link.targetId);\n    };\n    Graph.prototype.reorderElements = function (compare) {\n        this.elements.reorder(compare);\n    };\n    Graph.prototype.getElement = function (elementId) {\n        return this.elements.get(elementId);\n    };\n    Graph.prototype.addElement = function (element) {\n        if (this.getElement(element.id)) {\n            throw new Error(\"Link type '\" + element.id + \"' already exists.\");\n        }\n        element.events.onAny(this.onElementEvent);\n        this.elements.push(element.id, element);\n        this.source.trigger('changeCells', {});\n    };\n    Graph.prototype.removeElement = function (elementId) {\n        var element = this.elements.get(elementId);\n        if (element) {\n            var options = { silent: true };\n            // clone links to prevent modifications during iteration\n            for (var _i = 0, _a = tslib_1.__spreadArrays(element.links); _i < _a.length; _i++) {\n                var link = _a[_i];\n                this.removeLink(link.id, options);\n            }\n            this.elements.delete(elementId);\n            element.events.offAny(this.onElementEvent);\n            this.source.trigger('changeCells', {});\n        }\n    };\n    Graph.prototype.addLink = function (link) {\n        if (this.getLink(link.id)) {\n            throw new Error(\"Link '\" + link.id + \"' already exists.\");\n        }\n        var linkType = this.getLinkType(link.typeId);\n        if (!linkType) {\n            throw new Error(\"Link type '\" + link.typeId + \"' not found.\");\n        }\n        this.registerLink(link);\n    };\n    Graph.prototype.registerLink = function (link) {\n        var typeId = link.typeId;\n        this.sourceOf(link).links.push(link);\n        if (link.sourceId !== link.targetId) {\n            this.targetOf(link).links.push(link);\n        }\n        link.events.onAny(this.onLinkEvent);\n        this.links.push(link.id, link);\n        this.source.trigger('changeCells', {});\n    };\n    Graph.prototype.removeLink = function (linkId, options) {\n        var link = this.links.delete(linkId);\n        if (link) {\n            var typeId = link.typeId, sourceId = link.sourceId, targetId = link.targetId;\n            link.events.offAny(this.onLinkEvent);\n            this.removeLinkReferences(typeId, sourceId, targetId);\n            if (!(options && options.silent)) {\n                this.source.trigger('changeCells', {});\n            }\n        }\n    };\n    Graph.prototype.removeLinkReferences = function (linkTypeId, sourceId, targetId) {\n        var source = this.getElement(sourceId);\n        if (source) {\n            removeLinkFrom(source.links, linkTypeId, sourceId, targetId);\n        }\n        var target = this.getElement(targetId);\n        if (target) {\n            removeLinkFrom(target.links, linkTypeId, sourceId, targetId);\n        }\n    };\n    Graph.prototype.getLinkTypes = function () {\n        var result = [];\n        this.linkTypes.forEach(function (type) { return result.push(type); });\n        return result;\n    };\n    Graph.prototype.getLinkType = function (linkTypeId) {\n        return this.linkTypes.get(linkTypeId);\n    };\n    Graph.prototype.addLinkType = function (linkType) {\n        if (this.getLinkType(linkType.id)) {\n            throw new Error(\"Link type '\" + linkType.id + \"' already exists.\");\n        }\n        linkType.setIndex(Graph.nextLinkTypeIndex++);\n        linkType.events.onAny(this.onLinkTypeEvent);\n        this.linkTypes.set(linkType.id, linkType);\n    };\n    Graph.prototype.getProperty = function (propertyId) {\n        return this.propertiesById.get(propertyId);\n    };\n    Graph.prototype.addProperty = function (property) {\n        if (this.getProperty(property.id)) {\n            throw new Error(\"Property '\" + property.id + \"' already exists.\");\n        }\n        this.propertiesById.set(property.id, property);\n    };\n    Graph.prototype.getClass = function (classId) {\n        return this.classesById.get(classId);\n    };\n    Graph.prototype.getClasses = function () {\n        var classes = [];\n        this.classesById.forEach(function (richClass) { return classes.push(richClass); });\n        return classes;\n    };\n    Graph.prototype.addClass = function (classModel) {\n        if (this.getClass(classModel.id)) {\n            throw new Error(\"Class '\" + classModel.id + \"' already exists.\");\n        }\n        classModel.events.onAny(this.onClassEvent);\n        this.classesById.set(classModel.id, classModel);\n    };\n    Graph.nextLinkTypeIndex = 0;\n    return Graph;\n}());\nexports.Graph = Graph;\nfunction removeLinkFrom(links, linkTypeId, sourceId, targetId) {\n    if (!links) {\n        return;\n    }\n    while (true) {\n        var index = findLinkIndex(links, linkTypeId, sourceId, targetId);\n        if (index < 0) {\n            break;\n        }\n        links.splice(index, 1);\n    }\n}\nfunction findLinkIndex(haystack, linkTypeId, sourceId, targetId) {\n    for (var i = 0; i < haystack.length; i++) {\n        var link = haystack[i];\n        if (link.sourceId === sourceId &&\n            link.targetId === targetId &&\n            link.typeId === linkTypeId) {\n            return i;\n        }\n    }\n    return -1;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar schema_1 = require(\"../data/schema\");\nvar elements_1 = require(\"../diagram/elements\");\nvar history_1 = require(\"../diagram/history\");\nvar model_1 = require(\"../diagram/model\");\nvar dataFetcher_1 = require(\"./dataFetcher\");\nvar serializedDiagram_1 = require(\"./serializedDiagram\");\nvar AsyncModel = /** @class */ (function (_super) {\n    tslib_1.__extends(AsyncModel, _super);\n    function AsyncModel(history, groupByProperties) {\n        var _this = _super.call(this, history) || this;\n        _this.groupByProperties = groupByProperties;\n        _this.linkSettings = {};\n        _this.onLinkTypeVisibilityChanged = function (e) {\n            if (e.source.visible) {\n                if (!e.preventLoading) {\n                    _this.requestLinksOfType([e.source.id]);\n                }\n            }\n            else {\n                for (var _i = 0, _a = _this.linksOfType(e.source.id); _i < _a.length; _i++) {\n                    var link = _a[_i];\n                    _this.graph.removeLink(link.id);\n                }\n            }\n        };\n        return _this;\n    }\n    Object.defineProperty(AsyncModel.prototype, \"asyncSource\", {\n        get: function () {\n            return this.source;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AsyncModel.prototype, \"dataProvider\", {\n        get: function () { return this._dataProvider; },\n        enumerable: true,\n        configurable: true\n    });\n    AsyncModel.prototype.subscribeGraph = function () {\n        var _this = this;\n        _super.prototype.subscribeGraph.call(this);\n        this.graphListener.listen(this.graph.events, 'linkTypeEvent', function (e) {\n            if (e.key === 'changeVisibility') {\n                _this.onLinkTypeVisibilityChanged(e.data[e.key], e.key);\n            }\n        });\n    };\n    AsyncModel.prototype.setDataProvider = function (dataProvider) {\n        this._dataProvider = dataProvider;\n        this.fetcher = new dataFetcher_1.DataFetcher(this.graph, dataProvider);\n    };\n    AsyncModel.prototype.createNewDiagram = function (dataProvider) {\n        var _this = this;\n        this.resetGraph();\n        this.setDataProvider(dataProvider);\n        this.asyncSource.trigger('loadingStart', { source: this });\n        return this.dataProvider.linkTypes().then(function (linkTypes) {\n            var allLinkTypes = _this.initLinkTypes(linkTypes);\n            return _this.loadAndRenderLayout({\n                allLinkTypes: allLinkTypes,\n                markLinksAsLayoutOnly: false,\n            });\n        }).catch(function (error) {\n            // tslint:disable-next-line:no-console\n            console.error(error);\n            _this.asyncSource.trigger('loadingError', { source: _this, error: error });\n            return Promise.reject(error);\n        });\n    };\n    AsyncModel.prototype.importLayout = function (params) {\n        var _this = this;\n        this.resetGraph();\n        this.setDataProvider(params.dataProvider);\n        this.asyncSource.trigger('loadingStart', { source: this });\n        return this.dataProvider.linkTypes().then(function (linkTypes) {\n            var allLinkTypes = _this.initLinkTypes(linkTypes);\n            var diagram = params.diagram ? params.diagram : serializedDiagram_1.emptyDiagram();\n            _this.setLinkSettings(diagram.linkTypeOptions);\n            var loadingModels = _this.loadAndRenderLayout({\n                layoutData: diagram.layoutData,\n                preloadedElements: params.preloadedElements || {},\n                markLinksAsLayoutOnly: params.validateLinks || false,\n                allLinkTypes: allLinkTypes,\n                hideUnusedLinkTypes: params.hideUnusedLinkTypes,\n            });\n            var requestingLinks = params.validateLinks\n                ? _this.requestLinksOfType() : Promise.resolve();\n            return Promise.all([loadingModels, requestingLinks]);\n        }).then(function () {\n            _this.asyncSource.trigger('loadingSuccess', { source: _this });\n        }).catch(function (error) {\n            // tslint:disable-next-line:no-console\n            console.error(error);\n            _this.asyncSource.trigger('loadingError', { source: _this, error: error });\n            return Promise.reject(error);\n        });\n    };\n    AsyncModel.prototype.exportLayout = function () {\n        var layoutData = serializedDiagram_1.makeLayoutData(this.graph.getElements(), this.graph.getLinks());\n        var linkTypeOptions = this.graph.getLinkTypes()\n            // do not serialize default link type options\n            .filter(function (linkType) { return (!linkType.visible || !linkType.showLabel) && linkType.id !== schema_1.PLACEHOLDER_LINK_TYPE; })\n            .map(function (_a) {\n            var id = _a.id, visible = _a.visible, showLabel = _a.showLabel;\n            return ({ '@type': 'LinkTypeOptions', property: id, visible: visible, showLabel: showLabel });\n        });\n        return serializedDiagram_1.makeSerializedDiagram({ layoutData: layoutData, linkTypeOptions: linkTypeOptions });\n    };\n    AsyncModel.prototype.initLinkTypes = function (linkTypes) {\n        var types = [];\n        for (var _i = 0, linkTypes_1 = linkTypes; _i < linkTypes_1.length; _i++) {\n            var _a = linkTypes_1[_i], id = _a.id, label = _a.label;\n            var linkType = new elements_1.FatLinkType({ id: id, label: label.values });\n            this.graph.addLinkType(linkType);\n            types.push(linkType);\n        }\n        return types;\n    };\n    AsyncModel.prototype.setLinkSettings = function (settings) {\n        if (!settings) {\n            return;\n        }\n        for (var _i = 0, settings_1 = settings; _i < settings_1.length; _i++) {\n            var setting = settings_1[_i];\n            var _a = setting.visible, visible = _a === void 0 ? true : _a, _b = setting.showLabel, showLabel = _b === void 0 ? true : _b;\n            var linkTypeId = setting.property;\n            this.linkSettings[linkTypeId] = { '@type': 'LinkTypeOptions', property: linkTypeId, visible: visible, showLabel: showLabel };\n            var linkType = this.getLinkType(linkTypeId);\n            if (linkType) {\n                linkType.setVisibility({ visible: visible, showLabel: showLabel });\n            }\n        }\n    };\n    AsyncModel.prototype.loadAndRenderLayout = function (params) {\n        var _a = params.layoutData, layoutData = _a === void 0 ? serializedDiagram_1.emptyLayoutData() : _a, _b = params.preloadedElements, preloadedElements = _b === void 0 ? {} : _b, markLinksAsLayoutOnly = params.markLinksAsLayoutOnly, hideUnusedLinkTypes = params.hideUnusedLinkTypes;\n        var elementIrisToRequestData = [];\n        var usedLinkTypes = {};\n        for (var _i = 0, _c = layoutData.elements; _i < _c.length; _i++) {\n            var layoutElement = _c[_i];\n            var id = layoutElement[\"@id\"], iri = layoutElement.iri, position = layoutElement.position, size = layoutElement.size, isExpanded = layoutElement.isExpanded, group = layoutElement.group, elementState = layoutElement.elementState;\n            var template = preloadedElements[iri];\n            var data = template || model_1.placeholderDataFromIri(iri);\n            var element = new elements_1.Element({ id: id, data: data, position: position, size: size, expanded: isExpanded, group: group, elementState: elementState });\n            this.graph.addElement(element);\n            if (!template) {\n                elementIrisToRequestData.push(element.iri);\n            }\n        }\n        for (var _d = 0, _e = layoutData.links; _d < _e.length; _d++) {\n            var layoutLink = _e[_d];\n            var id = layoutLink[\"@id\"], property = layoutLink.property, source = layoutLink.source, target = layoutLink.target, vertices = layoutLink.vertices, linkState = layoutLink.linkState;\n            var linkType = this.createLinkType(property);\n            usedLinkTypes[linkType.id] = linkType;\n            var link = this.addLink(new elements_1.Link({\n                id: id,\n                typeId: linkType.id,\n                sourceId: source['@id'],\n                targetId: target['@id'],\n                vertices: vertices,\n                linkState: linkState,\n            }));\n            if (link) {\n                link.setLayoutOnly(markLinksAsLayoutOnly);\n            }\n        }\n        this.subscribeGraph();\n        var requestingModels = this.requestElementData(elementIrisToRequestData);\n        if (hideUnusedLinkTypes && params.allLinkTypes) {\n            this.hideUnusedLinkTypes(params.allLinkTypes, usedLinkTypes);\n        }\n        return requestingModels;\n    };\n    AsyncModel.prototype.hideUnusedLinkTypes = function (allTypes, usedTypes) {\n        for (var _i = 0, allTypes_1 = allTypes; _i < allTypes_1.length; _i++) {\n            var linkType = allTypes_1[_i];\n            if (!usedTypes[linkType.id]) {\n                linkType.setVisibility({\n                    visible: false,\n                    showLabel: linkType.showLabel,\n                });\n            }\n        }\n    };\n    AsyncModel.prototype.requestElementData = function (elementIris) {\n        return this.fetcher.fetchElementData(elementIris);\n    };\n    AsyncModel.prototype.requestLinksOfType = function (linkTypeIds) {\n        var _this = this;\n        var linkTypes = linkTypeIds || this.graph.getLinkTypes()\n            .filter(function (type) { return type.visible; })\n            .map(function (type) { return type.id; });\n        return this.dataProvider.linksInfo({\n            elementIds: this.graph.getElements().map(function (element) { return element.iri; }),\n            linkTypeIds: linkTypes,\n        }).then(function (links) { return _this.onLinkInfoLoaded(links); });\n    };\n    AsyncModel.prototype.createClass = function (classId) {\n        if (this.graph.getClass(classId)) {\n            return _super.prototype.getClass.call(this, classId);\n        }\n        var classModel = _super.prototype.createClass.call(this, classId);\n        this.fetcher.fetchClass(classModel);\n        return classModel;\n    };\n    AsyncModel.prototype.createLinkType = function (linkTypeId) {\n        if (this.graph.getLinkType(linkTypeId)) {\n            return _super.prototype.createLinkType.call(this, linkTypeId);\n        }\n        var linkType = _super.prototype.createLinkType.call(this, linkTypeId);\n        var setting = this.linkSettings[linkType.id];\n        if (setting) {\n            var visible = setting.visible, showLabel = setting.showLabel;\n            linkType.setVisibility({ visible: visible, showLabel: showLabel, preventLoading: true });\n        }\n        this.fetcher.fetchLinkType(linkType);\n        return linkType;\n    };\n    AsyncModel.prototype.createProperty = function (propertyIri) {\n        if (this.graph.getProperty(propertyIri)) {\n            return _super.prototype.createProperty.call(this, propertyIri);\n        }\n        var property = _super.prototype.createProperty.call(this, propertyIri);\n        this.fetcher.fetchPropertyType(property);\n        return property;\n    };\n    AsyncModel.prototype.onLinkInfoLoaded = function (links) {\n        var allowToCreate;\n        var cancel = function () { allowToCreate = false; };\n        for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n            var linkModel = links_1[_i];\n            this.createLinkType(linkModel.linkTypeId);\n            allowToCreate = true;\n            this.asyncSource.trigger('createLoadedLink', { source: this, model: linkModel, cancel: cancel });\n            if (allowToCreate) {\n                this.createLinks(linkModel);\n            }\n        }\n    };\n    AsyncModel.prototype.createLinks = function (data) {\n        var sources = this.graph.getElements().filter(function (el) { return el.iri === data.sourceId; });\n        var targets = this.graph.getElements().filter(function (el) { return el.iri === data.targetId; });\n        var typeId = data.linkTypeId;\n        for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n            var source = sources_1[_i];\n            for (var _a = 0, targets_1 = targets; _a < targets_1.length; _a++) {\n                var target = targets_1[_a];\n                this.addLink(new elements_1.Link({ typeId: typeId, sourceId: source.id, targetId: target.id, data: data }));\n            }\n        }\n    };\n    AsyncModel.prototype.loadEmbeddedElements = function (elementIri) {\n        var _this = this;\n        var elements = this.groupByProperties.map(function (groupBy) {\n            return _this.dataProvider.linkElements({\n                elementId: elementIri,\n                linkId: groupBy.linkType,\n                offset: 0,\n                direction: groupBy.linkDirection,\n            });\n        });\n        return Promise.all(elements).then(function (res) {\n            return res.reduce(function (memo, current) { return Object.assign(memo, current); }, {});\n        });\n    };\n    return AsyncModel;\n}(model_1.DiagramModel));\nexports.AsyncModel = AsyncModel;\nfunction requestElementData(model, elementIris) {\n    return history_1.Command.effect('Fetch element data', function () {\n        model.requestElementData(elementIris);\n    });\n}\nexports.requestElementData = requestElementData;\nfunction restoreLinksBetweenElements(model) {\n    return history_1.Command.effect('Restore links between elements', function () {\n        model.requestLinksOfType();\n    });\n}\nexports.restoreLinksBetweenElements = restoreLinksBetweenElements;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar async_1 = require(\"../viewUtils/async\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar DataFetcher = /** @class */ (function () {\n    function DataFetcher(graph, dataProvider) {\n        var _this = this;\n        this.graph = graph;\n        this.dataProvider = dataProvider;\n        this.classQueue = new async_1.BufferingQueue(function (classIds) {\n            _this.dataProvider.classInfo({ classIds: classIds }).then(_this.onClassesLoaded);\n        });\n        this.linkTypeQueue = new async_1.BufferingQueue(function (linkTypeIds) {\n            _this.dataProvider.linkTypesInfo({ linkTypeIds: linkTypeIds }).then(_this.onLinkTypesLoaded);\n        });\n        this.propertyTypeQueue = new async_1.BufferingQueue(function (propertyIds) {\n            _this.dataProvider.propertyInfo({ propertyIds: propertyIds }).then(_this.onPropertyTypesLoaded);\n        });\n        this.onElementInfoLoaded = function (elements) {\n            for (var _i = 0, _a = _this.graph.getElements(); _i < _a.length; _i++) {\n                var element = _a[_i];\n                var loadedModel = elements[element.iri];\n                if (loadedModel) {\n                    element.setData(loadedModel);\n                }\n            }\n        };\n        this.onClassesLoaded = function (classInfos) {\n            for (var _i = 0, classInfos_1 = classInfos; _i < classInfos_1.length; _i++) {\n                var _a = classInfos_1[_i], id = _a.id, label = _a.label, count = _a.count;\n                var model = _this.graph.getClass(id);\n                if (!model) {\n                    continue;\n                }\n                model.setLabel(label.values);\n                if (typeof count === 'number') {\n                    model.setCount(count);\n                }\n            }\n        };\n        this.onLinkTypesLoaded = function (linkTypesInfo) {\n            for (var _i = 0, linkTypesInfo_1 = linkTypesInfo; _i < linkTypesInfo_1.length; _i++) {\n                var _a = linkTypesInfo_1[_i], id = _a.id, label = _a.label;\n                var model = _this.graph.getLinkType(id);\n                if (!model) {\n                    continue;\n                }\n                model.setLabel(label.values);\n            }\n        };\n        this.onPropertyTypesLoaded = function (propertyModels) {\n            for (var propId in propertyModels) {\n                if (!collections_1.hasOwnProperty(propertyModels, propId)) {\n                    continue;\n                }\n                var _a = propertyModels[propId], id = _a.id, label = _a.label;\n                var targetProperty = _this.graph.getProperty(id);\n                if (targetProperty) {\n                    targetProperty.setLabel(label.values);\n                }\n            }\n        };\n    }\n    DataFetcher.prototype.fetchElementData = function (elementIris) {\n        if (elementIris.length === 0) {\n            return Promise.resolve();\n        }\n        return this.dataProvider.elementInfo({ elementIds: tslib_1.__spreadArrays(elementIris) })\n            .then(this.onElementInfoLoaded);\n    };\n    DataFetcher.prototype.fetchClass = function (model) {\n        this.classQueue.push(model.id);\n    };\n    DataFetcher.prototype.fetchLinkType = function (linkType) {\n        this.linkTypeQueue.push(linkType.id);\n    };\n    DataFetcher.prototype.fetchPropertyType = function (propertyType) {\n        if (!this.dataProvider.propertyInfo) {\n            return;\n        }\n        this.propertyTypeQueue.push(propertyType.id);\n    };\n    return DataFetcher;\n}());\nexports.DataFetcher = DataFetcher;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar model_1 = require(\"../data/model\");\nvar commands_1 = require(\"../diagram/commands\");\nvar elements_1 = require(\"../diagram/elements\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar history_1 = require(\"../diagram/history\");\nvar view_1 = require(\"../diagram/view\");\nvar events_1 = require(\"../viewUtils/events\");\nvar dialog_1 = require(\"../widgets/dialog\");\nvar connectionsMenu_1 = require(\"../widgets/connectionsMenu\");\nvar editEntityForm_1 = require(\"../forms/editEntityForm\");\nvar editElementTypeForm_1 = require(\"../forms/editElementTypeForm\");\nvar editLinkForm_1 = require(\"../forms/editLinkForm\");\nvar editLinkLabelForm_1 = require(\"../forms/editLinkLabelForm\");\nvar halo_1 = require(\"../widgets/halo\");\nvar haloLink_1 = require(\"../widgets/haloLink\");\nvar linkStateWidget_1 = require(\"./linkStateWidget\");\nvar elementDecorator_1 = require(\"./elementDecorator\");\nvar layout_1 = require(\"../viewUtils/layout\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar asyncModel_1 = require(\"./asyncModel\");\nvar authoringState_1 = require(\"./authoringState\");\nvar editLayer_1 = require(\"./editLayer\");\nvar validation_1 = require(\"./validation\");\nvar async_1 = require(\"../viewUtils/async\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar DialogTypes;\n(function (DialogTypes) {\n    DialogTypes[DialogTypes[\"ConnectionsMenu\"] = 0] = \"ConnectionsMenu\";\n    DialogTypes[DialogTypes[\"EditEntityForm\"] = 1] = \"EditEntityForm\";\n    DialogTypes[DialogTypes[\"EditLinkForm\"] = 2] = \"EditLinkForm\";\n    DialogTypes[DialogTypes[\"EditEntityTypeForm\"] = 3] = \"EditEntityTypeForm\";\n    DialogTypes[DialogTypes[\"EditLinkLabelForm\"] = 4] = \"EditLinkLabelForm\";\n})(DialogTypes = exports.DialogTypes || (exports.DialogTypes = {}));\nvar EditorController = /** @class */ (function () {\n    function EditorController(props) {\n        var _this = this;\n        this.listener = new events_1.EventObserver();\n        this.source = new events_1.EventSource();\n        this.events = this.source;\n        this._authoringState = authoringState_1.AuthoringState.empty;\n        this._validationState = validation_1.ValidationState.empty;\n        this._temporaryState = authoringState_1.TemporaryState.empty;\n        this._selection = [];\n        this.cancellation = new async_1.Cancellation();\n        this.onKeyUp = function (e) {\n            var DELETE_KEY_CODE = 46;\n            if (e.keyCode === DELETE_KEY_CODE &&\n                document.activeElement.localName !== 'input') {\n                _this.removeSelectedElements();\n            }\n        };\n        var model = props.model, view = props.view, options = tslib_1.__rest(props, [\"model\", \"view\"]);\n        this.model = model;\n        this.view = view;\n        this.options = options;\n        this.listener.listen(this.events, 'changeValidationState', function (e) {\n            for (var _i = 0, _a = _this.model.elements; _i < _a.length; _i++) {\n                var element = _a[_i];\n                var previous = e.previous.elements.get(element.iri);\n                var current = _this.validationState.elements.get(element.iri);\n                if (current !== previous) {\n                    element.redraw();\n                }\n            }\n        });\n        this.listener.listen(this.events, 'changeAuthoringState', function (e) {\n            if (_this.options.validationApi) {\n                var changedElements = validation_1.changedElementsToValidate(e.previous, _this);\n                validation_1.validateElements(changedElements, _this.options.validationApi, _this, _this.cancellation.signal);\n            }\n        });\n        this.view._setElementDecorator(function (element) {\n            return React.createElement(elementDecorator_1.ElementDecorator, { model: element, view: _this.view, editor: _this, position: element.position });\n        });\n    }\n    EditorController.prototype._initializePaperComponents = function (paperArea) {\n        var _this = this;\n        this.listener.listen(paperArea.events, 'pointerUp', function (e) { return _this.onPaperPointerUp(e); });\n        this.listener.listen(this.model.events, 'changeCells', function () { return _this.onCellsChanged(); });\n        this.listener.listen(this.model.events, 'elementEvent', function (e) {\n            if (e.key === 'requestedGroupContent') {\n                _this.loadGroupContent(e.data.requestedGroupContent.source);\n            }\n        });\n        this.listener.listen(this.model.events, 'loadingStart', function () { return _this.setSpinner({}); });\n        this.listener.listen(this.model.events, 'loadingSuccess', function () {\n            _this.setSpinner(undefined);\n            var widget = React.createElement(linkStateWidget_1.LinkStateWidget, { view: _this.view, editor: _this });\n            _this.view.setPaperWidget({ key: 'states', widget: widget, attachment: view_1.WidgetAttachment.OverLinks });\n        });\n        this.listener.listen(this.model.events, 'loadingError', function (_a) {\n            var error = _a.error;\n            var statusText = error ? error.message : undefined;\n            _this.setSpinner({ statusText: statusText, errorOccured: true });\n        });\n        if (!this.options.disableHalo) {\n            this.configureHalo();\n            document.addEventListener('keyup', this.onKeyUp);\n            this.listener.listen(this.view.events, 'dispose', function () {\n                document.removeEventListener('keyup', _this.onKeyUp);\n            });\n        }\n    };\n    Object.defineProperty(EditorController.prototype, \"inAuthoringMode\", {\n        get: function () {\n            return Boolean(this._metadataApi);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EditorController.prototype, \"metadataApi\", {\n        get: function () { return this._metadataApi; },\n        enumerable: true,\n        configurable: true\n    });\n    EditorController.prototype.setMetadataApi = function (value) {\n        var previous = this._metadataApi;\n        if (value === previous) {\n            return;\n        }\n        this._metadataApi = value;\n        if (Boolean(value) !== Boolean(previous)) {\n            // authoring mode changed\n            this.source.trigger('changeMode', { source: this });\n        }\n    };\n    Object.defineProperty(EditorController.prototype, \"authoringState\", {\n        get: function () { return this._authoringState; },\n        enumerable: true,\n        configurable: true\n    });\n    EditorController.prototype.setAuthoringState = function (value) {\n        var previous = this._authoringState;\n        if (previous === value) {\n            return;\n        }\n        this.model.history.execute(this.updateAuthoringState(value));\n    };\n    EditorController.prototype.updateAuthoringState = function (state) {\n        var _this = this;\n        var previous = this._authoringState;\n        return history_1.Command.create('Create or delete entities and links', function () {\n            _this._authoringState = state;\n            _this.source.trigger('changeAuthoringState', { source: _this, previous: previous });\n            return _this.updateAuthoringState(previous);\n        });\n    };\n    Object.defineProperty(EditorController.prototype, \"validationState\", {\n        get: function () { return this._validationState; },\n        enumerable: true,\n        configurable: true\n    });\n    EditorController.prototype.setValidationState = function (value) {\n        var previous = this._validationState;\n        if (value === previous) {\n            return;\n        }\n        this._validationState = value;\n        this.source.trigger('changeValidationState', { source: this, previous: previous });\n    };\n    Object.defineProperty(EditorController.prototype, \"temporaryState\", {\n        get: function () { return this._temporaryState; },\n        enumerable: true,\n        configurable: true\n    });\n    EditorController.prototype.setTemporaryState = function (value) {\n        var previous = this._temporaryState;\n        if (value === previous) {\n            return;\n        }\n        this._temporaryState = value;\n        this.source.trigger('changeTemporaryState', { source: this, previous: previous });\n    };\n    Object.defineProperty(EditorController.prototype, \"selection\", {\n        get: function () { return this._selection; },\n        enumerable: true,\n        configurable: true\n    });\n    EditorController.prototype.setSelection = function (value) {\n        var previous = this._selection;\n        if (previous === value) {\n            return;\n        }\n        this._selection = value;\n        this.source.trigger('changeSelection', { source: this, previous: previous });\n    };\n    EditorController.prototype.cancelSelection = function () {\n        this.setSelection([]);\n    };\n    EditorController.prototype.removeSelectedElements = function () {\n        var itemsToRemove = this.selection;\n        if (itemsToRemove.length === 0) {\n            return;\n        }\n        this.cancelSelection();\n        this.removeItems(itemsToRemove);\n    };\n    EditorController.prototype.removeItems = function (items) {\n        var batch = this.model.history.startBatch();\n        var deletedElementIris = new Set();\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            if (item instanceof elements_1.Element) {\n                var event_1 = this.authoringState.elements.get(item.iri);\n                if (event_1) {\n                    this.discardChange(event_1);\n                }\n                this.model.removeElement(item.id);\n                deletedElementIris.add(item.iri);\n            }\n            else if (item instanceof elements_1.Link) {\n                if (authoringState_1.AuthoringState.isNewLink(this.authoringState, item.data)) {\n                    this.deleteLink(item.data);\n                }\n            }\n        }\n        if (deletedElementIris.size > 0) {\n            var newState = authoringState_1.AuthoringState.deleteNewLinksConnectedToElements(this.authoringState, deletedElementIris);\n            this.setAuthoringState(newState);\n        }\n        batch.store();\n    };\n    EditorController.prototype.onPaperPointerUp = function (event) {\n        if (this.options.disableHalo) {\n            return;\n        }\n        var sourceEvent = event.sourceEvent, target = event.target, triggerAsClick = event.triggerAsClick;\n        if (sourceEvent.ctrlKey || sourceEvent.shiftKey || sourceEvent.metaKey) {\n            return;\n        }\n        if (this.dialogTarget && this.dialogType === DialogTypes.EditEntityForm) {\n            return;\n        }\n        if (target instanceof elements_1.Element) {\n            this.setSelection([target]);\n            target.focus();\n        }\n        else if (target instanceof elements_1.Link) {\n            this.setSelection([target]);\n        }\n        else if (target instanceof elements_1.LinkVertex) {\n            this.setSelection([target.link]);\n        }\n        else if (!target && triggerAsClick) {\n            this.setSelection([]);\n            this.hideDialog();\n            if (document.activeElement) {\n                document.activeElement.blur();\n            }\n        }\n    };\n    EditorController.prototype.onCellsChanged = function () {\n        var _this = this;\n        if (this.selection.length === 0) {\n            return;\n        }\n        var newSelection = this.selection.filter(function (el) { return _this.model.getElement(el.id); });\n        if (newSelection.length < this.selection.length) {\n            this.setSelection(newSelection);\n        }\n    };\n    EditorController.prototype.setSpinner = function (props) {\n        var widget = props ? React.createElement(LoadingWidget, { spinnerProps: props }) : undefined;\n        this.view.setPaperWidget({ key: LoadingWidget.Key, widget: widget, attachment: view_1.WidgetAttachment.Viewport });\n    };\n    EditorController.prototype.configureHalo = function () {\n        var _this = this;\n        if (this.options.disableHalo) {\n            return;\n        }\n        this.listener.listen(this.events, 'changeSelection', function () {\n            var selected = _this.selection.length === 1 ? _this.selection[0] : undefined;\n            if (_this.dialogTarget && selected !== _this.dialogTarget) {\n                _this.hideDialog();\n            }\n            _this.bringSelectedElementsToFront();\n            _this.renderDefaultHalo();\n        });\n        this.listener.listen(this.events, 'toggleDialog', function (_a) {\n            var isOpened = _a.isOpened;\n            _this.renderDefaultHalo();\n        });\n        this.renderDefaultHalo();\n    };\n    EditorController.prototype.bringSelectedElementsToFront = function () {\n        if (this.selection.length === 0) {\n            return;\n        }\n        this.model.reorderElements(collections_1.makeMoveComparator(this.model.elements, this.selection.filter(function (item) { return item instanceof elements_1.Element; }), collections_1.MoveDirection.ToEnd));\n        this.view.performSyncUpdate();\n    };\n    EditorController.prototype.renderDefaultHalo = function () {\n        var _this = this;\n        var selected = this.selection.length === 1 ? this.selection[0] : undefined;\n        var halo;\n        if (selected instanceof elements_1.Element) {\n            halo = (React.createElement(halo_1.Halo, { editor: this, metadataApi: this.metadataApi, target: selected, onRemove: function () { return _this.removeSelectedElements(); }, onExpand: function () {\n                    _this.model.history.execute(commands_1.setElementExpanded(selected, !selected.isExpanded));\n                }, navigationMenuOpened: this.dialogType === DialogTypes.ConnectionsMenu, onToggleNavigationMenu: function () {\n                    if (_this.dialogTarget && _this.dialogType === DialogTypes.ConnectionsMenu) {\n                        _this.hideDialog();\n                    }\n                    else {\n                        _this.showConnectionsMenu(selected);\n                    }\n                    _this.renderDefaultHalo();\n                }, onAddToFilter: function () { return selected.addToFilter(); }, onEstablishNewLink: function (point) {\n                    return _this.startEditing({ target: selected, mode: editLayer_1.EditLayerMode.establishLink, point: point });\n                }, onFollowLink: function (element, e) {\n                    return _this.view.onIriClick(element.iri, element, view_1.IriClickIntent.JumpToEntity, e);\n                } }));\n        }\n        else if (selected instanceof elements_1.Link) {\n            halo = (React.createElement(haloLink_1.HaloLink, { view: this.view, editor: this, metadataApi: this.metadataApi, target: selected, onEdit: function () { return _this.showEditLinkForm(selected); }, onDelete: function () { return _this.deleteLink(selected.data); }, onSourceMove: function (point) {\n                    return _this.startEditing({ target: selected, mode: editLayer_1.EditLayerMode.moveLinkSource, point: point });\n                }, onTargetMove: function (point) {\n                    return _this.startEditing({ target: selected, mode: editLayer_1.EditLayerMode.moveLinkTarget, point: point });\n                }, onEditLabel: function () { return _this.showEditLinkLabelForm(selected); } }));\n        }\n        this.view.setPaperWidget({ key: 'halo', widget: halo, attachment: view_1.WidgetAttachment.OverElements });\n    };\n    EditorController.prototype.showConnectionsMenu = function (target) {\n        var _this = this;\n        var dialogType = DialogTypes.ConnectionsMenu;\n        var onClose = function () { return _this.hideDialog(); };\n        var content = (React.createElement(connectionsMenu_1.ConnectionsMenu, { view: this.view, editor: this, target: target, onAddElements: function (iris, linkType) {\n                return _this.onAddElementsInConnectionMenu(iris, target, linkType);\n            }, onClose: onClose, suggestProperties: this.options.suggestProperties }));\n        this.showDialog({ target: target, dialogType: dialogType, content: content, onClose: onClose });\n    };\n    EditorController.prototype.showEditEntityForm = function (target) {\n        var _this = this;\n        var propertyEditor = this.options.propertyEditor;\n        var dialogType = DialogTypes.EditEntityForm;\n        var onSubmit = function (newData) {\n            _this.hideDialog();\n            _this.changeEntityData(target.data.id, newData);\n        };\n        var isIriModified = authoringState_1.AuthoringState.isElementWithModifiedIri(this.authoringState, target.data.id);\n        var modelToEdit;\n        if (isIriModified) {\n            var relatedEvent = this.authoringState.elements.get(target.data.id);\n            modelToEdit = tslib_1.__assign(tslib_1.__assign({}, target.data), { id: relatedEvent.newIri });\n        }\n        else {\n            modelToEdit = target.data;\n        }\n        var onCancel = function () { return _this.hideDialog(); };\n        var content = propertyEditor ? propertyEditor({ elementData: target.data, onSubmit: onSubmit, onCancel: onCancel }) : (React.createElement(editEntityForm_1.EditEntityForm, { view: this.view, entity: modelToEdit, onApply: onSubmit, onCancel: onCancel }));\n        this.showDialog({ target: target, dialogType: dialogType, content: content, onClose: onCancel });\n    };\n    EditorController.prototype.showEditElementTypeForm = function (_a) {\n        var _this = this;\n        var link = _a.link, source = _a.source, target = _a.target;\n        var dialogType = DialogTypes.EditEntityTypeForm;\n        var onCancel = function () {\n            _this.removeTemporaryElement(target);\n            _this.removeTemporaryLink(link);\n            _this.hideDialog();\n        };\n        var content = (React.createElement(editElementTypeForm_1.EditElementTypeForm, { editor: this, view: this.view, metadataApi: this.metadataApi, link: link.data, source: source.data, target: target.data, onChangeElement: function (data) {\n                _this.setTemporaryState(authoringState_1.TemporaryState.deleteElement(_this.temporaryState, target.data));\n                target.setData(data);\n                _this.setTemporaryState(authoringState_1.TemporaryState.addElement(_this.temporaryState, target.data));\n            }, onChangeLink: function (data) {\n                _this.removeTemporaryLink(link);\n                var newLink = createLinkAndChangeDirection({\n                    data: data,\n                    originalData: link.data,\n                    sourceId: link.sourceId,\n                    targetId: link.targetId,\n                });\n                link = _this.createNewLink({ link: newLink, temporary: true });\n            }, onApply: function (elementData, linkData) {\n                var isNewElement = target.iri === elementData.id;\n                var position = target.position;\n                _this.removeTemporaryElement(target);\n                _this.removeTemporaryLink(link);\n                var batch = _this.model.history.startBatch();\n                var newTarget = _this.model.createElement(elementData);\n                newTarget.setPosition(position);\n                if (isNewElement) {\n                    newTarget.setExpanded(true);\n                    _this.addNewEntity(newTarget.data);\n                }\n                else {\n                    _this.model.requestLinksOfType();\n                }\n                var newLink = createLinkAndChangeDirection({\n                    data: linkData,\n                    originalData: link.data,\n                    sourceId: source.id,\n                    targetId: newTarget.id,\n                });\n                _this.createNewLink({ link: newLink });\n                batch.store();\n                _this.hideDialog();\n                if (isNewElement) {\n                    _this.showEditEntityForm(newTarget);\n                }\n            }, onCancel: onCancel }));\n        this.showDialog({ target: target, dialogType: dialogType, content: content, caption: 'Establish New Connection', onClose: onCancel });\n    };\n    EditorController.prototype.showEditLinkForm = function (link) {\n        var _this = this;\n        var dialogType = DialogTypes.EditLinkForm;\n        var source = this.model.getElement(link.sourceId).data;\n        var target = this.model.getElement(link.targetId).data;\n        var onCancel = function () {\n            if (_this.temporaryState.links.has(link.data)) {\n                _this.removeTemporaryLink(link);\n            }\n            _this.hideDialog();\n        };\n        var content = (React.createElement(editLinkForm_1.EditLinkForm, { editor: this, view: this.view, metadataApi: this.metadataApi, link: link.data, source: source, target: target, onChange: function (data) {\n                if (_this.temporaryState.links.has(link.data)) {\n                    _this.removeTemporaryLink(link);\n                    var newLink = createLinkAndChangeDirection({\n                        data: data,\n                        originalData: link.data,\n                        sourceId: link.sourceId,\n                        targetId: link.targetId,\n                    });\n                    _this.showEditLinkForm(_this.createNewLink({ link: newLink, temporary: true }));\n                }\n            }, onApply: function (data) {\n                if (_this.temporaryState.links.has(link.data)) {\n                    _this.removeTemporaryLink(link);\n                    var newLink = createLinkAndChangeDirection({\n                        data: data,\n                        originalData: link.data,\n                        sourceId: link.sourceId,\n                        targetId: link.targetId,\n                    });\n                    _this.createNewLink({ link: newLink });\n                }\n                else {\n                    _this.changeLink(link.data, data);\n                }\n                _this.hideDialog();\n            }, onCancel: onCancel }));\n        var caption = this.temporaryState.links.has(link.data) ? 'Establish New Connection' : 'Edit Connection';\n        this.showDialog({\n            target: link,\n            dialogType: dialogType,\n            content: content,\n            size: { width: 300, height: 160 },\n            caption: caption,\n            onClose: onCancel,\n        });\n    };\n    // Link editing implementation could be rethought in the future.\n    EditorController.prototype.showEditLinkLabelForm = function (link) {\n        var _this = this;\n        var linkType = this.view.model.getLinkType(link.typeId);\n        var template = this.view.createLinkTemplate(linkType);\n        var size = { width: 300, height: 145 };\n        var onCancel = function () { return _this.hideDialog(); };\n        this.showDialog({\n            target: link,\n            dialogType: DialogTypes.EditLinkLabelForm,\n            content: (React.createElement(editLinkLabelForm_1.EditLinkLabelForm, { view: this.view, link: link, onApply: function (label) {\n                    template.setLinkLabel(link, label);\n                    _this.hideDialog();\n                }, onCancel: onCancel })),\n            size: size,\n            caption: 'Edit Link Label',\n            offset: { x: 25, y: -size.height / 2 },\n            calculatePosition: function () {\n                var _a = link.labelBounds, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n                return { x: x + width, y: y + height / 2 };\n            },\n            onClose: onCancel,\n        });\n    };\n    EditorController.prototype.showDialog = function (params) {\n        var target = params.target, dialogType = params.dialogType, content = params.content, size = params.size, caption = params.caption, offset = params.offset, calculatePosition = params.calculatePosition, onClose = params.onClose;\n        this.dialogTarget = target;\n        this.dialogType = dialogType;\n        var dialog = (React.createElement(dialog_1.Dialog, { view: this.view, target: target, size: size, caption: caption, offset: offset, calculatePosition: calculatePosition, onClose: onClose }, content));\n        this.view.setPaperWidget({ key: 'dialog', widget: dialog, attachment: view_1.WidgetAttachment.OverElements });\n        this.source.trigger('toggleDialog', { isOpened: false });\n    };\n    EditorController.prototype.hideDialog = function () {\n        if (this.dialogTarget) {\n            var isTemporaryElement = this.dialogTarget instanceof elements_1.Element && this.temporaryState.elements.has(this.dialogTarget.iri);\n            var isTemporaryLink = this.dialogTarget instanceof elements_1.Link && this.temporaryState.links.has(this.dialogTarget.data);\n            if (isTemporaryElement || isTemporaryLink) {\n                this.resetTemporaryState();\n            }\n            this.dialogType = undefined;\n            this.dialogTarget = undefined;\n            this.view.setPaperWidget({ key: 'dialog', widget: undefined, attachment: view_1.WidgetAttachment.OverElements });\n            this.source.trigger('toggleDialog', { isOpened: false });\n        }\n    };\n    EditorController.prototype.onDragDrop = function (dragged, paperPosition) {\n        var batch = this.model.history.startBatch('Drag and drop onto diagram');\n        var placedElements = placeElements(this.view, dragged, paperPosition);\n        var irisToLoad = placedElements.map(function (elem) { return elem.iri; });\n        batch.history.execute(asyncModel_1.requestElementData(this.model, irisToLoad));\n        batch.history.execute(asyncModel_1.restoreLinksBetweenElements(this.model));\n        batch.store();\n        if (placedElements.length > 0) {\n            placedElements[placedElements.length - 1].focus();\n        }\n        this.setSelection(placedElements);\n        this.source.trigger('addElements', { elements: placedElements });\n    };\n    EditorController.prototype.onAddElementsInConnectionMenu = function (elementIris, targetElement, linkType) {\n        var _this = this;\n        var batch = this.view.model.history.startBatch();\n        var elements = elementIris.map(function (iri) { return _this.model.createElement(iri); });\n        this.view.performSyncUpdate();\n        layout_1.placeElementsAround({\n            model: this.model,\n            elements: elements,\n            targetElement: targetElement,\n            prefferedLinksLength: 300,\n        }).then(function () {\n            _this.source.trigger('addElements', { elements: elements });\n        });\n        if (linkType && !linkType.visible) {\n            batch.history.execute(commands_1.changeLinkTypeVisibility({\n                linkType: linkType,\n                visible: true,\n                showLabel: true,\n                preventLoading: true,\n            }));\n        }\n        batch.history.execute(asyncModel_1.requestElementData(this.model, elementIris));\n        batch.history.execute(asyncModel_1.restoreLinksBetweenElements(this.model));\n        batch.store();\n    };\n    EditorController.prototype.loadGroupContent = function (element) {\n        var _this = this;\n        return this.model.loadEmbeddedElements(element.iri).then(function (models) {\n            var batch = _this.model.history.startBatch();\n            var elementIris = Object.keys(models);\n            var elements = elementIris.map(function (key) { return _this.model.createElement(models[key], element.id); });\n            batch.discard();\n            return Promise.all([\n                _this.model.requestElementData(elementIris),\n                _this.model.requestLinksOfType(),\n            ]).then(function () {\n                _this.view.performSyncUpdate();\n                layout_1.applyLayout(_this.model, layout_1.forceLayout({\n                    model: _this.model,\n                    group: element.id,\n                }));\n                _this.model.triggerChangeGroupContent(element.id);\n            });\n        });\n    };\n    EditorController.prototype.createNewEntity = function (_a) {\n        var elementModel = _a.elementModel, temporary = _a.temporary;\n        var batch = this.model.history.startBatch('Create new entity');\n        var element = this.model.createElement(elementModel);\n        element.setExpanded(true);\n        if (temporary) {\n            this.setTemporaryState(authoringState_1.TemporaryState.addElement(this.temporaryState, element.data));\n            batch.discard();\n        }\n        else {\n            this.setAuthoringState(authoringState_1.AuthoringState.addElement(this._authoringState, element.data));\n            batch.store();\n        }\n        return element;\n    };\n    EditorController.prototype.changeEntityData = function (targetIri, newData) {\n        var elements = this.model.elements.filter(function (el) { return el.iri === targetIri; });\n        if (elements.length === 0) {\n            return;\n        }\n        var oldData = elements[0].data;\n        var batch = this.model.history.startBatch('Edit entity');\n        var newState = authoringState_1.AuthoringState.changeElement(this._authoringState, oldData, newData);\n        // get created authoring event by either old or new IRI (in case of new entities)\n        var event = newState.elements.get(targetIri) || newState.elements.get(newData.id);\n        this.model.history.execute(commands_1.setElementData(this.model, targetIri, event.after));\n        this.setAuthoringState(newState);\n        batch.store();\n    };\n    EditorController.prototype.deleteEntity = function (elementIri) {\n        var _this = this;\n        var state = this.authoringState;\n        var elements = this.model.elements.filter(function (el) { return el.iri === elementIri; });\n        if (elements.length === 0) {\n            return;\n        }\n        var batch = this.model.history.startBatch('Delete entity');\n        var model = elements[0].data;\n        var event = state.elements.get(elementIri);\n        // remove new connected links\n        var linksToRemove = new Set();\n        for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n            var element = elements_2[_i];\n            for (var _a = 0, _b = element.links; _a < _b.length; _a++) {\n                var link = _b[_a];\n                if (link.data && authoringState_1.AuthoringState.isNewLink(state, link.data)) {\n                    linksToRemove.add(link.id);\n                }\n            }\n        }\n        linksToRemove.forEach(function (linkId) { return _this.model.removeLink(linkId); });\n        if (event) {\n            this.discardChange(event);\n        }\n        this.setAuthoringState(authoringState_1.AuthoringState.deleteElement(state, model));\n        batch.store();\n    };\n    EditorController.prototype.createNewLink = function (_a) {\n        var base = _a.link, temporary = _a.temporary;\n        var existingLink = this.model.findLink(base.typeId, base.sourceId, base.targetId);\n        if (existingLink) {\n            throw Error('The link already exists');\n        }\n        var batch = this.model.history.startBatch('Create new link');\n        this.model.createLinks(base.data);\n        var links = this.model.links.filter(function (link) { return model_1.sameLink(link.data, base.data); });\n        if (links.length > 0) {\n            if (temporary) {\n                this.setTemporaryState(authoringState_1.TemporaryState.addLink(this.temporaryState, base.data));\n                batch.discard();\n            }\n            else {\n                this.setAuthoringState(authoringState_1.AuthoringState.addLink(this._authoringState, base.data));\n                batch.store();\n            }\n        }\n        else {\n            batch.discard();\n        }\n        return links.find(function (_a) {\n            var sourceId = _a.sourceId, targetId = _a.targetId;\n            return sourceId === base.sourceId && targetId === base.targetId;\n        });\n    };\n    EditorController.prototype.changeLink = function (oldData, newData) {\n        var _this = this;\n        var batch = this.model.history.startBatch('Change link');\n        if (model_1.sameLink(oldData, newData)) {\n            this.model.history.execute(commands_1.setLinkData(this.model, oldData, newData));\n            this.setAuthoringState(authoringState_1.AuthoringState.changeLink(this._authoringState, oldData, newData));\n        }\n        else {\n            var newState = this._authoringState;\n            newState = authoringState_1.AuthoringState.deleteLink(newState, oldData);\n            newState = authoringState_1.AuthoringState.addLink(newState, newData);\n            if (authoringState_1.AuthoringState.isNewLink(this._authoringState, oldData)) {\n                this.model.links\n                    .filter(function (link) { return model_1.sameLink(link.data, oldData); })\n                    .forEach(function (link) { return _this.model.removeLink(link.id); });\n            }\n            this.model.createLinks(newData);\n            this.setAuthoringState(newState);\n        }\n        batch.store();\n    };\n    EditorController.prototype.moveLinkSource = function (params) {\n        var link = params.link, newSource = params.newSource;\n        var batch = this.model.history.startBatch('Move link to another element');\n        this.changeLink(link.data, tslib_1.__assign(tslib_1.__assign({}, link.data), { sourceId: newSource.iri }));\n        var newLink = this.model.findLink(link.typeId, newSource.id, link.targetId);\n        newLink.setVertices(link.vertices);\n        batch.store();\n        return newLink;\n    };\n    EditorController.prototype.moveLinkTarget = function (params) {\n        var link = params.link, newTarget = params.newTarget;\n        var batch = this.model.history.startBatch('Move link to another element');\n        this.changeLink(link.data, tslib_1.__assign(tslib_1.__assign({}, link.data), { targetId: newTarget.iri }));\n        var newLink = this.model.findLink(link.typeId, link.sourceId, newTarget.id);\n        newLink.setVertices(link.vertices);\n        batch.store();\n        return newLink;\n    };\n    EditorController.prototype.deleteLink = function (model) {\n        var _this = this;\n        var state = this.authoringState;\n        if (authoringState_1.AuthoringState.isDeletedLink(state, model)) {\n            return;\n        }\n        var batch = this.model.history.startBatch('Delete link');\n        var newState = authoringState_1.AuthoringState.deleteLink(state, model);\n        if (authoringState_1.AuthoringState.isNewLink(state, model)) {\n            this.model.links\n                .filter(function (_a) {\n                var data = _a.data;\n                return model_1.sameLink(data, model);\n            })\n                .forEach(function (link) { return _this.model.removeLink(link.id); });\n        }\n        this.setAuthoringState(newState);\n        batch.store();\n    };\n    EditorController.prototype.startEditing = function (params) {\n        var target = params.target, mode = params.mode, point = params.point;\n        var editLayer = (React.createElement(editLayer_1.EditLayer, { view: this.view, editor: this, metadataApi: this.metadataApi, mode: mode, target: target, point: point }));\n        this.view.setPaperWidget({ key: 'editLayer', widget: editLayer, attachment: view_1.WidgetAttachment.OverElements });\n    };\n    EditorController.prototype.finishEditing = function () {\n        this.view.setPaperWidget({ key: 'editLayer', widget: undefined, attachment: view_1.WidgetAttachment.OverElements });\n    };\n    EditorController.prototype.addNewEntity = function (element) {\n        var batch = this.model.history.startBatch('Create new entity');\n        this.setAuthoringState(authoringState_1.AuthoringState.addElement(this._authoringState, element));\n        batch.store();\n    };\n    EditorController.prototype.resetTemporaryState = function () {\n        var _this = this;\n        if (this.temporaryState.elements.size) {\n            this.model.elements.forEach(function (element) {\n                if (_this.temporaryState.elements.has(element.iri)) {\n                    _this.removeTemporaryElement(element);\n                }\n            });\n        }\n        if (this.temporaryState.links.size) {\n            this.model.links.forEach(function (link) {\n                if (_this.temporaryState.links.get(link.data)) {\n                    _this.removeTemporaryLink(link);\n                }\n            });\n        }\n    };\n    EditorController.prototype.removeTemporaryElement = function (element) {\n        var batch = this.model.history.startBatch();\n        this.model.removeElement(element.id);\n        batch.discard();\n        this.setTemporaryState(authoringState_1.TemporaryState.deleteElement(this.temporaryState, element.data));\n    };\n    EditorController.prototype.removeTemporaryLink = function (link) {\n        this.model.removeLink(link.id);\n        this.setTemporaryState(authoringState_1.TemporaryState.deleteLink(this.temporaryState, link.data));\n    };\n    EditorController.prototype.discardChange = function (event) {\n        var _this = this;\n        var newState = authoringState_1.AuthoringState.discard(this._authoringState, event);\n        if (newState === this._authoringState) {\n            return;\n        }\n        var batch = this.model.history.startBatch('Discard change');\n        if (event.type === authoringState_1.AuthoringKind.ChangeElement) {\n            if (event.deleted) {\n                /* nothing */\n            }\n            else if (event.before) {\n                this.model.history.execute(commands_1.setElementData(this.model, event.after.id, event.before));\n            }\n            else {\n                this.model.elements\n                    .filter(function (el) { return el.iri === event.after.id; })\n                    .forEach(function (el) { return _this.model.removeElement(el.id); });\n            }\n        }\n        else if (event.type === authoringState_1.AuthoringKind.ChangeLink) {\n            if (event.deleted) {\n                /* nothing */\n            }\n            else if (event.before) {\n                this.model.history.execute(commands_1.setLinkData(this.model, event.after, event.before));\n            }\n            else {\n                this.model.links\n                    .filter(function (_a) {\n                    var data = _a.data;\n                    return model_1.sameLink(data, event.after);\n                })\n                    .forEach(function (link) { return _this.model.removeLink(link.id); });\n            }\n        }\n        this.setAuthoringState(newState);\n        batch.store();\n    };\n    return EditorController;\n}());\nexports.EditorController = EditorController;\nvar LoadingWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(LoadingWidget, _super);\n    function LoadingWidget() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LoadingWidget.prototype.render = function () {\n        var _a = this.props, spinnerProps = _a.spinnerProps, paperArea = _a.paperArea;\n        var areaMetrics = paperArea.getAreaMetrics();\n        var paneWidth = areaMetrics.clientWidth;\n        var paneHeight = areaMetrics.clientHeight;\n        var x = spinnerProps.statusText ? paneWidth / 3 : paneWidth / 2;\n        var position = { x: x, y: paneHeight / 2 };\n        return (React.createElement(\"div\", { className: 'ontodia-loading-widget' },\n            React.createElement(\"svg\", { width: paneWidth, height: paneHeight },\n                React.createElement(spinner_1.Spinner, tslib_1.__assign({ position: position }, spinnerProps)))));\n    };\n    LoadingWidget.Key = 'loadingWidget';\n    return LoadingWidget;\n}(React.Component));\nfunction placeElements(view, dragged, position) {\n    var elements = dragged.map(function (item) { return view.model.createElement(item); });\n    view.performSyncUpdate();\n    var x = position.x, y = position.y;\n    var isFirst = true;\n    for (var _i = 0, elements_3 = elements; _i < elements_3.length; _i++) {\n        var element = elements_3[_i];\n        var _a = geometry_1.boundsOf(element), width = _a.width, height = _a.height;\n        if (width === 0) {\n            width = 100;\n        }\n        if (height === 0) {\n            height = 50;\n        }\n        if (isFirst) {\n            isFirst = false;\n            x -= width / 2;\n            y -= height / 2;\n        }\n        element.setPosition({ x: x, y: y });\n        y += height + 20;\n    }\n    return elements;\n}\nfunction createLinkAndChangeDirection(_a) {\n    var _b;\n    var data = _a.data, originalData = _a.originalData, sourceId = _a.sourceId, targetId = _a.targetId;\n    // some of the ids can be totally different because of generating IRI so we use \"OR\" instead of \"AND\"\n    var directionHasChanged = originalData.sourceId === data.targetId || originalData.targetId === data.sourceId;\n    if (directionHasChanged) {\n        _b = [targetId, sourceId], sourceId = _b[0], targetId = _b[1];\n    }\n    return new elements_1.Link({ typeId: data.linkTypeId, sourceId: sourceId, targetId: targetId, data: data });\n}\nexports.createLinkAndChangeDirection = createLinkAndChangeDirection;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar elements_1 = require(\"../diagram/elements\");\nvar events_1 = require(\"../viewUtils/events\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar draggableHandle_1 = require(\"../workspace/draggableHandle\");\nvar DEFAULT_WIDTH = 300;\nvar DEFAULT_HEIGHT = 300;\nvar MIN_WIDTH = 250;\nvar MIN_HEIGHT = 250;\nvar MAX_WIDTH = 800;\nvar MAX_HEIGHT = 800;\nvar ELEMENT_OFFSET = 40;\nvar LINK_OFFSET = 20;\nvar FOCUS_OFFSET = 20;\nvar CLASS_NAME = 'ontodia-dialog';\nvar Dialog = /** @class */ (function (_super) {\n    tslib_1.__extends(Dialog, _super);\n    function Dialog(props) {\n        var _this = _super.call(this, props) || this;\n        _this.unsubscribeFromTarget = undefined;\n        _this.handler = new events_1.EventObserver();\n        _this.updateAll = function () { return _this.forceUpdate(); };\n        _this.onStartDragging = function (e) {\n            _this.preventSelection();\n            var size = _this.props.size;\n            _this.startSize = { x: _this.state.width || size.width, y: _this.state.height || size.height };\n        };\n        _this.onDragHandleBottom = function (e, dx, dy) {\n            var height = _this.calculateHeight(_this.startSize.y + dy);\n            _this.setState({ height: height });\n        };\n        _this.onDragHandleRight = function (e, dx) {\n            var width = _this.calculateWidth(_this.startSize.x + dx);\n            _this.setState({ width: width });\n        };\n        _this.onDragHandleBottomRight = function (e, dx, dy) {\n            var width = _this.calculateWidth(_this.startSize.x + dx);\n            var height = _this.calculateHeight(_this.startSize.y + dy);\n            _this.setState({ width: width, height: height });\n        };\n        _this.preventSelection = function () {\n            var onMouseUp = function () {\n                document.body.classList.remove('ontodia--unselectable');\n                document.removeEventListener('mouseup', onMouseUp);\n            };\n            document.addEventListener('mouseup', onMouseUp);\n            document.body.classList.add('ontodia--unselectable');\n        };\n        _this.state = {};\n        return _this;\n    }\n    Dialog.prototype.componentDidMount = function () {\n        this.listenToTarget(this.props.target);\n        this.focusOn();\n    };\n    Dialog.prototype.componentWillReceiveProps = function (nextProps) {\n        if (nextProps.target !== this.props.target) {\n            this.listenToTarget(nextProps.target);\n        }\n    };\n    Dialog.prototype.componentWillUnmount = function () {\n        this.listenToTarget(undefined);\n    };\n    Dialog.prototype.listenToTarget = function (target) {\n        var _this = this;\n        if (this.unsubscribeFromTarget) {\n            this.unsubscribeFromTarget();\n            this.unsubscribeFromTarget = undefined;\n        }\n        if (target) {\n            var view = this.props.view;\n            if (target instanceof elements_1.Element) {\n                this.listenToElement(target);\n            }\n            else if (target instanceof elements_1.Link) {\n                this.listenToLink(target);\n            }\n            this.handler.listen(view.events, 'changeLanguage', this.updateAll);\n            this.unsubscribeFromTarget = function () { _this.handler.stopListening(); };\n        }\n    };\n    Dialog.prototype.listenToElement = function (element) {\n        this.handler.listen(element.events, 'changePosition', this.updateAll);\n        this.handler.listen(element.events, 'changeSize', this.updateAll);\n    };\n    Dialog.prototype.listenToLink = function (link) {\n        var view = this.props.view;\n        var source = view.model.getElement(link.sourceId);\n        var target = view.model.getElement(link.targetId);\n        this.listenToElement(source);\n        this.listenToElement(target);\n        this.handler.listen(link.events, 'changeVertices', this.updateAll);\n        this.handler.listen(link.events, 'changeLabelBounds', this.updateAll);\n    };\n    Dialog.prototype.calculatePositionForElement = function (element) {\n        var _a = this.props, paperArea = _a.paperArea, size = _a.size;\n        var bbox = geometry_1.boundsOf(element);\n        var y0 = paperArea.paperToScrollablePaneCoords(bbox.x, bbox.y).y;\n        var _b = paperArea.paperToScrollablePaneCoords(bbox.x + bbox.width, bbox.y + bbox.height), x1 = _b.x, y1 = _b.y;\n        return {\n            x: x1 + ELEMENT_OFFSET,\n            y: (y0 + y1) / 2 - (size.height / 2),\n        };\n    };\n    Dialog.prototype.calculatePositionForLink = function (link) {\n        var _a = this.props, view = _a.view, paperArea = _a.paperArea;\n        var source = view.model.getElement(link.sourceId);\n        var target = view.model.getElement(link.targetId);\n        if (!source || !target) {\n            throw new Error('Source and target are not specified');\n        }\n        var route = view.getRouting(link.id);\n        var verticesDefinedByUser = link.vertices || [];\n        var vertices = route ? route.vertices : verticesDefinedByUser;\n        var polyline = geometry_1.computePolyline(source, target, vertices);\n        var polylineLength = geometry_1.computePolylineLength(polyline);\n        var targetPoint = geometry_1.getPointAlongPolyline(polyline, polylineLength / 2);\n        var _b = paperArea.paperToScrollablePaneCoords(targetPoint.x, targetPoint.y), x = _b.x, y = _b.y;\n        return { y: y + LINK_OFFSET, x: x + LINK_OFFSET };\n    };\n    Dialog.prototype.calculatePosition = function () {\n        var _a = this.props, target = _a.target, paperArea = _a.paperArea, _b = _a.offset, offset = _b === void 0 ? { x: 0, y: 0 } : _b, calculatePosition = _a.calculatePosition;\n        if (calculatePosition) {\n            var pos = calculatePosition();\n            var _c = paperArea.paperToScrollablePaneCoords(pos.x, pos.y), x = _c.x, y = _c.y;\n            return { x: x + offset.x, y: y + offset.y };\n        }\n        if (target instanceof elements_1.Element) {\n            return this.calculatePositionForElement(target);\n        }\n        else if (target instanceof elements_1.Link) {\n            return this.calculatePositionForLink(target);\n        }\n        throw new Error('Unknown target type');\n    };\n    Dialog.prototype.getViewPortScrollablePoints = function () {\n        var paperArea = this.props.paperArea;\n        var paperAreaMetrix = paperArea.getAreaMetrics();\n        var min = paperArea.clientToScrollablePaneCoords(0, 0);\n        var max = paperArea.clientToScrollablePaneCoords(paperAreaMetrix.clientWidth, paperAreaMetrix.clientHeight);\n        return { min: min, max: max };\n    };\n    Dialog.prototype.getDialogScrollablePoints = function () {\n        var size = this.props.size;\n        var _a = this.calculatePosition(), x = _a.x, y = _a.y;\n        var min = {\n            x: x - FOCUS_OFFSET,\n            y: y - FOCUS_OFFSET,\n        };\n        var max = {\n            x: min.x + size.width + FOCUS_OFFSET * 2,\n            y: min.y + size.height + FOCUS_OFFSET * 2,\n        };\n        return { min: min, max: max };\n    };\n    Dialog.prototype.focusOn = function () {\n        var paperArea = this.props.paperArea;\n        var _a = this.getViewPortScrollablePoints(), viewPortMin = _a.min, viewPortMax = _a.max;\n        var _b = this.getDialogScrollablePoints(), min = _b.min, max = _b.max;\n        var xOffset = 0;\n        if (min.x < viewPortMin.x) {\n            xOffset = min.x - viewPortMin.x;\n        }\n        else if (max.x > viewPortMax.x) {\n            xOffset = max.x - viewPortMax.x;\n        }\n        var yOffset = 0;\n        if (min.y < viewPortMin.y) {\n            yOffset = min.y - viewPortMin.y;\n        }\n        else if (max.y > viewPortMax.y) {\n            yOffset = max.y - viewPortMax.y;\n        }\n        var curScrollableCenter = {\n            x: viewPortMin.x + (viewPortMax.x - viewPortMin.x) / 2,\n            y: viewPortMin.y + (viewPortMax.y - viewPortMin.y) / 2,\n        };\n        var newScrollabalCenter = {\n            x: curScrollableCenter.x + xOffset,\n            y: curScrollableCenter.y + yOffset,\n        };\n        var paperCenter = paperArea.scrollablePaneToPaperCoords(newScrollabalCenter.x, newScrollabalCenter.y);\n        paperArea.centerTo(paperCenter);\n    };\n    Dialog.prototype.calculateHeight = function (height) {\n        var size = this.props.size;\n        var minHeight = Math.min(size.height, MIN_HEIGHT);\n        var maxHeight = Math.max(size.height, MAX_HEIGHT);\n        return Math.max(minHeight, Math.min(maxHeight, height));\n    };\n    Dialog.prototype.calculateWidth = function (width) {\n        var size = this.props.size;\n        var minWidth = Math.min(size.width, MIN_WIDTH);\n        var maxWidth = Math.max(size.width, MAX_WIDTH);\n        return Math.max(minWidth, Math.min(maxWidth, width));\n    };\n    Dialog.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, size = _a.size, caption = _a.caption;\n        var _b = this.calculatePosition(), x = _b.x, y = _b.y;\n        var width = this.state.width || size.width;\n        var height = this.state.height || size.height;\n        var style = {\n            top: y,\n            left: x,\n            width: width,\n            height: height,\n        };\n        return (React.createElement(\"div\", { className: CLASS_NAME, style: style },\n            React.createElement(\"button\", { className: CLASS_NAME + \"__close-button\", onClick: function () { return _this.props.onClose(); } }),\n            caption ? React.createElement(\"div\", { className: 'ontodia-dialog__caption' }, caption) : null,\n            this.props.children,\n            React.createElement(draggableHandle_1.DraggableHandle, { className: CLASS_NAME + \"__bottom-handle\", onBeginDragHandle: this.onStartDragging, onDragHandle: this.onDragHandleBottom }),\n            React.createElement(draggableHandle_1.DraggableHandle, { className: CLASS_NAME + \"__right-handle\", onBeginDragHandle: this.onStartDragging, onDragHandle: this.onDragHandleRight }),\n            React.createElement(draggableHandle_1.DraggableHandle, { className: CLASS_NAME + \"__bottom-right-handle\", onBeginDragHandle: this.onStartDragging, onDragHandle: this.onDragHandleBottomRight })));\n    };\n    Dialog.defaultProps = {\n        size: { width: DEFAULT_WIDTH, height: DEFAULT_HEIGHT },\n    };\n    return Dialog;\n}(React.Component));\nexports.Dialog = Dialog;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar DraggableHandle = /** @class */ (function (_super) {\n    tslib_1.__extends(DraggableHandle, _super);\n    function DraggableHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isHoldingMouse = false;\n        _this.onHandleMouseDown = function (e) {\n            if (e.target !== e.currentTarget) {\n                return;\n            }\n            if (_this.isHoldingMouse) {\n                return;\n            }\n            var LEFT_BUTTON = 0;\n            if (e.button !== LEFT_BUTTON) {\n                return;\n            }\n            _this.isHoldingMouse = true;\n            _this.originPageX = e.pageX;\n            _this.originPageY = e.pageY;\n            document.addEventListener('mousemove', _this.onMouseMove);\n            document.addEventListener('mouseup', _this.onMouseUp);\n            _this.props.onBeginDragHandle(e);\n        };\n        _this.onMouseMove = function (e) {\n            if (!_this.isHoldingMouse) {\n                return;\n            }\n            e.preventDefault();\n            _this.props.onDragHandle(e, e.pageX - _this.originPageX, e.pageY - _this.originPageY);\n        };\n        _this.onMouseUp = function (e) {\n            _this.removeListeners();\n            if (_this.props.onEndDragHandle) {\n                _this.props.onEndDragHandle(e);\n            }\n        };\n        return _this;\n    }\n    DraggableHandle.prototype.render = function () {\n        // remove custom handlers from `div` props\n        // tslint:disable-next-line:no-unused-variable\n        var _a = this.props, onBeginDragHandle = _a.onBeginDragHandle, onDragHandle = _a.onDragHandle, onEndDragHandle = _a.onEndDragHandle, props = tslib_1.__rest(_a, [\"onBeginDragHandle\", \"onDragHandle\", \"onEndDragHandle\"]);\n        return React.createElement(\"div\", tslib_1.__assign({}, props, { onMouseDown: this.onHandleMouseDown }), this.props.children);\n    };\n    DraggableHandle.prototype.componentWillUnmount = function () {\n        this.removeListeners();\n    };\n    DraggableHandle.prototype.removeListeners = function () {\n        if (this.isHoldingMouse) {\n            this.isHoldingMouse = false;\n            document.removeEventListener('mousemove', this.onMouseMove);\n            document.removeEventListener('mouseup', this.onMouseUp);\n        }\n    };\n    return DraggableHandle;\n}(React.Component));\nexports.DraggableHandle = DraggableHandle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar elements_1 = require(\"../diagram/elements\");\nvar events_1 = require(\"../viewUtils/events\");\nvar progressBar_1 = require(\"../widgets/progressBar\");\nvar listElementView_1 = require(\"./listElementView\");\nvar searchResults_1 = require(\"./searchResults\");\nvar workspaceContext_1 = require(\"../workspace/workspaceContext\");\nvar MAX_LINK_COUNT = 100;\nvar ALL_RELATED_ELEMENTS_LINK = new elements_1.FatLinkType({\n    id: 'allRelatedElements',\n    label: [{ value: 'All', language: '' }],\n});\nvar ConnectionsMenu = /** @class */ (function (_super) {\n    tslib_1.__extends(ConnectionsMenu, _super);\n    function ConnectionsMenu() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = new events_1.EventObserver();\n        _this.linkTypesListener = new events_1.EventObserver();\n        _this.loadingState = progressBar_1.ProgressState.none;\n        _this.updateAll = function () { return _this.forceUpdate(); };\n        _this.addSelectedElements = function (selectedObjects) {\n            var _a = _this.props, onClose = _a.onClose, onAddElements = _a.onAddElements;\n            var addedElementsIris = selectedObjects.map(function (item) { return item.model.id; });\n            var linkType = _this.linkDataChunk ? _this.linkDataChunk.link : undefined;\n            var hasChosenLinkType = _this.linkDataChunk && linkType !== ALL_RELATED_ELEMENTS_LINK;\n            onAddElements(addedElementsIris, hasChosenLinkType ? linkType : undefined);\n            onClose();\n        };\n        _this.onExpandLink = function (linkDataChunk) {\n            var alreadyLoaded = (_this.objects &&\n                _this.linkDataChunk &&\n                _this.linkDataChunk.link === linkDataChunk.link &&\n                _this.linkDataChunk.direction === linkDataChunk.direction);\n            if (!alreadyLoaded) {\n                _this.loadObjects(linkDataChunk);\n            }\n            _this.updateAll();\n            _this.context.ontodiaWorkspace.triggerWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.connectionsExpandLink);\n        };\n        _this.onMoveToFilter = function (linkDataChunk) {\n            var _a = _this.props, view = _a.view, target = _a.target;\n            var link = linkDataChunk.link, direction = linkDataChunk.direction;\n            if (link === ALL_RELATED_ELEMENTS_LINK) {\n                target.addToFilter();\n            }\n            else {\n                var selectedElement = view.model.getElement(target.id);\n                selectedElement.addToFilter(link, direction);\n            }\n        };\n        return _this;\n    }\n    ConnectionsMenu.prototype.componentDidMount = function () {\n        var view = this.props.view;\n        this.handler.listen(view.events, 'changeLanguage', this.updateAll);\n        this.loadLinks();\n    };\n    ConnectionsMenu.prototype.componentWillUnmount = function () {\n        this.handler.stopListening();\n        this.linkTypesListener.stopListening();\n    };\n    ConnectionsMenu.prototype.resubscribeOnLinkTypeEvents = function (linkTypesOfElement) {\n        this.linkTypesListener.stopListening();\n        for (var _i = 0, linkTypesOfElement_1 = linkTypesOfElement; _i < linkTypesOfElement_1.length; _i++) {\n            var linkType = linkTypesOfElement_1[_i];\n            this.linkTypesListener.listen(linkType.events, 'changeLabel', this.updateAll);\n            this.linkTypesListener.listen(linkType.events, 'changeVisibility', this.updateAll);\n        }\n    };\n    ConnectionsMenu.prototype.loadLinks = function () {\n        var _this = this;\n        var _a = this.props, view = _a.view, editor = _a.editor, target = _a.target;\n        this.loadingState = progressBar_1.ProgressState.loading;\n        this.links = [];\n        this.countMap = {};\n        editor.model.dataProvider.linkTypesOf({ elementId: target.iri })\n            .then(function (linkTypes) {\n            _this.loadingState = progressBar_1.ProgressState.completed;\n            var countMap = {};\n            var links = [];\n            for (var _i = 0, linkTypes_1 = linkTypes; _i < linkTypes_1.length; _i++) {\n                var _a = linkTypes_1[_i], linkTypeId = _a.id, inCount = _a.inCount, outCount = _a.outCount;\n                countMap[linkTypeId] = { inCount: inCount, outCount: outCount };\n                links.push(view.model.createLinkType(linkTypeId));\n            }\n            countMap[ALL_RELATED_ELEMENTS_LINK.id] = Object.keys(countMap)\n                .map(function (key) { return countMap[key]; })\n                .reduce(function (a, b) {\n                return { inCount: a.inCount + b.inCount, outCount: a.outCount + b.outCount };\n            }, { inCount: 0, outCount: 0 });\n            _this.countMap = countMap;\n            _this.links = links;\n            _this.resubscribeOnLinkTypeEvents(_this.links);\n            _this.updateAll();\n            _this.context.ontodiaWorkspace.triggerWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.connectionsLoadLinks);\n        })\n            .catch(function (err) {\n            // tslint:disable-next-line:no-console\n            console.error(err);\n            _this.loadingState = progressBar_1.ProgressState.error;\n            _this.updateAll();\n        });\n        this.updateAll();\n    };\n    ConnectionsMenu.prototype.loadObjects = function (linkDataChunk) {\n        var _this = this;\n        var _a = this.props, view = _a.view, editor = _a.editor, target = _a.target;\n        var link = linkDataChunk.link, direction = linkDataChunk.direction;\n        var offset = (linkDataChunk.offset || 0);\n        this.loadingState = progressBar_1.ProgressState.loading;\n        this.linkDataChunk = linkDataChunk;\n        this.objects = [];\n        editor.model.dataProvider.linkElements({\n            elementId: target.iri,\n            linkId: (link === ALL_RELATED_ELEMENTS_LINK ? undefined : link.id),\n            limit: offset + MAX_LINK_COUNT,\n            offset: offset,\n            direction: direction,\n        }).then(function (elements) {\n            _this.loadingState = progressBar_1.ProgressState.completed;\n            _this.objects = Object.keys(elements).map(function (iri) { return ({\n                model: elements[iri],\n                presentOnDiagram: view.model.elements.findIndex(function (element) { return element.iri === iri && element.group === undefined; }) >= 0,\n            }); });\n            _this.updateAll();\n            _this.context.ontodiaWorkspace.triggerWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.connectionsLoadElements);\n        }).catch(function (err) {\n            // tslint:disable-next-line:no-console\n            console.error(err);\n            _this.loadingState = progressBar_1.ProgressState.error;\n            _this.updateAll();\n        });\n    };\n    ConnectionsMenu.prototype.render = function () {\n        var connectionsData = {\n            links: this.links || [],\n            countMap: this.countMap || {},\n        };\n        var objectsData = null;\n        if (this.linkDataChunk && this.objects) {\n            objectsData = {\n                linkDataChunk: this.linkDataChunk,\n                objects: this.objects,\n            };\n        }\n        var _a = this.props, view = _a.view, target = _a.target, suggestProperties = _a.suggestProperties;\n        return (React.createElement(ConnectionsMenuMarkup, { target: target, connectionsData: connectionsData, objectsData: objectsData, state: this.loadingState, view: view, onExpandLink: this.onExpandLink, onPressAddSelected: this.addSelectedElements, onMoveToFilter: this.onMoveToFilter, propertySuggestionCall: suggestProperties }));\n    };\n    ConnectionsMenu.contextTypes = workspaceContext_1.WorkspaceContextTypes;\n    return ConnectionsMenu;\n}(React.Component));\nexports.ConnectionsMenu = ConnectionsMenu;\nvar ConnectionsMenuMarkup = /** @class */ (function (_super) {\n    tslib_1.__extends(ConnectionsMenuMarkup, _super);\n    function ConnectionsMenuMarkup(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onChangeFilter = function (e) {\n            var filterKey = e.currentTarget.value;\n            _this.setState({ filterKey: filterKey });\n        };\n        _this.getTitle = function () {\n            if (_this.props.objectsData && _this.state.panel === 'objects') {\n                return 'Objects';\n            }\n            else if (_this.props.connectionsData && _this.state.panel === 'connections') {\n                return 'Connections';\n            }\n            return 'Error';\n        };\n        _this.onExpandLink = function (linkDataChunk) {\n            _this.setState({ filterKey: '', panel: 'objects' });\n            _this.props.onExpandLink(linkDataChunk);\n        };\n        _this.onCollapseLink = function () {\n            _this.setState({ filterKey: '', panel: 'connections' });\n        };\n        _this.getBreadCrumbs = function () {\n            if (_this.props.objectsData && _this.state.panel === 'objects') {\n                var _a = _this.props.objectsData.linkDataChunk, link = _a.link, direction = _a.direction;\n                var localizedText = _this.props.view.formatLabel(link.label, link.id);\n                return React.createElement(\"span\", { className: 'ontodia-connections-menu_bread-crumbs' },\n                    React.createElement(\"a\", { className: 'ontodia-connections-menu__link', onClick: _this.onCollapseLink }, \"Connections\"),\n                    '\\u00A0' + '/' + '\\u00A0',\n                    localizedText,\n                    \" \",\n                    direction ? \"(\" + direction + \")\" : null);\n            }\n            else {\n                return null;\n            }\n        };\n        _this.getBody = function () {\n            if (_this.props.state === 'error') {\n                return React.createElement(\"label\", { className: 'ontodia-label ontodia-connections-menu__error' }, \"Error\");\n            }\n            else if (_this.props.objectsData && _this.state.panel === 'objects') {\n                return React.createElement(ObjectsPanel, { data: _this.props.objectsData, onMoveToFilter: _this.props.onMoveToFilter, view: _this.props.view, filterKey: _this.state.filterKey, loading: _this.props.state === progressBar_1.ProgressState.loading, onPressAddSelected: _this.props.onPressAddSelected });\n            }\n            else if (_this.props.connectionsData && _this.state.panel === 'connections') {\n                if (_this.props.state === progressBar_1.ProgressState.loading) {\n                    return React.createElement(\"label\", { className: 'ontodia-label ontodia-connections-menu__loading' }, \"Loading...\");\n                }\n                return React.createElement(ConnectionsList, { id: _this.props.target.id, data: _this.props.connectionsData, view: _this.props.view, filterKey: _this.state.filterKey, onExpandLink: _this.onExpandLink, onMoveToFilter: _this.props.onMoveToFilter, propertySuggestionCall: _this.props.propertySuggestionCall, sortMode: _this.state.sortMode });\n            }\n            else {\n                return React.createElement(\"div\", null);\n            }\n        };\n        _this.onSortChange = function (e) {\n            var value = e.target.value;\n            if (_this.state.sortMode === value) {\n                return;\n            }\n            _this.setState({ sortMode: value });\n        };\n        _this.renderSortSwitch = function (id, icon, title) {\n            return (React.createElement(\"div\", null,\n                React.createElement(\"input\", { type: 'radio', name: 'sort', id: id, value: id, className: 'ontodia-connections-menu__sort-switch', onChange: _this.onSortChange, checked: _this.state.sortMode === id }),\n                React.createElement(\"label\", { htmlFor: id, className: 'ontodia-connections-menu__sort-switch-label', title: title },\n                    React.createElement(\"i\", { className: \"fa \" + icon }))));\n        };\n        _this.renderSortSwitches = function () {\n            if (_this.state.panel !== 'connections' || !_this.props.propertySuggestionCall) {\n                return null;\n            }\n            return (React.createElement(\"div\", { className: 'ontodia-connections-menu_search-line-sort-switches' },\n                _this.renderSortSwitch('alphabet', 'fa-sort-alpha-asc', 'Sort alphabetically'),\n                _this.renderSortSwitch('smart', 'fa-lightbulb-o', 'Smart sort')));\n        };\n        _this.state = {\n            filterKey: '',\n            panel: 'connections',\n            sortMode: 'alphabet',\n        };\n        return _this;\n    }\n    ConnectionsMenuMarkup.prototype.render = function () {\n        return (React.createElement(\"div\", { className: 'ontodia-connections-menu' },\n            React.createElement(\"label\", { className: 'ontodia-label ontodia-connections-menu__title-label' }, this.getTitle()),\n            this.getBreadCrumbs(),\n            React.createElement(\"div\", { className: 'ontodia-connections-menu_search-line' },\n                React.createElement(\"input\", { type: 'text', className: 'search-input ontodia-form-control ontodia-connections-menu__search-line-input', value: this.state.filterKey, onChange: this.onChangeFilter, placeholder: 'Search for...' }),\n                this.renderSortSwitches()),\n            React.createElement(progressBar_1.ProgressBar, { state: this.props.state, height: 10 }),\n            this.getBody()));\n    };\n    return ConnectionsMenuMarkup;\n}(React.Component));\nvar ConnectionsList = /** @class */ (function (_super) {\n    tslib_1.__extends(ConnectionsList, _super);\n    function ConnectionsList(props) {\n        var _this = _super.call(this, props) || this;\n        _this.updateScores = function (props) {\n            if (props.propertySuggestionCall && (props.filterKey || props.sortMode === 'smart')) {\n                var id = props.id, data = props.data, view = props.view, filterKey = props.filterKey;\n                var lang = view.getLanguage();\n                var token = filterKey.trim();\n                var properties = data.links.map(function (l) { return l.id; });\n                props.propertySuggestionCall({ elementId: id, token: token, properties: properties, lang: lang }).then(function (scores) {\n                    return _this.setState({ scores: scores });\n                });\n            }\n        };\n        _this.compareLinks = function (a, b) {\n            var view = _this.props.view;\n            var aText = view.formatLabel(a.label, a.id);\n            var bText = view.formatLabel(b.label, b.id);\n            return aText.localeCompare(bText);\n        };\n        _this.compareLinksByWeight = function (a, b) {\n            var view = _this.props.view;\n            var aText = view.formatLabel(a.label, a.id);\n            var bText = view.formatLabel(b.label, b.id);\n            var aWeight = _this.state.scores[a.id] ? _this.state.scores[a.id].score : 0;\n            var bWeight = _this.state.scores[b.id] ? _this.state.scores[b.id].score : 0;\n            return (aWeight > bWeight ? -1 :\n                aWeight < bWeight ? 1 :\n                    aText.localeCompare(bText));\n        };\n        _this.getLinks = function () {\n            var _a = _this.props, view = _a.view, data = _a.data, filterKey = _a.filterKey;\n            return (data.links || []).filter(function (link) {\n                var text = view.formatLabel(link.label, link.id).toLowerCase();\n                return !filterKey || text.indexOf(filterKey.toLowerCase()) >= 0;\n            })\n                .sort(_this.compareLinks);\n        };\n        _this.getProbableLinks = function () {\n            var isSmartMode = _this.isSmartMode();\n            return (_this.props.data.links || []).filter(function (link) {\n                return _this.state.scores[link.id] && (_this.state.scores[link.id].score > 0 || isSmartMode);\n            }).sort(_this.compareLinksByWeight);\n        };\n        _this.getViews = function (links, notSure) {\n            var view = _this.props.view;\n            var countMap = _this.props.data.countMap || {};\n            var views = [];\n            var addView = function (link, direction) {\n                var count = direction === 'in'\n                    ? countMap[link.id].inCount\n                    : countMap[link.id].outCount;\n                if (count === 0) {\n                    return;\n                }\n                var postfix = notSure ? '-probable' : '';\n                views.push(React.createElement(LinkInPopupMenu, { key: direction + \"-\" + link.id + \"-\" + postfix, link: link, onExpandLink: _this.props.onExpandLink, view: view, count: count, direction: direction, filterKey: notSure ? '' : _this.props.filterKey, onMoveToFilter: _this.props.onMoveToFilter, probability: (_this.state.scores[link.id] && notSure ? _this.state.scores[link.id].score : 0) }));\n            };\n            for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n                var link = links_1[_i];\n                addView(link, 'in');\n                addView(link, 'out');\n            }\n            return views;\n        };\n        _this.state = { scores: {} };\n        _this.updateScores(props);\n        return _this;\n    }\n    ConnectionsList.prototype.componentWillReceiveProps = function (newProps) {\n        this.updateScores(newProps);\n    };\n    ConnectionsList.prototype.isSmartMode = function () {\n        return this.props.sortMode === 'smart' && !this.props.filterKey;\n    };\n    ConnectionsList.prototype.render = function () {\n        var view = this.props.view;\n        var isSmartMode = this.isSmartMode();\n        var links = isSmartMode ? [] : this.getLinks();\n        var probableLinks = this.getProbableLinks().filter(function (link) { return links.indexOf(link) === -1; });\n        var views = this.getViews(links);\n        var probableViews = this.getViews(probableLinks, true);\n        var viewList;\n        if (views.length === 0 && probableViews.length === 0) {\n            viewList = React.createElement(\"label\", { className: 'ontodia-label ontodia-connections-menu_links-list__empty' }, \"List empty\");\n        }\n        else {\n            viewList = views;\n            if (views.length > 1 || (isSmartMode && probableViews.length > 1)) {\n                var countMap = this.props.data.countMap || {};\n                var allRelatedElements = countMap[ALL_RELATED_ELEMENTS_LINK.id];\n                viewList = [\n                    React.createElement(LinkInPopupMenu, { key: ALL_RELATED_ELEMENTS_LINK.id, link: ALL_RELATED_ELEMENTS_LINK, onExpandLink: this.props.onExpandLink, view: view, count: allRelatedElements.inCount + allRelatedElements.outCount, onMoveToFilter: this.props.onMoveToFilter }),\n                    React.createElement(\"hr\", { key: 'ontodia-hr-line', className: 'ontodia-connections-menu_links-list__hr' }),\n                ].concat(viewList);\n            }\n        }\n        var probablePart = null;\n        if (probableViews.length !== 0) {\n            probablePart = [\n                isSmartMode ? null : (React.createElement(\"li\", { key: 'probable-links' },\n                    React.createElement(\"span\", { className: 'ontodia-label' }, \"Probably, you're looking for..\"))),\n                probableViews,\n            ];\n        }\n        return React.createElement(\"ul\", { className: 'ontodia-connections-menu_links-list '\n                + (views.length === 0 && probableViews.length === 0 ? 'ocm_links-list-empty' : '') },\n            viewList,\n            probablePart);\n    };\n    return ConnectionsList;\n}(React.Component));\nvar LinkInPopupMenu = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkInPopupMenu, _super);\n    function LinkInPopupMenu(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onExpandLink = function (expectedCount, direction) {\n            _this.props.onExpandLink({\n                link: _this.props.link,\n                direction: direction,\n                expectedCount: expectedCount,\n            });\n        };\n        _this.onMoveToFilter = function (evt) {\n            evt.stopPropagation();\n            _this.props.onMoveToFilter({\n                link: _this.props.link,\n                direction: _this.props.direction,\n                expectedCount: _this.props.count,\n            });\n        };\n        return _this;\n    }\n    LinkInPopupMenu.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, view = _a.view, link = _a.link;\n        var fullText = view.formatLabel(link.label, link.id);\n        var probability = Math.round(this.props.probability * 100);\n        var textLine = listElementView_1.highlightSubstring(fullText + (probability > 0 ? ' (' + probability + '%)' : ''), this.props.filterKey);\n        var directionName = this.props.direction === 'in' ? 'source' :\n            this.props.direction === 'out' ? 'target' :\n                'all connected';\n        return (React.createElement(\"li\", { \"data-linktypeid\": this.props.link.id, className: 'link-in-popup-menu', title: directionName + \" of \\\"\" + fullText + \"\\\" \" + view.formatIri(link.id), onClick: function () { return _this.onExpandLink(_this.props.count, _this.props.direction); } },\n            this.props.direction === 'in' || this.props.direction === 'out' ?\n                React.createElement(\"div\", { className: 'link-in-popup-menu_direction' },\n                    this.props.direction === 'in' && React.createElement(\"div\", { className: 'link-in-popup-menu_direction__in-direction' }),\n                    this.props.direction === 'out' && React.createElement(\"div\", { className: 'link-in-popup-menu_direction__out-direction' }))\n                : null,\n            React.createElement(\"div\", { className: 'link-in-popup-menu__link-title' }, textLine),\n            React.createElement(\"span\", { className: 'ontodia-badge link-in-popup-menu__count' }, this.props.count <= MAX_LINK_COUNT ? this.props.count : '100+'),\n            React.createElement(\"div\", { className: 'link-in-popup-menu__filter-button', onClick: this.onMoveToFilter, title: 'Set as filter in the Instances panel' }),\n            React.createElement(\"div\", { className: 'link-in-popup-menu__navigate-button', title: \"Navigate to \" + directionName + \" \\\"\" + fullText + \"\\\" elements\" })));\n    };\n    return LinkInPopupMenu;\n}(React.Component));\nvar ObjectsPanel = /** @class */ (function (_super) {\n    tslib_1.__extends(ObjectsPanel, _super);\n    function ObjectsPanel(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onSelectAll = function () {\n            var objects = _this.props.data.objects;\n            if (objects.length === 0) {\n                return;\n            }\n            var allSelected = allNonPresentedAreSelected(objects, _this.state.selection);\n            var newSelection = allSelected ? new Set() : selectNonPresented(_this.props.data.objects);\n            _this.updateSelection(newSelection);\n        };\n        _this.updateSelection = function (newSelection) {\n            _this.setState({ selection: newSelection });\n        };\n        _this.counter = function (activeObjCount) {\n            var countString = activeObjCount + \"\\u00A0of\\u00A0\" + _this.props.data.objects.length;\n            var wrongNodes = Math.min(MAX_LINK_COUNT, _this.props.data.linkDataChunk.expectedCount) - _this.props.data.objects.length;\n            var wrongNodesString = Math.abs(wrongNodes) > MAX_LINK_COUNT ?\n                MAX_LINK_COUNT + \"+\" : Math.abs(wrongNodes).toString();\n            var wrongNodesCount = wrongNodes === 0 ? '' : (wrongNodes < 0 ?\n                \"\\u00A0(\" + wrongNodesString + \")\" : \"\\u00A0(\" + wrongNodesString + \")\");\n            var wrongNodesTitle = wrongNodes === 0 ? '' : (wrongNodes > 0 ? 'Unavailable nodes' : 'Extra nodes');\n            return React.createElement(\"div\", { className: 'ontodia-label ontodia-connections-menu_objects-panel_bottom-panel__count-label' },\n                React.createElement(\"span\", null, countString),\n                React.createElement(\"span\", { className: 'ontodia-connections-menu_objects-panel_bottom-panel__extra-elements', title: wrongNodesTitle }, wrongNodesCount));\n        };\n        _this.state = { selection: new Set() };\n        return _this;\n    }\n    ObjectsPanel.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.data.objects.length < nextProps.data.objects.length) {\n            this.setState({ selection: new Set() });\n        }\n    };\n    ObjectsPanel.prototype.getFilteredObjects = function () {\n        var _this = this;\n        if (!this.props.filterKey) {\n            return this.props.data.objects;\n        }\n        var filterKey = this.props.filterKey.toLowerCase();\n        return this.props.data.objects.filter(function (element) {\n            var text = _this.props.view.formatLabel(element.model.label.values, element.model.id).toLowerCase();\n            return text && text.indexOf(filterKey) >= 0;\n        });\n    };\n    ObjectsPanel.prototype.getItems = function (list) {\n        var added = {};\n        var result = [];\n        for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var obj = list_1[_i];\n            if (added[obj.model.id]) {\n                continue;\n            }\n            added[obj.model.id] = true;\n            result.push(obj.model);\n        }\n        return result;\n    };\n    ObjectsPanel.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, onPressAddSelected = _a.onPressAddSelected, filterKey = _a.filterKey;\n        var selection = this.state.selection;\n        var objects = this.getFilteredObjects();\n        var isAllSelected = allNonPresentedAreSelected(objects, selection);\n        var nonPresented = objects.filter(function (el) { return !el.presentOnDiagram; });\n        var active = nonPresented.filter(function (el) { return selection.has(el.model.id); });\n        return React.createElement(\"div\", { className: 'ontodia-connections-menu_objects-panel' },\n            React.createElement(\"div\", { className: 'ontodia-connections-menu_objects-panel__select-all' },\n                React.createElement(\"label\", null,\n                    React.createElement(\"input\", { type: 'checkbox', checked: isAllSelected && nonPresented.length > 0, onChange: this.onSelectAll, disabled: nonPresented.length === 0 }),\n                    \"Select All\")),\n            (this.props.loading ?\n                React.createElement(\"label\", { className: 'ontodia-label ontodia-connections-menu__loading-objects' }, \"Loading...\") :\n                objects.length === 0 ?\n                    React.createElement(\"label\", { className: 'ontodia-label ontodia-connections-menu__loading-objects' }, \"No available nodes\") :\n                    React.createElement(\"div\", { className: 'ontodia-connections-menu_objects-panel_objects-list' },\n                        React.createElement(searchResults_1.SearchResults, { view: this.props.view, items: this.getItems(objects), selection: this.state.selection, onSelectionChanged: this.updateSelection, highlightText: filterKey }),\n                        this.props.data.linkDataChunk.expectedCount > MAX_LINK_COUNT ? (React.createElement(\"div\", { className: 'ontodia-connections-menu__move-to-filter', onClick: function () { return _this.props.onMoveToFilter(_this.props.data.linkDataChunk); } }, \"The list was truncated, for more data click here to use the filter panel\")) : null)),\n            React.createElement(\"div\", { className: 'ontodia-connections-menu_objects-panel_bottom-panel' },\n                this.counter(active.length),\n                React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-primary pull-right ' +\n                        'ontodia-connections-menu_objects-panel_bottom-panel__add-button', disabled: this.props.loading || nonPresented.length === 0, onClick: function () { return onPressAddSelected(active.length > 0 ? active : nonPresented); } }, active.length > 0 ? 'Add selected' : 'Add all')));\n    };\n    return ObjectsPanel;\n}(React.Component));\nfunction selectNonPresented(objects) {\n    var selection = new Set();\n    for (var _i = 0, objects_1 = objects; _i < objects_1.length; _i++) {\n        var object = objects_1[_i];\n        if (object.presentOnDiagram) {\n            continue;\n        }\n        selection.add(object.model.id);\n    }\n    return selection;\n}\nfunction allNonPresentedAreSelected(objects, selection) {\n    var allSelected = true;\n    for (var _i = 0, objects_2 = objects; _i < objects_2.length; _i++) {\n        var object = objects_2[_i];\n        if (object.presentOnDiagram) {\n            continue;\n        }\n        allSelected = allSelected && selection.has(object.model.id);\n    }\n    return allSelected;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar ProgressState;\n(function (ProgressState) {\n    ProgressState[\"none\"] = \"none\";\n    ProgressState[\"loading\"] = \"loading\";\n    ProgressState[\"error\"] = \"error\";\n    ProgressState[\"completed\"] = \"completed\";\n})(ProgressState = exports.ProgressState || (exports.ProgressState = {}));\nvar CLASS_NAME = 'ontodia-progress-bar';\nvar ProgressBar = /** @class */ (function (_super) {\n    tslib_1.__extends(ProgressBar, _super);\n    function ProgressBar() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ProgressBar.prototype.render = function () {\n        var _a = this.props, state = _a.state, _b = _a.percent, percent = _b === void 0 ? 100 : _b, _c = _a.height, height = _c === void 0 ? 20 : _c;\n        var className = CLASS_NAME + \" \" + CLASS_NAME + \"--\" + state;\n        var showBar = state === ProgressState.loading || state === ProgressState.error;\n        return (React.createElement(\"div\", { className: className, style: { height: showBar ? height : 0 } },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__bar\", role: 'progressbar', style: { width: percent + \"%\" }, \"aria-valuemin\": 0, \"aria-valuemax\": 100, \"aria-valuenow\": percent })));\n    };\n    return ProgressBar;\n}(React.Component));\nexports.ProgressBar = ProgressBar;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar d3_color_1 = require(\"d3-color\");\nvar CLASS_NAME = 'ontodia-list-element-view';\nvar ListElementView = /** @class */ (function (_super) {\n    tslib_1.__extends(ListElementView, _super);\n    function ListElementView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onClick = function (event) {\n            var _a = _this.props, disabled = _a.disabled, model = _a.model, onClick = _a.onClick;\n            if (!disabled && onClick) {\n                event.persist();\n                onClick(event, model);\n            }\n        };\n        return _this;\n    }\n    ListElementView.prototype.render = function () {\n        var _a = this.props, className = _a.className, view = _a.view, model = _a.model, highlightText = _a.highlightText, disabled = _a.disabled, selected = _a.selected, onDragStart = _a.onDragStart;\n        var _b = view.getTypeStyle(model.types).color, h = _b.h, c = _b.c, l = _b.l;\n        var frontColor = (selected && !disabled) ? d3_color_1.hcl(h, c, l * 1.2) : d3_color_1.hcl('white');\n        var classNames = \"\" + CLASS_NAME;\n        classNames += disabled ? \" \" + CLASS_NAME + \"--disabled\" : '';\n        classNames += className ? \" \" + className : '';\n        var localizedText = view.formatLabel(model.label.values, model.id);\n        var classesString = model.types.length > 0 ? \"\\nClasses: \" + view.getElementTypeString(model) : '';\n        return React.createElement(\"li\", { className: classNames, draggable: !disabled && Boolean(onDragStart), title: localizedText + \" \" + view.formatIri(model.id) + classesString, style: { background: d3_color_1.hcl(h, c, l) }, onClick: this.onClick, onDragStart: onDragStart },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__label\", style: { background: frontColor } }, highlightSubstring(localizedText, highlightText)));\n    };\n    return ListElementView;\n}(React.Component));\nexports.ListElementView = ListElementView;\nfunction startDragElements(e, iris) {\n    try {\n        e.dataTransfer.setData('application/x-ontodia-elements', JSON.stringify(iris));\n    }\n    catch (ex) { // IE fix\n        e.dataTransfer.setData('text', JSON.stringify(iris));\n    }\n    return false;\n}\nexports.startDragElements = startDragElements;\nvar DEFAULT_HIGHLIGHT_PROPS = {\n    className: \"ontodia-text-highlight\"\n};\nfunction highlightSubstring(text, substring, highlightProps) {\n    if (highlightProps === void 0) { highlightProps = DEFAULT_HIGHLIGHT_PROPS; }\n    if (!substring) {\n        return React.createElement(\"span\", null, text);\n    }\n    var start = text.toLowerCase().indexOf(substring.toLowerCase());\n    if (start < 0) {\n        return React.createElement(\"span\", null, text);\n    }\n    var end = start + substring.length;\n    var before = text.substring(0, start);\n    var highlighted = text.substring(start, end);\n    var after = text.substring(end);\n    return React.createElement(\"span\", null,\n        before,\n        React.createElement(\"span\", tslib_1.__assign({}, highlightProps), highlighted),\n        after);\n}\nexports.highlightSubstring = highlightSubstring;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar listElementView_1 = require(\"./listElementView\");\nvar CLASS_NAME = 'ontodia-search-results';\nvar SearchResults = /** @class */ (function (_super) {\n    tslib_1.__extends(SearchResults, _super);\n    function SearchResults(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.delayedChangeCells = new async_1.Debouncer();\n        _this.startSelection = 0;\n        _this.endSelection = 0;\n        _this.onRootMount = function (root) {\n            _this.root = root;\n        };\n        _this.renderResultItem = function (model) {\n            var useDragAndDrop = _this.props.useDragAndDrop;\n            var canBeSelected = _this.canBeSelected(model);\n            return (React.createElement(listElementView_1.ListElementView, { key: model.id, model: model, view: _this.props.view, highlightText: _this.props.highlightText, disabled: !canBeSelected, selected: _this.props.selection.has(model.id), onClick: canBeSelected ? _this.onItemClick : undefined, onDragStart: useDragAndDrop ? function (e) {\n                    var selection = _this.props.selection;\n                    var iris = [];\n                    selection.forEach(function (iri) { return iris.push(iri); });\n                    if (!selection.has(model.id)) {\n                        iris.push(model.id);\n                    }\n                    return listElementView_1.startDragElements(e, iris);\n                } : undefined }));\n        };\n        _this.onChangeCells = function () {\n            var _a = _this.props, items = _a.items, selection = _a.selection;\n            if (selection.size === 0) {\n                if (items && items.length > 0) {\n                    // redraw \"already on diagram\" state\n                    _this.forceUpdate();\n                }\n            }\n            else {\n                var newSelection = collections_1.cloneSet(selection);\n                for (var _i = 0, _b = _this.props.view.model.elements; _i < _b.length; _i++) {\n                    var element = _b[_i];\n                    if (element.group === undefined && selection.has(element.iri)) {\n                        newSelection.delete(element.iri);\n                    }\n                }\n                _this.updateSelection(newSelection);\n            }\n        };\n        _this.addKeyListener = function () {\n            document.addEventListener('keydown', _this.onKeyUp);\n        };\n        _this.removeKeyListener = function () {\n            document.removeEventListener('keydown', _this.onKeyUp);\n        };\n        _this.onKeyUp = function (event) {\n            var items = _this.props.items;\n            var isPressedUp = event.keyCode === 38 || event.which === 38;\n            var isPressDown = event.keyCode === 40 || event.which === 40;\n            if (isPressedUp || isPressDown) {\n                if (event.shiftKey) { // select range\n                    if (isPressedUp) {\n                        _this.endSelection = _this.getNextIndex(_this.endSelection, 0 /* Up */);\n                    }\n                    else if (isPressDown) {\n                        _this.endSelection = _this.getNextIndex(_this.endSelection, 1 /* Down */);\n                    }\n                    var startIndex = Math.min(_this.startSelection, _this.endSelection);\n                    var finishIndex = Math.max(_this.startSelection, _this.endSelection);\n                    var selection = _this.selectRange(startIndex, finishIndex);\n                    _this.updateSelection(selection);\n                    _this.focusOn(_this.endSelection);\n                }\n                else { // change focus\n                    var startIndex = Math.min(_this.startSelection, _this.endSelection);\n                    var finishIndex = Math.max(_this.startSelection, _this.endSelection);\n                    if (isPressedUp) {\n                        _this.startSelection = _this.getNextIndex(startIndex, 0 /* Up */);\n                    }\n                    else if (isPressDown) {\n                        _this.startSelection = _this.getNextIndex(finishIndex, 1 /* Down */);\n                    }\n                    _this.endSelection = _this.startSelection;\n                    var focusElement = items[_this.startSelection];\n                    var newSelection = new Set();\n                    newSelection.add(focusElement.id);\n                    _this.updateSelection(newSelection);\n                    _this.focusOn(_this.startSelection);\n                }\n            }\n            event.preventDefault();\n        };\n        _this.onItemClick = function (event, model) {\n            event.preventDefault();\n            var _a = _this.props, items = _a.items, selection = _a.selection, onSelectionChanged = _a.onSelectionChanged;\n            var previouslySelected = selection.has(model.id);\n            var modelIndex = items.indexOf(model);\n            var newSelection;\n            if (event.shiftKey && _this.startSelection !== -1) { // select range\n                var start = Math.min(_this.startSelection, modelIndex);\n                var end = Math.max(_this.startSelection, modelIndex);\n                newSelection = _this.selectRange(start, end);\n            }\n            else {\n                _this.endSelection = _this.startSelection = modelIndex;\n                var ctrlKey = event.ctrlKey || event.metaKey;\n                if (ctrlKey) { // select/deselect\n                    newSelection = collections_1.cloneSet(selection);\n                    if (selection.has(model.id)) {\n                        newSelection.delete(model.id);\n                    }\n                    else {\n                        newSelection.add(model.id);\n                    }\n                }\n                else { // single click\n                    newSelection = new Set();\n                    newSelection.add(model.id);\n                }\n            }\n            onSelectionChanged(newSelection);\n        };\n        _this.state = {\n            selection: props.selection || {},\n        };\n        return _this;\n    }\n    SearchResults.prototype.render = function () {\n        var items = this.props.items || [];\n        return React.createElement(\"ul\", { className: CLASS_NAME, ref: this.onRootMount, tabIndex: -1, onFocus: this.addKeyListener, onBlur: this.removeKeyListener }, items.map(this.renderResultItem));\n    };\n    SearchResults.prototype.componentDidMount = function () {\n        var _this = this;\n        this.listener.listen(this.props.view.model.events, 'changeCells', function () {\n            _this.delayedChangeCells.call(_this.onChangeCells);\n        });\n    };\n    SearchResults.prototype.componentWillReceiveProps = function (props) {\n        this.setState({ selection: props.selection || {} });\n    };\n    SearchResults.prototype.componentWillUnmount = function () {\n        this.removeKeyListener();\n        this.listener.stopListening();\n        this.delayedChangeCells.dispose();\n    };\n    SearchResults.prototype.updateSelection = function (selection) {\n        var onSelectionChanged = this.props.onSelectionChanged;\n        onSelectionChanged(selection);\n    };\n    SearchResults.prototype.selectRange = function (start, end) {\n        var items = this.props.items;\n        var selection = new Set();\n        for (var i = start; i <= end; i++) {\n            var selectedModel = items[i];\n            if (this.canBeSelected(selectedModel)) {\n                selection.add(selectedModel.id);\n            }\n        }\n        return selection;\n    };\n    SearchResults.prototype.getNextIndex = function (startIndex, direction) {\n        var items = this.props.items;\n        if (items.length === 0) {\n            return startIndex;\n        }\n        var indexDelta = direction === 0 /* Up */ ? -1 : 1;\n        for (var step = 1; step < items.length; step++) {\n            var nextIndex = startIndex + step * indexDelta;\n            if (nextIndex < 0) {\n                nextIndex += items.length;\n            }\n            if (nextIndex >= items.length) {\n                nextIndex -= items.length;\n            }\n            if (this.canBeSelected(items[nextIndex])) {\n                return nextIndex;\n            }\n        }\n        return startIndex;\n    };\n    SearchResults.prototype.canBeSelected = function (model) {\n        var alreadyOnDiagram = this.props.view.model.elements.findIndex(function (element) { return element.iri === model.id && element.group === undefined; }) >= 0;\n        return !this.props.useDragAndDrop || !alreadyOnDiagram;\n    };\n    SearchResults.prototype.focusOn = function (index) {\n        var scrollableContainer = this.root.parentElement;\n        var containerBounds = scrollableContainer.getBoundingClientRect();\n        var item = this.root.children.item(index);\n        var itemBounds = item.getBoundingClientRect();\n        var itemTop = itemBounds.top - containerBounds.top;\n        var itemBottom = itemBounds.bottom - containerBounds.top;\n        if (itemTop < 0) {\n            scrollableContainer.scrollTop += itemTop;\n        }\n        else if (itemBottom > containerBounds.height) {\n            scrollableContainer.scrollTop += (itemBottom - containerBounds.height);\n        }\n        item.focus();\n    };\n    SearchResults.defaultProps = {\n        useDragAndDrop: true,\n    };\n    return SearchResults;\n}(React.Component));\nexports.SearchResults = SearchResults;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar model_1 = require(\"../data/model\");\nvar CLASS_NAME = 'ontodia-edit-form';\nvar EditEntityForm = /** @class */ (function (_super) {\n    tslib_1.__extends(EditEntityForm, _super);\n    function EditEntityForm(props) {\n        var _this = _super.call(this, props) || this;\n        _this.renderProperty = function (key, property) {\n            var view = _this.props.view;\n            var richProperty = view.model.getProperty(key);\n            var label = view.formatLabel(richProperty.label, key);\n            var values = [];\n            if (model_1.isIriProperty(property)) {\n                values = property.values.map(function (_a) {\n                    var value = _a.value;\n                    return value;\n                });\n            }\n            else if (model_1.isLiteralProperty(property)) {\n                values = property.values.map(function (_a) {\n                    var value = _a.value;\n                    return value;\n                });\n            }\n            return (React.createElement(\"div\", { key: key, className: CLASS_NAME + \"__form-row\" },\n                React.createElement(\"label\", null,\n                    label,\n                    values.map(function (value, index) { return (React.createElement(\"input\", { key: index, className: 'ontodia-form-control', defaultValue: value })); }))));\n        };\n        _this.onChangeIri = function (e) {\n            var target = e.target;\n            var iri = target.value;\n            _this.setState(function (prevState) {\n                return {\n                    elementModel: tslib_1.__assign(tslib_1.__assign({}, prevState.elementModel), { id: iri })\n                };\n            });\n        };\n        _this.onChangeLabel = function (e) {\n            var target = e.target;\n            var labels = target.value.length > 0 ? [{ value: target.value, language: '' }] : [];\n            _this.setState({ elementModel: tslib_1.__assign(tslib_1.__assign({}, _this.state.elementModel), { label: { values: labels } }) });\n        };\n        _this.state = { elementModel: props.entity };\n        return _this;\n    }\n    EditEntityForm.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.entity !== nextProps.entity) {\n            this.setState({ elementModel: nextProps.entity });\n        }\n    };\n    EditEntityForm.prototype.renderProperties = function () {\n        var _this = this;\n        var properties = this.props.entity.properties;\n        var propertyIris = Object.keys(properties);\n        return (React.createElement(\"div\", null, propertyIris.map(function (iri) {\n            return _this.renderProperty(iri, properties[iri]);\n        })));\n    };\n    EditEntityForm.prototype.renderType = function () {\n        var view = this.props.view;\n        var elementModel = this.state.elementModel;\n        var label = view.getElementTypeString(elementModel);\n        return (React.createElement(\"label\", null,\n            \"Type\",\n            React.createElement(\"input\", { className: 'ontodia-form-control', value: label, disabled: true })));\n    };\n    EditEntityForm.prototype.renderIri = function () {\n        var elementModel = this.state.elementModel;\n        return (React.createElement(\"label\", null,\n            \"IRI\",\n            React.createElement(\"input\", { className: 'ontodia-form-control', defaultValue: elementModel.id, onChange: this.onChangeIri })));\n    };\n    EditEntityForm.prototype.renderLabel = function () {\n        var view = this.props.view;\n        var label = view.selectLabel(this.state.elementModel.label.values);\n        var text = label ? label.value : '';\n        return (React.createElement(\"label\", null,\n            \"Label\",\n            React.createElement(\"input\", { className: 'ontodia-form-control', value: text, onChange: this.onChangeLabel })));\n    };\n    EditEntityForm.prototype.render = function () {\n        var _this = this;\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__body\" },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__form-row\" }, this.renderIri()),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__form-row\" }, this.renderType()),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__form-row\" }, this.renderLabel()),\n                this.renderProperties()),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__controls\" },\n                React.createElement(\"button\", { className: \"ontodia-btn ontodia-btn-success \" + CLASS_NAME + \"__apply-button\", onClick: function () { return _this.props.onApply(_this.state.elementModel); } }, \"Apply\"),\n                React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-danger', onClick: this.props.onCancel }, \"Cancel\"))));\n    };\n    return EditEntityForm;\n}(React.Component));\nexports.EditEntityForm = EditEntityForm;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar model_1 = require(\"../data/model\");\nvar elements_1 = require(\"../diagram/elements\");\nvar async_1 = require(\"../viewUtils/async\");\nvar progressBar_1 = require(\"../widgets/progressBar\");\nvar elementTypeSelector_1 = require(\"./elementTypeSelector\");\nvar linkTypeSelector_1 = require(\"./linkTypeSelector\");\nvar CLASS_NAME = 'ontodia-edit-form';\nvar EditElementTypeForm = /** @class */ (function (_super) {\n    tslib_1.__extends(EditElementTypeForm, _super);\n    function EditElementTypeForm(props) {\n        var _this = _super.call(this, props) || this;\n        _this.validationCancellation = new async_1.Cancellation();\n        _this.state = {\n            elementValue: { value: props.target, validated: true },\n            linkValue: { value: { link: props.link, direction: elements_1.LinkDirection.out }, validated: true },\n            isValid: true,\n        };\n        return _this;\n    }\n    EditElementTypeForm.prototype.componentDidMount = function () {\n        this.validate();\n    };\n    EditElementTypeForm.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var _a = this.state, elementValue = _a.elementValue, linkValue = _a.linkValue;\n        var elementChanged = !model_1.sameElement(elementValue.value, prevState.elementValue.value);\n        var linkChanged = !model_1.sameLink(linkValue.value.link, prevState.linkValue.value.link);\n        if (elementChanged || linkChanged) {\n            if (elementChanged) {\n                this.resetLinkValue();\n            }\n            this.validate();\n        }\n        if (elementValue !== prevState.elementValue && elementValue.validated && !elementValue.error) {\n            this.props.onChangeElement(elementValue.value);\n        }\n        if (linkValue !== prevState.linkValue && linkValue.validated && !linkValue.error) {\n            this.props.onChangeLink(linkValue.value.link);\n        }\n    };\n    EditElementTypeForm.prototype.componentWillUnmount = function () {\n        this.validationCancellation.abort();\n    };\n    EditElementTypeForm.prototype.resetLinkValue = function () {\n        var originalLink = this.props.link;\n        this.setState(function (_a) {\n            var element = _a.elementValue.value;\n            var link = tslib_1.__assign(tslib_1.__assign({}, originalLink), { targetId: element.id });\n            return { linkValue: { value: { link: link, direction: elements_1.LinkDirection.out }, error: undefined, validated: false } };\n        });\n    };\n    EditElementTypeForm.prototype.validate = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, originalLink = _a.link;\n        var _b = this.state, element = _b.elementValue.value, value = _b.linkValue.value;\n        this.setState({ isValidating: true });\n        this.validationCancellation.abort();\n        this.validationCancellation = new async_1.Cancellation();\n        var signal = this.validationCancellation.signal;\n        var validateElement = elementTypeSelector_1.validateElementType(element);\n        var validateLink = linkTypeSelector_1.validateLinkType(editor, value.link, originalLink);\n        Promise.all([validateElement, validateLink]).then(function (_a) {\n            var elementError = _a[0], linkError = _a[1];\n            if (signal.aborted) {\n                return;\n            }\n            _this.setState(function (_a) {\n                var elementValue = _a.elementValue, linkValue = _a.linkValue;\n                return ({\n                    elementValue: tslib_1.__assign(tslib_1.__assign({}, elementValue), { error: elementError, validated: true }),\n                    linkValue: tslib_1.__assign(tslib_1.__assign({}, linkValue), { error: linkError, validated: true }),\n                    isValid: !(elementError || linkError),\n                    isValidating: false,\n                });\n            });\n        });\n    };\n    EditElementTypeForm.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, view = _a.view, metadataApi = _a.metadataApi, source = _a.source;\n        var _b = this.state, elementValue = _b.elementValue, linkValue = _b.linkValue, isValid = _b.isValid, isValidating = _b.isValidating;\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__body\" },\n                React.createElement(elementTypeSelector_1.ElementTypeSelector, { editor: editor, view: view, metadataApi: metadataApi, source: source, elementValue: elementValue, onChange: function (value) {\n                        return _this.setState({ elementValue: { value: value, error: undefined, validated: false } });\n                    } }),\n                React.createElement(linkTypeSelector_1.LinkTypeSelector, { editor: editor, view: view, metadataApi: metadataApi, linkValue: linkValue, source: source, target: elementValue.value, onChange: function (value) { return _this.setState({ linkValue: { value: value, error: undefined, validated: false } }); }, disabled: elementValue.error !== undefined }),\n                isValidating ? (React.createElement(\"div\", { className: CLASS_NAME + \"__progress\" },\n                    React.createElement(progressBar_1.ProgressBar, { state: progressBar_1.ProgressState.loading, height: 10 }))) : null),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__controls\" },\n                React.createElement(\"button\", { className: \"ontodia-btn ontodia-btn-success \" + CLASS_NAME + \"__apply-button\", onClick: function () { return _this.props.onApply(elementValue.value, linkValue.value.link); }, disabled: !isValid || isValidating }, \"Apply\"),\n                React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-danger', onClick: this.props.onCancel }, \"Cancel\"))));\n    };\n    return EditElementTypeForm;\n}(React.Component));\nexports.EditElementTypeForm = EditElementTypeForm;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar schema_1 = require(\"../data/schema\");\nvar instancesSearch_1 = require(\"../widgets/instancesSearch\");\nvar listElementView_1 = require(\"../widgets/listElementView\");\nvar async_1 = require(\"../viewUtils/async\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar CLASS_NAME = 'ontodia-edit-form';\nvar ElementTypeSelector = /** @class */ (function (_super) {\n    tslib_1.__extends(ElementTypeSelector, _super);\n    function ElementTypeSelector(props) {\n        var _this = _super.call(this, props) || this;\n        _this.cancellation = new async_1.Cancellation();\n        _this.filterCancellation = new async_1.Cancellation();\n        _this.newIriCancellation = new async_1.Cancellation();\n        _this.onElementTypeChange = function (e) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var signal, _a, elementValue, onChange, metadataApi, classId, type, typeName, types, newId;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.setState({ isLoading: true });\n                        this.newIriCancellation.abort();\n                        this.newIriCancellation = new async_1.Cancellation();\n                        signal = this.newIriCancellation.signal;\n                        _a = this.props, elementValue = _a.elementValue, onChange = _a.onChange, metadataApi = _a.metadataApi;\n                        classId = e.target.value;\n                        type = this.props.editor.model.createClass(classId);\n                        typeName = this.props.view.formatLabel(type.label, type.id);\n                        types = [classId];\n                        return [4 /*yield*/, metadataApi.generateNewElementIri(types, signal)];\n                    case 1:\n                        newId = _b.sent();\n                        if (signal.aborted) {\n                            return [2 /*return*/];\n                        }\n                        this.setState({ isLoading: false });\n                        onChange(tslib_1.__assign(tslib_1.__assign({}, elementValue.value), { id: newId, types: types, label: { values: [{ value: \"New \" + typeName, language: '' }] } }));\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.renderPossibleElementType = function (elementType) {\n            var view = _this.props.view;\n            var type = view.model.createClass(elementType);\n            var label = view.formatLabel(type.label, type.id);\n            return React.createElement(\"option\", { key: elementType, value: elementType }, label);\n        };\n        _this.state = { searchString: '', existingElements: [] };\n        return _this;\n    }\n    ElementTypeSelector.prototype.componentDidMount = function () {\n        this.fetchPossibleElementTypes();\n    };\n    ElementTypeSelector.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var searchString = this.state.searchString;\n        if (searchString !== prevState.searchString) {\n            this.searchExistingElements();\n        }\n    };\n    ElementTypeSelector.prototype.componentWillUnmount = function () {\n        this.cancellation.abort();\n        this.filterCancellation.abort();\n        this.newIriCancellation.abort();\n    };\n    ElementTypeSelector.prototype.fetchPossibleElementTypes = function () {\n        var _this = this;\n        var _a = this.props, view = _a.view, metadataApi = _a.metadataApi, source = _a.source;\n        if (!metadataApi) {\n            return;\n        }\n        metadataApi.typesOfElementsDraggedFrom(source, this.cancellation.signal).then(function (elementTypes) {\n            if (_this.cancellation.signal.aborted) {\n                return;\n            }\n            elementTypes.sort(makeElementTypeComparatorByLabel(view));\n            _this.setState({ elementTypes: elementTypes });\n        });\n    };\n    ElementTypeSelector.prototype.searchExistingElements = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, view = _a.view;\n        var searchString = this.state.searchString;\n        this.setState({ existingElements: [] });\n        if (searchString.length > 0) {\n            this.setState({ isLoading: true });\n            this.filterCancellation.abort();\n            this.filterCancellation = new async_1.Cancellation();\n            var signal_1 = this.filterCancellation.signal;\n            var request = instancesSearch_1.createRequest({ text: searchString }, view.getLanguage());\n            editor.model.dataProvider.filter(request).then(function (elements) {\n                if (signal_1.aborted) {\n                    return;\n                }\n                var existingElements = Object.keys(elements).map(function (key) { return elements[key]; });\n                _this.setState({ existingElements: existingElements, isLoading: false });\n            });\n        }\n    };\n    ElementTypeSelector.prototype.renderElementTypeSelector = function () {\n        var elementValue = this.props.elementValue;\n        var _a = this.state, elementTypes = _a.elementTypes, isLoading = _a.isLoading;\n        var value = elementValue.value.types.length ? elementValue.value.types[0] : '';\n        if (isLoading) {\n            return React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 });\n        }\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__control-row\" },\n            React.createElement(\"label\", null, \"Entity Type\"),\n            elementTypes ? (React.createElement(\"select\", { className: 'ontodia-form-control', value: value, onChange: this.onElementTypeChange },\n                React.createElement(\"option\", { value: schema_1.PLACEHOLDER_ELEMENT_TYPE, disabled: true }, \"Select entity type\"),\n                elementTypes.map(this.renderPossibleElementType))) : React.createElement(\"div\", null,\n                React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 })),\n            elementValue.error ? React.createElement(\"span\", { className: CLASS_NAME + \"__control-error\" }, elementValue.error) : ''));\n    };\n    ElementTypeSelector.prototype.renderExistingElementsList = function () {\n        var _a = this.props, view = _a.view, elementValue = _a.elementValue, onChange = _a.onChange;\n        var _b = this.state, elementTypes = _b.elementTypes, isLoading = _b.isLoading, existingElements = _b.existingElements;\n        if (isLoading) {\n            return React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 });\n        }\n        if (existingElements.length > 0) {\n            return existingElements.map(function (element) {\n                var isAlreadyOnDiagram = Boolean(view.model.elements.find(function (_a) {\n                    var iri = _a.iri, group = _a.group;\n                    return iri === element.id && group === undefined;\n                }));\n                var hasAppropriateType = Boolean(elementTypes.find(function (type) { return element.types.indexOf(type) >= 0; }));\n                return (React.createElement(listElementView_1.ListElementView, { key: element.id, view: view, model: element, disabled: isAlreadyOnDiagram || !hasAppropriateType, selected: element.id === elementValue.value.id, onClick: function (e, model) { return onChange(model); } }));\n            });\n        }\n        return React.createElement(\"span\", null, \"No results\");\n    };\n    ElementTypeSelector.prototype.render = function () {\n        var _this = this;\n        var searchString = this.state.searchString;\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__form-row \" + CLASS_NAME + \"__element-selector\" },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__search\" },\n                React.createElement(\"i\", { className: \"fa fa-search \" + CLASS_NAME + \"__search-icon\" }),\n                React.createElement(\"input\", { value: searchString, onChange: function (e) { return _this.setState({ searchString: e.target.value }); }, className: \"ontodia-form-control \" + CLASS_NAME + \"__search-input\", placeholder: 'Search for...', autoFocus: true })),\n            searchString.length > 0 ? (React.createElement(\"div\", { className: CLASS_NAME + \"__existing-elements-list\" }, this.renderExistingElementsList())) : (React.createElement(\"div\", null,\n                React.createElement(\"div\", { className: CLASS_NAME + \"__separator\" },\n                    React.createElement(\"i\", { className: CLASS_NAME + \"__separator-text\" }, \"or create new entity\")),\n                this.renderElementTypeSelector()))));\n    };\n    return ElementTypeSelector;\n}(React.Component));\nexports.ElementTypeSelector = ElementTypeSelector;\nfunction makeElementTypeComparatorByLabel(view) {\n    return function (a, b) {\n        var typeA = view.model.createClass(a);\n        var typeB = view.model.createClass(b);\n        var labelA = view.formatLabel(typeA.label, typeA.id);\n        var labelB = view.formatLabel(typeB.label, typeB.id);\n        return labelA.localeCompare(labelB);\n    };\n}\nfunction validateElementType(element) {\n    var isElementTypeSelected = element.types.indexOf(schema_1.PLACEHOLDER_ELEMENT_TYPE) < 0;\n    var error = !isElementTypeSelected ? 'Required!' : undefined;\n    return Promise.resolve(error);\n}\nexports.validateElementType = validateElementType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar events_1 = require(\"../viewUtils/events\");\nvar progressBar_1 = require(\"../widgets/progressBar\");\nvar searchResults_1 = require(\"./searchResults\");\nvar workspaceContext_1 = require(\"../workspace/workspaceContext\");\nvar DirectionInImage = require('../../../images/direction-in.png');\nvar DirectionOutImage = require('../../../images/direction-out.png');\nvar CLASS_NAME = 'ontodia-instances-search';\nvar InstancesSearch = /** @class */ (function (_super) {\n    tslib_1.__extends(InstancesSearch, _super);\n    function InstancesSearch(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.onSelectionChanged = function (newSelection) {\n            _this.setState({ selection: newSelection });\n        };\n        _this.state = {\n            resultId: 0,\n            selection: new Set(),\n        };\n        return _this;\n    }\n    InstancesSearch.prototype.render = function () {\n        var _this = this;\n        var ENTER_KEY_CODE = 13;\n        var className = CLASS_NAME + \" \" + (this.props.className || '');\n        var progressState = (this.state.quering ? progressBar_1.ProgressState.loading :\n            this.state.error ? progressBar_1.ProgressState.error :\n                this.state.items ? progressBar_1.ProgressState.completed :\n                    progressBar_1.ProgressState.none);\n        var searchTerm = this.state.inputText === undefined\n            ? this.props.criteria.text : this.state.inputText;\n        return React.createElement(\"div\", { className: className },\n            React.createElement(progressBar_1.ProgressBar, { state: progressState }),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__criteria\" },\n                this.renderCriteria(),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__text-criteria ontodia-input-group\" },\n                    React.createElement(\"input\", { type: 'text', className: 'ontodia-form-control', placeholder: 'Search for...', value: searchTerm || '', onChange: function (e) { return _this.setState({ inputText: e.currentTarget.value }); }, onKeyUp: function (e) {\n                            if (e.keyCode === ENTER_KEY_CODE) {\n                                _this.submitCriteriaUpdate();\n                            }\n                        } }),\n                    React.createElement(\"span\", { className: 'ontodia-input-group-btn' },\n                        React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-default', type: 'button', title: 'Search', onClick: function () { return _this.submitCriteriaUpdate(); } },\n                            React.createElement(\"span\", { className: 'fa fa-search', \"aria-hidden\": 'true' }))))),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__rest ontodia-scrollable\", key: this.state.resultId },\n                React.createElement(searchResults_1.SearchResults, { view: this.props.view, items: this.state.items, highlightText: this.props.criteria.text, selection: this.state.selection, onSelectionChanged: this.onSelectionChanged }),\n                React.createElement(\"div\", { className: CLASS_NAME + \"__rest-end\" },\n                    React.createElement(\"button\", { type: 'button', className: CLASS_NAME + \"__load-more ontodia-btn ontodia-btn-primary\", disabled: this.state.quering, style: { display: this.state.moreItemsAvailable ? undefined : 'none' }, onClick: function () { return _this.queryItems(true); } },\n                        React.createElement(\"span\", { className: 'fa fa-chevron-down', \"aria-hidden\": 'true' }),\n                        \"\\u00A0Show more\"))));\n    };\n    InstancesSearch.prototype.renderCriteria = function () {\n        var _this = this;\n        var _a = this.props, _b = _a.criteria, criteria = _b === void 0 ? {} : _b, view = _a.view;\n        var criterions = [];\n        if (criteria.elementType) {\n            var classInfo = criteria.elementType;\n            var classLabel = view.formatLabel(classInfo.label, classInfo.id);\n            criterions.push(React.createElement(\"div\", { key: 'hasType', className: CLASS_NAME + \"__criterion\" },\n                this.renderRemoveCriterionButtons(function () { return _this.props.onCriteriaChanged(tslib_1.__assign(tslib_1.__assign({}, _this.props.criteria), { elementType: undefined })); }),\n                \"Has type \",\n                React.createElement(\"span\", { className: CLASS_NAME + \"__criterion-class\", title: classInfo.id }, classLabel)));\n        }\n        else if (criteria.refElement) {\n            var element = criteria.refElement;\n            var elementLabel = view.formatLabel(element.data.label.values, element.iri);\n            var linkType = criteria.refElementLink;\n            var linkTypeLabel = linkType ? view.formatLabel(linkType.label, linkType.id) : undefined;\n            criterions.push(React.createElement(\"div\", { key: 'hasLinkedElement', className: CLASS_NAME + \"__criterion\" },\n                this.renderRemoveCriterionButtons(function () { return _this.props.onCriteriaChanged(tslib_1.__assign(tslib_1.__assign({}, _this.props.criteria), { refElement: undefined, refElementLink: undefined })); }),\n                \"Connected to \",\n                React.createElement(\"span\", { className: CLASS_NAME + \"__criterion-element\", title: element ? element.iri : undefined }, elementLabel),\n                linkType && React.createElement(\"span\", null,\n                    ' through ',\n                    React.createElement(\"span\", { className: CLASS_NAME + \"__criterion-link-type\", title: linkType ? linkType.id : undefined }, linkTypeLabel),\n                    criteria.linkDirection === 'in' && React.createElement(\"span\", null,\n                        ' as ',\n                        React.createElement(\"img\", { className: CLASS_NAME + \"__link-direction\", src: DirectionInImage }),\n                        \"\\u00A0source\"),\n                    criteria.linkDirection === 'out' && React.createElement(\"span\", null,\n                        ' as ',\n                        React.createElement(\"img\", { className: CLASS_NAME + \"__link-direction\", src: DirectionOutImage }),\n                        \"\\u00A0target\"))));\n        }\n        return React.createElement(\"div\", { className: CLASS_NAME + \"__criterions\" }, criterions);\n    };\n    InstancesSearch.prototype.renderRemoveCriterionButtons = function (onClick) {\n        return React.createElement(\"div\", { className: CLASS_NAME + \"__criterion-remove ontoidia-btn-group ontodia-btn-group-xs\" },\n            React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Remove criteria', onClick: onClick },\n                React.createElement(\"span\", { className: 'fa fa-times', \"aria-hidden\": 'true' })));\n    };\n    InstancesSearch.prototype.submitCriteriaUpdate = function () {\n        var text = this.state.inputText === undefined ? this.props.criteria.text : this.state.inputText;\n        text = text === '' ? undefined : text;\n        this.props.onCriteriaChanged(tslib_1.__assign(tslib_1.__assign({}, this.props.criteria), { text: text }));\n    };\n    InstancesSearch.prototype.componentDidMount = function () {\n        var _this = this;\n        this.listener.listen(this.props.view.events, 'changeLanguage', function () { return _this.forceUpdate(); });\n        this.queryItems(false);\n    };\n    InstancesSearch.prototype.componentWillReceiveProps = function (nextProps) {\n        var _this = this;\n        var languageChanged = this.currentRequest\n            ? this.currentRequest.languageCode !== nextProps.view.getLanguage() : false;\n        if (this.props.criteria !== nextProps.criteria || languageChanged) {\n            this.setState({ inputText: undefined }, function () { return _this.queryItems(false); });\n        }\n    };\n    InstancesSearch.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.currentRequest = undefined;\n    };\n    InstancesSearch.prototype.queryItems = function (loadMoreItems) {\n        var _this = this;\n        var request;\n        if (loadMoreItems) {\n            if (!this.currentRequest) {\n                throw new Error('Cannot request more items without initial request.');\n            }\n            var _a = this.currentRequest, offset = _a.offset, limit = _a.limit;\n            request = tslib_1.__assign(tslib_1.__assign({}, this.currentRequest), { offset: offset + limit });\n        }\n        else {\n            request = createRequest(this.props.criteria, this.props.view.getLanguage());\n        }\n        if (!(request.text || request.elementTypeId || request.refElementId || request.refElementLinkId)) {\n            this.setState({\n                quering: false,\n                error: undefined,\n                items: undefined,\n                selection: new Set(),\n                moreItemsAvailable: false,\n            });\n            return;\n        }\n        this.currentRequest = request;\n        this.setState({\n            quering: true,\n            error: undefined,\n            moreItemsAvailable: false,\n        });\n        this.props.model.dataProvider.filter(request).then(function (elements) {\n            if (_this.currentRequest !== request) {\n                return;\n            }\n            _this.processFilterData(elements);\n            _this.context.ontodiaWorkspace.triggerWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.searchQueryItem);\n        }).catch(function (error) {\n            if (_this.currentRequest !== request) {\n                return;\n            }\n            // tslint:disable-next-line:no-console\n            console.error(error);\n            _this.setState({ quering: false, error: error });\n        });\n    };\n    InstancesSearch.prototype.processFilterData = function (elements) {\n        var requestedAdditionalItems = this.currentRequest.offset > 0;\n        var existingIris = {};\n        if (requestedAdditionalItems) {\n            this.state.items.forEach(function (item) { return existingIris[item.id] = true; });\n        }\n        var items = requestedAdditionalItems ? tslib_1.__spreadArrays(this.state.items) : [];\n        for (var iri in elements) {\n            if (!elements.hasOwnProperty(iri)) {\n                continue;\n            }\n            if (existingIris[iri]) {\n                continue;\n            }\n            items.push(elements[iri]);\n        }\n        var moreItemsAvailable = Object.keys(elements).length >= this.currentRequest.limit;\n        if (requestedAdditionalItems) {\n            this.setState({ quering: false, items: items, error: undefined, moreItemsAvailable: moreItemsAvailable });\n        }\n        else {\n            this.setState({\n                quering: false,\n                resultId: this.state.resultId + 1,\n                items: items,\n                selection: new Set(),\n                error: undefined,\n                moreItemsAvailable: moreItemsAvailable,\n            });\n        }\n    };\n    InstancesSearch.contextTypes = workspaceContext_1.WorkspaceContextTypes;\n    return InstancesSearch;\n}(React.Component));\nexports.InstancesSearch = InstancesSearch;\nfunction createRequest(criteria, language) {\n    var text = criteria.text, elementType = criteria.elementType, refElement = criteria.refElement, refElementLink = criteria.refElementLink, linkDirection = criteria.linkDirection;\n    return {\n        text: text,\n        elementTypeId: elementType ? elementType.id : undefined,\n        refElementId: refElement ? refElement.iri : undefined,\n        refElementLinkId: refElementLink ? refElementLink.id : undefined,\n        linkDirection: linkDirection,\n        offset: 0,\n        limit: 100,\n        languageCode: language || 'en',\n    };\n}\nexports.createRequest = createRequest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar model_1 = require(\"../data/model\");\nvar schema_1 = require(\"../data/schema\");\nvar elements_1 = require(\"../diagram/elements\");\nvar events_1 = require(\"../viewUtils/events\");\nvar async_1 = require(\"../viewUtils/async\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar CLASS_NAME = 'ontodia-edit-form';\nvar LinkTypeSelector = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkTypeSelector, _super);\n    function LinkTypeSelector(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.cancellation = new async_1.Cancellation();\n        _this.updateAll = function () { return _this.forceUpdate(); };\n        _this.onChangeType = function (e) {\n            var _a = _this.props.linkValue.value, originalLink = _a.link, originalDirection = _a.direction;\n            var index = parseInt(e.currentTarget.value, 10);\n            var _b = _this.state.fatLinkTypes[index], fatLinkType = _b.fatLinkType, direction = _b.direction;\n            var link = tslib_1.__assign(tslib_1.__assign({}, originalLink), { linkTypeId: fatLinkType.id });\n            // switches source and target if the direction has changed\n            if (originalDirection !== direction) {\n                link.sourceId = originalLink.targetId;\n                link.targetId = originalLink.sourceId;\n            }\n            _this.props.onChange({ link: link, direction: direction });\n        };\n        _this.renderPossibleLinkType = function (_a, index) {\n            var _b;\n            var fatLinkType = _a.fatLinkType, direction = _a.direction;\n            var _c = _this.props, view = _c.view, linkValue = _c.linkValue, source = _c.source, target = _c.target;\n            var label = view.formatLabel(fatLinkType.label, fatLinkType.id);\n            var _d = [source, target].map(function (element) {\n                return view.formatLabel(element.label.values, element.id);\n            }), sourceLabel = _d[0], targetLabel = _d[1];\n            if (direction !== linkValue.value.direction) {\n                _b = [targetLabel, sourceLabel], sourceLabel = _b[0], targetLabel = _b[1];\n            }\n            return React.createElement(\"option\", { key: index, value: index },\n                label,\n                \" [\",\n                sourceLabel,\n                \" \\u2192 \",\n                targetLabel,\n                \"]\");\n        };\n        _this.state = {\n            fatLinkTypes: [],\n        };\n        return _this;\n    }\n    LinkTypeSelector.prototype.componentDidMount = function () {\n        this.fetchPossibleLinkTypes();\n    };\n    LinkTypeSelector.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, source = _a.source, target = _a.target;\n        if (prevProps.source !== source || prevProps.target !== target) {\n            this.setState({ fatLinkTypes: undefined });\n            this.fetchPossibleLinkTypes();\n        }\n    };\n    LinkTypeSelector.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.cancellation.abort();\n    };\n    LinkTypeSelector.prototype.fetchPossibleLinkTypes = function () {\n        var _this = this;\n        var _a = this.props, view = _a.view, metadataApi = _a.metadataApi, source = _a.source, target = _a.target;\n        if (!metadataApi) {\n            return;\n        }\n        metadataApi.possibleLinkTypes(source, target, this.cancellation.signal).then(function (linkTypes) {\n            if (_this.cancellation.signal.aborted) {\n                return;\n            }\n            var fatLinkTypes = [];\n            linkTypes.forEach(function (_a) {\n                var linkTypeIri = _a.linkTypeIri, direction = _a.direction;\n                var fatLinkType = view.model.createLinkType(linkTypeIri);\n                fatLinkTypes.push({ fatLinkType: fatLinkType, direction: direction });\n            });\n            fatLinkTypes.sort(makeLinkTypeComparatorByLabelAndDirection(view));\n            _this.setState({ fatLinkTypes: fatLinkTypes });\n            _this.listenToLinkLabels(fatLinkTypes);\n        });\n    };\n    LinkTypeSelector.prototype.listenToLinkLabels = function (fatLinkTypes) {\n        var _this = this;\n        fatLinkTypes.forEach(function (_a) {\n            var fatLinkType = _a.fatLinkType;\n            return _this.listener.listen(fatLinkType.events, 'changeLabel', _this.updateAll);\n        });\n    };\n    LinkTypeSelector.prototype.render = function () {\n        var _a = this.props, linkValue = _a.linkValue, disabled = _a.disabled;\n        var fatLinkTypes = this.state.fatLinkTypes;\n        var value = (fatLinkTypes || []).findIndex(function (_a) {\n            var fatLinkType = _a.fatLinkType, direction = _a.direction;\n            return fatLinkType.id === linkValue.value.link.linkTypeId && direction === linkValue.value.direction;\n        });\n        return (React.createElement(\"div\", { className: CLASS_NAME + \"__control-row\" },\n            React.createElement(\"label\", null, \"Link Type\"),\n            fatLinkTypes ? (React.createElement(\"select\", { className: 'ontodia-form-control', value: value, onChange: this.onChangeType, disabled: disabled },\n                React.createElement(\"option\", { value: -1, disabled: true }, \"Select link type\"),\n                fatLinkTypes.map(this.renderPossibleLinkType))) : React.createElement(\"div\", null,\n                React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 })),\n            linkValue.error ? React.createElement(\"span\", { className: CLASS_NAME + \"__control-error\" }, linkValue.error) : ''));\n    };\n    return LinkTypeSelector;\n}(React.Component));\nexports.LinkTypeSelector = LinkTypeSelector;\nfunction makeLinkTypeComparatorByLabelAndDirection(view) {\n    return function (a, b) {\n        var labelA = view.formatLabel(a.fatLinkType.label, a.fatLinkType.id);\n        var labelB = view.formatLabel(b.fatLinkType.label, b.fatLinkType.id);\n        var labelCompareResult = labelA.localeCompare(labelB);\n        if (labelCompareResult !== 0) {\n            return labelCompareResult;\n        }\n        if (a.direction === elements_1.LinkDirection.out && b.direction === elements_1.LinkDirection.in) {\n            return -1;\n        }\n        if (a.direction === elements_1.LinkDirection.in && b.direction === elements_1.LinkDirection.out) {\n            return 1;\n        }\n        return 0;\n    };\n}\nfunction validateLinkType(editor, currentLink, originalLink) {\n    if (currentLink.linkTypeId === schema_1.PLACEHOLDER_LINK_TYPE) {\n        return Promise.resolve('Required!');\n    }\n    if (model_1.sameLink(currentLink, originalLink)) {\n        return Promise.resolve(undefined);\n    }\n    var alreadyOnDiagram = editor.model.links.find(function (_a) {\n        var _b = _a.data, linkTypeId = _b.linkTypeId, sourceId = _b.sourceId, targetId = _b.targetId;\n        return linkTypeId === currentLink.linkTypeId &&\n            sourceId === currentLink.sourceId &&\n            targetId === currentLink.targetId &&\n            !editor.temporaryState.links.has(currentLink);\n    });\n    if (alreadyOnDiagram) {\n        return Promise.resolve('The link already exists!');\n    }\n    return editor.model.dataProvider.linksInfo({\n        elementIds: [currentLink.sourceId, currentLink.targetId],\n        linkTypeIds: [currentLink.linkTypeId],\n    }).then(function (links) {\n        var alreadyExists = links.some(function (link) { return model_1.sameLink(link, currentLink); });\n        return alreadyExists ? 'The link already exists!' : undefined;\n    });\n}\nexports.validateLinkType = validateLinkType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar model_1 = require(\"../data/model\");\nvar elements_1 = require(\"../diagram/elements\");\nvar async_1 = require(\"../viewUtils/async\");\nvar progressBar_1 = require(\"../widgets/progressBar\");\nvar linkTypeSelector_1 = require(\"./linkTypeSelector\");\nvar CLASS_NAME = 'ontodia-edit-form';\nvar EditLinkForm = /** @class */ (function (_super) {\n    tslib_1.__extends(EditLinkForm, _super);\n    function EditLinkForm(props) {\n        var _this = _super.call(this, props) || this;\n        _this.validationCancellation = new async_1.Cancellation();\n        _this.state = {\n            linkValue: {\n                value: { link: props.link, direction: elements_1.LinkDirection.out },\n                validated: true,\n            },\n            isValid: true,\n        };\n        return _this;\n    }\n    EditLinkForm.prototype.componentDidMount = function () {\n        this.validate();\n    };\n    EditLinkForm.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var linkValue = this.state.linkValue;\n        if (!model_1.sameLink(linkValue.value.link, prevState.linkValue.value.link)) {\n            this.validate();\n        }\n        if (linkValue !== prevState.linkValue && linkValue.validated && !linkValue.error) {\n            this.props.onChange(linkValue.value.link);\n        }\n    };\n    EditLinkForm.prototype.componentWillUnmount = function () {\n        this.validationCancellation.abort();\n    };\n    EditLinkForm.prototype.validate = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, originalLink = _a.link;\n        var value = this.state.linkValue.value;\n        this.setState({ isValidating: true });\n        this.validationCancellation.abort();\n        this.validationCancellation = new async_1.Cancellation();\n        var signal = this.validationCancellation.signal;\n        linkTypeSelector_1.validateLinkType(editor, value.link, originalLink).then(function (error) {\n            if (signal.aborted) {\n                return;\n            }\n            _this.setState(function (_a) {\n                var linkValue = _a.linkValue;\n                return ({\n                    linkValue: tslib_1.__assign(tslib_1.__assign({}, linkValue), { error: error, validated: true }),\n                    isValid: !error,\n                    isValidating: false,\n                });\n            });\n        });\n    };\n    EditLinkForm.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, view = _a.view, metadataApi = _a.metadataApi, source = _a.source, target = _a.target;\n        var _b = this.state, linkValue = _b.linkValue, isValid = _b.isValid, isValidating = _b.isValidating;\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__body\" },\n                React.createElement(linkTypeSelector_1.LinkTypeSelector, { editor: editor, view: view, metadataApi: metadataApi, linkValue: linkValue, source: source, target: target, onChange: function (value) { return _this.setState({ linkValue: { value: value, error: undefined, validated: false } }); } }),\n                isValidating ? (React.createElement(\"div\", { className: CLASS_NAME + \"__progress\" },\n                    React.createElement(progressBar_1.ProgressBar, { state: progressBar_1.ProgressState.loading, height: 10 }))) : null),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__controls\" },\n                React.createElement(\"button\", { className: \"ontodia-btn ontodia-btn-success \" + CLASS_NAME + \"__apply-button\", onClick: function () { return _this.props.onApply(linkValue.value.link); }, disabled: !isValid || isValidating }, \"Apply\"),\n                React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-danger', onClick: this.props.onCancel }, \"Cancel\"))));\n    };\n    return EditLinkForm;\n}(React.Component));\nexports.EditLinkForm = EditLinkForm;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar CLASS_NAME = 'ontodia-edit-form';\nvar EditLinkLabelForm = /** @class */ (function (_super) {\n    tslib_1.__extends(EditLinkLabelForm, _super);\n    function EditLinkLabelForm(props) {\n        var _this = _super.call(this, props) || this;\n        var label = _this.computeLabel();\n        _this.state = { label: label };\n        return _this;\n    }\n    EditLinkLabelForm.prototype.componentDidUpdate = function (prevProps) {\n        if (this.props.link.typeId !== prevProps.link.typeId) {\n            var label = this.computeLabel();\n            this.setState({ label: label });\n        }\n    };\n    EditLinkLabelForm.prototype.computeLabel = function () {\n        var _a = this.props, view = _a.view, link = _a.link;\n        var linkType = view.model.getLinkType(link.typeId);\n        var template = view.createLinkTemplate(linkType);\n        var _b = template.renderLink(link).label, label = _b === void 0 ? {} : _b;\n        var labelTexts = label.attrs && label.attrs.text ? label.attrs.text.text : undefined;\n        return (labelTexts && labelTexts.length > 0)\n            ? view.selectLabel(labelTexts).value\n            : view.formatLabel(linkType.label, linkType.id);\n    };\n    EditLinkLabelForm.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, onApply = _a.onApply, onCancel = _a.onCancel;\n        var label = this.state.label;\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__body\" },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__form-row\" },\n                    React.createElement(\"label\", null, \"Link Label\"),\n                    React.createElement(\"input\", { className: 'ontodia-form-control', value: label, onChange: function (e) { return _this.setState({ label: e.target.value }); } }))),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__controls\" },\n                React.createElement(\"button\", { className: \"ontodia-btn ontodia-btn-success \" + CLASS_NAME + \"__apply-button\", onClick: function () { return onApply(label); } }, \"Apply\"),\n                React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-danger', onClick: function () { return onCancel(); } }, \"Cancel\"))));\n    };\n    return EditLinkLabelForm;\n}(React.Component));\nexports.EditLinkLabelForm = EditLinkLabelForm;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar authoringState_1 = require(\"../editor/authoringState\");\nvar events_1 = require(\"../viewUtils/events\");\nvar async_1 = require(\"../viewUtils/async\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar CLASS_NAME = 'ontodia-halo';\nvar Halo = /** @class */ (function (_super) {\n    tslib_1.__extends(Halo, _super);\n    function Halo(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.targetListener = new events_1.EventObserver();\n        _this.queryDebouncer = new async_1.Debouncer();\n        _this.queryCancellation = new async_1.Cancellation();\n        _this.onElementEvent = function (data) {\n            if (data.changePosition || data.changeSize || data.changeExpanded) {\n                _this.forceUpdate();\n            }\n            if (data.changeData) {\n                _this.queryAllowedActions();\n            }\n        };\n        _this.onEstablishNewLink = function (e) {\n            var point = _this.props.paperArea.pageToPaperCoords(e.pageX, e.pageY);\n            _this.props.onEstablishNewLink(point);\n        };\n        _this.state = {};\n        return _this;\n    }\n    Halo.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, target = _a.target;\n        this.listener.listen(editor.events, 'changeAuthoringState', function () {\n            _this.queryAllowedActions();\n        });\n        this.listenToElement(target);\n        this.queryAllowedActions();\n    };\n    Halo.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.target !== this.props.target) {\n            this.listenToElement(this.props.target);\n            this.queryAllowedActions();\n        }\n    };\n    Halo.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.listenToElement(undefined);\n        this.queryDebouncer.dispose();\n        this.queryCancellation.abort();\n    };\n    Halo.prototype.listenToElement = function (element) {\n        this.targetListener.stopListening();\n        if (element) {\n            this.targetListener.listenAny(element.events, this.onElementEvent);\n        }\n    };\n    Halo.prototype.queryAllowedActions = function () {\n        var _this = this;\n        this.queryDebouncer.call(function () {\n            _this.queryCancellation.abort();\n            _this.queryCancellation = new async_1.Cancellation();\n            _this.canLink(_this.props.target);\n        });\n    };\n    Halo.prototype.canLink = function (target) {\n        var _this = this;\n        var _a = this.props, metadataApi = _a.metadataApi, editor = _a.editor;\n        if (!metadataApi) {\n            this.setState({ canLink: false });\n            return;\n        }\n        var event = editor.authoringState.elements.get(target.iri);\n        if (event && event.deleted) {\n            this.setState({ canLink: false });\n        }\n        else {\n            this.setState({ canLink: undefined });\n            var signal_1 = this.queryCancellation.signal;\n            metadataApi.canLinkElement(target.data, signal_1).then(function (canLink) {\n                if (signal_1.aborted) {\n                    return;\n                }\n                if (_this.props.target.iri === target.iri) {\n                    _this.setState({ canLink: canLink });\n                }\n            });\n        }\n    };\n    Halo.prototype.render = function () {\n        var _a = this.props, paperArea = _a.paperArea, editor = _a.editor, target = _a.target, navigationMenuOpened = _a.navigationMenuOpened, onToggleNavigationMenu = _a.onToggleNavigationMenu, onAddToFilter = _a.onAddToFilter, onExpand = _a.onExpand, onFollowLink = _a.onFollowLink;\n        if (!target) {\n            return React.createElement(\"div\", { className: CLASS_NAME, style: { display: 'none' } });\n        }\n        var bbox = geometry_1.boundsOf(target);\n        var _b = paperArea.paperToScrollablePaneCoords(bbox.x, bbox.y), x0 = _b.x, y0 = _b.y;\n        var _c = paperArea.paperToScrollablePaneCoords(bbox.x + bbox.width, bbox.y + bbox.height), x1 = _c.x, y1 = _c.y;\n        var MARGIN = 5;\n        var style = { left: x0 - MARGIN, top: y0 - MARGIN,\n            width: ((x1 - x0) + MARGIN * 2), height: ((y1 - y0) + MARGIN * 2) };\n        return (React.createElement(\"div\", { className: CLASS_NAME, style: style },\n            this.renderRemoveOrDeleteButton(),\n            onToggleNavigationMenu && React.createElement(\"div\", { className: CLASS_NAME + \"__navigate \" +\n                    (CLASS_NAME + \"__navigate--\" + (navigationMenuOpened ? 'closed' : 'open')), role: 'button', title: 'Open a dialog to navigate to connected elements', onClick: onToggleNavigationMenu }),\n            onFollowLink && React.createElement(\"a\", { className: CLASS_NAME + \"__folow\", href: target.iri, role: 'button', title: 'Jump to resource', onClick: function (e) { return onFollowLink(target, e); } }),\n            onAddToFilter && React.createElement(\"div\", { className: CLASS_NAME + \"__add-to-filter\", role: 'button', title: 'Search for connected elements', onClick: onAddToFilter }),\n            onExpand && React.createElement(\"div\", { className: CLASS_NAME + \"__expand \" +\n                    (CLASS_NAME + \"__expand--\" + (target.isExpanded ? 'closed' : 'open')), role: 'button', title: \"Expand an element to reveal additional properties\", onClick: onExpand }),\n            editor.inAuthoringMode ? this.renderEstablishNewLinkButton() : null));\n    };\n    Halo.prototype.renderRemoveOrDeleteButton = function () {\n        var _a = this.props, editor = _a.editor, target = _a.target, onRemove = _a.onRemove;\n        if (!onRemove) {\n            return null;\n        }\n        var isNewElement = authoringState_1.AuthoringState.isNewElement(editor.authoringState, target.iri);\n        return (React.createElement(\"div\", { className: isNewElement ? CLASS_NAME + \"__delete\" : CLASS_NAME + \"__remove\", role: 'button', title: isNewElement ? 'Delete new element' : 'Remove an element from the diagram', onClick: onRemove }));\n    };\n    Halo.prototype.renderEstablishNewLinkButton = function () {\n        var onEstablishNewLink = this.props.onEstablishNewLink;\n        var canLink = this.state.canLink;\n        if (!onEstablishNewLink) {\n            return null;\n        }\n        if (canLink === undefined) {\n            return (React.createElement(\"div\", { className: CLASS_NAME + \"__establish-connection-spinner\" },\n                React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 })));\n        }\n        var title = canLink\n            ? 'Establish connection'\n            : 'Establishing connection is unavailable for the selected element';\n        return (React.createElement(\"button\", { className: CLASS_NAME + \"__establish-connection\", title: title, onMouseDown: this.onEstablishNewLink, disabled: !canLink }));\n    };\n    return Halo;\n}(React.Component));\nexports.Halo = Halo;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar events_1 = require(\"../viewUtils/events\");\nvar async_1 = require(\"../viewUtils/async\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar CLASS_NAME = 'ontodia-halo-link';\nvar BUTTON_SIZE = 20;\nvar BUTTON_MARGIN = 5;\nvar HaloLink = /** @class */ (function (_super) {\n    tslib_1.__extends(HaloLink, _super);\n    function HaloLink(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.targetListener = new events_1.EventObserver();\n        _this.queryDebouncer = new async_1.Debouncer();\n        _this.queryCancellation = new async_1.Cancellation();\n        _this.updateAll = function () { return _this.forceUpdate(); };\n        _this.onSourceMove = function (e) {\n            var point = _this.props.paperArea.pageToPaperCoords(e.pageX, e.pageY);\n            _this.props.onSourceMove(point);\n        };\n        _this.onTargetMove = function (e) {\n            var point = _this.props.paperArea.pageToPaperCoords(e.pageX, e.pageY);\n            _this.props.onTargetMove(point);\n        };\n        _this.state = {};\n        return _this;\n    }\n    HaloLink.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, target = _a.target, editor = _a.editor;\n        this.listener.listen(editor.events, 'changeAuthoringState', function () {\n            _this.queryAllowedActions();\n        });\n        this.listenToTarget(target);\n        this.queryAllowedActions();\n    };\n    HaloLink.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.target !== this.props.target) {\n            this.listenToTarget(this.props.target);\n            this.queryAllowedActions();\n        }\n    };\n    HaloLink.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.listenToTarget(undefined);\n        this.queryDebouncer.dispose();\n        this.queryCancellation.abort();\n    };\n    HaloLink.prototype.queryAllowedActions = function () {\n        var _this = this;\n        this.queryDebouncer.call(function () {\n            _this.queryCancellation.abort();\n            _this.queryCancellation = new async_1.Cancellation();\n            _this.queryCanDelete(_this.props.target);\n            _this.queryCanEdit(_this.props.target);\n        });\n    };\n    HaloLink.prototype.queryCanDelete = function (link) {\n        var _this = this;\n        var _a = this.props, metadataApi = _a.metadataApi, editor = _a.editor, view = _a.view;\n        if (!metadataApi) {\n            this.setState({ canDelete: false });\n            return;\n        }\n        if (isSourceOrTargetDeleted(editor.authoringState, link)) {\n            this.setState({ canDelete: false });\n        }\n        else {\n            this.setState({ canDelete: undefined });\n            var source = view.model.getElement(link.sourceId);\n            var target = view.model.getElement(link.targetId);\n            var signal_1 = this.queryCancellation.signal;\n            metadataApi.canDeleteLink(link.data, source.data, target.data, signal_1).then(function (canDelete) {\n                if (signal_1.aborted) {\n                    return;\n                }\n                if (_this.props.target.id === link.id) {\n                    _this.setState({ canDelete: canDelete });\n                }\n            });\n        }\n    };\n    HaloLink.prototype.queryCanEdit = function (link) {\n        var _this = this;\n        var _a = this.props, metadataApi = _a.metadataApi, editor = _a.editor, view = _a.view;\n        if (!metadataApi) {\n            this.setState({ canEdit: false });\n            return;\n        }\n        if (isDeletedLink(editor.authoringState, link)) {\n            this.setState({ canEdit: false });\n        }\n        else {\n            this.setState({ canEdit: undefined });\n            var source = view.model.getElement(link.sourceId);\n            var target = view.model.getElement(link.targetId);\n            var signal_2 = this.queryCancellation.signal;\n            metadataApi.canEditLink(link.data, source.data, target.data, signal_2).then(function (canEdit) {\n                if (signal_2.aborted) {\n                    return;\n                }\n                if (_this.props.target.id === link.id) {\n                    _this.setState({ canEdit: canEdit });\n                }\n            });\n        }\n    };\n    HaloLink.prototype.listenToTarget = function (link) {\n        var _this = this;\n        var view = this.props.view;\n        this.targetListener.stopListening();\n        if (link) {\n            var source = view.model.getElement(link.sourceId);\n            var target = view.model.getElement(link.targetId);\n            var listenToElement = function (element) {\n                _this.targetListener.listen(element.events, 'changePosition', _this.updateAll);\n                _this.targetListener.listen(element.events, 'changeSize', _this.updateAll);\n            };\n            listenToElement(source);\n            listenToElement(target);\n            this.targetListener.listen(link.events, 'changeVertices', this.updateAll);\n            this.targetListener.listen(link.events, 'changeLabelBounds', this.updateAll);\n        }\n    };\n    HaloLink.prototype.paperToScrollablePaneCoords = function (point) {\n        return this.props.paperArea.paperToScrollablePaneCoords(point.x, point.y);\n    };\n    HaloLink.prototype.computePolyline = function () {\n        var _a = this.props, view = _a.view, target = _a.target;\n        var sourceElement = view.model.getElement(target.sourceId);\n        var targetElement = view.model.getElement(target.targetId);\n        if (!(sourceElement && targetElement)) {\n            return undefined;\n        }\n        var route = view.getRouting(target.id);\n        var verticesDefinedByUser = target.vertices || [];\n        var vertices = route ? route.vertices : verticesDefinedByUser;\n        return geometry_1.computePolyline(sourceElement, targetElement, vertices);\n    };\n    HaloLink.prototype.calculateDegree = function (source, target) {\n        var x = target.x - source.x;\n        var y = target.y - source.y;\n        var r = Math.sqrt(x * x + y * y);\n        var unit = { x: x / r, y: y / r };\n        return Math.atan2(unit.y, unit.x) * (180 / Math.PI);\n    };\n    HaloLink.prototype.renderSourceButton = function (polyline) {\n        var _a = this.props, editor = _a.editor, target = _a.target;\n        var point = geometry_1.getPointAlongPolyline(polyline, 0);\n        var _b = this.paperToScrollablePaneCoords(point), x = _b.x, y = _b.y;\n        var style = { top: y - BUTTON_SIZE / 2, left: x - BUTTON_SIZE / 2 };\n        return (React.createElement(\"button\", { className: CLASS_NAME + \"__button\", style: style, disabled: isDeletedLink(editor.authoringState, target), onMouseDown: this.onSourceMove },\n            React.createElement(\"svg\", { width: BUTTON_SIZE, height: BUTTON_SIZE },\n                React.createElement(\"g\", { transform: \"scale(\" + BUTTON_SIZE + \")\" },\n                    React.createElement(\"circle\", { r: 0.5, cx: 0.5, cy: 0.5, fill: '#198AD3' })))));\n    };\n    HaloLink.prototype.getButtonPosition = function (polyline, index) {\n        var polylineLength = geometry_1.computePolylineLength(polyline);\n        var point = geometry_1.getPointAlongPolyline(polyline, polylineLength - (BUTTON_SIZE + BUTTON_MARGIN) * index);\n        var _a = this.paperToScrollablePaneCoords(point), x = _a.x, y = _a.y;\n        return { top: y - BUTTON_SIZE / 2, left: x - BUTTON_SIZE / 2 };\n    };\n    HaloLink.prototype.renderTargetButton = function (polyline) {\n        var _a = this.props, editor = _a.editor, target = _a.target;\n        var style = this.getButtonPosition(polyline, 0);\n        var length = polyline.length;\n        var degree = this.calculateDegree(polyline[length - 1], polyline[length - 2]);\n        return (React.createElement(\"button\", { className: CLASS_NAME + \"__button\", style: style, disabled: isDeletedLink(editor.authoringState, target), onMouseDown: this.onTargetMove },\n            React.createElement(\"svg\", { width: BUTTON_SIZE, height: BUTTON_SIZE, style: { transform: \"rotate(\" + degree + \"deg)\" } },\n                React.createElement(\"g\", { transform: \"scale(\" + BUTTON_SIZE + \")\" },\n                    React.createElement(\"polygon\", { points: '0,0.5 1,1 1,0', fill: '#198AD3' })))));\n    };\n    HaloLink.prototype.renderEditButton = function (polyline) {\n        var canEdit = this.state.canEdit;\n        var style = this.getButtonPosition(polyline, 1);\n        if (canEdit === undefined) {\n            return (React.createElement(\"div\", { className: CLASS_NAME + \"__spinner\", style: style },\n                React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 })));\n        }\n        var title = canEdit ? 'Edit link' : 'Editing is unavailable for the selected link';\n        return (React.createElement(\"button\", { className: CLASS_NAME + \"__button \" + CLASS_NAME + \"__edit\", style: style, title: title, onClick: this.props.onEdit, disabled: !canEdit }));\n    };\n    HaloLink.prototype.renderDeleteButton = function (polyline) {\n        var canDelete = this.state.canDelete;\n        var style = this.getButtonPosition(polyline, 2);\n        if (canDelete === undefined) {\n            return (React.createElement(\"div\", { className: CLASS_NAME + \"__spinner\", style: style },\n                React.createElement(spinner_1.HtmlSpinner, { width: 20, height: 20 })));\n        }\n        var title = canDelete ? 'Delete link' : 'Deletion is unavailable for the selected link';\n        return (React.createElement(\"button\", { className: CLASS_NAME + \"__button \" + CLASS_NAME + \"__delete\", style: style, title: title, onClick: this.props.onDelete, disabled: !canDelete }));\n    };\n    // Link editing implementation could be rethought in the future.\n    HaloLink.prototype.renderEditLabelButton = function () {\n        var _a = this.props, view = _a.view, target = _a.target, paperArea = _a.paperArea, onEditLabel = _a.onEditLabel;\n        var linkType = view.model.getLinkType(target.typeId);\n        var template = view.createLinkTemplate(linkType);\n        if (!template.setLinkLabel || !target.labelBounds) {\n            return null;\n        }\n        var _b = target.labelBounds, x = _b.x, y = _b.y, width = _b.width, height = _b.height;\n        var _c = paperArea.paperToScrollablePaneCoords(x + width, y + height / 2), left = _c.x, top = _c.y;\n        var size = { width: 15, height: 17 };\n        var style = { width: size.width, height: size.height, top: top - size.height / 2, left: left };\n        return React.createElement(\"button\", { className: CLASS_NAME + \"__edit-label-button\", style: style, onClick: function () { return onEditLabel(); }, title: 'Edit Link Label' });\n    };\n    HaloLink.prototype.render = function () {\n        var _a = this.props, editor = _a.editor, target = _a.target, metadataApi = _a.metadataApi;\n        var polyline = this.computePolyline();\n        if (!polyline) {\n            return null;\n        }\n        var isAuthoringMode = Boolean(metadataApi);\n        var deleteButton = (isDeletedByItself(editor.authoringState, target) ||\n            isSourceOrTargetDeleted(editor.authoringState, target) ? null : this.renderDeleteButton(polyline));\n        return (React.createElement(\"div\", { className: \"\" + CLASS_NAME },\n            isAuthoringMode ? this.renderTargetButton(polyline) : null,\n            isAuthoringMode ? this.renderSourceButton(polyline) : null,\n            !isAuthoringMode || isDeletedLink(editor.authoringState, target)\n                ? null : this.renderEditButton(polyline),\n            isAuthoringMode ? deleteButton : null,\n            this.renderEditLabelButton()));\n    };\n    return HaloLink;\n}(React.Component));\nexports.HaloLink = HaloLink;\nfunction isDeletedLink(state, link) {\n    return isDeletedByItself(state, link) || isSourceOrTargetDeleted(state, link);\n}\nfunction isDeletedByItself(state, link) {\n    var event = state.links.get(link.data);\n    return event && event.deleted;\n}\nfunction isSourceOrTargetDeleted(state, link) {\n    var sourceEvent = state.elements.get(link.data.sourceId);\n    var targetEvent = state.elements.get(link.data.targetId);\n    return (sourceEvent && sourceEvent.deleted ||\n        targetEvent && targetEvent.deleted);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar paper_1 = require(\"../diagram/paper\");\nvar view_1 = require(\"../diagram/view\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar authoringState_1 = require(\"./authoringState\");\nvar CLASS_NAME = \"ontodia-authoring-state\";\nvar LINK_LABEL_MARGIN = 5;\nvar LinkStateWidget = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkStateWidget, _super);\n    function LinkStateWidget() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.delayedUpdate = new async_1.Debouncer();\n        _this.scheduleUpdate = function () {\n            _this.delayedUpdate.call(_this.performUpdate);\n        };\n        _this.performUpdate = function () {\n            _this.forceUpdate();\n        };\n        return _this;\n    }\n    LinkStateWidget.prototype.componentDidMount = function () {\n        this.listenEvents();\n    };\n    LinkStateWidget.prototype.componentDidUpdate = function (prevProps) {\n        var sameEventSources = (this.props.view === prevProps.view);\n        if (!sameEventSources) {\n            this.listener.stopListening();\n            this.listenEvents();\n        }\n    };\n    LinkStateWidget.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n    };\n    LinkStateWidget.prototype.listenEvents = function () {\n        var _this = this;\n        var _a = this.props, editor = _a.editor, view = _a.view;\n        this.listener.listen(editor.model.events, 'elementEvent', function (_a) {\n            var data = _a.data;\n            if (data.changeSize || data.changePosition) {\n                _this.scheduleUpdate();\n            }\n        });\n        this.listener.listen(editor.model.events, 'linkEvent', function (_a) {\n            var data = _a.data;\n            if (data.changeVertices || data.changeLabelBounds) {\n                _this.scheduleUpdate();\n            }\n        });\n        this.listener.listen(editor.model.events, 'changeCells', this.scheduleUpdate);\n        this.listener.listen(editor.events, 'changeAuthoringState', this.scheduleUpdate);\n        this.listener.listen(editor.events, 'changeTemporaryState', this.scheduleUpdate);\n        this.listener.listen(editor.events, 'changeValidationState', this.scheduleUpdate);\n        this.listener.listen(view.events, 'syncUpdate', function (_a) {\n            var layer = _a.layer;\n            if (layer === view_1.RenderingLayer.Editor) {\n                _this.delayedUpdate.runSynchronously();\n            }\n        });\n    };\n    LinkStateWidget.prototype.calculateLinkPath = function (link) {\n        var polyline = this.calculatePolyline(link);\n        return 'M' + polyline.map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return x + \",\" + y;\n        }).join(' L');\n    };\n    LinkStateWidget.prototype.calculatePolyline = function (link) {\n        var _a = this.props, editor = _a.editor, view = _a.view;\n        var source = editor.model.getElement(link.sourceId);\n        var target = editor.model.getElement(link.targetId);\n        var route = view.getRouting(link.id);\n        var verticesDefinedByUser = link.vertices || [];\n        var vertices = route ? route.vertices : verticesDefinedByUser;\n        return geometry_1.computePolyline(source, target, vertices);\n    };\n    LinkStateWidget.prototype.renderLinkStateLabels = function () {\n        var _this = this;\n        var editor = this.props.editor;\n        return editor.model.links.map(function (link) {\n            var renderedState = null;\n            var state = editor.authoringState.links.get(link.data);\n            if (state) {\n                var onCancel = function () { return editor.discardChange(state); };\n                var statusText = void 0;\n                var title = void 0;\n                if (state.deleted) {\n                    statusText = 'Delete';\n                    title = 'Revert deletion of the link';\n                }\n                else if (!state.before) {\n                    statusText = 'New';\n                    title = 'Revert creation of the link';\n                }\n                else {\n                    statusText = 'Change';\n                    title = 'Revert all changes in properties of the link';\n                }\n                if (statusText && title) {\n                    renderedState = (React.createElement(\"span\", null,\n                        React.createElement(\"span\", { className: CLASS_NAME + \"__state-label\" }, statusText),\n                        \"[\",\n                        React.createElement(\"span\", { className: CLASS_NAME + \"__state-cancel\", onClick: onCancel, title: title }, \"cancel\"),\n                        \"]\"));\n                }\n            }\n            var renderedErrors = _this.renderLinkErrors(link.data);\n            if (renderedState || renderedErrors) {\n                var labelPosition = _this.getLinkStateLabelPosition(link);\n                if (!labelPosition) {\n                    return null;\n                }\n                var style = { left: labelPosition.x, top: labelPosition.y };\n                return React.createElement(\"div\", { className: CLASS_NAME + \"__state-indicator\", key: link.id, style: style },\n                    React.createElement(\"div\", { className: CLASS_NAME + \"__state-indicator-container\" },\n                        React.createElement(\"div\", { className: CLASS_NAME + \"__state-indicator-body\" },\n                            renderedState,\n                            renderedErrors)));\n            }\n            else {\n                return null;\n            }\n        });\n    };\n    LinkStateWidget.prototype.renderLinkStateHighlighting = function () {\n        var _this = this;\n        var editor = this.props.editor;\n        return editor.model.links.map(function (link) {\n            if (editor.temporaryState.links.has(link.data)) {\n                var path = _this.calculateLinkPath(link);\n                return (React.createElement(\"path\", { key: link.id, d: path, fill: 'none', stroke: 'grey', strokeWidth: 5, strokeOpacity: 0.5, strokeDasharray: '8 8' }));\n            }\n            var event = editor.authoringState.links.get(link.data);\n            var isDeletedLink = authoringState_1.AuthoringState.isDeletedLink(editor.authoringState, link.data);\n            var isUncertainLink = authoringState_1.AuthoringState.isUncertainLink(editor.authoringState, link.data);\n            if (event || isDeletedLink || isUncertainLink) {\n                var path = _this.calculateLinkPath(link);\n                var color = void 0;\n                if (isDeletedLink) {\n                    color = 'red';\n                }\n                else if (isUncertainLink) {\n                    color = 'blue';\n                }\n                else if (event && event.type === authoringState_1.AuthoringKind.ChangeLink) {\n                    color = event.before ? 'blue' : 'green';\n                }\n                return (React.createElement(\"path\", { key: link.id, d: path, fill: 'none', stroke: color, strokeWidth: 5, strokeOpacity: 0.5 }));\n            }\n            return null;\n        });\n    };\n    LinkStateWidget.prototype.getLinkStateLabelPosition = function (link) {\n        if (link.labelBounds) {\n            var _a = link.labelBounds, x = _a.x, y = _a.y;\n            return { x: x, y: y - LINK_LABEL_MARGIN / 2 };\n        }\n        else {\n            var polyline = this.calculatePolyline(link);\n            var polylineLength = geometry_1.computePolylineLength(polyline);\n            return geometry_1.getPointAlongPolyline(polyline, polylineLength / 2);\n        }\n    };\n    LinkStateWidget.prototype.renderLinkErrors = function (linkModel) {\n        var editor = this.props.editor;\n        var validationState = editor.validationState;\n        var validation = validationState.links.get(linkModel);\n        if (!validation) {\n            return null;\n        }\n        var title = validation.errors.map(function (error) { return error.message; }).join('\\n');\n        return this.renderErrorIcon(title, validation);\n    };\n    LinkStateWidget.prototype.renderErrorIcon = function (title, validation) {\n        return React.createElement(\"div\", { className: CLASS_NAME + \"__item-error\", title: title },\n            validation.loading\n                ? React.createElement(spinner_1.HtmlSpinner, { width: 15, height: 17 })\n                : React.createElement(\"div\", { className: CLASS_NAME + \"__item-error-icon\" }),\n            (!validation.loading && validation.errors.length > 0)\n                ? validation.errors.length : undefined);\n    };\n    LinkStateWidget.prototype.render = function () {\n        var _a = this.props, editor = _a.editor, paperTransform = _a.paperTransform;\n        var scale = paperTransform.scale, originX = paperTransform.originX, originY = paperTransform.originY;\n        if (!editor.inAuthoringMode) {\n            return null;\n        }\n        var htmlTransformStyle = {\n            position: 'absolute', left: 0, top: 0,\n            transform: \"scale(\" + scale + \",\" + scale + \")translate(\" + originX + \"px,\" + originY + \"px)\",\n        };\n        return React.createElement(\"div\", { className: \"\" + CLASS_NAME },\n            React.createElement(paper_1.TransformedSvgCanvas, { paperTransform: paperTransform, style: { overflow: 'visible', pointerEvents: 'none' } }, this.renderLinkStateHighlighting()),\n            React.createElement(\"div\", { className: CLASS_NAME + \"__validation-layer\", style: htmlTransformStyle }, this.renderLinkStateLabels()));\n    };\n    return LinkStateWidget;\n}(React.Component));\nexports.LinkStateWidget = LinkStateWidget;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar CLASS_NAME = \"ontodia-authoring-state\";\nvar ElementDecorator = /** @class */ (function (_super) {\n    tslib_1.__extends(ElementDecorator, _super);\n    function ElementDecorator(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.delayedUpdate = new async_1.Debouncer();\n        var model = props.model, editor = props.editor;\n        _this.state = {\n            state: editor.authoringState.elements.get(model.iri),\n            validation: editor.validationState.elements.get(model.iri),\n            isTemporary: editor.temporaryState.elements.has(model.iri),\n        };\n        return _this;\n    }\n    ElementDecorator.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, model = _a.model, editor = _a.editor;\n        this.listener.listen(model.events, 'changeSize', function () {\n            return _this.forceUpdate();\n        });\n        this.listener.listen(editor.events, 'changeAuthoringState', function () {\n            return _this.setState({ state: editor.authoringState.elements.get(model.iri) });\n        });\n        this.listener.listen(editor.events, 'changeValidationState', function () {\n            return _this.setState({ validation: editor.validationState.elements.get(model.iri) });\n        });\n        this.listener.listen(editor.events, 'changeTemporaryState', function () {\n            return _this.setState({ isTemporary: editor.temporaryState.elements.has(model.iri) });\n        });\n        this.listener.listen(model.events, 'changeData', function (event) {\n            if (event.previous.id !== model.iri) {\n                _this.setState({\n                    isTemporary: editor.temporaryState.elements.has(model.iri),\n                    validation: editor.validationState.elements.get(model.iri),\n                    state: editor.authoringState.elements.get(model.iri),\n                });\n            }\n        });\n    };\n    ElementDecorator.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.delayedUpdate.dispose();\n    };\n    ElementDecorator.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        return (this.state.state !== nextState.state ||\n            this.state.validation !== nextState.validation ||\n            this.state.isTemporary !== nextState.isTemporary ||\n            this.props.position !== nextProps.position);\n    };\n    ElementDecorator.prototype.renderElementOutlines = function () {\n        var model = this.props.model;\n        var _a = this.state, state = _a.state, isTemporary = _a.isTemporary;\n        var _b = model.size, width = _b.width, height = _b.height;\n        if (isTemporary) {\n            return [\n                React.createElement(\"rect\", { key: model.id + \"-opacity\", x: 0, y: 0, width: width, height: height, fill: 'rgba(255, 255, 255, 0.5)' }),\n                React.createElement(\"rect\", { key: model.id + \"-stripes\", x: 0, y: 0, width: width, height: height, fill: 'url(#stripe-pattern)' })\n            ];\n        }\n        if (state && state.deleted) {\n            var right = width;\n            var bottom = height;\n            return (React.createElement(\"g\", { key: model.id },\n                React.createElement(\"rect\", { x: 0, y: 0, width: width, height: height, fill: 'white', fillOpacity: 0.5 }),\n                React.createElement(\"line\", { x1: 0, y1: 0, x2: right, y2: bottom, stroke: 'red' }),\n                React.createElement(\"line\", { x1: right, y1: 0, x2: 0, y2: bottom, stroke: 'red' })));\n        }\n        return null;\n    };\n    ElementDecorator.prototype.renderErrorIcon = function (title, validation) {\n        return React.createElement(\"div\", { className: CLASS_NAME + \"__item-error\", title: title },\n            validation.loading\n                ? React.createElement(spinner_1.HtmlSpinner, { width: 15, height: 17 })\n                : React.createElement(\"div\", { className: CLASS_NAME + \"__item-error-icon\" }),\n            (!validation.loading && validation.errors.length > 0)\n                ? validation.errors.length : undefined);\n    };\n    ElementDecorator.prototype.renderElementErrors = function () {\n        var view = this.props.view;\n        var validation = this.state.validation;\n        if (!validation) {\n            return null;\n        }\n        var title = validation.errors.map(function (error) {\n            if (error.propertyType) {\n                var _a = view.model.createProperty(error.propertyType), id = _a.id, label = _a.label;\n                var source = view.formatLabel(label, id);\n                return source + \": \" + error.message;\n            }\n            else {\n                return error.message;\n            }\n        }).join('\\n');\n        return this.renderErrorIcon(title, validation);\n    };\n    ElementDecorator.prototype.renderElementState = function () {\n        var _a = this.props, model = _a.model, editor = _a.editor;\n        var state = this.state.state;\n        if (state) {\n            var onCancel = function () { return editor.discardChange(state); };\n            var renderedState = void 0;\n            var statusText = void 0;\n            var title = void 0;\n            if (state.deleted) {\n                statusText = 'Delete';\n                title = 'Revert deletion of the element';\n            }\n            else if (!state.before) {\n                statusText = 'New';\n                title = 'Revert creation of the element';\n            }\n            else {\n                statusText = 'Change';\n                title = 'Revert all changes in properties of the element';\n            }\n            if (statusText && title) {\n                renderedState = (React.createElement(\"span\", null,\n                    React.createElement(\"span\", { className: CLASS_NAME + \"__state-label\" }, statusText),\n                    \"[\",\n                    React.createElement(\"span\", { className: CLASS_NAME + \"__state-cancel\", onClick: onCancel, title: title }, \"cancel\"),\n                    \"]\"));\n            }\n            var renderedErrors = this.renderElementErrors();\n            if (renderedState || renderedErrors) {\n                return (React.createElement(\"div\", { className: CLASS_NAME + \"__state-indicator\", key: model.id, style: { left: 0, top: 0 } },\n                    React.createElement(\"div\", { className: CLASS_NAME + \"__state-indicator-container\" },\n                        React.createElement(\"div\", { className: CLASS_NAME + \"__state-indicator-body\" },\n                            renderedState,\n                            renderedErrors))));\n            }\n        }\n        return null;\n    };\n    ElementDecorator.prototype.render = function () {\n        var _a = this.props.model, position = _a.position, size = _a.size;\n        var transform = \"translate(\" + position.x + \"px,\" + position.y + \"px)\";\n        var outlines = this.renderElementOutlines();\n        var state = this.renderElementState();\n        if (!outlines && !state) {\n            return null;\n        }\n        return (React.createElement(\"div\", { style: { position: 'absolute', transform: transform } },\n            outlines ? (React.createElement(\"svg\", { width: size.width, height: size.height, style: { position: 'absolute', pointerEvents: 'none', overflow: 'visible' } },\n                React.createElement(\"defs\", null,\n                    React.createElement(\"pattern\", { id: 'stripe-pattern', patternUnits: 'userSpaceOnUse', width: 13, height: 13, patternTransform: 'rotate(45)' },\n                        React.createElement(\"line\", { x1: 0, y: 0, x2: 0, y2: 13, stroke: '#ddd', strokeWidth: 10, strokeOpacity: 0.2 }))),\n                this.renderElementOutlines())) : null,\n            state));\n    };\n    return ElementDecorator;\n}(React.Component));\nexports.ElementDecorator = ElementDecorator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar schema_1 = require(\"../data/schema\");\nvar linkLayer_1 = require(\"../diagram/linkLayer\");\nvar elements_1 = require(\"../diagram/elements\");\nvar geometry_1 = require(\"../diagram/geometry\");\nvar paper_1 = require(\"../diagram/paper\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar spinner_1 = require(\"../viewUtils/spinner\");\nvar EditLayerMode;\n(function (EditLayerMode) {\n    EditLayerMode[EditLayerMode[\"establishLink\"] = 0] = \"establishLink\";\n    EditLayerMode[EditLayerMode[\"moveLinkSource\"] = 1] = \"moveLinkSource\";\n    EditLayerMode[EditLayerMode[\"moveLinkTarget\"] = 2] = \"moveLinkTarget\";\n})(EditLayerMode = exports.EditLayerMode || (exports.EditLayerMode = {}));\nvar EditLayer = /** @class */ (function (_super) {\n    tslib_1.__extends(EditLayer, _super);\n    function EditLayer(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.cancellation = new async_1.Cancellation();\n        _this.beginCreatingLink = function (params) {\n            var model = _this.props.view.model;\n            var sourceId = params.sourceId, point = params.point;\n            var temporaryElement = _this.createTemporaryElement(point);\n            var temporaryLink = model.addLink(new elements_1.Link({\n                typeId: schema_1.PLACEHOLDER_LINK_TYPE,\n                sourceId: sourceId,\n                targetId: temporaryElement.id,\n            }));\n            var fatLinkType = model.createLinkType(temporaryLink.typeId);\n            fatLinkType.setVisibility({ visible: true, showLabel: false });\n            _this.temporaryElement = temporaryElement;\n            _this.temporaryLink = temporaryLink;\n        };\n        _this.onMouseMove = function (e) {\n            var targetElement = _this.state.targetElement;\n            e.preventDefault();\n            e.stopPropagation();\n            var point = _this.props.paperArea.pageToPaperCoords(e.pageX, e.pageY);\n            _this.temporaryElement.setPosition(point);\n            var newTargetElement = _this.findElementFormPoint(point);\n            if (newTargetElement && (!targetElement || newTargetElement.iri !== targetElement.iri)) {\n                _this.canDropOnElement(newTargetElement);\n            }\n            _this.setState({ targetElement: newTargetElement });\n        };\n        _this.onMouseUp = function (e) {\n            var _a = _this.props, editor = _a.editor, mode = _a.mode;\n            var _b = _this.state, targetElement = _b.targetElement, canDropOnElement = _b.canDropOnElement, canDropOnCanvas = _b.canDropOnCanvas;\n            var batch = editor.model.history.startBatch();\n            editor.model.removeElement(_this.temporaryElement.id);\n            batch.discard();\n            if (targetElement || (mode === EditLayerMode.moveLinkSource || mode === EditLayerMode.moveLinkTarget)) {\n                _this.endChangingLink({ link: _this.temporaryLink, targetElement: targetElement, canDrop: canDropOnElement }).then(function (link) {\n                    if (link) {\n                        editor.setSelection([link]);\n                        editor.showEditLinkForm(link);\n                    }\n                });\n            }\n            else if (canDropOnCanvas) {\n                var point_1 = _this.props.paperArea.pageToPaperCoords(e.pageX, e.pageY);\n                var source_1 = editor.model.getElement(_this.temporaryLink.sourceId);\n                _this.createNewElement(source_1.data).then(function (target) {\n                    target.setPosition(point_1);\n                    _this.endChangingLink({\n                        link: _this.temporaryLink, targetElement: target, canDrop: canDropOnCanvas,\n                    }).then(function (link) {\n                        editor.setSelection([target]);\n                        editor.showEditElementTypeForm({ link: link, source: source_1, target: target });\n                    });\n                });\n            }\n            editor.finishEditing();\n        };\n        _this.createNewElement = function (source) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var _a, editor, metadataApi, elementTypes, classId, type, typeName, labelText, types, entityIri, elementModel;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.props, editor = _a.editor, metadataApi = _a.metadataApi;\n                        if (!metadataApi) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, metadataApi.typesOfElementsDraggedFrom(source, this.cancellation.signal)];\n                    case 1:\n                        elementTypes = _b.sent();\n                        classId = elementTypes.length === 1 ? elementTypes[0] : schema_1.PLACEHOLDER_ELEMENT_TYPE;\n                        type = this.props.editor.model.createClass(classId);\n                        typeName = this.props.view.formatLabel(type.label, type.id);\n                        labelText = classId === schema_1.PLACEHOLDER_ELEMENT_TYPE ? 'New Entity' : \"New \" + typeName;\n                        types = [classId];\n                        return [4 /*yield*/, metadataApi.generateNewElementIri(types, async_1.Cancellation.NEVER_SIGNAL)];\n                    case 2:\n                        entityIri = _b.sent();\n                        elementModel = {\n                            id: entityIri,\n                            types: types,\n                            label: { values: [{ value: labelText, language: '' }] },\n                            properties: {},\n                        };\n                        return [2 /*return*/, editor.createNewEntity({ elementModel: elementModel, temporary: true })];\n                }\n            });\n        }); };\n        _this.state = {};\n        return _this;\n    }\n    EditLayer.prototype.componentDidMount = function () {\n        var _a = this.props, mode = _a.mode, target = _a.target, point = _a.point;\n        if (mode === EditLayerMode.establishLink) {\n            this.beginCreatingLink({ sourceId: target.id, point: point });\n        }\n        else if (mode === EditLayerMode.moveLinkSource || mode === EditLayerMode.moveLinkTarget) {\n            this.beginMovingLink({ link: target, point: point });\n        }\n        else {\n            throw new Error('Unknown edit mode');\n        }\n        this.forceUpdate();\n        this.canDropOnCanvas();\n        document.addEventListener('mousemove', this.onMouseMove);\n        document.addEventListener('mouseup', this.onMouseUp);\n    };\n    EditLayer.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.cancellation.abort();\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n    };\n    EditLayer.prototype.beginMovingLink = function (params) {\n        var _a = this.props, editor = _a.editor, mode = _a.mode;\n        var link = params.link, point = params.point;\n        this.oldLink = link;\n        editor.model.removeLink(link.id);\n        var id = link.id, typeId = link.typeId, sourceId = link.sourceId, targetId = link.targetId, data = link.data, vertices = link.vertices;\n        var temporaryElement = this.createTemporaryElement(point);\n        var temporaryLink;\n        if (mode === EditLayerMode.moveLinkSource) {\n            temporaryLink = editor.model.addLink(new elements_1.Link({\n                id: id, typeId: typeId, sourceId: temporaryElement.id, targetId: targetId, data: data, vertices: vertices,\n            }));\n        }\n        else if (mode === EditLayerMode.moveLinkTarget) {\n            temporaryLink = editor.model.addLink(new elements_1.Link({\n                id: id, typeId: typeId, sourceId: sourceId, targetId: temporaryElement.id, data: data, vertices: vertices,\n            }));\n        }\n        else {\n            throw new Error('Unknown edit mode');\n        }\n        this.temporaryElement = temporaryElement;\n        this.temporaryLink = temporaryLink;\n    };\n    EditLayer.prototype.createTemporaryElement = function (point) {\n        var temporaryElement = this.props.view.model.createTemporaryElement();\n        temporaryElement.setPosition(point);\n        return temporaryElement;\n    };\n    EditLayer.prototype.canDropOnCanvas = function () {\n        var _this = this;\n        var _a = this.props, mode = _a.mode, editor = _a.editor, metadataApi = _a.metadataApi;\n        if (!metadataApi || mode !== EditLayerMode.establishLink) {\n            this.setState({ canDropOnCanvas: false });\n            return;\n        }\n        this.setState({ canDropOnCanvas: undefined });\n        var source = editor.model.getElement(this.temporaryLink.sourceId).data;\n        metadataApi.canDropOnCanvas(source, this.cancellation.signal).then(function (canDropOnCanvas) {\n            if (!_this.cancellation.signal.aborted) {\n                _this.setState({ canDropOnCanvas: canDropOnCanvas });\n            }\n        });\n    };\n    EditLayer.prototype.canDropOnElement = function (targetElement) {\n        var _this = this;\n        var _a = this.props, mode = _a.mode, editor = _a.editor, metadataApi = _a.metadataApi;\n        if (!metadataApi) {\n            this.setState({ canDropOnElement: false });\n            return;\n        }\n        this.setState({ canDropOnElement: undefined });\n        var source;\n        var target;\n        if (mode === EditLayerMode.establishLink || mode === EditLayerMode.moveLinkTarget) {\n            source = editor.model.getElement(this.temporaryLink.sourceId).data;\n            target = targetElement.data;\n        }\n        else if (mode === EditLayerMode.moveLinkSource) {\n            source = targetElement.data;\n            target = editor.model.getElement(this.temporaryLink.targetId).data;\n        }\n        metadataApi.canDropOnElement(source, target, this.cancellation.signal).then(function (canDropOnElement) {\n            if (!_this.cancellation.signal.aborted) {\n                _this.setState({ canDropOnElement: canDropOnElement });\n            }\n        });\n    };\n    EditLayer.prototype.endChangingLink = function (params) {\n        var _a = this.props, editor = _a.editor, mode = _a.mode;\n        var link = params.link, targetElement = params.targetElement, canDrop = params.canDrop;\n        var originalLink;\n        editor.model.removeLink(link.id);\n        if (this.oldLink) {\n            originalLink = editor.model.addLink(this.oldLink);\n        }\n        if (mode === EditLayerMode.establishLink) {\n            var sourceElement = editor.model.getElement(link.sourceId);\n            if (canDrop && targetElement) {\n                return this.createNewLink(sourceElement, targetElement);\n            }\n        }\n        else if (mode === EditLayerMode.moveLinkSource) {\n            if (canDrop && targetElement) {\n                return Promise.resolve(editor.moveLinkSource({ link: link, newSource: targetElement }));\n            }\n        }\n        else if (mode === EditLayerMode.moveLinkTarget) {\n            if (canDrop && targetElement) {\n                return Promise.resolve(editor.moveLinkTarget({ link: link, newTarget: targetElement }));\n            }\n        }\n        else {\n            throw new Error('Unknown edit mode');\n        }\n        return Promise.resolve(originalLink);\n    };\n    EditLayer.prototype.createNewLink = function (source, target) {\n        var _a = this.props, editor = _a.editor, metadataApi = _a.metadataApi;\n        if (!metadataApi) {\n            return Promise.resolve(undefined);\n        }\n        return metadataApi.possibleLinkTypes(source.data, target.data, this.cancellation.signal).then(function (linkTypes) {\n            var _a;\n            var placeholder = { linkTypeIri: schema_1.PLACEHOLDER_LINK_TYPE, direction: elements_1.LinkDirection.out };\n            var _b = linkTypes.length === 1 ? linkTypes[0] : placeholder, typeId = _b.linkTypeIri, direction = _b.direction;\n            var data = {\n                linkTypeId: typeId,\n                sourceId: source.iri,\n                targetId: target.iri,\n            };\n            var _c = [source.id, target.id], sourceId = _c[0], targetId = _c[1];\n            // switches source and target if the direction equals 'in'\n            if (direction === elements_1.LinkDirection.in) {\n                data.sourceId = target.iri;\n                data.targetId = source.iri;\n                _a = [targetId, sourceId], sourceId = _a[0], targetId = _a[1];\n            }\n            var link = new elements_1.Link({ typeId: typeId, sourceId: sourceId, targetId: targetId, data: data });\n            var existingLink = editor.model.findLink(link.typeId, link.sourceId, link.targetId);\n            return existingLink || editor.createNewLink({ link: link, temporary: true });\n        });\n    };\n    EditLayer.prototype.findElementFormPoint = function (point) {\n        var elements = this.props.view.model.elements;\n        for (var i = elements.length - 1; i >= 0; i--) {\n            var element = elements[i];\n            var _a = geometry_1.boundsOf(element), x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n            if (element.temporary) {\n                continue;\n            }\n            if (point.x >= x && point.x <= x + width && point.y >= y && point.y <= y + height) {\n                return element;\n            }\n        }\n        return undefined;\n    };\n    EditLayer.prototype.renderHighlight = function () {\n        var _a = this.state, targetElement = _a.targetElement, canDropOnElement = _a.canDropOnElement;\n        if (!targetElement) {\n            return null;\n        }\n        var _b = geometry_1.boundsOf(targetElement), x = _b.x, y = _b.y, width = _b.width, height = _b.height;\n        if (canDropOnElement === undefined) {\n            return (React.createElement(\"g\", { transform: \"translate(\" + x + \",\" + y + \")\" },\n                React.createElement(\"rect\", { width: width, height: height, fill: 'white', fillOpacity: 0.5 }),\n                React.createElement(spinner_1.Spinner, { size: 30, position: { x: width / 2, y: height / 2 } })));\n        }\n        var stroke = canDropOnElement ? '#5cb85c' : '#c9302c';\n        return (React.createElement(\"rect\", { x: x, y: y, width: width, height: height, fill: 'transparent', stroke: stroke, strokeWidth: 3 }));\n    };\n    EditLayer.prototype.renderCanDropIndicator = function () {\n        var _a = this.state, targetElement = _a.targetElement, canDropOnCanvas = _a.canDropOnCanvas;\n        if (targetElement) {\n            return null;\n        }\n        var _b = this.temporaryElement.position, x = _b.x, y = _b.y;\n        var indicator;\n        if (canDropOnCanvas === undefined) {\n            indicator = React.createElement(spinner_1.Spinner, { size: 1.2, position: { x: 0.5, y: -0.5 } });\n        }\n        else if (canDropOnCanvas) {\n            indicator = React.createElement(\"path\", { d: 'M0.5,0 L0.5,-1 M0,-0.5 L1,-0.5', strokeWidth: 0.2, stroke: '#5cb85c' });\n        }\n        else {\n            indicator = (React.createElement(\"g\", null,\n                React.createElement(\"circle\", { cx: '0.5', cy: '-0.5', r: '0.5', fill: 'none', strokeWidth: 0.2, stroke: '#c9302c' }),\n                React.createElement(\"path\", { d: 'M0.5,0 L0.5,-1', strokeWidth: 0.2, stroke: '#c9302c', transform: 'rotate(-45 0.5 -0.5)' })));\n        }\n        return (React.createElement(\"g\", { transform: \"translate(\" + x + \" \" + y + \")scale(40)\" },\n            React.createElement(\"rect\", { x: -0.5, y: -0.5, width: 1, height: 1, fill: 'rgba(0, 0, 0, 0.1)', rx: 0.25, ry: 0.25 }),\n            React.createElement(\"g\", { transform: \"translate(\" + 0.5 + \", -\" + 0.5 + \")scale(\" + 0.25 + \")\" }, indicator)));\n    };\n    EditLayer.prototype.render = function () {\n        var _a = this.props, view = _a.view, paperTransform = _a.paperTransform;\n        if (!this.temporaryLink) {\n            return null;\n        }\n        return (React.createElement(paper_1.TransformedSvgCanvas, { paperTransform: paperTransform, style: { overflow: 'visible' } },\n            React.createElement(linkLayer_1.LinkMarkers, { view: view }),\n            this.renderHighlight(),\n            this.renderCanDropIndicator(),\n            React.createElement(linkLayer_1.LinkLayer, { view: view, links: [this.temporaryLink] })));\n    };\n    return EditLayer;\n}(React.Component));\nexports.EditLayer = EditLayer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar model_1 = require(\"../data/model\");\nvar collections_1 = require(\"../viewUtils/collections\");\nvar ValidationState;\n(function (ValidationState) {\n    ValidationState.empty = createMutable();\n    ValidationState.emptyElement = { loading: false, errors: [] };\n    ValidationState.emptyLink = { loading: false, errors: [] };\n    function createMutable() {\n        return {\n            elements: new Map(),\n            links: new collections_1.HashMap(model_1.hashLink, model_1.sameLink),\n        };\n    }\n    ValidationState.createMutable = createMutable;\n    function setElementErrors(state, target, errors) {\n        var elements = collections_1.cloneMap(state.elements);\n        if (errors.length > 0) {\n            elements.set(target, { loading: false, errors: errors });\n        }\n        else {\n            elements.delete(target);\n        }\n        return tslib_1.__assign(tslib_1.__assign({}, state), { elements: elements });\n    }\n    ValidationState.setElementErrors = setElementErrors;\n    function setLinkErrors(state, target, errors) {\n        var links = state.links.clone();\n        if (errors.length > 0) {\n            links.set(target, { loading: false, errors: errors });\n        }\n        else {\n            links.delete(target);\n        }\n        return tslib_1.__assign(tslib_1.__assign({}, state), { links: links });\n    }\n    ValidationState.setLinkErrors = setLinkErrors;\n})(ValidationState = exports.ValidationState || (exports.ValidationState = {}));\nfunction changedElementsToValidate(previousAuthoring, editor) {\n    var currentAuthoring = editor.authoringState;\n    var links = new collections_1.HashMap(model_1.hashLink, model_1.sameLink);\n    previousAuthoring.links.forEach(function (e, model) { return links.set(model, true); });\n    currentAuthoring.links.forEach(function (e, model) { return links.set(model, true); });\n    var toValidate = new Set();\n    links.forEach(function (value, linkModel) {\n        var current = currentAuthoring.links.get(linkModel);\n        var previous = previousAuthoring.links.get(linkModel);\n        if (current !== previous) {\n            toValidate.add(linkModel.sourceId);\n        }\n    });\n    for (var _i = 0, _a = editor.model.elements; _i < _a.length; _i++) {\n        var element = _a[_i];\n        var current = currentAuthoring.elements.get(element.iri);\n        var previous = previousAuthoring.elements.get(element.iri);\n        if (current !== previous) {\n            toValidate.add(element.iri);\n            // when we remove element incoming link are removed as well so we should update their sources\n            if ((current || previous).deleted) {\n                for (var _b = 0, _c = element.links; _b < _c.length; _b++) {\n                    var link = _c[_b];\n                    if (link.data.sourceId !== element.iri) {\n                        toValidate.add(link.data.sourceId);\n                    }\n                }\n            }\n        }\n    }\n    return toValidate;\n}\nexports.changedElementsToValidate = changedElementsToValidate;\nfunction validateElements(targets, validationApi, editor, cancellation) {\n    var previousState = editor.validationState;\n    var newState = ValidationState.createMutable();\n    var _loop_1 = function (element) {\n        if (newState.elements.has(element.iri)) {\n            return \"continue\";\n        }\n        var outboundLinks = element.links.reduce(function (acc, link) {\n            if (link.sourceId === element.id) {\n                acc.push(link.data);\n            }\n            return acc;\n        }, []);\n        if (targets.has(element.iri)) {\n            var event_1 = {\n                target: element.data,\n                outboundLinks: outboundLinks,\n                state: editor.authoringState,\n                model: editor.model,\n                cancellation: cancellation,\n            };\n            var result = validationApi.validate(event_1);\n            var loadingElement = { loading: true, errors: [] };\n            var loadingLink_1 = { loading: true, errors: [] };\n            newState.elements.set(element.iri, loadingElement);\n            outboundLinks.forEach(function (link) { return newState.links.set(link, loadingLink_1); });\n            processValidationResult(result, loadingElement, loadingLink_1, event_1, editor);\n        }\n        else {\n            // use previous state for element and outbound links\n            newState.elements.set(element.iri, previousState.elements.get(element.iri));\n            for (var _i = 0, outboundLinks_1 = outboundLinks; _i < outboundLinks_1.length; _i++) {\n                var link = outboundLinks_1[_i];\n                newState.links.set(link, previousState.links.get(link));\n            }\n        }\n    };\n    for (var _i = 0, _a = editor.model.elements; _i < _a.length; _i++) {\n        var element = _a[_i];\n        _loop_1(element);\n    }\n    editor.setValidationState(newState);\n}\nexports.validateElements = validateElements;\nfunction processValidationResult(result, previousElement, previousLink, e, editor) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var allErrors, err_1, elementErrors, linkErrors, _i, allErrors_1, error, state;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, result];\n                case 1:\n                    allErrors = _a.sent();\n                    return [3 /*break*/, 3];\n                case 2:\n                    err_1 = _a.sent();\n                    // tslint:disable-next-line:no-console\n                    console.error(\"Failed to validate element\", e.target, err_1);\n                    allErrors = [{ type: 'element', target: e.target.id, message: \"Failed to validate element\" }];\n                    return [3 /*break*/, 3];\n                case 3:\n                    elementErrors = [];\n                    linkErrors = new collections_1.HashMap(model_1.hashLink, model_1.sameLink);\n                    e.outboundLinks.forEach(function (link) { return linkErrors.set(link, []); });\n                    for (_i = 0, allErrors_1 = allErrors; _i < allErrors_1.length; _i++) {\n                        error = allErrors_1[_i];\n                        if (error.type === 'element' && error.target === e.target.id) {\n                            elementErrors.push(error);\n                        }\n                        else if (error.type === 'link' && linkErrors.has(error.target)) {\n                            linkErrors.get(error.target).push(error);\n                        }\n                    }\n                    state = editor.validationState;\n                    if (state.elements.get(e.target.id) === previousElement) {\n                        state = ValidationState.setElementErrors(state, e.target.id, elementErrors);\n                    }\n                    linkErrors.forEach(function (errors, link) {\n                        if (state.links.get(link) === previousLink) {\n                            state = ValidationState.setLinkErrors(state, link, errors);\n                        }\n                    });\n                    editor.setValidationState(state);\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar CLASS_NAME = 'ontodia-toolbar';\nvar DefaultToolbar = /** @class */ (function (_super) {\n    tslib_1.__extends(DefaultToolbar, _super);\n    function DefaultToolbar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onChangeLanguage = function (event) {\n            var value = event.currentTarget.value;\n            _this.props.onChangeLanguage(value);\n        };\n        _this.onExportSVG = function () {\n            _this.props.onExportSVG();\n        };\n        _this.onExportPNG = function () {\n            _this.props.onExportPNG();\n        };\n        return _this;\n    }\n    DefaultToolbar.prototype.renderSaveDiagramButton = function () {\n        if (!this.props.onSaveDiagram) {\n            return null;\n        }\n        return (React.createElement(\"button\", { type: 'button', className: 'saveDiagramButton ontodia-btn ontodia-btn-primary', disabled: this.props.canSaveDiagram === false, onClick: this.props.onSaveDiagram },\n            React.createElement(\"span\", { className: 'fa fa-floppy-o', \"aria-hidden\": 'true' }),\n            \" Save diagram\"));\n    };\n    DefaultToolbar.prototype.renderPersistAuthoredChangesButton = function () {\n        if (!this.props.onPersistChanges) {\n            return null;\n        }\n        return (React.createElement(\"button\", { type: 'button', className: 'saveDiagramButton ontodia-btn ontodia-btn-success', disabled: this.props.canPersistChanges === false, onClick: this.props.onPersistChanges },\n            React.createElement(\"span\", { className: 'fa fa-floppy-o', \"aria-hidden\": 'true' }),\n            \" Save data\"));\n    };\n    DefaultToolbar.prototype.renderLanguages = function () {\n        var _a = this.props, selectedLanguage = _a.selectedLanguage, languages = _a.languages;\n        if (languages.length <= 1) {\n            return null;\n        }\n        return (React.createElement(\"span\", { className: \"ontodia-btn-group \" + CLASS_NAME + \"__language-selector\" },\n            React.createElement(\"label\", { className: 'ontodia-label' },\n                React.createElement(\"span\", null, \"Data Language - \")),\n            React.createElement(\"select\", { value: selectedLanguage, onChange: this.onChangeLanguage }, languages.map(function (_a) {\n                var code = _a.code, label = _a.label;\n                return React.createElement(\"option\", { key: code, value: code }, label);\n            }))));\n    };\n    DefaultToolbar.prototype.render = function () {\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: 'ontodia-btn-group ontodia-btn-group-sm' },\n                this.renderSaveDiagramButton(),\n                this.renderPersistAuthoredChangesButton(),\n                this.props.onClearAll ? (React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Clear All', onClick: this.props.onClearAll },\n                    React.createElement(\"span\", { className: 'fa fa-trash', \"aria-hidden\": 'true' }),\n                    \"\\u00A0Clear All\")) : null,\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Force layout', onClick: this.props.onForceLayout },\n                    React.createElement(\"span\", { className: 'fa fa-sitemap', \"aria-hidden\": 'true' }),\n                    \" Layout\"),\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Zoom In', onClick: this.props.onZoomIn },\n                    React.createElement(\"span\", { className: 'fa fa-search-plus', \"aria-hidden\": 'true' })),\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Zoom Out', onClick: this.props.onZoomOut },\n                    React.createElement(\"span\", { className: 'fa fa-search-minus', \"aria-hidden\": 'true' })),\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Fit to Screen', onClick: this.props.onZoomToFit },\n                    React.createElement(\"span\", { className: 'fa fa-arrows-alt', \"aria-hidden\": 'true' })),\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Export diagram as PNG', onClick: this.onExportPNG },\n                    React.createElement(\"span\", { className: 'fa fa-picture-o', \"aria-hidden\": 'true' }),\n                    \" PNG\"),\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Export diagram as SVG', onClick: this.onExportSVG },\n                    React.createElement(\"span\", { className: 'fa fa-picture-o', \"aria-hidden\": 'true' }),\n                    \" SVG\"),\n                React.createElement(\"button\", { type: 'button', className: 'ontodia-btn ontodia-btn-default', title: 'Print diagram', onClick: this.props.onPrint },\n                    React.createElement(\"span\", { className: 'fa fa-print', \"aria-hidden\": 'true' })),\n                this.renderLanguages())));\n    };\n    return DefaultToolbar;\n}(React.Component));\nexports.DefaultToolbar = DefaultToolbar;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar ReactDOM = require(\"react-dom\");\nvar saveAs = require(\"file-saverjs\");\nvar commands_1 = require(\"../diagram/commands\");\nvar history_1 = require(\"../diagram/history\");\nvar view_1 = require(\"../diagram/view\");\nvar asyncModel_1 = require(\"../editor/asyncModel\");\nvar authoringState_1 = require(\"../editor/authoringState\");\nvar editorController_1 = require(\"../editor/editorController\");\nvar events_1 = require(\"../viewUtils/events\");\nvar toSvg_1 = require(\"../viewUtils/toSvg\");\nvar navigator_1 = require(\"../widgets/navigator\");\nvar toolbar_1 = require(\"./toolbar\");\nvar workspaceMarkup_1 = require(\"./workspaceMarkup\");\nvar workspaceContext_1 = require(\"./workspaceContext\");\nvar layout_1 = require(\"../viewUtils/layout\");\nvar ONTODIA_WEBSITE = 'https://ontodia.org/';\nvar ONTODIA_LOGO_SVG = require('../../../images/ontodia-logo.svg');\nvar Workspace = /** @class */ (function (_super) {\n    tslib_1.__extends(Workspace, _super);\n    function Workspace(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this._watermarkSvg = ONTODIA_LOGO_SVG;\n        _this._watermarkUrl = ONTODIA_WEBSITE;\n        _this.zoomToFit = function () {\n            return _this.markup.paperArea.zoomToFit();\n        };\n        _this.zoomToFitRect = function (bbox) {\n            _this.markup.paperArea.zoomToFitRect(bbox);\n        };\n        _this.clearAll = function () {\n            _this.editor.removeItems(tslib_1.__spreadArrays(_this.model.elements));\n        };\n        _this.forceLayout = function () {\n            var batch = _this.model.history.startBatch('Force layout');\n            batch.history.registerToUndo(commands_1.RestoreGeometry.capture(_this.model));\n            layout_1.applyLayout(_this.model, layout_1.forceLayout({ model: _this.model }));\n            for (var _i = 0, _a = _this.model.links; _i < _a.length; _i++) {\n                var link = _a[_i];\n                link.setVertices([]);\n            }\n            batch.store();\n        };\n        _this.exportSvg = function (fileName) {\n            _this.markup.paperArea.exportSVG().then(function (svg) {\n                fileName = fileName || 'diagram.svg';\n                var xmlEncodingHeader = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n                var blob = new Blob([xmlEncodingHeader + svg], { type: 'image/svg+xml' });\n                saveAs(blob, fileName);\n            });\n        };\n        _this.exportPng = function (fileName) {\n            fileName = fileName || 'diagram.png';\n            _this.markup.paperArea.exportPNG({ backgroundColor: 'white' }).then(function (dataUri) {\n                var blob = toSvg_1.dataURLToBlob(dataUri);\n                saveAs(blob, fileName);\n            });\n        };\n        _this.undo = function () {\n            _this.model.history.undo();\n        };\n        _this.redo = function () {\n            _this.model.history.redo();\n        };\n        _this.zoomBy = function (value) {\n            _this.markup.paperArea.zoomBy(value);\n        };\n        _this.zoomIn = function () {\n            _this.markup.paperArea.zoomIn();\n        };\n        _this.zoomOut = function () {\n            _this.markup.paperArea.zoomOut();\n        };\n        _this.print = function () {\n            _this.markup.paperArea.exportSVG().then(function (svg) {\n                var printWindow = window.open('', undefined, 'width=1280,height=720');\n                printWindow.document.write(svg);\n                printWindow.document.close();\n                printWindow.print();\n            });\n        };\n        _this.changeLanguage = function (language) {\n            var onLanguageChange = _this.props.onLanguageChange;\n            // if language is in controlled mode we'll just forward the change\n            if (onLanguageChange) {\n                onLanguageChange(language);\n            }\n            else {\n                _this.view.setLanguage(language);\n                // since we have toolbar dependent on language, we're forcing update here\n                _this.forceUpdate();\n            }\n        };\n        _this.centerTo = function (paperPosition) {\n            _this.markup.paperArea.centerTo(paperPosition);\n        };\n        var _a = _this.props, hideHalo = _a.hideHalo, history = _a.history, _b = _a.viewOptions, viewOptions = _b === void 0 ? {} : _b, metadataApi = _a.metadataApi, validationApi = _a.validationApi, propertyEditor = _a.propertyEditor, elementTemplateResolver = _a.elementTemplateResolver, linkTemplateResolver = _a.linkTemplateResolver, typeStyleResolver = _a.typeStyleResolver, selectLabelLanguage = _a.selectLabelLanguage;\n        var linkRouter = viewOptions.linkRouter, onIriClick = viewOptions.onIriClick, disableDefaultHalo = viewOptions.disableDefaultHalo, suggestProperties = viewOptions.suggestProperties, groupBy = viewOptions.groupBy;\n        _this.model = new asyncModel_1.AsyncModel(history || new history_1.NonRememberingHistory(), groupBy || []);\n        _this.view = new view_1.DiagramView(_this.model, {\n            elementTemplateResolver: elementTemplateResolver,\n            linkTemplateResolver: linkTemplateResolver,\n            typeStyleResolver: typeStyleResolver,\n            selectLabelLanguage: selectLabelLanguage,\n            linkRouter: linkRouter,\n            onIriClick: onIriClick,\n        });\n        _this.editor = new editorController_1.EditorController({\n            model: _this.model,\n            view: _this.view,\n            disableHalo: hideHalo || disableDefaultHalo,\n            suggestProperties: suggestProperties,\n            validationApi: validationApi,\n            propertyEditor: propertyEditor,\n        });\n        _this.editor.setMetadataApi(metadataApi);\n        _this.view.setLanguage(_this.props.language);\n        _this.state = {};\n        return _this;\n    }\n    Workspace.prototype._getPaperArea = function () {\n        return this.markup ? this.markup.paperArea : undefined;\n    };\n    Workspace.prototype._setWatermark = function (watermarkSvg, watermarkUrl) {\n        this._watermarkSvg = watermarkSvg;\n        this._watermarkUrl = watermarkUrl;\n        this.forceUpdate();\n    };\n    Workspace.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, hidePanels = _a.hidePanels, hideToolbar = _a.hideToolbar, metadataApi = _a.metadataApi, hideScrollBars = _a.hideScrollBars, onWorkspaceEvent = _a.onWorkspaceEvent, _elementsSearchPanel = _a._elementsSearchPanel;\n        return react_1.createElement(workspaceMarkup_1.WorkspaceMarkup, {\n            ref: function (markup) { _this.markup = markup; },\n            hidePanels: hidePanels,\n            hideToolbar: hideToolbar,\n            hideScrollBars: hideScrollBars,\n            model: this.model,\n            view: this.view,\n            editor: this.editor,\n            metadataApi: metadataApi,\n            leftPanelInitiallyOpen: this.props.leftPanelInitiallyOpen,\n            rightPanelInitiallyOpen: this.props.rightPanelInitiallyOpen,\n            searchCriteria: this.state.criteria,\n            onSearchCriteriaChanged: function (criteria) { return _this.setState({ criteria: criteria }); },\n            zoomOptions: this.props.zoomOptions,\n            onZoom: this.props.onZoom,\n            isLeftPanelOpen: this.props.leftPanelInitiallyOpen,\n            isRightPanelOpen: this.props.rightPanelInitiallyOpen,\n            toolbar: react_1.createElement(ToolbarWrapper, { workspace: this }),\n            onWorkspaceEvent: onWorkspaceEvent,\n            watermarkSvg: this._watermarkSvg,\n            watermarkUrl: this._watermarkUrl,\n            elementsSearchPanel: _elementsSearchPanel,\n        });\n    };\n    Workspace.prototype.componentDidMount = function () {\n        var _this = this;\n        var onWorkspaceEvent = this.props.onWorkspaceEvent;\n        this.editor._initializePaperComponents(this.markup.paperArea);\n        this.updateNavigator(!this.props.hideNavigator);\n        this.listener.listen(this.model.events, 'loadingSuccess', function () {\n            _this.view.performSyncUpdate();\n            _this.markup.paperArea.centerContent();\n        });\n        this.listener.listen(this.model.events, 'elementEvent', function (_a) {\n            var key = _a.key, data = _a.data;\n            if (!data.requestedAddToFilter) {\n                return;\n            }\n            var _b = data.requestedAddToFilter, source = _b.source, linkType = _b.linkType, direction = _b.direction;\n            _this.setState({\n                criteria: {\n                    refElement: source,\n                    refElementLink: linkType,\n                    linkDirection: direction,\n                },\n            });\n            if (onWorkspaceEvent) {\n                onWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.searchUpdateCriteria);\n            }\n        });\n        this.listener.listen(this.markup.paperArea.events, 'pointerUp', function (e) {\n            if (_this.props.onPointerUp) {\n                _this.props.onPointerUp(e);\n            }\n        });\n        this.listener.listen(this.markup.paperArea.events, 'pointerMove', function (e) {\n            if (_this.props.onPointerMove) {\n                _this.props.onPointerMove(e);\n            }\n        });\n        this.listener.listen(this.markup.paperArea.events, 'pointerDown', function (e) {\n            if (_this.props.onPointerDown) {\n                _this.props.onPointerDown(e);\n            }\n        });\n        if (onWorkspaceEvent) {\n            this.listener.listen(this.editor.events, 'changeSelection', function () {\n                return onWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.editorChangeSelection);\n            });\n            this.listener.listen(this.editor.events, 'toggleDialog', function () {\n                return onWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.editorToggleDialog);\n            });\n            this.listener.listen(this.editor.events, 'addElements', function () {\n                return onWorkspaceEvent(workspaceContext_1.WorkspaceEventKey.editorAddElements);\n            });\n        }\n    };\n    Workspace.prototype.componentWillReceiveProps = function (nextProps) {\n        var controlledLanguage = Boolean(nextProps.onLanguageChange);\n        if (controlledLanguage && nextProps.language !== this.view.getLanguage()) {\n            this.view.setLanguage(nextProps.language);\n        }\n        if (nextProps.metadataApi !== this.editor.metadataApi) {\n            this.editor.setMetadataApi(nextProps.metadataApi);\n        }\n        if (nextProps.hideNavigator !== this.props.hideNavigator) {\n            this.updateNavigator(!nextProps.hideNavigator);\n        }\n    };\n    Workspace.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.view.dispose();\n    };\n    Workspace.prototype.updateNavigator = function (showNavigator) {\n        if (showNavigator) {\n            var widget = react_1.createElement(navigator_1.Navigator, { view: this.view, expanded: !this.props.collapseNavigator });\n            this.view.setPaperWidget({ key: 'navigator', widget: widget, attachment: view_1.WidgetAttachment.Viewport });\n        }\n        else {\n            this.view.setPaperWidget({ key: 'navigator', widget: undefined, attachment: view_1.WidgetAttachment.Viewport });\n        }\n    };\n    Workspace.prototype.getModel = function () { return this.model; };\n    Workspace.prototype.getDiagram = function () { return this.view; };\n    Workspace.prototype.getEditor = function () { return this.editor; };\n    Workspace.prototype.preventTextSelectionUntilMouseUp = function () { this.markup.preventTextSelection(); };\n    Workspace.prototype.showWaitIndicatorWhile = function (operation) {\n        var _this = this;\n        this.markup.paperArea.centerTo();\n        this.editor.setSpinner({});\n        if (operation) {\n            operation.then(function () {\n                _this.editor.setSpinner(undefined);\n            }).catch(function (error) {\n                // tslint:disable-next-line:no-console\n                console.error(error);\n                _this.editor.setSpinner({ statusText: 'Unknown error occured', errorOccured: true });\n            });\n        }\n    };\n    Workspace.defaultProps = {\n        hideTutorial: true,\n        collapseNavigator: false,\n        leftPanelInitiallyOpen: true,\n        rightPanelInitiallyOpen: false,\n        languages: [\n            { code: 'en', label: 'English' },\n            { code: 'ru', label: 'Russian' },\n        ],\n        language: 'en',\n    };\n    return Workspace;\n}(react_1.Component));\nexports.Workspace = Workspace;\nvar ToolbarWrapper = /** @class */ (function (_super) {\n    tslib_1.__extends(ToolbarWrapper, _super);\n    function ToolbarWrapper() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.listener = new events_1.EventObserver();\n        return _this;\n    }\n    ToolbarWrapper.prototype.render = function () {\n        var workspace = this.props.workspace;\n        var view = workspace.getDiagram();\n        var editor = workspace.getEditor();\n        var _a = workspace.props, languages = _a.languages, onSaveDiagram = _a.onSaveDiagram, onPersistChanges = _a.onPersistChanges, hidePanels = _a.hidePanels, toolbar = _a.toolbar;\n        var canPersistChanges = onPersistChanges ? !authoringState_1.AuthoringState.isEmpty(editor.authoringState) : undefined;\n        var canSaveDiagram = !canPersistChanges;\n        var defaultToolbarProps = {\n            onZoomIn: workspace.zoomIn,\n            onZoomOut: workspace.zoomOut,\n            onZoomToFit: workspace.zoomToFit,\n            onPrint: workspace.print,\n            onExportSVG: workspace.exportSvg,\n            onExportPNG: workspace.exportPng,\n            canSaveDiagram: canSaveDiagram,\n            onSaveDiagram: onSaveDiagram ? function () { return onSaveDiagram(workspace); } : undefined,\n            canPersistChanges: canPersistChanges,\n            onPersistChanges: onPersistChanges ? function () { return onPersistChanges(workspace); } : undefined,\n            onForceLayout: function () {\n                workspace.forceLayout();\n                workspace.getDiagram().performSyncUpdate();\n                workspace.zoomToFit();\n            },\n            onClearAll: workspace.clearAll,\n            languages: languages,\n            selectedLanguage: view.getLanguage(),\n            onChangeLanguage: workspace.changeLanguage,\n            hidePanels: hidePanels,\n        };\n        if (toolbar) {\n            var toolbarProps = tslib_1.__assign(tslib_1.__assign({}, defaultToolbarProps), toolbar.props);\n            return react_1.cloneElement(toolbar, toolbarProps);\n        }\n        else {\n            return react_1.createElement(toolbar_1.DefaultToolbar, defaultToolbarProps);\n        }\n    };\n    ToolbarWrapper.prototype.componentDidMount = function () {\n        var _this = this;\n        var workspace = this.props.workspace;\n        var editor = workspace.getEditor();\n        this.listener.listen(editor.events, 'changeAuthoringState', function () {\n            _this.forceUpdate();\n        });\n    };\n    ToolbarWrapper.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n    };\n    return ToolbarWrapper;\n}(react_1.Component));\nfunction renderTo(workspace, container, props) {\n    ReactDOM.render(react_1.createElement(workspace, props), container);\n}\nexports.renderTo = renderTo;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__134__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar d3_color_1 = require(\"d3-color\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar paper_1 = require(\"../diagram/paper\");\nvar CLASS_NAME = 'ontodia-navigator';\nvar MIN_SCALE = 0.25;\nvar Navigator = /** @class */ (function (_super) {\n    tslib_1.__extends(Navigator, _super);\n    function Navigator(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.delayedRedraw = new async_1.Debouncer();\n        _this.listener = new events_1.EventObserver();\n        _this.scheduleRedraw = function () {\n            if (_this.state.expanded) {\n                _this.delayedRedraw.call(_this.draw);\n            }\n        };\n        _this.draw = function () {\n            var _a = _this.props, pt = _a.paperTransform, width = _a.width, height = _a.height;\n            _this.calculateTransform();\n            var ctx = _this.canvas.getContext('2d');\n            ctx.fillStyle = '#EEEEEE';\n            ctx.clearRect(0, 0, width, height);\n            ctx.fillRect(0, 0, width, height);\n            var paneStart = paper_1.paneTopLeft(pt);\n            var paneSize = paper_1.totalPaneSize(pt);\n            var paneEnd = {\n                x: paneStart.x + paneSize.x,\n                y: paneStart.y + paneSize.y,\n            };\n            var start = canvasFromPaneCoords(paneStart, pt, _this.transform);\n            var end = canvasFromPaneCoords(paneEnd, pt, _this.transform);\n            ctx.fillStyle = 'white';\n            ctx.fillRect(start.x, start.y, end.x - start.x, end.y - start.y);\n            ctx.save();\n            _this.drawElements(ctx);\n            _this.drawViewport(ctx);\n            ctx.restore();\n        };\n        _this.onDragViewport = function (e) {\n            e.preventDefault();\n            if (_this.isDraggingViewport) {\n                var canvas = _this.canvasFromPageCoords(e.pageX, e.pageY);\n                var paper = paperFromCanvasCoords(canvas, _this.props.paperTransform, _this.transform);\n                _this.props.paperArea.centerTo(paper);\n            }\n        };\n        _this.onMouseUp = function () {\n            _this.stopDraggingViewport();\n        };\n        _this.onWheel = function (e) {\n            e.preventDefault();\n            var delta = Math.max(-1, Math.min(1, e.deltaY || e.deltaX));\n            _this.props.paperArea.zoomBy(-delta * 0.1);\n        };\n        _this.onToggleClick = function () {\n            _this.setState(function (state) { return ({ expanded: !state.expanded }); }, _this.scheduleRedraw);\n        };\n        _this.state = { expanded: _this.props.expanded };\n        return _this;\n    }\n    Navigator.prototype.componentDidMount = function () {\n        var _a = this.props, view = _a.view, paperArea = _a.paperArea;\n        this.listener.listen(view.events, 'changeHighlight', this.scheduleRedraw);\n        this.listener.listen(view.model.events, 'changeCells', this.scheduleRedraw);\n        this.listener.listen(view.model.events, 'elementEvent', this.scheduleRedraw);\n        this.listener.listen(paperArea.events, 'pointerMove', this.scheduleRedraw);\n        this.listener.listen(paperArea.events, 'scroll', this.scheduleRedraw);\n    };\n    Navigator.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        return nextState !== this.state;\n    };\n    Navigator.prototype.componentWillUnmount = function () {\n        this.delayedRedraw.dispose();\n        this.listener.stopListening();\n        this.stopDraggingViewport();\n    };\n    Navigator.prototype.drawElements = function (ctx) {\n        var _this = this;\n        var _a = this.props, view = _a.view, pt = _a.paperTransform;\n        view.model.elements.forEach(function (element) {\n            var position = element.position, size = element.size;\n            ctx.fillStyle = _this.chooseElementColor(element);\n            var _a = canvasFromPaperCoords(position, pt, _this.transform), x1 = _a.x, y1 = _a.y;\n            var _b = canvasFromPaperCoords({\n                x: position.x + size.width,\n                y: position.y + size.height,\n            }, pt, _this.transform), x2 = _b.x, y2 = _b.y;\n            ctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n        });\n    };\n    Navigator.prototype.chooseElementColor = function (element) {\n        var view = this.props.view;\n        var isBlurred = view.highlighter && !view.highlighter(element);\n        if (isBlurred) {\n            return 'lightgray';\n        }\n        var _a = view.getTypeStyle(element.data.types).color, h = _a.h, c = _a.c, l = _a.l;\n        return d3_color_1.hcl(h, c, l).toString();\n    };\n    Navigator.prototype.drawViewport = function (ctx) {\n        var _a = this.props, paperArea = _a.paperArea, pt = _a.paperTransform, width = _a.width, height = _a.height;\n        ctx.strokeStyle = '#337ab7';\n        ctx.lineWidth = 2;\n        var _b = paperArea.getAreaMetrics(), clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\n        var viewportStart = paperArea.clientToScrollablePaneCoords(0, 0);\n        var viewportEnd = paperArea.clientToScrollablePaneCoords(clientWidth, clientHeight);\n        var _c = canvasFromPaneCoords(viewportStart, pt, this.transform), x1 = _c.x, y1 = _c.y;\n        var _d = canvasFromPaneCoords(viewportEnd, pt, this.transform), x2 = _d.x, y2 = _d.y;\n        // draw visible viewport rectangle\n        ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);\n        // draw \"out of area\" viewport borders\n        ctx.beginPath();\n        if (x1 < 0) {\n            ctx.moveTo(0, y1);\n            ctx.lineTo(0, y2);\n        }\n        if (y1 < 0) {\n            ctx.moveTo(x1, 0);\n            ctx.lineTo(x2, 0);\n        }\n        if (x2 > width) {\n            ctx.moveTo(width, y1);\n            ctx.lineTo(width, y2);\n        }\n        if (y2 > height) {\n            ctx.moveTo(x1, height);\n            ctx.lineTo(x2, height);\n        }\n        ctx.lineWidth = 4;\n        ctx.strokeStyle = '#a0d2ff';\n        ctx.setLineDash([5, 5]);\n        ctx.stroke();\n    };\n    Navigator.prototype.calculateTransform = function () {\n        var _a = this.props, paperArea = _a.paperArea, pt = _a.paperTransform, width = _a.width, height = _a.height, scalePadding = _a.scalePadding;\n        var box = paperArea.getContentFittingBox();\n        var displayPadding = {\n            x: Math.max(box.width, width / MIN_SCALE) * scalePadding,\n            y: Math.max(box.height, height / MIN_SCALE) * scalePadding,\n        };\n        var displayStart = paper_1.paneFromPaperCoords({\n            x: box.x - displayPadding.x,\n            y: box.y - displayPadding.y,\n        }, pt);\n        var displayEnd = paper_1.paneFromPaperCoords({\n            x: box.x + box.width + displayPadding.x,\n            y: box.y + box.height + displayPadding.y,\n        }, pt);\n        var displaySize = {\n            x: displayEnd.x - displayStart.x,\n            y: displayEnd.y - displayStart.y,\n        };\n        var scale = Math.min(width / displaySize.x, height / displaySize.y);\n        var canvasOffset = {\n            x: (width - displaySize.x * scale) / 2,\n            y: (height - displaySize.y * scale) / 2,\n        };\n        this.transform = { scale: scale, canvasOffset: canvasOffset, paneOffset: displayStart };\n    };\n    Navigator.prototype.canvasFromPageCoords = function (pageX, pageY) {\n        var _a = this.canvas.getBoundingClientRect(), top = _a.top, left = _a.left;\n        return {\n            x: pageX - left - window.pageXOffset,\n            y: pageY - top - window.pageYOffset,\n        };\n    };\n    Navigator.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, width = _a.width, height = _a.height;\n        var expanded = this.state.expanded;\n        return (React.createElement(\"div\", { className: CLASS_NAME + \" \" + CLASS_NAME + \"--\" + (expanded ? 'expanded' : 'collapsed'), style: expanded ? { width: width, height: height } : undefined },\n            React.createElement(\"canvas\", { ref: function (canvas) { return _this.canvas = canvas; }, width: width, height: height, onMouseDown: function (e) {\n                    _this.startDragginViewport();\n                    _this.onDragViewport(e);\n                }, onWheel: this.onWheel }),\n            React.createElement(\"button\", { className: CLASS_NAME + \"__toggle\", title: expanded ? 'Collapse navigator' : 'Expand navigator', onClick: this.onToggleClick },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__toggle-icon\" }))));\n    };\n    Navigator.prototype.startDragginViewport = function () {\n        if (!this.isDraggingViewport) {\n            this.isDraggingViewport = true;\n            document.addEventListener('mousemove', this.onDragViewport);\n            document.addEventListener('mouseup', this.onMouseUp);\n        }\n    };\n    Navigator.prototype.stopDraggingViewport = function () {\n        if (this.isDraggingViewport) {\n            this.isDraggingViewport = false;\n            document.removeEventListener('mousemove', this.onDragViewport);\n            document.removeEventListener('mouseup', this.onMouseUp);\n        }\n    };\n    Navigator.defaultProps = {\n        width: 300,\n        height: 160,\n        scalePadding: 0.2,\n        expanded: true,\n    };\n    return Navigator;\n}(React.Component));\nexports.Navigator = Navigator;\nfunction canvasFromPaneCoords(pane, pt, nt) {\n    return {\n        x: nt.canvasOffset.x + (pane.x - nt.paneOffset.x) * nt.scale,\n        y: nt.canvasOffset.y + (pane.y - nt.paneOffset.y) * nt.scale,\n    };\n}\nfunction canvasFromPaperCoords(paper, pt, nt) {\n    var pane = paper_1.paneFromPaperCoords(paper, pt);\n    return canvasFromPaneCoords(pane, pt, nt);\n}\nfunction paperFromCanvasCoords(canvas, pt, nt) {\n    var pane = {\n        x: nt.paneOffset.x + (canvas.x - nt.canvasOffset.x) / nt.scale,\n        y: nt.paneOffset.y + (canvas.y - nt.canvasOffset.y) / nt.scale,\n    };\n    return paper_1.paperFromPaneCoords(pane, pt);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar paperArea_1 = require(\"../diagram/paperArea\");\nvar classTree_1 = require(\"../widgets/classTree\");\nvar instancesSearch_1 = require(\"../widgets/instancesSearch\");\nvar linksToolbox_1 = require(\"../widgets/linksToolbox\");\nvar workspaceContext_1 = require(\"./workspaceContext\");\nvar async_1 = require(\"../viewUtils/async\");\nvar layout_1 = require(\"./layout/layout\");\nvar WorkspaceMarkup = /** @class */ (function (_super) {\n    tslib_1.__extends(WorkspaceMarkup, _super);\n    function WorkspaceMarkup() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.untilMouseUpClasses = [];\n        _this.cancellation = new async_1.Cancellation();\n        _this.triggerWorkspaceEvent = function (key) {\n            var onWorkspaceEvent = _this.props.onWorkspaceEvent;\n            if (onWorkspaceEvent) {\n                onWorkspaceEvent(key);\n            }\n        };\n        _this.renderToolbar = function () {\n            var _a = _this.props, hideToolbar = _a.hideToolbar, toolbar = _a.toolbar;\n            if (hideToolbar) {\n                return null;\n            }\n            return React.createElement(\"div\", { className: 'ontodia__header' }, toolbar);\n        };\n        _this.onCreateInstance = function (classId, position) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var _a, editor, view, model, metadataApi, batch, type, typeName, types, signal, newEntityIri, elementModel, element, targetPosition;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.props, editor = _a.editor, view = _a.view, model = _a.model, metadataApi = _a.metadataApi;\n                        return [4 /*yield*/, forceNonReactExecutionContext()];\n                    case 1:\n                        _b.sent();\n                        batch = model.history.startBatch();\n                        type = editor.model.getClass(classId);\n                        typeName = view.formatLabel(type.label, type.id);\n                        types = [classId];\n                        signal = this.cancellation.signal;\n                        return [4 /*yield*/, metadataApi.generateNewElementIri(types, signal)];\n                    case 2:\n                        newEntityIri = _b.sent();\n                        if (signal.aborted) {\n                            return [2 /*return*/];\n                        }\n                        elementModel = {\n                            id: newEntityIri,\n                            types: types,\n                            label: { values: [{ value: \"New \" + typeName, language: '' }] },\n                            properties: {},\n                        };\n                        element = editor.createNewEntity({ elementModel: elementModel });\n                        view.performSyncUpdate();\n                        targetPosition = position || getViewportCenterInPaperCoords(this.paperArea);\n                        centerElementToPosition(element, targetPosition);\n                        batch.store();\n                        editor.setSelection([element]);\n                        editor.showEditEntityForm(element);\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        _this.onDocumentMouseUp = function () {\n            for (var _i = 0, _a = _this.untilMouseUpClasses; _i < _a.length; _i++) {\n                var className = _a[_i];\n                _this.element.classList.remove(className);\n            }\n            _this.untilMouseUpClasses = [];\n        };\n        _this.onDropOnPaper = function (e, paperPosition) {\n            e.preventDefault();\n            var event = { dragEvent: e, paperPosition: paperPosition };\n            if (_this.props.view._tryHandleDropOnPaper(event)) {\n                return;\n            }\n            var iris = tryParseDefaultDragAndDropData(e);\n            if (iris.length > 0) {\n                _this.props.editor.onDragDrop(iris, paperPosition);\n            }\n        };\n        return _this;\n    }\n    WorkspaceMarkup.prototype.getChildContext = function () {\n        var editor = this.props.editor;\n        var ontodiaWorkspace = { editor: editor, triggerWorkspaceEvent: this.triggerWorkspaceEvent };\n        return { ontodiaWorkspace: ontodiaWorkspace };\n    };\n    WorkspaceMarkup.prototype.getLeftPanelLayout = function () {\n        var _a = this.props, view = _a.view, editor = _a.editor, model = _a.model, searchCriteria = _a.searchCriteria, onSearchCriteriaChanged = _a.onSearchCriteriaChanged;\n        var classTree = (React.createElement(classTree_1.ClassTree, { view: view, editor: editor, onClassSelected: function (classId) {\n                var elementType = model.createClass(classId);\n                onSearchCriteriaChanged({ elementType: elementType });\n            }, onCreateInstance: this.onCreateInstance }));\n        var instancesSearch = (React.createElement(instancesSearch_1.InstancesSearch, { view: view, model: model, criteria: searchCriteria || {}, onCriteriaChanged: onSearchCriteriaChanged }));\n        return {\n            type: layout_1.WorkspaceLayoutType.Column,\n            children: [{\n                    id: 'classes',\n                    type: layout_1.WorkspaceLayoutType.Component,\n                    content: classTree,\n                    heading: 'Classes',\n                }, {\n                    id: 'instances',\n                    type: layout_1.WorkspaceLayoutType.Component,\n                    content: instancesSearch,\n                    heading: 'Instances',\n                }],\n            defaultSize: 275,\n            defaultCollapsed: !this.props.isLeftPanelOpen,\n        };\n    };\n    WorkspaceMarkup.prototype.getRightPanelLayout = function () {\n        var _a = this.props, view = _a.view, editor = _a.editor, elementsSearchPanel = _a.elementsSearchPanel;\n        var rightPanel = {\n            type: layout_1.WorkspaceLayoutType.Column,\n            children: [{\n                    id: 'connections',\n                    type: layout_1.WorkspaceLayoutType.Component,\n                    content: React.createElement(linksToolbox_1.LinkTypesToolbox, { view: view, editor: editor }),\n                    heading: 'Connections',\n                }],\n            defaultSize: 275,\n            defaultCollapsed: !this.props.isRightPanelOpen,\n        };\n        if (elementsSearchPanel) {\n            rightPanel.children = tslib_1.__spreadArrays(rightPanel.children, [\n                {\n                    id: 'search',\n                    type: layout_1.WorkspaceLayoutType.Component,\n                    content: React.cloneElement(elementsSearchPanel, { view: view, editor: editor }),\n                    heading: 'Search in diagram',\n                }\n            ]);\n        }\n        return rightPanel;\n    };\n    WorkspaceMarkup.prototype.render = function () {\n        var _this = this;\n        var paper = {\n            id: 'paper',\n            type: layout_1.WorkspaceLayoutType.Component,\n            content: (React.createElement(\"div\", { className: 'ontodia__main-panel', style: { flex: '1 1 0px', width: '100%' } },\n                React.createElement(paperArea_1.PaperArea, { ref: function (el) { return _this.paperArea = el; }, view: this.props.view, zoomOptions: this.props.zoomOptions, hideScrollBars: this.props.hideScrollBars, watermarkSvg: this.props.watermarkSvg, watermarkUrl: this.props.watermarkUrl, onDragDrop: this.onDropOnPaper, onZoom: this.props.onZoom }))),\n        };\n        var workspaceLayout = this.props.hidePanels ? paper : {\n            type: layout_1.WorkspaceLayoutType.Row,\n            children: [\n                this.getLeftPanelLayout(),\n                paper,\n                this.getRightPanelLayout(),\n            ]\n        };\n        return (React.createElement(\"div\", { ref: function (e) { return _this.element = e; }, className: 'ontodia' },\n            this.renderToolbar(),\n            React.createElement(\"div\", { className: 'ontodia__workspace' },\n                React.createElement(layout_1.WorkspaceLayout, { layout: workspaceLayout, _onStartResize: function (direction) {\n                        return _this.untilMouseUp({\n                            preventTextSelection: true,\n                            verticalResizing: direction === 'vertical',\n                            horizontalResizing: direction === 'horizontal',\n                        });\n                    } }))));\n    };\n    WorkspaceMarkup.prototype.componentDidMount = function () {\n        document.addEventListener('mouseup', this.onDocumentMouseUp);\n    };\n    WorkspaceMarkup.prototype.componentWillUnmount = function () {\n        document.removeEventListener('mouseup', this.onDocumentMouseUp);\n        this.cancellation.abort();\n    };\n    WorkspaceMarkup.prototype.preventTextSelection = function () {\n        this.untilMouseUp({ preventTextSelection: true });\n    };\n    WorkspaceMarkup.prototype.untilMouseUp = function (params) {\n        this.untilMouseUpClasses = [];\n        if (params.preventTextSelection) {\n            this.untilMouseUpClasses.push('ontodia--unselectable');\n        }\n        if (params.horizontalResizing) {\n            this.untilMouseUpClasses.push('ontodia--horizontal-resizing');\n        }\n        if (params.verticalResizing) {\n            this.untilMouseUpClasses.push('ontodia--vertical-resizing');\n        }\n        for (var _i = 0, _a = this.untilMouseUpClasses; _i < _a.length; _i++) {\n            var className = _a[_i];\n            this.element.classList.add(className);\n        }\n    };\n    WorkspaceMarkup.childContextTypes = workspaceContext_1.WorkspaceContextTypes;\n    return WorkspaceMarkup;\n}(React.Component));\nexports.WorkspaceMarkup = WorkspaceMarkup;\nfunction forceNonReactExecutionContext() {\n    // force non-React executing context to resolve forceUpdate() synchronously\n    return Promise.resolve();\n}\nfunction getViewportCenterInPaperCoords(paperArea) {\n    var viewport = paperArea.getAreaMetrics();\n    return paperArea.clientToPaperCoords(viewport.clientWidth / 2, viewport.clientHeight / 2);\n}\nfunction centerElementToPosition(element, center) {\n    var position = {\n        x: center.x - element.size.width / 2,\n        y: center.y - element.size.height / 2,\n    };\n    element.setPosition(position);\n}\nfunction tryParseDefaultDragAndDropData(e) {\n    var tryGetIri = function (type, decode) {\n        if (decode === void 0) { decode = false; }\n        try {\n            var iriString = e.dataTransfer.getData(type);\n            if (!iriString) {\n                return undefined;\n            }\n            var iris = void 0;\n            try {\n                iris = JSON.parse(iriString);\n            }\n            catch (e) {\n                iris = [(decode ? decodeURI(iriString) : iriString)];\n            }\n            return iris.length === 0 ? undefined : iris;\n        }\n        catch (e) {\n            return undefined;\n        }\n    };\n    return tryGetIri('application/x-ontodia-elements')\n        || tryGetIri('text/uri-list', true)\n        || tryGetIri('text') // IE11, Edge\n        || [];\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classTree_1 = require(\"./classTree\");\nexports.ClassTree = classTree_1.ClassTree;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar elements_1 = require(\"../../diagram/elements\");\nvar async_1 = require(\"../../viewUtils/async\");\nvar collections_1 = require(\"../../viewUtils/collections\");\nvar events_1 = require(\"../../viewUtils/events\");\nvar spinner_1 = require(\"../../viewUtils/spinner\");\nvar progressBar_1 = require(\"../../widgets/progressBar\");\nvar treeModel_1 = require(\"./treeModel\");\nvar leaf_1 = require(\"./leaf\");\nvar CLASS_NAME = 'ontodia-class-tree';\nvar MIN_TERM_LENGTH = 3;\nvar ClassTree = /** @class */ (function (_super) {\n    tslib_1.__extends(ClassTree, _super);\n    function ClassTree(props) {\n        var _this = _super.call(this, props) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.delayedClassUpdate = new async_1.Debouncer();\n        _this.delayedSearch = new async_1.Debouncer(200 /* ms */);\n        _this.loadClassesOperation = new async_1.Cancellation();\n        _this.refreshOperation = new async_1.Cancellation();\n        _this.onSearchTextChange = function (e) {\n            var requestedSearchText = e.currentTarget.value;\n            _this.setState({ requestedSearchText: requestedSearchText });\n            _this.delayedSearch.call(_this.performSearch);\n        };\n        _this.performSearch = function () {\n            var requestedSearchText = _this.state.requestedSearchText;\n            var requested = normalizeSearchText(requestedSearchText);\n            if (requested === _this.state.appliedSearchText) {\n                return;\n            }\n            var appliedSearchText = requested.length < MIN_TERM_LENGTH ? undefined : requested;\n            _this.setState(function (state) { return applyFilters(tslib_1.__assign(tslib_1.__assign({}, state), { appliedSearchText: appliedSearchText })); });\n        };\n        _this.onShowOnlyCreatableChange = function (e) {\n            _this.setState(function (state) { return applyFilters(tslib_1.__assign(tslib_1.__assign({}, state), { showOnlyConstructible: !state.showOnlyConstructible })); });\n        };\n        _this.onSelectNode = function (node) {\n            var onClassSelected = _this.props.onClassSelected;\n            _this.setState({ selectedNode: node });\n            onClassSelected(node.model.id);\n        };\n        _this.onCreateInstance = function (node) {\n            var onCreateInstance = _this.props.onCreateInstance;\n            onCreateInstance(node.model.id);\n        };\n        _this.onDragCreate = function (node) {\n            var _a = _this.props, view = _a.view, onCreateInstance = _a.onCreateInstance;\n            view.setHandlerForNextDropOnPaper(function (e) {\n                onCreateInstance(node.model.id, e.paperPosition);\n            });\n        };\n        _this.refreshClassTree = function () {\n            var cancellation = new async_1.Cancellation();\n            var editor = _this.props.editor;\n            _this.refreshOperation.abort();\n            _this.refreshOperation = cancellation;\n            _this.setState(function (state, props) {\n                if (!_this.classTree) {\n                    return { refreshingState: progressBar_1.ProgressState.none };\n                }\n                var refreshingState = progressBar_1.ProgressState.none;\n                if (editor.inAuthoringMode) {\n                    var newIris = getNewClassIris(state.constructibleClasses, _this.classTree);\n                    if (newIris.size > 0) {\n                        refreshingState = progressBar_1.ProgressState.loading;\n                        _this.queryCreatableTypes(newIris, cancellation.signal);\n                    }\n                }\n                var roots = createRoots(_this.classTree, props.view);\n                return applyFilters(tslib_1.__assign(tslib_1.__assign({}, state), { roots: sortTree(roots), refreshingState: refreshingState }));\n            });\n        };\n        _this.state = {\n            refreshingState: progressBar_1.ProgressState.none,\n            roots: [],\n            filteredRoots: [],\n            requestedSearchText: '',\n            appliedSearchText: '',\n            constructibleClasses: new Map(),\n            showOnlyConstructible: false,\n        };\n        return _this;\n    }\n    ClassTree.prototype.render = function () {\n        var _a = this.props, view = _a.view, editor = _a.editor;\n        var _b = this.state, refreshingState = _b.refreshingState, requestedSearchText = _b.requestedSearchText, appliedSearchText = _b.appliedSearchText, filteredRoots = _b.filteredRoots, selectedNode = _b.selectedNode, constructibleClasses = _b.constructibleClasses, showOnlyConstructible = _b.showOnlyConstructible;\n        var normalizedSearchText = normalizeSearchText(requestedSearchText);\n        // highlight search term only if actual tree is already filtered by current or previous term:\n        //  - this immediately highlights typed characters thus making it look more responsive,\n        //  - prevents expanding non-filtered tree (which can be too large) just to highlight the term\n        var searchText = appliedSearchText ? normalizedSearchText : undefined;\n        return (React.createElement(\"div\", { className: CLASS_NAME },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__filter\" },\n                React.createElement(\"div\", { className: CLASS_NAME + \"__filter-group\" },\n                    React.createElement(\"input\", { type: 'text', className: 'search-input ontodia-form-control', placeholder: 'Search for...', value: this.state.requestedSearchText, onChange: this.onSearchTextChange }),\n                    editor.inAuthoringMode ? (React.createElement(\"label\", { className: CLASS_NAME + \"__only-creatable\" },\n                        React.createElement(\"input\", { type: 'checkbox', checked: showOnlyConstructible, onChange: this.onShowOnlyCreatableChange }),\n                        \" Show only constructible\")) : null)),\n            React.createElement(progressBar_1.ProgressBar, { state: refreshingState }),\n            this.classTree ? (React.createElement(leaf_1.Forest, { className: CLASS_NAME + \"__tree ontodia-scrollable\", view: view, nodes: filteredRoots, searchText: searchText, selectedNode: selectedNode, onSelect: this.onSelectNode, creatableClasses: constructibleClasses, onClickCreate: this.onCreateInstance, onDragCreate: this.onDragCreate })) : (React.createElement(\"div\", { className: CLASS_NAME + \"__spinner\" },\n                React.createElement(spinner_1.HtmlSpinner, { width: 30, height: 30 })))));\n    };\n    ClassTree.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, view = _a.view, editor = _a.editor;\n        this.listener.listen(view.events, 'changeLanguage', function () { return _this.refreshClassTree(); });\n        this.listener.listen(editor.model.events, 'loadingStart', function () {\n            _this.initClassTree();\n        });\n        this.listener.listen(editor.model.events, 'classEvent', function (_a) {\n            var data = _a.data;\n            if (data.changeLabel || data.changeCount) {\n                _this.delayedClassUpdate.call(_this.refreshClassTree);\n            }\n        });\n        this.initClassTree();\n    };\n    ClassTree.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.delayedClassUpdate.dispose();\n        this.delayedSearch.dispose();\n        this.loadClassesOperation.abort();\n        this.refreshOperation.abort();\n    };\n    ClassTree.prototype.initClassTree = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var cancellation, classes;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.dataProvider !== this.props.editor.model.dataProvider)) return [3 /*break*/, 2];\n                        this.dataProvider = this.props.editor.model.dataProvider;\n                        this.classTree = undefined;\n                        cancellation = new async_1.Cancellation();\n                        this.loadClassesOperation.abort();\n                        this.loadClassesOperation = cancellation;\n                        return [4 /*yield*/, this.dataProvider.classTree()];\n                    case 1:\n                        classes = _a.sent();\n                        if (cancellation.signal.aborted) {\n                            return [2 /*return*/];\n                        }\n                        this.setClassTree(classes);\n                        _a.label = 2;\n                    case 2:\n                        this.refreshClassTree();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ClassTree.prototype.setClassTree = function (roots) {\n        var diagramModel = this.props.editor.model;\n        var visiting = new Set();\n        var reduceNonCycle = function (acc, model) {\n            if (!visiting.has(model.id)) {\n                visiting.add(model.id);\n                var children = model.children.reduce(reduceNonCycle, []);\n                acc.push(tslib_1.__assign(tslib_1.__assign({}, model), { children: children }));\n                visiting.delete(model.id);\n            }\n            return acc;\n        };\n        this.classTree = roots.reduce(reduceNonCycle, []);\n        var addClass = function (model) {\n            var existing = diagramModel.getClass(model.id);\n            if (!existing) {\n                var id = model.id, label = model.label, count = model.count, children = model.children;\n                var richClass = new elements_1.FatClassModel({ id: id, label: label.values, count: count });\n                diagramModel.addClass(richClass);\n                children.forEach(addClass);\n            }\n        };\n        this.classTree.forEach(addClass);\n        this.refreshClassTree();\n    };\n    ClassTree.prototype.queryCreatableTypes = function (typeIris, ct) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var result_1, err_1;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.props.editor.metadataApi.filterConstructibleTypes(typeIris, ct)];\n                    case 1:\n                        result_1 = _a.sent();\n                        if (ct.aborted) {\n                            return [2 /*return*/];\n                        }\n                        this.setState(function (state) {\n                            var constructibleClasses = collections_1.cloneMap(state.constructibleClasses);\n                            typeIris.forEach(function (type) {\n                                constructibleClasses.set(type, result_1.has(type));\n                            });\n                            return applyFilters(tslib_1.__assign(tslib_1.__assign({}, state), { constructibleClasses: constructibleClasses, refreshingState: progressBar_1.ProgressState.completed }));\n                        });\n                        return [3 /*break*/, 3];\n                    case 2:\n                        err_1 = _a.sent();\n                        // tslint:disable-next-line:no-console\n                        console.error(err_1);\n                        if (ct.aborted) {\n                            return [2 /*return*/];\n                        }\n                        this.setState(function (state) { return applyFilters(tslib_1.__assign(tslib_1.__assign({}, state), { refreshingState: progressBar_1.ProgressState.error })); });\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ClassTree;\n}(React.Component));\nexports.ClassTree = ClassTree;\nfunction createRoots(classTree, view) {\n    var mapClass = function (model) {\n        var richClass = view.model.createClass(model.id);\n        return {\n            model: richClass,\n            label: view.formatLabel(richClass.label, richClass.id),\n            derived: model.children.map(mapClass),\n        };\n    };\n    return classTree.map(mapClass);\n}\nfunction getNewClassIris(existingClasses, classTree) {\n    var classIris = new Set();\n    var visitClass = function (model) {\n        if (!existingClasses.has(model.id)) {\n            classIris.add(model.id);\n        }\n        model.children.forEach(visitClass);\n    };\n    classTree.forEach(visitClass);\n    return classIris;\n}\nfunction normalizeSearchText(text) {\n    return text.trim().toLowerCase();\n}\nfunction sortTree(roots) {\n    function mapNodes(nodes) {\n        if (nodes.length === 0) {\n            return nodes;\n        }\n        var mapped = nodes.map(mapNode);\n        mapped.sort(compareByLabel);\n        return mapped;\n    }\n    function mapNode(node) {\n        return treeModel_1.TreeNode.setDerived(node, mapNodes(node.derived));\n    }\n    function compareByLabel(left, right) {\n        return left.label.localeCompare(right.label);\n    }\n    return mapNodes(roots);\n}\nfunction applyFilters(state) {\n    var filteredRoots = state.roots;\n    if (state.appliedSearchText) {\n        filteredRoots = filterByKeyword(filteredRoots, state.appliedSearchText);\n    }\n    if (state.showOnlyConstructible) {\n        filteredRoots = filterOnlyCreatable(filteredRoots, state.constructibleClasses);\n    }\n    return tslib_1.__assign(tslib_1.__assign({}, state), { filteredRoots: filteredRoots });\n}\nfunction filterByKeyword(roots, searchText) {\n    if (roots.length === 0) {\n        return roots;\n    }\n    function collectByKeyword(acc, node) {\n        var derived = node.derived.reduce(collectByKeyword, []);\n        // keep parent if children is included or label contains keyword\n        if (derived.length > 0 || node.label.toLowerCase().indexOf(searchText) >= 0) {\n            acc.push(treeModel_1.TreeNode.setDerived(node, derived));\n        }\n        return acc;\n    }\n    return roots.reduce(collectByKeyword, []);\n}\nfunction filterOnlyCreatable(roots, creatableClasses) {\n    function collectOnlyCreatable(acc, node) {\n        var derived = node.derived.reduce(collectOnlyCreatable, []);\n        if (derived.length > 0 || creatableClasses.get(node.model.id)) {\n            acc.push(treeModel_1.TreeNode.setDerived(node, derived));\n        }\n        return acc;\n    }\n    return roots.reduce(collectOnlyCreatable, []);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nexports.TreeNode = {\n    setDerived: function (node, derived) { return (tslib_1.__assign(tslib_1.__assign({}, node), { derived: derived })); },\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar listElementView_1 = require(\"../listElementView\");\nvar EXPAND_ICON = require('../../../../images/tree/expand-toggle.svg');\nvar COLLAPSE_ICON = require('../../../../images/tree/collapse-toggle.svg');\nvar DEFAULT_LEAF_ICON = require('../../../../images/tree/leaf-default.svg');\nvar DEFAULT_PARENT_ICON = require('../../../../images/tree/leaf-folder.svg');\nvar LEAF_CLASS = 'ontodia-class-leaf';\nvar Leaf = /** @class */ (function (_super) {\n    tslib_1.__extends(Leaf, _super);\n    function Leaf(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onClick = function (e) {\n            e.preventDefault();\n            var _a = _this.props, node = _a.node, onSelect = _a.onSelect;\n            onSelect(node);\n        };\n        _this.toggle = function () {\n            _this.setState(function (state) { return ({ expanded: !state.expanded }); });\n        };\n        _this.onClickCreate = function () {\n            _this.props.onClickCreate(_this.props.node);\n        };\n        _this.onDragCreate = function (e) {\n            // sets the drag data to support drag-n-drop in Firefox\n            // see https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations for more details\n            // IE supports only 'text' and 'URL' formats, see https://msdn.microsoft.com/en-us/ie/ms536744(v=vs.94)\n            e.dataTransfer.setData('text', '');\n            _this.props.onDragCreate(_this.props.node);\n        };\n        _this.state = {\n            expanded: Boolean(_this.props.searchText),\n        };\n        return _this;\n    }\n    Leaf.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.searchText !== nextProps.searchText) {\n            this.setState({\n                expanded: Boolean(nextProps.searchText),\n            });\n        }\n    };\n    Leaf.prototype.render = function () {\n        var _a = this.props, node = _a.node, otherProps = tslib_1.__rest(_a, [\"node\"]);\n        var view = otherProps.view, selectedNode = otherProps.selectedNode, searchText = otherProps.searchText, creatableClasses = otherProps.creatableClasses;\n        var expanded = this.state.expanded;\n        var toggleIcon;\n        if (node.derived.length > 0) {\n            toggleIcon = expanded ? COLLAPSE_ICON : EXPAND_ICON;\n        }\n        var icon = view.getTypeStyle([node.model.id]).icon;\n        if (!icon) {\n            icon = node.derived.length === 0 ? DEFAULT_LEAF_ICON : DEFAULT_PARENT_ICON;\n        }\n        var bodyClass = LEAF_CLASS + \"__body\";\n        if (selectedNode && selectedNode.model === node.model) {\n            bodyClass += \" \" + LEAF_CLASS + \"__body--selected\";\n        }\n        var label = listElementView_1.highlightSubstring(node.label, searchText, { className: LEAF_CLASS + \"__highlighted-term\" });\n        return (React.createElement(\"div\", { className: LEAF_CLASS, role: 'tree-item' },\n            React.createElement(\"div\", { className: LEAF_CLASS + \"__row\" },\n                React.createElement(\"div\", { className: LEAF_CLASS + \"__toggle\", onClick: this.toggle, role: 'button' }, toggleIcon ? React.createElement(\"img\", { className: LEAF_CLASS + \"__toggle-icon\", src: toggleIcon }) : null),\n                React.createElement(\"a\", { className: bodyClass, href: node.model.id, onClick: this.onClick },\n                    React.createElement(\"div\", { className: LEAF_CLASS + \"__icon-container\" },\n                        React.createElement(\"img\", { className: LEAF_CLASS + \"__icon\", src: icon })),\n                    React.createElement(\"span\", { className: LEAF_CLASS + \"__label\" }, label),\n                    node.model.count ? (React.createElement(\"span\", { className: LEAF_CLASS + \"__count ontodia-badge\" }, node.model.count)) : null),\n                creatableClasses.get(node.model.id) ? (React.createElement(\"div\", { className: LEAF_CLASS + \"__create ontodia-btn-group ontodia-btn-group-xs\" },\n                    React.createElement(\"button\", { className: 'ontodia-btn ontodia-btn-default', title: 'Click or drag to create new entity of this type', draggable: true, onClick: this.onClickCreate, onDragStart: this.onDragCreate }, \"+\"))) : null),\n            expanded && node.derived.length > 0 ? (React.createElement(Forest, tslib_1.__assign({ className: LEAF_CLASS + \"__children\", nodes: node.derived }, otherProps))) : null));\n    };\n    return Leaf;\n}(React.Component));\nexports.Leaf = Leaf;\nvar Forest = /** @class */ (function (_super) {\n    tslib_1.__extends(Forest, _super);\n    function Forest() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Forest.prototype.render = function () {\n        var _a = this.props, nodes = _a.nodes, className = _a.className, otherProps = tslib_1.__rest(_a, [\"nodes\", \"className\"]);\n        return (React.createElement(\"div\", { className: className, role: 'tree' }, nodes.map(function (node) { return (React.createElement(Leaf, tslib_1.__assign({ key: \"node-\" + node.model.id, node: node }, otherProps))); })));\n    };\n    return Forest;\n}(React.Component));\nexports.Forest = Forest;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Ym94PSIwIDAgMTI4IDEyOCI+CiAgPGVsbGlwc2Ugc3Ryb2tlPSIjMDAwIiByeT0iNjAiIHJ4PSI2MCIgY3k9IjY0IiBjeD0iNjQiIHN0cm9rZS13aWR0aD0iNSIgZmlsbD0ibm9uZSIvPgogIDxsaW5lIHkyPSI2My40Mzc1IiB4Mj0iMTA0LjUiIHkxPSI2My40Mzc1IiB4MT0iMjIuNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KICA8bGluZSB5Mj0iMTAyLjQ0NDM0OSIgeDI9IjYzLjUiIHkxPSIyOS40Mzc1IiB4MT0iNjMuNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Ym94PSIwIDAgMTI4IDEyOCI+CiAgPGVsbGlwc2Ugc3Ryb2tlPSIjMDAwIiByeT0iNjAiIHJ4PSI2MCIgY3k9IjY0IiBjeD0iNjQiIHN0cm9rZS13aWR0aD0iNSIgZmlsbD0ibm9uZSIvPgogIDxsaW5lIHkyPSI2My40Mzc1IiB4Mj0iMTA0LjUiIHkxPSI2My40Mzc1IiB4MT0iMjIuNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2U9IiMwMDAiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMTI4IgogICBoZWlnaHQ9IjEyOCIKICAgdmlld2JveD0iMCAwIDEyOCAxMjgiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzQ1MDciCiAgIHNvZGlwb2RpOmRvY25hbWU9InRyZWUtbGVhZi5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTIuMSByMTUzNzEiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0NTExIiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDE3IgogICAgIGlkPSJuYW1lZHZpZXc0NTA5IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjkwNTA5NjY4IgogICAgIGlua3NjYXBlOmN4PSItMjcyLjY4NDciCiAgICAgaW5rc2NhcGU6Y3k9Ii01Ljg1OTY0ODciCiAgICAgaW5rc2NhcGU6d2luZG93LXg9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzQ1MDciIC8+CiAgPGcKICAgICBpZD0iZzQ1MDUiPgogICAgPGNpcmNsZQogICAgICAgaWQ9InN2Z18xIgogICAgICAgY3k9IjY0IgogICAgICAgY3g9IjY0IgogICAgICAgc3Ryb2tlLW9wYWNpdHk9Im51bGwiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMTU3M2IwO3N0cm9rZS13aWR0aDo1IgogICAgICAgcj0iNjAiIC8+CiAgICA8Y2lyY2xlCiAgICAgICBpZD0ic3ZnXzMiCiAgICAgICBjeT0iNjQiCiAgICAgICBjeD0iNjQiCiAgICAgICBzdHJva2Utb3BhY2l0eT0ibnVsbCIKICAgICAgIHN0eWxlPSJmaWxsOiMxNTczYjA7c3Ryb2tlOiMxNTczYjA7c3Ryb2tlLXdpZHRoOjUuNzEwMjYzMjUiCiAgICAgICByPSIzNyIgLz4KICA8L2c+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMTI4IgogICBoZWlnaHQ9IjEyOCIKICAgdmlld2JveD0iMCAwIDEyOCAxMjgiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzUwODgiCiAgIHNvZGlwb2RpOmRvY25hbWU9InRyZWUtbGVhZi1mb2xkZXIuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkyLjEgcjE1MzcxIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNTA5MiIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgICAgb2JqZWN0dG9sZXJhbmNlPSIxMCIKICAgICBncmlkdG9sZXJhbmNlPSIxMCIKICAgICBndWlkZXRvbGVyYW5jZT0iMTAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxNyIKICAgICBpZD0ibmFtZWR2aWV3NTA5MCIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgaW5rc2NhcGU6em9vbT0iMi42MDc0NTYzIgogICAgIGlua3NjYXBlOmN4PSIxMjguNzQ2MTQiCiAgICAgaW5rc2NhcGU6Y3k9IjMwLjkwNTQ3MiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnNTA4OCIgLz4KICA8ZwogICAgIGlkPSJnNTA4NiI+CiAgICA8Y2lyY2xlCiAgICAgICBpZD0ic3ZnXzEiCiAgICAgICBjeT0iNjQiCiAgICAgICBjeD0iNjQiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMTU3M2IwO3N0cm9rZS13aWR0aDo1IgogICAgICAgcj0iNjAiIC8+CiAgICA8Y2lyY2xlCiAgICAgICBpZD0ic3ZnXzMiCiAgICAgICBjeT0iNjQiCiAgICAgICBjeD0iNjQiCiAgICAgICBzdHJva2Utb3BhY2l0eT0ibnVsbCIKICAgICAgIHN0eWxlPSJmaWxsOiMxNTczYjA7c3Ryb2tlOiMxNTczYjA7c3Ryb2tlLXdpZHRoOjUiCiAgICAgICByPSIzNyIgLz4KICAgIDxwYXRoCiAgICAgICBpZD0ic3ZnXzUiCiAgICAgICBkPSJtIDEyNy4yMjU4LDg2LjU0NjY0MyBjIC0wLjAxMDUsLTUuOTcxMDY1IC00LjcyMzE0LC0xMC44MDkwMzQgLTEwLjU0MDA5LC0xMC44MTcxNDcgdiAtMC4wMDI3IEggODQuMzgwMTUyIGMgLTEuMzMxMDIsLTQuMzg2MzUzIC01LjMwMDM1NywtNy41OTM2MzcgLTEwLjAyODc3MSwtNy42MDE3NSBoIC03LjU3NzU4NyBjIC01LjgxOTU4NiwwLjAwNTQgLTEwLjUzNDgyMiw0Ljg0NjA4MiAtMTAuNTQ1MzY1LDEwLjgxNzE0NyB2IDM4LjM2ODQxNyBjIDAuMDEwNTQsNS45NjU2NSA0LjcyNTc3OCwxMC44MDM2MiAxMC41NDUzNjUsMTAuODE0NDQgaCA0OS45MTQ1NTYgYyA1LjgxMTY3LC0wLjAxMDggMTAuNTI5NTUsLTQuODQ4NzkgMTAuNTQwMDksLTEwLjgxNDQ0IFYgODYuNTQ2NjQzIFoiCiAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgc3R5bGU9ImZpbGw6IzBmNTM3NiIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo=\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar commands_1 = require(\"../diagram/commands\");\nvar elements_1 = require(\"../diagram/elements\");\nvar async_1 = require(\"../viewUtils/async\");\nvar events_1 = require(\"../viewUtils/events\");\nvar listElementView_1 = require(\"../widgets/listElementView\");\nvar progressBar_1 = require(\"../widgets/progressBar\");\nvar LinkInToolBox = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkInToolBox, _super);\n    function LinkInToolBox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onPressFilter = function () {\n            if (_this.props.onPressFilter) {\n                _this.props.onPressFilter(_this.props.link);\n            }\n        };\n        _this.changeState = function (state) {\n            var history = _this.props.view.model.history;\n            changeLinkTypeState(history, state, [_this.props.link]);\n        };\n        _this.isChecked = function (stateName) {\n            var curState;\n            if (!_this.props.link.visible) {\n                curState = 'invisible';\n            }\n            else if (!_this.props.link.showLabel) {\n                curState = 'withoutLabels';\n            }\n            else {\n                curState = 'allVisible';\n            }\n            return stateName === curState;\n        };\n        _this.getText = function () {\n            var _a = _this.props, linkType = _a.link, view = _a.view, filterKey = _a.filterKey;\n            var fullText = view.formatLabel(linkType.label, linkType.id);\n            return listElementView_1.highlightSubstring(fullText, filterKey);\n        };\n        return _this;\n    }\n    LinkInToolBox.prototype.render = function () {\n        var _this = this;\n        var newIcon = (this.props.link.isNew ? React.createElement(\"span\", { className: 'linkInToolBox__new-tag' }, \"new\") : '');\n        var countIcon = (this.props.count > 0 ? React.createElement(\"span\", { className: 'ontodia-badge' }, this.props.count) : '');\n        var badgeContainer = (newIcon || countIcon ? React.createElement(\"div\", null,\n            newIcon,\n            countIcon) : '');\n        return (React.createElement(\"li\", { \"data-linktypeid\": this.props.link.id, className: 'ontodia-list-group-item linkInToolBox clearfix' },\n            React.createElement(\"span\", { className: 'ontodia-btn-group ontodia-btn-group-xs', \"data-toggle\": 'buttons' },\n                React.createElement(\"label\", { className: 'ontodia-btn ontodia-btn-default' + (this.isChecked('invisible') ? ' active' : ''), id: 'invisible', title: 'Hide links and labels', onClick: function () { return _this.changeState('invisible'); } },\n                    React.createElement(\"span\", { className: 'fa fa-times', \"aria-hidden\": 'true' })),\n                React.createElement(\"label\", { className: 'ontodia-btn ontodia-btn-default' + (this.isChecked('withoutLabels') ? ' active' : ''), id: 'withoutLabels', title: 'Show links without labels', onClick: function () { return _this.changeState('withoutLabels'); } },\n                    React.createElement(\"span\", { className: 'fa fa-arrows-h', \"aria-hidden\": 'true' })),\n                React.createElement(\"label\", { className: 'ontodia-btn ontodia-btn-default' + (this.isChecked('allVisible') ? ' active' : ''), id: 'allVisible', title: 'Show links with labels', onClick: function () { return _this.changeState('allVisible'); } },\n                    React.createElement(\"span\", { className: 'fa fa-text-width', \"aria-hidden\": 'true' }))),\n            React.createElement(\"div\", { className: 'link-title' }, this.getText()),\n            badgeContainer,\n            React.createElement(\"div\", { className: 'linkInToolBox__filter-button', onClick: this.onPressFilter })));\n    };\n    return LinkInToolBox;\n}(React.Component));\nvar LinkTypesToolboxView = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkTypesToolboxView, _super);\n    function LinkTypesToolboxView(props) {\n        var _this = _super.call(this, props) || this;\n        _this.compareLinks = function (a, b) {\n            var view = _this.props.view;\n            var aText = view.formatLabel(a.label, a.id);\n            var bText = view.formatLabel(b.label, b.id);\n            return aText.localeCompare(bText);\n        };\n        _this.onChangeInput = function (e) {\n            _this.setState({ filterKey: e.currentTarget.value });\n        };\n        _this.onDropFilter = function () {\n            _this.setState({ filterKey: '' });\n        };\n        _this.getLinks = function () {\n            var _a = _this.props, view = _a.view, _b = _a.links, links = _b === void 0 ? [] : _b;\n            return links.filter(function (linkType) {\n                var text = view.formatLabel(linkType.label, linkType.id).toLowerCase();\n                return !_this.state.filterKey || text.indexOf(_this.state.filterKey.toLowerCase()) >= 0;\n            })\n                .sort(_this.compareLinks);\n        };\n        _this.getViews = function (links) {\n            var countMap = _this.props.countMap || {};\n            var views = [];\n            for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n                var link = links_1[_i];\n                views.push(React.createElement(LinkInToolBox, { key: link.id, view: _this.props.view, link: link, onPressFilter: _this.props.filterCallback, count: countMap[link.id] || 0, filterKey: _this.state.filterKey }));\n            }\n            return views;\n        };\n        _this.state = { filterKey: '' };\n        return _this;\n    }\n    LinkTypesToolboxView.prototype.render = function () {\n        var className = 'link-types-toolbox';\n        var _a = this.props, view = _a.view, dataState = _a.dataState, selectedElement = _a.selectedElement;\n        var history = view.model.history;\n        var links = this.getLinks();\n        var views = this.getViews(links);\n        var connectedTo = null;\n        if (selectedElement) {\n            var selectedElementLabel = view.formatLabel(selectedElement.data.label.values, selectedElement.iri);\n            connectedTo = (React.createElement(\"h4\", { className: 'links-heading', style: { display: 'block' } },\n                \"Connected to\",\n                '\\u00A0',\n                React.createElement(\"span\", null, selectedElementLabel)));\n        }\n        var dropButton = null;\n        if (this.state.filterKey) {\n            dropButton = React.createElement(\"button\", { type: 'button', className: className + \"__clearSearch\", onClick: this.onDropFilter },\n                React.createElement(\"span\", { className: 'fa fa-times', \"aria-hidden\": 'true' }));\n        }\n        return (React.createElement(\"div\", { className: className },\n            React.createElement(\"div\", { className: className + \"__heading\" },\n                React.createElement(\"div\", { className: className + \"__searching-box\" },\n                    React.createElement(\"input\", { className: 'search-input ontodia-form-control', type: 'text', value: this.state.filterKey, onChange: this.onChangeInput, placeholder: 'Search for...' }),\n                    dropButton),\n                React.createElement(\"div\", { className: className + \"__switch-all\" },\n                    React.createElement(\"div\", { className: 'ontodia-btn-group ontodia-btn-group-xs' },\n                        React.createElement(\"label\", { className: 'ontodia-btn ontodia-btn-default', title: 'Hide links and labels', onClick: function () { return changeLinkTypeState(history, 'invisible', links); } },\n                            React.createElement(\"span\", { className: 'fa fa-times', \"aria-hidden\": 'true' })),\n                        React.createElement(\"label\", { className: 'ontodia-btn ontodia-btn-default', title: 'Show links without labels', onClick: function () { return changeLinkTypeState(history, 'withoutLabels', links); } },\n                            React.createElement(\"span\", { className: 'fa fa-arrows-h', \"aria-hidden\": 'true' })),\n                        React.createElement(\"label\", { className: 'ontodia-btn ontodia-btn-default', title: 'Show links with labels', onClick: function () { return changeLinkTypeState(history, 'allVisible', links); } },\n                            React.createElement(\"span\", { className: 'fa fa-text-width', \"aria-hidden\": 'true' }))),\n                    React.createElement(\"span\", null, \"\\u00A0Switch all\"))),\n            React.createElement(progressBar_1.ProgressBar, { state: dataState }),\n            React.createElement(\"div\", { className: className + \"__rest\" },\n                connectedTo,\n                React.createElement(\"div\", { className: 'ontodia-scrollable' },\n                    React.createElement(\"ul\", { className: 'ontodia-list-group connected-links' }, views)))));\n    };\n    return LinkTypesToolboxView;\n}(React.Component));\nvar LinkTypesToolbox = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkTypesToolbox, _super);\n    function LinkTypesToolbox(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.listener = new events_1.EventObserver();\n        _this.linkListener = new events_1.EventObserver();\n        _this.debounceSelection = new async_1.Debouncer(50 /* ms */);\n        _this.updateOnCurrentSelection = function () {\n            var editor = _this.props.editor;\n            var single = editor.selection.length === 1 ? editor.selection[0] : null;\n            if (single !== _this.state.selectedElement && single instanceof elements_1.Element) {\n                _this.requestLinksOf(single);\n            }\n        };\n        _this.onLinkChanged = function () {\n            _this.forceUpdate();\n        };\n        _this.onAddToFilter = function (linkType) {\n            var selectedElement = _this.state.selectedElement;\n            selectedElement.addToFilter(linkType);\n        };\n        var _a = _this.props, view = _a.view, editor = _a.editor;\n        _this.listener.listen(view.events, 'changeLanguage', function () { return _this.updateOnCurrentSelection(); });\n        _this.listener.listen(editor.model.events, 'loadingSuccess', function () { return _this.updateOnCurrentSelection(); });\n        _this.listener.listen(editor.events, 'changeSelection', function () {\n            _this.debounceSelection.call(_this.updateOnCurrentSelection);\n        });\n        _this.state = { dataState: progressBar_1.ProgressState.none };\n        return _this;\n    }\n    LinkTypesToolbox.prototype.componentDidMount = function () {\n        this.updateOnCurrentSelection();\n    };\n    LinkTypesToolbox.prototype.componentWillUnmount = function () {\n        this.listener.stopListening();\n        this.linkListener.stopListening();\n        this.debounceSelection.dispose();\n    };\n    LinkTypesToolbox.prototype.requestLinksOf = function (selectedElement) {\n        var _this = this;\n        if (selectedElement) {\n            var request_1 = { elementId: selectedElement.iri };\n            this.currentRequest = request_1;\n            this.setState({ dataState: progressBar_1.ProgressState.loading, selectedElement: selectedElement });\n            this.props.editor.model.dataProvider.linkTypesOf(request_1).then(function (linkTypes) {\n                if (_this.currentRequest !== request_1) {\n                    return;\n                }\n                var _a = _this.computeStateFromRequestResult(linkTypes), linksOfElement = _a.linksOfElement, countMap = _a.countMap;\n                _this.subscribeOnLinksEvents(linksOfElement);\n                _this.setState({ dataState: progressBar_1.ProgressState.completed, linksOfElement: linksOfElement, countMap: countMap });\n            }).catch(function (error) {\n                if (_this.currentRequest !== request_1) {\n                    return;\n                }\n                // tslint:disable-next-line:no-console\n                console.error(error);\n                _this.setState({ dataState: progressBar_1.ProgressState.error, linksOfElement: undefined, countMap: {} });\n            });\n        }\n        else {\n            this.currentRequest = null;\n            this.setState({\n                dataState: progressBar_1.ProgressState.completed,\n                selectedElement: selectedElement,\n                linksOfElement: undefined,\n                countMap: {},\n            });\n        }\n    };\n    LinkTypesToolbox.prototype.computeStateFromRequestResult = function (linkTypes) {\n        var linksOfElement = [];\n        var countMap = {};\n        var model = this.props.editor.model;\n        for (var _i = 0, linkTypes_1 = linkTypes; _i < linkTypes_1.length; _i++) {\n            var linkType = linkTypes_1[_i];\n            var type = model.createLinkType(linkType.id);\n            linksOfElement.push(type);\n            countMap[linkType.id] = linkType.inCount + linkType.outCount;\n        }\n        return { linksOfElement: linksOfElement, countMap: countMap };\n    };\n    LinkTypesToolbox.prototype.subscribeOnLinksEvents = function (linksOfElement) {\n        this.linkListener.stopListening();\n        var listener = this.linkListener;\n        for (var _i = 0, linksOfElement_1 = linksOfElement; _i < linksOfElement_1.length; _i++) {\n            var link = linksOfElement_1[_i];\n            listener.listen(link.events, 'changeLabel', this.onLinkChanged);\n            listener.listen(link.events, 'changeVisibility', this.onLinkChanged);\n        }\n    };\n    LinkTypesToolbox.prototype.render = function () {\n        var view = this.props.view;\n        var _a = this.state, selectedElement = _a.selectedElement, dataState = _a.dataState, linksOfElement = _a.linksOfElement, countMap = _a.countMap;\n        return React.createElement(LinkTypesToolboxView, { view: view, dataState: dataState, links: linksOfElement, countMap: countMap, filterCallback: this.onAddToFilter, selectedElement: selectedElement });\n    };\n    return LinkTypesToolbox;\n}(React.Component));\nexports.LinkTypesToolbox = LinkTypesToolbox;\nfunction changeLinkTypeState(history, state, links) {\n    var batch = history.startBatch();\n    var _a = (state === 'invisible' ? { visible: false, showLabel: false } :\n        state === 'withoutLabels' ? { visible: true, showLabel: false } :\n            state === 'allVisible' ? { visible: true, showLabel: true } :\n                undefined), visible = _a.visible, showLabel = _a.showLabel;\n    for (var _i = 0, links_2 = links; _i < links_2.length; _i++) {\n        var linkType = links_2[_i];\n        history.execute(commands_1.changeLinkTypeVisibility({ linkType: linkType, visible: visible, showLabel: showLabel }));\n    }\n    batch.store();\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar accordion_1 = require(\"../accordion\");\nvar accordionItem_1 = require(\"../accordionItem\");\nvar DEFAULT_HORIZONTAL_COLLAPSED_SIZE = 28;\nvar WorkspaceLayoutType;\n(function (WorkspaceLayoutType) {\n    WorkspaceLayoutType[\"Row\"] = \"row\";\n    WorkspaceLayoutType[\"Column\"] = \"column\";\n    WorkspaceLayoutType[\"Component\"] = \"component\";\n})(WorkspaceLayoutType = exports.WorkspaceLayoutType || (exports.WorkspaceLayoutType = {}));\nvar WorkspaceLayout = /** @class */ (function (_super) {\n    tslib_1.__extends(WorkspaceLayout, _super);\n    function WorkspaceLayout() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WorkspaceLayout.prototype.renderAccordion = function (_a) {\n        var _this = this;\n        var children = _a.children, direction = _a.direction, animationDuration = _a.animationDuration;\n        var _b = this.props, _onStartResize = _b._onStartResize, _onResize = _b._onResize;\n        var items = children.map(function (child, index) {\n            var dockSide;\n            if (direction === 'horizontal' && !child.undocked) {\n                if (index === 0) {\n                    dockSide = accordionItem_1.DockSide.Left;\n                }\n                else if (index === children.length - 1) {\n                    dockSide = accordionItem_1.DockSide.Right;\n                }\n            }\n            var collapsedSize = child.collapsedSize;\n            if (collapsedSize === undefined && direction === 'horizontal') {\n                collapsedSize = DEFAULT_HORIZONTAL_COLLAPSED_SIZE;\n            }\n            return (React.createElement(accordionItem_1.AccordionItem, { key: child.type === WorkspaceLayoutType.Component ? child.id : index, heading: child.type === WorkspaceLayoutType.Component ? child.heading : undefined, dockSide: dockSide, defaultSize: child.defaultSize, defaultCollapsed: child.defaultCollapsed, collapsedSize: collapsedSize, minSize: child.minSize }, _this.renderLayout(child)));\n        });\n        return (React.createElement(accordion_1.Accordion, { direction: direction, onStartResize: _onStartResize, onResize: _onResize, animationDuration: animationDuration }, items));\n    };\n    WorkspaceLayout.prototype.renderLayout = function (layout) {\n        if (layout.type === WorkspaceLayoutType.Row) {\n            return this.renderAccordion({\n                children: layout.children,\n                direction: 'horizontal',\n                animationDuration: layout.animationDuration,\n            });\n        }\n        if (layout.type === WorkspaceLayoutType.Column) {\n            return this.renderAccordion({\n                children: layout.children,\n                direction: 'vertical',\n                animationDuration: layout.animationDuration,\n            });\n        }\n        if (layout.type === WorkspaceLayoutType.Component) {\n            return React.Children.only(layout.content);\n        }\n        return null;\n    };\n    WorkspaceLayout.prototype.render = function () {\n        var layout = this.props.layout;\n        return this.renderLayout(layout);\n    };\n    return WorkspaceLayout;\n}(React.Component));\nexports.WorkspaceLayout = WorkspaceLayout;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar CLASS_NAME = 'ontodia-accordion';\nvar Accordion = /** @class */ (function (_super) {\n    tslib_1.__extends(Accordion, _super);\n    function Accordion(props) {\n        var _this = _super.call(this, props) || this;\n        _this.items = [];\n        _this.isScrollable = false;\n        _this.updateSizes = function () {\n            var children = _this.props.children;\n            var defaultProps = new Map();\n            React.Children.forEach(children, function (child, index) {\n                if (typeof child !== 'object') {\n                    return;\n                }\n                var _a = child.props, defaultSize = _a.defaultSize, defaultCollapsed = _a.defaultCollapsed, collapsedSize = _a.collapsedSize, minSize = _a.minSize;\n                // enables the scrollbar in the accordion if at least one item has min size\n                if (minSize !== undefined) {\n                    _this.isScrollable = true;\n                }\n                defaultProps.set(index, { defaultSize: defaultSize, defaultCollapsed: defaultCollapsed, collapsedSize: collapsedSize, minSize: minSize });\n            });\n            _this.defaultProps = defaultProps;\n            _this.setState(function (_a) {\n                var collapsed = _a.collapsed;\n                var totalSize = _this.clientSize(_this.element.parentElement);\n                var leftSize = totalSize;\n                var leftChildCount = React.Children.count(children);\n                var newCollapsed = [];\n                _this.defaultProps.forEach(function (_a, index) {\n                    var defaultSize = _a.defaultSize, _b = _a.defaultCollapsed, defaultCollapsed = _b === void 0 ? false : _b;\n                    // preserves items collapsed by user\n                    var itemCollapsed = collapsed[index] === undefined\n                        ? defaultCollapsed\n                        : collapsed[index];\n                    // if no expanded items, expands the last one\n                    var isLastItem = index === _this.defaultProps.size - 1;\n                    var noExpandedItems = newCollapsed.findIndex(function (c) { return !c; }) < 0;\n                    if (isLastItem && noExpandedItems) {\n                        itemCollapsed = false;\n                    }\n                    var size = itemCollapsed ? _this.sizeWhenCollapsed(index) : defaultSize;\n                    if (size) {\n                        leftSize = leftSize - size;\n                        leftChildCount = leftChildCount - 1;\n                    }\n                    newCollapsed.push(itemCollapsed);\n                });\n                var newSizes = [];\n                var newPercents = [];\n                _this.defaultProps.forEach(function (_a, index) {\n                    var defaultSize = _a.defaultSize, minSize = _a.minSize;\n                    var size = leftSize / leftChildCount;\n                    var collapsedSize = _this.sizeWhenCollapsed(index);\n                    if (newCollapsed[index]) {\n                        size = collapsedSize;\n                    }\n                    else if (defaultSize !== undefined) {\n                        size = defaultSize;\n                    }\n                    else if (size < minSize) {\n                        size = collapsedSize + minSize;\n                    }\n                    if (size < collapsedSize) {\n                        size = collapsedSize;\n                        newCollapsed[index] = true;\n                    }\n                    var percent = 100 * size / totalSize + \"%\";\n                    newSizes.push(size);\n                    newPercents.push(percent);\n                });\n                return {\n                    sizes: newSizes,\n                    percents: newPercents,\n                    collapsed: newCollapsed,\n                };\n            });\n        };\n        _this.onBeginDragHandle = function (itemIndex) {\n            _this.originTotalSize = _this.clientSize(_this.element);\n            _this.originSizes = _this.computeEffectiveItemSizes();\n            _this.originCollapsed = tslib_1.__spreadArrays(_this.state.collapsed);\n            _this.setState({ resizing: true }, function () {\n                var _a = _this.props, direction = _a.direction, onStartResize = _a.onStartResize;\n                if (onStartResize) {\n                    onStartResize(direction);\n                }\n            });\n        };\n        _this.onEndDragHandle = function () {\n            _this.setState({ resizing: false });\n        };\n        _this.sizeWhenCollapsed = function (index) {\n            var item = _this.items[index];\n            var collapsedSize = _this.defaultProps.get(index).collapsedSize;\n            if (collapsedSize !== undefined) {\n                return collapsedSize;\n            }\n            var headerSize = item.header ? _this.clientSize(item.header) : 0;\n            return headerSize + (_this.offsetSize(item.element) - _this.clientSize(item.element));\n        };\n        _this.onDragHandle = function (itemIndex, dx, dy) {\n            var sizes = tslib_1.__spreadArrays(_this.originSizes);\n            var collapsed = tslib_1.__spreadArrays(_this.originCollapsed);\n            new SizeDistributor(sizes, collapsed, _this.originTotalSize, _this.sizeWhenCollapsed).distribute(itemIndex + 1, _this.isVertical ? dy : dx);\n            var percents = sizes.map(function (size) { return 100 * size / _this.originTotalSize + \"%\"; });\n            _this.setState({ sizes: sizes, percents: percents, collapsed: collapsed });\n        };\n        var childCount = React.Children.count(_this.props.children);\n        _this.state = {\n            collapsed: [],\n            resizing: false,\n            percents: React.Children.map(_this.props.children, function () { return 100 / childCount + \"%\"; }),\n        };\n        return _this;\n    }\n    Accordion.prototype.componentDidMount = function () {\n        this.updateSizes();\n    };\n    Accordion.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var _a = this.props, direction = _a.direction, children = _a.children, onResize = _a.onResize, animationDuration = _a.animationDuration;\n        if (React.Children.count(children) !== React.Children.count(prevProps.children)) {\n            this.updateSizes();\n        }\n        var _b = this.state, sizes = _b.sizes, resizing = _b.resizing;\n        if (sizes !== prevState.sizes && onResize) {\n            if (resizing) {\n                onResize(direction);\n            }\n            else {\n                // triggers the callback after finishing CSS animation\n                setTimeout(function () { return onResize(direction); }, animationDuration);\n            }\n        }\n    };\n    Object.defineProperty(Accordion.prototype, \"isVertical\", {\n        get: function () {\n            return this.props.direction === 'vertical';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Accordion.prototype.clientSize = function (element) {\n        var clientWidth = element.clientWidth, clientHeight = element.clientHeight;\n        return this.isVertical ? clientHeight : clientWidth;\n    };\n    Accordion.prototype.offsetSize = function (element) {\n        var offsetWidth = element.offsetWidth, offsetHeight = element.offsetHeight;\n        return this.isVertical ? offsetHeight : offsetWidth;\n    };\n    Accordion.prototype.render = function () {\n        var _this = this;\n        var direction = this.props.direction;\n        var resizing = this.state.resizing;\n        var resizingClassName = resizing ? CLASS_NAME + \"--resizing\" : '';\n        var scrollableClassName = this.isScrollable ? CLASS_NAME + \"--scrollable\" : '';\n        return (React.createElement(\"div\", { className: CLASS_NAME + \" \" + CLASS_NAME + \"--\" + direction + \" \" + resizingClassName + \" \" + scrollableClassName, ref: function (element) { return _this.element = element; } }, this.renderItems()));\n    };\n    Accordion.prototype.renderItems = function () {\n        var _this = this;\n        var _a = this.state, sizes = _a.sizes, percents = _a.percents, collapsed = _a.collapsed;\n        var _b = this.props, children = _b.children, direction = _b.direction;\n        return React.Children.map(children, function (child, index) {\n            if (typeof child !== 'object') {\n                throw new Error('Accordion should have only AccordionItem elements as children');\n            }\n            var lastChild = index === React.Children.count(children) - 1;\n            var size = collapsed[index] ? sizes[index] : percents[index];\n            var additionalProps = {\n                ref: function (element) { return _this.items[index] = element; },\n                collapsed: collapsed[index],\n                size: size,\n                direction: direction,\n                onChangeCollapsed: function (itemCollapsed) { return _this.onItemChangeCollapsed({ itemIndex: index, itemCollapsed: itemCollapsed }); },\n                onBeginDragHandle: lastChild ? undefined : function () { return _this.onBeginDragHandle(index); },\n                onDragHandle: lastChild ? undefined : function (dx, dy) { return _this.onDragHandle(index, dx, dy); },\n                onEndDragHandle: _this.onEndDragHandle,\n            };\n            return React.cloneElement(child, additionalProps);\n        });\n    };\n    Accordion.prototype.computeEffectiveItemSizes = function () {\n        var _this = this;\n        var sizes = [];\n        this.items.forEach(function (item, index) {\n            if (!item) {\n                return;\n            }\n            if (_this.state.collapsed[index]) {\n                var collapsedSize = _this.sizeWhenCollapsed(index);\n                sizes.push(collapsedSize);\n            }\n            else {\n                sizes.push(_this.offsetSize(item.element));\n            }\n        });\n        return sizes;\n    };\n    Accordion.prototype.onItemChangeCollapsed = function (_a) {\n        var itemIndex = _a.itemIndex, itemCollapsed = _a.itemCollapsed;\n        var totalSize = this.clientSize(this.element);\n        var sizes = this.computeEffectiveItemSizes();\n        if (sizes.length === 1) {\n            return;\n        }\n        var collapsed = tslib_1.__spreadArrays(this.state.collapsed);\n        var effectiveSize = sizes[itemIndex];\n        var collapsedSize = this.sizeWhenCollapsed(itemIndex);\n        var distributor = new SizeDistributor(sizes, collapsed, totalSize, this.sizeWhenCollapsed);\n        if (itemCollapsed) {\n            var splitShift = Math.max(effectiveSize - collapsedSize, 0);\n            sizes[itemIndex] = collapsedSize;\n            if (itemIndex === sizes.length - 1) {\n                distributor.expand(splitShift, itemIndex - 1);\n            }\n            else {\n                distributor.expand(splitShift, itemIndex + 1);\n            }\n        }\n        else {\n            var _b = this.defaultProps.get(itemIndex), defaultSize = _b.defaultSize, minSize = _b.minSize;\n            var shift = (defaultSize || (totalSize / sizes.length)) - collapsedSize;\n            var freeSize = 0;\n            if (itemIndex === sizes.length - 1) {\n                freeSize = distributor.collapseForward({ shift: shift, from: itemIndex - 1, to: itemIndex });\n            }\n            else {\n                freeSize = distributor.collapseForward({ shift: shift, from: itemIndex + 1, to: sizes.length });\n            }\n            freeSize = Math.max(freeSize, distributor.leftoverSize());\n            if (freeSize < shift) {\n                freeSize += distributor.collapseForward({ shift: shift - freeSize, from: 0, to: itemIndex });\n            }\n            if (freeSize < minSize) {\n                freeSize = minSize;\n            }\n            sizes[itemIndex] = Math.round(collapsedSize + freeSize);\n        }\n        collapsed[itemIndex] = itemCollapsed;\n        var percents = sizes.map(function (size) { return 100 * size / totalSize + \"%\"; });\n        this.setState({ sizes: sizes, percents: percents, collapsed: collapsed });\n    };\n    Accordion.defaultProps = {\n        direction: 'vertical',\n        animationDuration: 300,\n    };\n    return Accordion;\n}(React.Component));\nexports.Accordion = Accordion;\nvar SizeDistributor = /** @class */ (function () {\n    function SizeDistributor(sizes, collapsed, totalSize, sizeWhenCollapsed) {\n        this.sizes = sizes;\n        this.collapsed = collapsed;\n        this.totalSize = totalSize;\n        this.sizeWhenCollapsed = sizeWhenCollapsed;\n    }\n    SizeDistributor.prototype.distribute = function (splitIndex, splitShift) {\n        if (splitShift > 0) {\n            var freeSize = this.collapseForward({ shift: splitShift, from: splitIndex, to: this.sizes.length });\n            freeSize = Math.max(freeSize, this.leftoverSize());\n            this.expand(freeSize, splitIndex - 1);\n        }\n        else {\n            var freeSize = this.collapseBackward({ shift: -splitShift, from: 0, to: splitIndex });\n            freeSize = Math.max(freeSize, this.leftoverSize());\n            this.expand(freeSize, splitIndex);\n        }\n    };\n    SizeDistributor.prototype.collapseForward = function (_a) {\n        var shift = _a.shift, from = _a.from, to = _a.to;\n        if (shift <= 0) {\n            return 0;\n        }\n        var shiftLeft = shift;\n        for (var i = from; i < to; i++) {\n            shiftLeft = this.collapse(shiftLeft, i);\n        }\n        return shift - shiftLeft;\n    };\n    SizeDistributor.prototype.collapseBackward = function (_a) {\n        var shift = _a.shift, from = _a.from, to = _a.to;\n        if (shift <= 0) {\n            return 0;\n        }\n        var shiftLeft = shift;\n        for (var i = to - 1; i >= from; i--) {\n            shiftLeft = this.collapse(shiftLeft, i);\n        }\n        return shift - shiftLeft;\n    };\n    SizeDistributor.prototype.collapse = function (shift, index) {\n        if (this.collapsed[index]) {\n            return shift;\n        }\n        var size = this.sizes[index];\n        var collapsedSize = this.sizeWhenCollapsed(index);\n        var newSize = Math.round(Math.max(size - shift, collapsedSize));\n        this.sizes[index] = newSize;\n        this.collapsed[index] = newSize <= collapsedSize;\n        return shift - (size - newSize);\n    };\n    SizeDistributor.prototype.expand = function (shift, index) {\n        if (shift <= 0) {\n            return 0;\n        }\n        var oldSize = this.sizes[index];\n        var newSize = Math.round(oldSize + shift);\n        this.sizes[index] = newSize;\n        this.collapsed[index] = newSize <= this.sizeWhenCollapsed(index);\n        return newSize - oldSize;\n    };\n    SizeDistributor.prototype.leftoverSize = function () {\n        var sizeSum = this.sizes.reduce(function (sum, size) { return sum + size; }, 0);\n        return Math.max(this.totalSize - sizeSum, 0);\n    };\n    return SizeDistributor;\n}());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar React = require(\"react\");\nvar draggableHandle_1 = require(\"./draggableHandle\");\nvar DockSide;\n(function (DockSide) {\n    DockSide[DockSide[\"Left\"] = 1] = \"Left\";\n    DockSide[DockSide[\"Right\"] = 2] = \"Right\";\n})(DockSide = exports.DockSide || (exports.DockSide = {}));\nvar CLASS_NAME = 'ontodia-accordion-item';\nvar AccordionItem = /** @class */ (function (_super) {\n    tslib_1.__extends(AccordionItem, _super);\n    function AccordionItem(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            resizing: false,\n        };\n        return _this;\n    }\n    Object.defineProperty(AccordionItem.prototype, \"element\", {\n        get: function () { return this._element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccordionItem.prototype, \"header\", {\n        get: function () { return this._header; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AccordionItem.prototype, \"isVertical\", {\n        get: function () {\n            return this.props.direction === 'vertical';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AccordionItem.prototype.renderToggleButton = function () {\n        var _a = this.props, collapsed = _a.collapsed, dockSide = _a.dockSide, onChangeCollapsed = _a.onChangeCollapsed;\n        if (!dockSide) {\n            return null;\n        }\n        var side = dockSide === DockSide.Left ? 'left' : 'right';\n        return React.createElement(\"div\", { className: CLASS_NAME + \"__handle-btn \" + CLASS_NAME + \"__handle-btn-\" + side, onClick: function () { return onChangeCollapsed(!collapsed); } });\n    };\n    AccordionItem.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, heading = _a.heading, bodyClassName = _a.bodyClassName, children = _a.children, bodyRef = _a.bodyRef, collapsed = _a.collapsed, size = _a.size, direction = _a.direction, onBeginDragHandle = _a.onBeginDragHandle, onDragHandle = _a.onDragHandle, onEndDragHandle = _a.onEndDragHandle, dockSide = _a.dockSide;\n        var resizing = this.state.resizing;\n        var shouldRenderHandle = onBeginDragHandle && onDragHandle && onEndDragHandle;\n        var style = this.isVertical ? { height: size } : { width: size };\n        // unmount child component when the accordion item is collapsed and has dockSide\n        var isMounted = !(collapsed && dockSide);\n        return React.createElement(\"div\", { className: CLASS_NAME + \" \" + CLASS_NAME + \"--\" + (collapsed ? 'collapsed' : 'expanded') + \" \" + CLASS_NAME + \"--\" + direction + \"\\n                \" + (resizing ? CLASS_NAME + \"--resizing\" : ''), ref: function (element) { return _this._element = element; }, style: style },\n            React.createElement(\"div\", { className: CLASS_NAME + \"__inner\" },\n                heading ? React.createElement(\"div\", { className: CLASS_NAME + \"__header\", ref: function (header) { return _this._header = header; }, onClick: function () { return _this.props.onChangeCollapsed(!collapsed); } }, heading) : null,\n                React.createElement(\"div\", { className: CLASS_NAME + \"__body\" }, children && isMounted ? children :\n                    React.createElement(\"div\", { ref: bodyRef, className: \"\" + (bodyClassName || '') }))),\n            shouldRenderHandle ? (React.createElement(draggableHandle_1.DraggableHandle, { className: CLASS_NAME + \"__handle \" + CLASS_NAME + \"__handle-\" + direction, onBeginDragHandle: function (e) {\n                    _this.setState({ resizing: true });\n                    onBeginDragHandle();\n                }, onDragHandle: function (e, x, y) { return onDragHandle(x, y); }, onEndDragHandle: function (e) {\n                    _this.setState({ resizing: false });\n                    onEndDragHandle();\n                } })) : null,\n            this.renderToggleButton());\n    };\n    AccordionItem.defaultProps = {\n        direction: 'vertical',\n    };\n    return AccordionItem;\n}(React.Component));\nexports.AccordionItem = AccordionItem;\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICB3aWR0aD0iMjYyIiBoZWlnaHQ9IjEzOSIgdmlld0JveD0iMCAwIDE5Ni41IDEwNC4yNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTtjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQjtmaWxsOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3N0cm9rZS1taXRlcmxpbWl0OjMiPgogICAgPHN0eWxlPgogICAgICAuc3R5bGUxIHsKICAgICAgICBmaWxsOiMwMDU0OTM7c3Ryb2tlOiMwMDU0OTM7c3Ryb2tlLXdpZHRoOjA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjM7c3Ryb2tlLWRhc2hhcnJheTpub25lCiAgICAgIH0KICAgICAgLnN0eWxlMiB7CiAgICAgICAgZmlsbDojZmZmZmZmO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoyLjE3MDk4MDY5O3N0cm9rZS1taXRlcmxpbWl0OjM7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjAuOTkwODI1NwogICAgICB9CiAgICAgIC5zdHlsZTMgewogICAgICAgIGZpbGw6IzAwMGUyNjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC40NjQwMzA2OAogICAgICB9CiAgICA8L3N0eWxlPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwyNy43NSkiPgogICAgICAgIDxnIGlkPSJnODY3Ij4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4wNTgzMywwLDAsMS4wNTgzMywxMjAuNzQ5NzIsLTUuNzM3MjY2MSkiIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3N0cm9rZS1taXRlcmxpbWl0OjMiPgogICAgICAgICAgICAgICAgPHBhdGggY2xhc3M9InN0eWxlMSIgZD0iTSA3MC44NjYyMDMsNDEuNTYyODAxIEEgMzUuNDMzMTAyLDM1LjQzMzEwMiAwIDAgMSAzNS40MzMxMDIsNzYuOTk1OTAzIDM1LjQzMzEwMiwzNS40MzMxMDIgMCAwIDEgMCw0MS41NjI4MDEgMzUuNDMzMTAyLDM1LjQzMzEwMiAwIDAgMSAzNS40MzMxMDIsNi4xMjk2OTk3IDM1LjQzMzEwMiwzNS40MzMxMDIgMCAwIDEgNzAuODY2MjAzLDQxLjU2MjgwMSBaIi8+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMC45MjAxNTkzOSwwLDAsMS4wODA1MDg5LDM4LjM2NjgyMywtNy41Nzc4MjY4KSIKICAgICAgICAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbWl0ZXJsaW1pdDozIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0gMCw3LjgzMDUyMDIgSCAxMzAuMTU4IFYgNzYuOTk1OTE4IEggMCBaIgogICAgICAgICAgICAgICAgICBzdHlsZT0iZmlsbDojMDA1NDkzO3N0cm9rZTojMDA1NDkzO3N0cm9rZS13aWR0aDowLjI1O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utb3BhY2l0eTowLjk1OTk5OTk1IiAvPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEuMDU4MzMsMCwwLDEuMDU4MzMsMC43NDk5OTg3OSwtNS43MzcyNjYxKSIgCiAgICAgICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLW1pdGVybGltaXQ6MyI+CiAgICAgICAgICAgICAgICA8cGF0aCBjbGFzcz0ic3R5bGUxIiBkPSJNIDcwLjg2NjIwMyw0MS41NjI4MDEgQSAzNS40MzMxMDIsMzUuNDMzMTAyIDAgMCAxIDM1LjQzMzEwMiw3Ni45OTU5MDMgMzUuNDMzMTAyLDM1LjQzMzEwMiAwIDAgMSAwLDQxLjU2MjgwMSAzNS40MzMxMDIsMzUuNDMzMTAyIDAgMCAxIDM1LjQzMzEwMiw2LjEyOTY5OTcgMzUuNDMzMTAyLDM1LjQzMzEwMiAwIDAgMSA3MC44NjYyMDMsNDEuNTYyODAxIFoiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8Y2lyY2xlIGN5PSIzOC4yNDk5MTIiIGN4PSIzOC4yNDk5MDgiIHI9IjMzLjc0OTkyIgogICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOiMwMDU0OTM7c3Ryb2tlLXdpZHRoOjA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjM7c3Ryb2tlLWRhc2hhcnJheTpub25lIi8+CiAgICAgICAgPC9nPgogICAgICAgIDxnIGFyaWEtbGFiZWw9Im50b2RpYSIgdHJhbnNmb3JtPSJzY2FsZSgwLjk4NDgwNDE3LDEuMDE1NDMwMykiIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXZhcmlhbnQ6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXN0cmV0Y2g6bm9ybWFsO2ZvbnQtc2l6ZTo1Ni4yOTc2NTMycHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTonVHcgQ2VuIE1UIENvbmRlbnNlZCc7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonVHcgQ2VuIE1UIENvbmRlbnNlZCwgTm9ybWFsJztmb250LXZhcmlhbnQtbGlnYXR1cmVzOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtZmVhdHVyZS1zZXR0aW5nczpub3JtYWw7dGV4dC1hbGlnbjpzdGFydDtsZXR0ZXItc3BhY2luZzowcHg7d29yZC1zcGFjaW5nOjBweDt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoyLjE3MDk4MDY5O3N0cm9rZS1taXRlcmxpbWl0OjM7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjAuOTkwODI1NyI+CiAgICAgICAgICAgIDxwYXRoIGNsYXNzPSJzdHlsZTIiIGQ9Im0gODUuOTk4OTg4LDI2LjQyNjYzNCB2IDIuMzA5MDg0IGggMC4xMDk5NTYgcSAxLjczMTgxMiwtMi42Mzg5NTMgNC42NzMxNDUsLTIuNjM4OTUzIDUuMjIyOTI3LDAgNS4yMjI5MjcsNS42OTAyNDIgViA1MC41MzQ1NjUgSCA5MS41NTE3ODMgViAzMy4wNzg5OTQgcSAwLC0zLjU0NjA5MyAtMi44MDM4ODcsLTMuNTQ2MDkzIC0xLjI5MTk4NywwIC0yLjA2MTY4MSwwLjk2MjExOCAtMC43NDIyMDYsMC45MzQ2MjkgLTAuNzQyMjA2LDIuNTgzOTc1IHYgMTcuNDU1NTcxIGggLTQuNTA4MjEgViAyNi40MjY2MzQgWiIvPgogICAgICAgICAgICA8cGF0aCBjbGFzcz0ic3R5bGUyIiBkPSJtIDExMC42NTY3LDMwLjA1NTE5NCBoIC0yLjkxMzg0IHYgMjAuNDc5MzcxIGggLTQuNTA4MjEgViAzMC4wNTUxOTQgaCAtMi44ODYzNiB2IC0zLjU0NjA5MiBoIDIuODg2MzYgdiAtNi41NDI0MDMgaCA0LjUwODIxIHYgNi41NDI0MDMgaCAyLjkxMzg0IHoiLz4KICAgICAgICAgICAgPHBhdGggY2xhc3M9InN0eWxlMiIgZD0ibSAxMjIuMjI5NjEsMjYuMDk2NzY1IHEgMy40MzYxMywwIDUuNTI1MywyLjYxMTQ2NCAyLjA4OTE3LDIuNjExNDYzIDIuMDg5MTcsMTAuMTE1OTg0IDAsNy4wMzcyMDcgLTIuMTk5MTIsOS41Mzg3MTQgLTIuMTcxNjQsMi41MDE1MDcgLTUuMzYwMzgsMi41MDE1MDcgLTMuOTg1OTEsMCAtNS45MTAxNSwtMi45OTYzMTEgLTEuOTI0MjQsLTIuOTk2MzEgLTEuOTI0MjQsLTkuMjA4ODQ0IDAsLTcuNjE0NDc4IDIuMTk5MTMsLTEwLjA4ODQ5NiAyLjE5OTEzLC0yLjQ3NDAxOCA1LjQ3MDMzLC0yLjQ3NDAxOCB6IG0gMi44MzEzNywxMy44NTQ1MDEgcSAwLC02LjEzMDA2NyAtMC41NzcyNywtOC4xMzY3NyAtMC41NzcyNywtMi4wMDY3MDQgLTIuMzA5MDgsLTIuMDA2NzA0IC0xLjY0OTM1LDAgLTIuMjU0MTEsMS41NjY4NzggLTAuNjA0NzYsMS41NjY4NzggLTAuNjA0NzYsNS4zMDUzOTQgMCw3LjI4NDYwOSAwLjY1OTc0LDguOTA2NDY1IDAuNjg3MjMsMS42MjE4NTYgMi4yNTQxMSwxLjYyMTg1NiAxLjY3NjgzLDAgMi4yNTQxLC0xLjYyMTg1NiAwLjU3NzI3LC0xLjY0OTM0NSAwLjU3NzI3LC01LjYzNTI2MyB6Ii8+CiAgICAgICAgICAgIDxwYXRoIGNsYXNzPSJzdHlsZTIiIGQ9Im0gMTQ1LjczMjc4LDE0LjI3NjQ1NyBoIDQuNDgwNzIgdiAzNi4yNTgxMDggaCAtNC40MjU3NCB2IC0zLjIxNjIyMyBoIC0wLjEwOTk2IHEgLTEuNjIxODYsMy41NDYwOTIgLTQuNjE4MTcsMy41NDYwOTIgLTEuNzU5MywwIC0zLjI0MzcxLC0xLjE4MjAzMSAtMS40NTY5MiwtMS4xODIwMzEgLTIuMDM0MTksLTMuMjk4NjkgLTAuNTc3MjcsLTIuMTE2NjYgLTAuNTc3MjcsLTcuMDY0Njk2IDAsLTUuNjM1MjYzIDAuNDk0OCwtOC4wNTQzMDMgMC40OTQ4LC0yLjQ0NjUyOSAxLjg5Njc1LC0zLjc5MzQ5NCAxLjQwMTk0LC0xLjM3NDQ1NSAzLjU3MzU4LC0xLjM3NDQ1NSAyLjgzMTM4LDAgNC40NTMyMywzLjIxNjIyNCBoIDAuMTA5OTYgeiBtIDAuMDU1LDIzLjg2MDUyOSBxIDAsLTQuNDUzMjMyIC0wLjU3NzI3LC02LjI5NTAwMSAtMC41NDk3OSwtMS44NjkyNTggLTIuMjU0MTEsLTEuODY5MjU4IC0xLjcwNDMyLDAgLTIuMzM2NTcsMS45NTE3MjUgLTAuNjMyMjUsMS45NTE3MjUgLTAuNjMyMjUsNi40NTk5MzYgMCw0LjY3MzE0NSAwLjU3NzI3LDYuNjc5ODQ4IDAuNjA0NzYsMS45NzkyMTUgMi4yODE1OSwxLjk3OTIxNSAxLjY0OTM1LDAgMi4yODE2LC0yLjA2MTY4MiAwLjY1OTc0LC0yLjA4OTE3MSAwLjY1OTc0LC02Ljg0NDc4MyB6Ii8+CiAgICAgICAgICAgIDxwYXRoIGNsYXNzPSJzdHlsZTIiIGQ9Im0gMTU1Ljk4NjIxLDE5LjE2OTUxNSBxIDAsLTAuOTg5NjA3IDAuNzE0NzEsLTEuNzMxODEzIDAuNzQyMjEsLTAuNzQyMjA1IDEuNzU5MywtMC43NDIyMDUgMS4wMTcxLDAgMS43MzE4MiwwLjc0MjIwNSAwLjc0MjIsMC43NDIyMDYgMC43NDIyLDEuNzMxODEzIDAsMS4wMTcwOTYgLTAuNzQyMiwxLjc1OTMwMiAtMC43MTQ3MiwwLjcxNDcxNiAtMS43MzE4MiwwLjcxNDcxNiAtMS4wNDQ1OCwwIC0xLjc1OTMsLTAuNzE0NzE2IC0wLjcxNDcxLC0wLjc0MjIwNiAtMC43MTQ3MSwtMS43NTkzMDIgeiBtIDAuMjE5OTEsNy4zMzk1ODcgaCA0LjQ1MzIzIHYgMjQuMDI1NDYzIGggLTQuNDUzMjMgeiIvPgogICAgICAgICAgICA8cGF0aCBjbGFzcz0ic3R5bGUyIiBkPSJtIDE4MS4yMjExOSw1MC41MzQ1NjUgaCAtNC40ODA3MiB2IC0yLjkxMzg0MyBoIC0wLjEzNzQ1IHEgLTEuNzMxODEsMy4yNDM3MTIgLTQuNDgwNzIsMy4yNDM3MTIgLTIuMzM2NTcsMCAtNC4xMjMzNiwtMi4xNzE2MzggLTEuNzg2NzksLTIuMTk5MTI3IC0xLjc4Njc5LC05LjgxMzYwNSAwLC02Ljc2MjMxNSAxLjM0Njk2LC05LjczMTEzNyAxLjM0Njk3LC0yLjk5NjMxMSA0LjYxODE3LC0yLjk5NjMxMSAxLjUzOTM5LDAgMi40NzQwMiwwLjcxNDcxNyAwLjk2MjExLDAuNzE0NzE2IDEuOTUxNzIsMi4yODE1OTQgaCAwLjEzNzQ1IHYgLTIuNjM4OTUyIGggNC40ODA3MiB6IG0gLTcuMzY3MDgsLTMuNjAxMDcxIHEgMS43MzE4MiwwIDIuMzA5MDksLTIuMDYxNjgxIDAuNTc3MjcsLTIuMDYxNjgyIDAuNTc3MjcsLTcuMDA5NzE4IDAsLTQuMzQzMjc2IC0wLjUyMjMsLTYuMTAyNTc3IC0wLjUyMjI5LC0xLjc4Njc5MSAtMi4xOTkxMiwtMS43ODY3OTEgLTEuNjc2ODQsMCAtMi4zMzY1OCwxLjY0OTM0NSAtMC42MzIyNCwxLjY0OTM0NSAtMC42MzIyNCw1Ljk2NTEzMiAwLDUuMDg1NDgyIDAuNDk0OCw3LjIyOTYzMSAwLjUyMjI5LDIuMTE2NjU5IDIuMzA5MDgsMi4xMTY2NTkgeiIvPgogICAgICAgIDwvZz4KICAgIDxnIGFyaWEtbGFiZWw9InBvd2VyZWQgYnkiIHRyYW5zZm9ybT0ibWF0cml4KDEuNjk3NzQ5NSwwLDAsMS41NTIyMjgsLTU5LjE1MTkxOSwwLjE0OTk5OTc3KSIgc3R5bGU9ImZpbGw6IzAwMGUyNjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC40NjQwMzA2OCI+CiAgICAgIDxwYXRoIGNsYXNzPSJzdHlsZTMiIGQ9Im0gNjUuODc5MzM5LC0xMi4xMDQ2NzQgcSAwLjM2MjUyNCwtMC41MTY1OTcgMC42OTc4NTksLTAuNzUyMjM3IDAuMzQ0Mzk4LC0wLjIzNTY0MSAwLjgwNjYxNiwtMC4yMzU2NDEgMS4wNjAzODIsMCAxLjUwNDQ3NCwwLjk0MjU2MiAwLjQ0NDA5MiwwLjk0MjU2MiAwLjQ0NDA5MiwzLjA3MjM5MDYgMCwyLjQwMTcyMTEgLTAuNDcxMjgxLDMuMjgwODQxNyAtMC40NjIyMTgsMC44NzAwNTc1IC0xLjQ1OTE1OSwwLjg3MDA1NzUgLTAuNDM1MDI5LDAgLTAuNzM0MTExLC0wLjE5MDMyNTEgLTAuMjk5MDgyLC0wLjE5OTM4ODIgLTAuNzUyMjM3LC0wLjgwNjYxNTggaCAtMC4wMzYyNSB2IDQuMzc3NDc2NiBIIDY0LjM5Mjk5MSBWIC0xMi45NzQ3MzIgaCAxLjQ1MDA5NiB2IDAuODcwMDU4IHogbSAwLjg4ODE4NCw1LjkwMDA3NjkgcSAwLjUzNDcyMywwIDAuNzYxMywtMC42MTYyOTA3IDAuMjI2NTc4LC0wLjYyNTM1MzggMC4yMjY1NzgsLTIuMDIxMDcxIDAsLTEuNjIyMjk0MiAtMC4yMDg0NTEsLTIuMzAyMDI3MiAtMC4yMDg0NTIsLTAuNjg4Nzk1IC0wLjc3OTQyNywtMC42ODg3OTUgLTAuNTI1NjYsMCAtMC43MTU5ODUsMC41NzA5NzUgLTAuMTkwMzI1LDAuNTYxOTEyIC0wLjE5MDMyNSwxLjkyMTM3NjcgMCwxLjY4NTczNjQgMC4xNDUwMSwyLjQxMDc4NDMgMC4xNTQwNzMsMC43MjUwNDc5IDAuNzYxMywwLjcyNTA0NzkgeiIvPgogICAgICA8cGF0aCBkPSJtIDczLjQ5MjM0MiwtMTMuMTEwNjc4IHEgMS4xMzI4ODgsMCAxLjgyMTY4MywwLjg2MDk5NCAwLjY4ODc5NiwwLjg2MDk5NCAwLjY4ODc5NiwzLjMzNTIyMDQgMCwyLjMyMDE1MzIgLTAuNzI1MDQ4LDMuMTQ0ODk1MiAtMC43MTU5ODUsMC44MjQ3NDIgLTEuNzY3MzA1LDAuODI0NzQyIC0xLjMxNDE0OSwwIC0xLjk0ODU2NiwtMC45ODc4Nzc4IC0wLjYzNDQxNywtMC45ODc4Nzc3IC0wLjYzNDQxNywtMy4wMzYxMzggMCwtMi41MTA0Nzg4IDAuNzI1MDQ4LC0zLjMyNjE1NjggMC43MjUwNDgsLTAuODE1Njc5IDEuODAzNTU3LC0wLjgxNTY3OSB6IG0gMC45MzM0OTksNC41Njc4MDE0IHEgMCwtMi4wMjEwNzE0IC0wLjE5MDMyNSwtMi42ODI2Nzc0IC0wLjE5MDMyNSwtMC42NjE2MDYgLTAuNzYxMywtMC42NjE2MDYgLTAuNTQzNzg2LDAgLTAuNzQzMTc0LDAuNTE2NTk3IC0wLjE5OTM4OCwwLjUxNjU5NiAtMC4xOTkzODgsMS43NDkxNzc3IDAsMi40MDE3MjExIDAuMjE3NTE0LDIuOTM2NDQzOSAwLjIyNjU3OCwwLjUzNDcyMjggMC43NDMxNzQsMC41MzQ3MjI4IDAuNTUyODQ5LDAgMC43NDMxNzQsLTAuNTM0NzIyOCAwLjE5MDMyNSwtMC41NDM3ODU5IDAuMTkwMzI1LC0xLjg1NzkzNTIgeiIvPgogICAgICA8cGF0aCBjbGFzcz0ic3R5bGUzIiBkPSJtIDg1LjA3NDk4MiwtMTIuOTc0NzMyIC0xLjk0ODU2Niw3LjkyMTE0ODQgSCA4Mi4wODQxNiBsIC0wLjk3ODgxNSwtNC44NDg3NTc4IGggLTAuMDM2MjUgbCAtMC45ODc4NzgsNC44NDg3NTc4IEggNzkuMTAyNCBsIC0xLjk2NjY5MiwtNy45MjExNDg0IGggMS4zNjg1MjggbCAxLjExNDc2MSw1LjI4Mzc4NjcgaCAwLjAzNjI1IGwgMS4wNjAzODMsLTUuMjgzNzg2NyBoIDAuNzYxMyBsIDEuMTE0NzYxLDUuMzAxOTEyOSBoIDAuMDM2MjUgbCAxLjA1MTMyLC01LjMwMTkxMjkgeiIvPgogICAgICA8cGF0aCBjbGFzcz0ic3R5bGUzIiBkPSJtIDkwLjk2NTk5NiwtOC43NTEzMjc4IGggLTMuMzM1MjIgcSAwLDEuMjg2OTYgMC4xNzIxOTgsMS45NDg1NjYyIDAuMTgxMjYyLDAuNjUyNTQzIDAuODQyODY5LDAuNjUyNTQzIDAuNTA3NTMzLDAgMC42ODg3OTUsLTAuMzgwNjUwMSAwLjE4MTI2MiwtMC4zODA2NTAxIDAuMTkwMzI1LC0xLjE5NjMyOSBoIDEuMzUwNDAyIHEgLTAuMDYzNDQsMi43ODIzNzEzIC0yLjM1NjQwNiwyLjc4MjM3MTMgLTIuNDY1MTYzLDAgLTIuNDY1MTYzLC0zLjg5NzEzMjQgMCwtNC4yNTA1OTMyIDIuNTU1Nzk0LC00LjI1MDU5MzIgMC45Njk3NTIsMCAxLjY1ODU0NywwLjczNDExMSAwLjY5Nzg1OSwwLjczNDExMSAwLjY5Nzg1OSwzLjAzNjEzNzkgeiBtIC0xLjQ5NTQxMSwtMS4xNTEwMTM2IHEgMCwtMS4xNzgyMDI2IC0wLjE5MDMyNSwtMS42ODU3MzY2IC0wLjE5MDMyNiwtMC41MTY1OTYgLTAuNjg4Nzk2LC0wLjUxNjU5NiAtMC41ODkxMDEsMCAtMC43Nzk0MjYsMC41NDM3ODYgLTAuMTgxMjYyLDAuNTM0NzIyIC0wLjE4MTI2MiwxLjY1ODU0NjYgeiIvPgogICAgICA8cGF0aCBjbGFzcz0ic3R5bGUzIiBkPSJtIDk2LjI4NjAzNCwtMTEuODA1NTkyIHEgLTEuMDI0MTMsMC4wMjcxOSAtMS40NTkxNTksMC4zODk3MTMgLTAuNDM1MDI5LDAuMzYyNTI0IC0wLjQzNTAyOSwxLjYxMzIzMTcgdiA0Ljc0OTA2MzcgaCAtMS41MDQ0NzQgdiAtNy45MjExNDg0IGggMS41MDQ0NzQgdiAxLjE2OTE0IGggMC4wMzYyNSBxIDAuNjUyNTQzLC0xLjI4Njk2IDEuNzU4MjQxLC0xLjI4Njk2IGwgMC4wOTk2OSwwLjAxODEzIHoiLz4KICAgICAgPHBhdGggY2xhc3M9InN0eWxlMyIgZD0ibSAxMDIuMzQ5MjUsLTguNzUxMzI3OCBoIC0zLjMzNTIyMSBxIDAsMS4yODY5NiAwLjE3MjE5OSwxLjk0ODU2NjIgMC4xODEyNjIsMC42NTI1NDMgMC44NDI4NzIsMC42NTI1NDMgMC41MDc1MywwIDAuNjg4NzksLTAuMzgwNjUwMSAwLjE4MTI2LC0wLjM4MDY1MDEgMC4xOTAzMywtMS4xOTYzMjkgaCAxLjM1MDQgcSAtMC4wNjM0LDIuNzgyMzcxMyAtMi4zNTY0MDgsMi43ODIzNzEzIC0yLjQ2NTE2MiwwIC0yLjQ2NTE2MiwtMy44OTcxMzI0IDAsLTQuMjUwNTkzMiAyLjU1NTc5MywtNC4yNTA1OTMyIDAuOTY5NzQ3LDAgMS42NTg1NDcsMC43MzQxMTEgMC42OTc4NiwwLjczNDExMSAwLjY5Nzg2LDMuMDM2MTM3OSB6IG0gLTEuNDk1NDEsLTEuMTUxMDEzNiBxIDAsLTEuMTc4MjAyNiAtMC4xOTAzMywtMS42ODU3MzY2IC0wLjE5MDMyLC0wLjUxNjU5NiAtMC42ODg3OTMsLTAuNTE2NTk2IC0wLjU4OTEwMSwwIC0wLjc3OTQyNiwwLjU0Mzc4NiAtMC4xODEyNjIsMC41MzQ3MjIgLTAuMTgxMjYyLDEuNjU4NTQ2NiB6Ii8+CiAgICAgIDxwYXRoIGNsYXNzPSJzdHlsZTMiIGQ9Im0gMTA3LjY2OTI5LC0xNy4wMDc4MTEgaCAxLjQ3NzI4IHYgMTEuOTU0MjI3NCBoIC0xLjQ1OTE2IHYgLTEuMDYwMzgyNiBoIC0wLjAzNjIgcSAtMC41MzQ3MiwxLjE2OTEzOTggLTEuNTIyNiwxLjE2OTEzOTggLTAuNTgwMDQsMCAtMS4wNjk0NSwtMC4zODk3MTMzIC0wLjQ4MDM0LC0wLjM4OTcxMzIgLTAuNjcwNjcsLTEuMDg3NTcxOCAtMC4xOTAzMiwtMC42OTc4NTg2IC0wLjE5MDMyLC0yLjMyOTIxNjMgMCwtMS44NTc5MzUyIDAuMTYzMTMsLTIuNjU1NDg4MiAwLjE2MzE0LC0wLjgwNjYxNSAwLjYyNTM2LC0xLjI1MDcwNyAwLjQ2MjIyLC0wLjQ1MzE1NSAxLjE3ODIsLTAuNDUzMTU1IDAuOTMzNSwwIDEuNDY4MjIsMS4wNjAzODIgaCAwLjAzNjMgeiBtIDAuMDE4MSw3Ljg2Njc2OTkgcSAwLC0xLjQ2ODIyMTkgLTAuMTkwMzIsLTIuMDc1NDQ5OSAtMC4xODEyNywtMC42MTYyOSAtMC43NDMxOCwtMC42MTYyOSAtMC41NjE5MSwwIC0wLjc3MDM2LDAuNjQzNDggLTAuMjA4NDUsMC42NDM0OCAtMC4yMDg0NSwyLjEyOTgyNzggMCwxLjU0MDcyNjggMC4xOTAzMiwyLjIwMjMzMyAwLjE5OTM5LDAuNjUyNTQzMSAwLjc1MjI0LDAuNjUyNTQzMSAwLjU0Mzc5LDAgMC43NTIyNCwtMC42Nzk3MzI0IDAuMjE3NTEsLTAuNjg4Nzk1NSAwLjIxNzUxLC0yLjI1NjcxMTYgeiIvPgogICAgICA8cGF0aCBjbGFzcz0ic3R5bGUzIiBkPSJtIDExNC40NzU2NywtMTcuMDA3ODExIGggMS40ODYzNSB2IDUuMDg0Mzk5IGggMC4wMzYzIHEgMC40MTY5LC0xLjE4NzI2NiAxLjU0MDcyLC0xLjE4NzI2NiAwLjgzMzgxLDAgMS4zNjg1MywwLjc3OTQyNiAwLjU0Mzc5LDAuNzc5NDI3IDAuNTQzNzksMy4wMDg5NDg5IDAsMi43MTg5Mjk2IC0wLjQ4MDM1LDMuNTQzNjcxNiAtMC40ODAzNCwwLjgxNTY3ODkgLTEuNDg2MzUsMC44MTU2Nzg5IC0wLjk2MDY4LDAgLTEuNTA0NDcsLTEuMTg3MjY2IGggLTAuMDM2MiB2IDEuMDk2NjM1IGggLTEuNDY4MjMgeiBtIDMuMzk4NjcsOC4yNzQ2MDk0IHEgMCwtMS42ODU3MzY0IC0wLjE5OTM5LC0yLjQwMTcyMTQgLTAuMTkwMzMsLTAuNzE1OTg1IC0wLjc4ODQ5LC0wLjcxNTk4NSAtMC41MDc1MywwIC0wLjcyNTA1LDAuNTgwMDM5IC0wLjIxNzUxLDAuNTgwMDM4IC0wLjIxNzUxLDEuODU3OTM1IDAsMS43MzEwNTE4IDAuMTk5MzgsMi40NjUxNjI4IDAuMjA4NDYsMC43MjUwNDc5IDAuNzc5NDMsMC43MjUwNDc5IDAuNTE2NiwwIDAuNzM0MTEsLTAuNTg5MTAxNCAwLjIxNzUyLC0wLjU5ODE2NDYgMC4yMTc1MiwtMS45MjEzNzY5IHoiLz4KICAgICAgPHBhdGggY2xhc3M9InN0eWxlMyIgZD0ibSAxMjYuMjM5NTcsLTEyLjk3NDczMiAtMy42OTc3NCwxMS40Mjg1Njc1IGggLTEuMjk2MDIgbCAxLjI5NjAyLC00LjIxNDM0MDggLTIuMTQ3OTUsLTcuMjE0MjI2NyBoIDEuNDc3MjggbCAxLjMwNTA5LDUuNDU1OTg1NiBoIDAuMDM2MyBsIDEuNjEzMjMsLTUuNDU1OTg1NiB6Ii8+CiAgICA8L2cKICA+PC9nPgo8L3N2Zz4=\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar defaultLinkStyles_1 = require(\"./ontodia/customization/defaultLinkStyles\");\nexports.LINK_SHOW_IRI = defaultLinkStyles_1.LINK_SHOW_IRI;\nvar schema_1 = require(\"./ontodia/data/schema\");\nexports.TemplateProperties = schema_1.TemplateProperties;\ntslib_1.__exportStar(require(\"./ontodia/diagram/paper\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/diagram/paperArea\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/viewUtils/async\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/viewUtils/collections\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/viewUtils/keyedObserver\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/viewUtils/spinner\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/widgets/listElementView\"), exports);\ntslib_1.__exportStar(require(\"./ontodia/widgets/searchResults\"), exports);\nvar workspaceContext_1 = require(\"./ontodia/workspace/workspaceContext\");\nexports.WorkspaceContextTypes = workspaceContext_1.WorkspaceContextTypes;\nvar layout_1 = require(\"./ontodia/viewUtils/layout\");\nexports.groupForceLayout = layout_1.groupForceLayout;\nexports.groupRemoveOverlaps = layout_1.groupRemoveOverlaps;\nexports.padded = layout_1.padded;\nexports.biasFreePadded = layout_1.biasFreePadded;\nexports.getContentFittingBoxForLayout = layout_1.getContentFittingBoxForLayout;\n"],"sourceRoot":""}